/*

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2017 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2015 Mozilla Foundation

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(m,e,l){m!=Array.prototype&&m!=Object.prototype&&(m[e]=l.value)};$jscomp.getGlobal=function(m){return"undefined"!=typeof window&&window===m?m:"undefined"!=typeof global&&null!=global?global:m};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(m){return $jscomp.SYMBOL_PREFIX+(m||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var m=$jscomp.global.Symbol.iterator;m||(m=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[m]&&$jscomp.defineProperty(Array.prototype,m,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(m){var e=0;return $jscomp.iteratorPrototype(function(){return e<m.length?{done:!1,value:m[e++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(m){$jscomp.initSymbolIterator();m={next:m};m[$jscomp.global.Symbol.iterator]=function(){return this};return m};$jscomp.makeIterator=function(m){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=m[Symbol.iterator];return e?e.call(m):$jscomp.arrayIterator(m)};$jscomp.arrayFromIterator=function(m){for(var e,l=[];!(e=m.next()).done;)l.push(e.value);return l};$jscomp.arrayFromIterable=function(m){return m instanceof Array?m:$jscomp.arrayFromIterator($jscomp.makeIterator(m))};
$jscomp.owns=function(m,e){return Object.prototype.hasOwnProperty.call(m,e)};$jscomp.polyfill=function(m,e,l,h){if(e){l=$jscomp.global;m=m.split(".");for(h=0;h<m.length-1;h++){var f=m[h];f in l||(l[f]={});l=l[f]}m=m[m.length-1];h=l[m];e=e(h);e!=h&&null!=e&&$jscomp.defineProperty(l,m,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("WeakMap",function(m){function e(a){$jscomp.owns(a,h)||$jscomp.defineProperty(a,h,{value:{}})}function l(a){var b=Object[a];b&&(Object[a]=function(a){e(a);return b(a)})}if(function(){if(!m||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),d=new m([[a,2],[b,3]]);if(2!=d.get(a)||3!=d.get(b))return!1;d.delete(a);d.set(b,4);return!d.has(a)&&4==d.get(b)}catch(n){return!1}}())return m;var h="$jscomp_hidden_"+Math.random().toString().substring(2);l("freeze");l("preventExtensions");
l("seal");var f=0,c=function(a){this.id_=(f+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,b){e(a);if(!$jscomp.owns(a,h))throw Error("WeakMap key fail: "+a);a[h][this.id_]=b;return this};c.prototype.get=function(a){return $jscomp.owns(a,h)?a[h][this.id_]:void 0};c.prototype.has=function(a){return $jscomp.owns(a,h)&&$jscomp.owns(a[h],this.id_)};c.prototype.delete=
function(a){return $jscomp.owns(a,h)&&$jscomp.owns(a[h],this.id_)?delete a[h][this.id_]:!1};return c},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(m){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!m||!m.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),d=new m($jscomp.makeIterator([[a,"s"]]));if("s"!=d.get(a)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var c=d.entries(),g=c.next();if(g.done||g.value[0]!=a||"s"!=g.value[1])return!1;g=c.next();return g.done||4!=g.value[0].x||"t"!=g.value[1]||!c.next().done?!1:!0}catch(k){return!1}}())return m;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var e=new WeakMap,l=function(a){this.data_={};this.head_=c();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};l.prototype.set=function(a,d){var b=h(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=d:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:d},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};l.prototype.delete=
function(a){a=h(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};l.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=c();this.size=0};l.prototype.has=function(a){return!!h(this,a).entry};l.prototype.get=function(a){return(a=h(this,a).entry)&&a.value};l.prototype.entries=function(){return f(this,function(a){return[a.key,
a.value]})};l.prototype.keys=function(){return f(this,function(a){return a.key})};l.prototype.values=function(){return f(this,function(a){return a.value})};l.prototype.forEach=function(a,d){for(var b=this.entries(),c;!(c=b.next()).done;)c=c.value,a.call(d,c[1],c[0],this)};l.prototype[Symbol.iterator]=l.prototype.entries;var h=function(b,d){var c=d&&typeof d;"object"==c||"function"==c?e.has(d)?c=e.get(d):(c=""+ ++a,e.set(d,c)):c="p_"+d;var g=b.data_[c];if(g&&$jscomp.owns(b.data_,c))for(b=0;b<g.length;b++){var k=
g[b];if(d!==d&&k.key!==k.key||d===k.key)return{id:c,list:g,index:b,entry:k}}return{id:c,list:g,index:-1,entry:void 0}},f=function(a,d){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:d(b)};b=null}return{done:!0,value:void 0}})},c=function(){var a={};return a.previous=a.next=a.head=a},a=0;return l},"es6","es3");
$jscomp.iteratorFromArray=function(m,e){$jscomp.initSymbolIterator();m instanceof String&&(m+="");var l=0,h={next:function(){if(l<m.length){var f=l++;return{value:e(f,m[f]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};$jscomp.polyfill("Array.prototype.values",function(m){return m?m:function(){return $jscomp.iteratorFromArray(this,function(e,l){return l})}},"es6","es3");
$jscomp.polyfill("Number.isNaN",function(m){return m?m:function(e){return"number"===typeof e&&isNaN(e)}},"es6","es3");$jscomp.polyfill("Number.isFinite",function(m){return m?m:function(e){return"number"!==typeof e?!1:!isNaN(e)&&Infinity!==e&&-Infinity!==e}},"es6","es3");$jscomp.polyfill("Array.prototype.keys",function(m){return m?m:function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3");
$jscomp.polyfill("Number.isInteger",function(m){return m?m:function(e){return Number.isFinite(e)?e===Math.floor(e):!1}},"es6","es3");$jscomp.polyfill("Array.from",function(m){return m?m:function(e,l,h){$jscomp.initSymbolIterator();l=null!=l?l:function(a){return a};var f=[],c=e[Symbol.iterator];if("function"==typeof c)for(e=c.call(e);!(c=e.next()).done;)f.push(l.call(h,c.value));else{c=e.length;for(var a=0;a<c;a++)f.push(l.call(h,e[a]))}return f}},"es6","es3");
$jscomp.checkStringArgs=function(m,e,l){if(null==m)throw new TypeError("The 'this' value for String.prototype."+l+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+l+" must not be a regular expression");return m+""};
$jscomp.polyfill("String.prototype.startsWith",function(m){return m?m:function(e,l){var h=$jscomp.checkStringArgs(this,e,"startsWith");e+="";var f=h.length,c=e.length;l=Math.max(0,Math.min(l|0,h.length));for(var a=0;a<c&&l<f;)if(h[l++]!=e[a++])return!1;return a>=c}},"es6","es3");$jscomp.polyfill("Math.log2",function(m){return m?m:function(e){return Math.log(e)/Math.LN2}},"es6","es3");
$jscomp.polyfill("String.prototype.repeat",function(m){return m?m:function(e){var l=$jscomp.checkStringArgs(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var h="";e;)if(e&1&&(h+=l),e>>>=1)l+=l;return h}},"es6","es3");
$jscomp.polyfill("Set",function(m){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!m||!m.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),h=new m($jscomp.makeIterator([e]));if(!h.has(e)||1!=h.size||h.add(e)!=h||1!=h.size||h.add({x:4})!=h||2!=h.size)return!1;var f=h.entries(),c=f.next();if(c.done||c.value[0]!=e||c.value[1]!=e)return!1;c=f.next();return c.done||c.value[0]==e||4!=c.value[0].x||c.value[1]!=c.value[0]?!1:f.next().done}catch(a){return!1}}())return m;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=function(e){this.map_=new Map;if(e){e=$jscomp.makeIterator(e);for(var h;!(h=e.next()).done;)this.add(h.value)}this.size=this.map_.size};e.prototype.add=function(e){this.map_.set(e,e);this.size=this.map_.size;return this};e.prototype.delete=function(e){e=this.map_.delete(e);this.size=this.map_.size;return e};e.prototype.clear=function(){this.map_.clear();this.size=0};e.prototype.has=function(e){return this.map_.has(e)};e.prototype.entries=function(){return this.map_.entries()};
e.prototype.values=function(){return this.map_.values()};e.prototype.keys=e.prototype.values;e.prototype[Symbol.iterator]=e.prototype.values;e.prototype.forEach=function(e,h){var f=this;this.map_.forEach(function(c){return e.call(h,c,c,f)})};return e},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(m){function e(){this.batch_=null}function l(a){return a instanceof f?a:new f(function(b,d){b(a)})}if(m&&!$jscomp.FORCE_POLYFILL_PROMISE)return m;e.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};e.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var h=$jscomp.global.setTimeout;e.prototype.asyncExecuteFunction=function(a){h(a,
0)};e.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var d=a[b];delete a[b];try{d()}catch(n){this.asyncThrow_(n)}}}this.batch_=null};e.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var f=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(d){b.reject(d)}};f.prototype.createResolveAndReject_=
function(){function a(a){return function(c){d||(d=!0,a.call(b,c))}}var b=this,d=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};f.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof f)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};f.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(d){this.reject_(d);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};f.prototype.reject_=function(a){this.settle_(2,a)};f.prototype.fulfill_=function(a){this.settle_(1,a)};f.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};f.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var c=new e;f.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};f.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(n){d.reject(n)}};f.prototype.then=function(a,b){function d(a,b){return"function"==typeof a?function(b){try{c(a(b))}catch(t){g(t)}}:b}var c,g,k=new f(function(a,
b){c=a;g=b});this.callWhenSettled_(d(a,c),d(b,g));return k};f.prototype.catch=function(a){return this.then(void 0,a)};f.prototype.callWhenSettled_=function(a,b){function d(){switch(n.state_){case 1:a(n.result_);break;case 2:b(n.result_);break;default:throw Error("Unexpected state: "+n.state_);}}var n=this;null==this.onSettledCallbacks_?c.asyncExecute(d):this.onSettledCallbacks_.push(function(){c.asyncExecute(d)})};f.resolve=l;f.reject=function(a){return new f(function(b,d){d(a)})};f.race=function(a){return new f(function(b,
d){for(var c=$jscomp.makeIterator(a),g=c.next();!g.done;g=c.next())l(g.value).callWhenSettled_(b,d)})};f.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?l([]):new f(function(a,c){function g(b){return function(d){r[b]=d;p--;0==p&&a(r)}}var r=[],p=0;do r.push(void 0),p++,l(d.value).callWhenSettled_(g(r.length-1),c),d=b.next();while(!d.done)})};return f},"es6","es3");
$jscomp.polyfill("Object.assign",function(m){return m?m:function(e,l){for(var h=1;h<arguments.length;h++){var f=arguments[h];if(f)for(var c in f)$jscomp.owns(f,c)&&(e[c]=f[c])}return e}},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(m){return m?m:function(){return $jscomp.iteratorFromArray(this,function(e,l){return[e,l]})}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(m){return m?m:function(e,l,h){var f=this.length||0;0>l&&(l=Math.max(0,f+l));if(null==h||h>f)h=f;h=Number(h);0>h&&(h=Math.max(0,f+h));for(l=Number(l||0);l<h;l++)this[l]=e;return this}},"es6","es3");
$jscomp.polyfill("Array.prototype.copyWithin",function(m){return m?m:function(e,l,h){var f=this.length;e=Number(e);l=Number(l);h=Number(null!=h?h:f);if(e<l)for(h=Math.min(h,f);l<h;)l in this?this[e++]=this[l++]:(delete this[e++],l++);else for(h=Math.min(h,f+l-e),e+=h-l;h>l;)--h in this?this[--e]=this[h]:delete this[e];return this}},"es6","es3");
(function(m){function e(h){if(l[h])return l[h].exports;var f=l[h]={i:h,l:!1,exports:{}};m[h].call(f.exports,f,f.exports,e);f.l=!0;return f.exports}var l={};e.m=m;e.c=l;e.d=function(h,f,c){e.o(h,f)||Object.defineProperty(h,f,{configurable:!1,enumerable:!0,get:c})};e.n=function(h){var f=h&&h.__esModule?function(){return h["default"]}:function(){return h};e.d(f,"a",f);return f};e.o=function(h,f){return Object.prototype.hasOwnProperty.call(h,f)};e.p="";return e(e.s=46)})([function(m,e,l){function h(a,
b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){r.set(a,b)}function b(a,b,d){d=void 0===d?{}:d;null!=b&&a.initializeSharedObject(b,d.id)}e.f=a;e.e=function(b,c){a(b,function(a){var b=this,g=a.id,k=new d.b;a=c.call(this,a,k);this.set(g,{promise:a,cancellationToken:k});a.then(function(a){var d=a.value;a=a.transfers;b.delete(g);b.invoke("rpc.promise.response",{id:g,value:d},a)},function(a){b.delete(g);b.invoke("rpc.promise.response",{id:g,error:a.message,errorName:a.name})})})};l.d(e,"a",function(){return t});
l.d(e,"b",function(){return v});e.d=b;l.d(e,"c",function(){return z});e.h=function(a){return function(b){b.prototype.RPC_TYPE_ID=a}};e.g=function(a){return function(b){if(void 0!==a)b.prototype.RPC_TYPE_ID=a;else if(a=b.prototype.RPC_TYPE_ID,void 0===a)throw Error("RPC_TYPE_ID should have already been defined");u.set(a,b)}};var d=l(7);m=l(17);var n=function L(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return L(a,
b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},g=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),k=!("undefined"!==typeof Window&&self instanceof Window),r=new Map,p=function(a){function b(a,d){h(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,d));
c.name=a;c.message=d;return c}c(b,a);return b}(Error);a("rpc.promise.cancel",function(a){this.get(a.id).cancellationToken.cancel()});a("rpc.promise.response",function(a){var b=a.id,c=this.get(b),g=c.resolve;c=c.reject;this.delete(b);a.hasOwnProperty("value")?g(a.value):a.errorName===d.a.name?c(d.a):c(new p(a.errorName,a.error))});var y=k?-1:0,t=function(){function a(b){var d=this;h(this,a);this.target=b;this.objects=new Map;this.nextId=y;b.onmessage=function(a){a=a.data;r.get(a.functionName).call(d,
a)}}g(a,[{key:"set",value:function(a,b){this.objects.set(a,b)}},{key:"delete",value:function(a){this.objects.delete(a)}},{key:"get",value:function(a){return this.objects.get(a)}},{key:"getRef",value:function(a){var b=this.get(a.id);b.referencedGeneration=a.gen;b.addRef();return b}},{key:"invoke",value:function(a,b,d){b.functionName=a;this.target.postMessage(b,d)}},{key:"promiseInvoke",value:function(a,b,c,g){var k=this;c=void 0===c?d.e:c;return Object(d.d)(c,function(d,c,w){var q=b.id=k.newId();k.set(q,
{resolve:d,reject:c});k.invoke(a,b,g);w.add(function(){k.invoke("rpc.promise.cancel",{id:q})})})}},{key:"newId",value:function(){return k?this.nextId--:this.nextId++}},{key:"numObjects",get:function(){return this.objects.size}}]);return a}(),v=function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.rpc=null;a.rpcId=null;return a}c(b,a);g(b,[{key:"initializeSharedObject",value:function(a,b){b=void 0===b?a.newId():b;this.rpc=a;this.rpcId=b;this.isOwner=
!1;a.set(b,this)}},{key:"initializeCounterpart",value:function(a,b){b=void 0===b?{}:b;this.initializeSharedObject(a);this.referencedGeneration=this.unreferencedGeneration=0;this.isOwner=!0;b.id=this.rpcId;b.type=this.RPC_TYPE_ID;a.invoke("SharedObject.new",b)}},{key:"dispose",value:function(){n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this)}},{key:"addCounterpartRef",value:function(){return{id:this.rpcId,gen:++this.referencedGeneration}}},{key:"refCountReachedZero",
value:function(){!0===this.isOwner?this.referencedGeneration===this.unreferencedGeneration&&this.ownerDispose():!1===this.isOwner?this.rpc.invoke("SharedObject.refCountReachedZero",{id:this.rpcId,gen:this.referencedGeneration}):n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"refCountReachedZero",this).call(this)}},{key:"ownerDispose",value:function(){var a=this.rpc,d=this.rpcId;n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"refCountReachedZero",this).call(this);a.delete(d);
a.invoke("SharedObject.dispose",{id:d})}},{key:"counterpartRefCountReachedZero",value:function(a){this.unreferencedGeneration=a;0===this.refCount&&a===this.referencedGeneration&&this.ownerDispose()}}]);return b}(m.a),z=function(a){function d(a,c){c=void 0===c?{}:c;h(this,d);var g=f(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));b(g,a,c);return g}c(d,a);return d}(v);a("SharedObject.dispose",function(a){a=this.get(a.id);if(0!==a.refCount)throw Error("Attempted to dispose object with non-zero reference count.");
a.disposed();this.delete(a.rpcId);a.rpcId=null;a.rpc=null});a("SharedObject.refCountReachedZero",function(a){this.get(a.id).counterpartRefCountReachedZero(a.gen)});var u=new Map;a("SharedObject.new",function(a){--(new (u.get(a.type))(this,a)).refCount})},function(m,e,l){function h(a,d){var b=Math.abs(a[d]),c=Math.abs(a[d+1]),k=Math.abs(a[d+2]),r=Math.max(b,c,k);1E-4>b/r&&(a[d]=0);1E-4>c/r&&(a[d+1]=0);1E-4>k/r&&(a[d+2]=0)}function f(b){b=b.and(a[0]);for(var d=1;d<a.length;++d)b=b.xor(b.rshift(Math.pow(2,
d))).and(a[d]);return b}e.h=function(a){return a[0]*a[1]*a[2]};e.m=function(a){return a[0]+","+a[1]+","+a[2]};e.j=function(a){h(a,0);h(a,4);h(a,8)};e.k=function(a,d,c){var b=d[0],k=d[1];d=d[2];a[0]=c[0]*b+c[4]*k+c[8]*d;a[1]=c[1]*b+c[5]*k+c[9]*d;a[2]=c[2]*b+c[6]*k+c[10]*d;return a};e.b=function(a,d){var b=d[0],c=d[1],k=d[2],r=d[4],p=d[5],y=d[6],t=d[8],f=d[9];d=d[10];a[0]=Math.sqrt(b*b+c*c+k*k);a[1]=Math.sqrt(r*r+p*p+y*y);a[2]=Math.sqrt(t*t+f*f+d*d);return a};e.a=function(a){if(a.high)throw Error("Fragment ids >= 2^32 not supported yet");
var b=f(a.rshift(0)),n=f(a.rshift(1));a=f(a.rshift(2));return c.c.clone([b.low,n.low,a.low])};var c=l(31);m=l(6);l.d(e,"g",function(){return c.a});l.d(e,"i",function(){return c.b});l.d(e,"l",function(){return c.c});l=c.a.create();e.c=l;l=[c.c.fromValues(1,0,0),c.c.fromValues(0,1,0),c.c.fromValues(0,0,1)];e.d=l;l=c.c.fromValues(0,0,0);e.f=l;c.c.fromValues(1,1,1);l=c.c.fromValues(Infinity,Infinity,Infinity);e.e=l;c.b.create();var a=[new m.a(1227133513,306783378),new m.a(3272356035,818089008),new m.a(251719695,
4027515120),new m.a(4278190335,16711680),new m.a(65535,16711680),new m.a(2097151,0)]},function(m,e,l){function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function a(a){var b=a.downloadCancellationToken=new g.b;a.source.download(a,b).then(function(){a.downloadCancellationToken===b&&(a.downloadCancellationToken=void 0,a.downloadSucceeded())},function(d){a.downloadCancellationToken===b&&(a.downloadCancellationToken=void 0,a.downloadFailed(d),console.log("Error retrieving chunk "+a+": "+d))})}
function b(a){return new w(new t.a(a),r.a)}function d(a,b,d,c,g,k){for(;1>b.availableItems||b.availableSize<a;){var q=g.next().value;if(void 0===q)return!1;var r=q.priorityTier;if(r<d||r===d&&q.priority>=c)return!1;k(q)}return!0}Object.defineProperty(e,"__esModule",{value:!0});l.d(e,"Chunk",function(){return L});l.d(e,"ChunkSourceBase",function(){return E});l.d(e,"ChunkSource",function(){return G});l.d(e,"ChunkQueueManager",function(){return K});l.d(e,"ChunkManager",function(){return q});e.WithParameters=
function(a,b){a=function(a){function b(a){for(var d=[],g=0;g<arguments.length;++g)d[g-0]=arguments[g];c(this,b);var k;g=h(this,(k=b.__proto__||Object.getPrototypeOf(b)).call.apply(k,[].concat([this],$jscomp.arrayFromIterable(d))));g.parameters=d[1].parameters;return g}f(b,a);return b}(a);return a=A([Object(z.h)(b.RPC_ID)],a)};e.withChunkManager=function(a){return function(a){function b(a){for(var d=[],g=0;g<arguments.length;++g)d[g-0]=arguments[g];c(this,b);var k;g=h(this,(k=b.__proto__||Object.getPrototypeOf(b)).call.apply(k,
[].concat([this],$jscomp.arrayFromIterable(d))));g.chunkManager=d[0].get(d[1].chunkManager);return g}f(b,a);return b}(a)};var n=l(8),g=l(7);m=l(17);var k=l(48),r=l(49),p=l(30),y=l(55),t=l(56),v=l(14),z=l(0),u=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),A=this&&this.__decorate||function(a,b,d,c){var g=
arguments.length,k=3>g?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,q;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=Reflect.decorate(a,b,d,c);else for(var r=a.length-1;0<=r;r--)if(q=a[r])k=(3>g?q(k):3<g?q(b,d,k):q(b,d))||k;return 3<g&&k&&Object.defineProperty(b,d,k),k},L=function(){function a(){c(this,a);this.key=this.source=this.prev1=this.next1=this.child1=this.prev0=this.next0=this.child0=null;this.state=n.e.NEW;this.error=null;this.newPriority=this.priority=0;this.newPriorityTier=
this.priorityTier=n.d.RECENT;this.backendOnly=!1;this.downloadCancellationToken=void 0}u(a,[{key:"initialize",value:function(a){this.key=a;this.state=n.e.NEW;this.priority=Number.NEGATIVE_INFINITY;this.priorityTier=n.d.RECENT;this.newPriority=Number.NEGATIVE_INFINITY;this.newPriorityTier=n.d.RECENT;this.error=null}},{key:"updatePriorityProperties",value:function(){this.priorityTier=this.newPriorityTier;this.priority=this.newPriority;this.newPriorityTier=n.d.RECENT;this.newPriority=Number.NEGATIVE_INFINITY}},
{key:"dispose",value:function(){this.error=this.source=null}},{key:"downloadFailed",value:function(a){this.error=a;this.queueManager.updateChunkState(this,n.e.FAILED)}},{key:"downloadSucceeded",value:function(){this.queueManager.updateChunkState(this,n.e.SYSTEM_MEMORY_WORKER)}},{key:"freeSystemMemory",value:function(){}},{key:"serialize",value:function(a,b){a.id=this.key;a.source=this.source.rpcId;a["new"]=!0}},{key:"toString",value:function(){return this.key}},{key:"chunkManager",get:function(){return this.source.chunkManager}},
{key:"queueManager",get:function(){return this.source.chunkManager.queueManager}}],[{key:"priorityLess",value:function(a,b){return a.priority<b.priority}},{key:"priorityGreater",value:function(a,b){return a.priority>b.priority}}]);return a}(),E=function(a){function b(a){c(this,b);var d=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));d.chunkManager=a;d.chunks=new Map;d.freeChunks=[];return d}f(b,a);u(b,[{key:"getNewChunk_",value:function(a){var b=this.freeChunks,d=b.length;if(0<d)return a=
b[d-1],b.length=d-1,a.source=this,a;b=new a;b.source=this;return b}},{key:"addChunk",value:function(a){var b=this.chunks;0===b.size&&this.addRef();b.set(a.key,a)}},{key:"removeChunk",value:function(a){var b=this.chunks,d=this.freeChunks;b.delete(a.key);a.dispose();d[d.length]=a;0===b.size&&this.dispose()}}]);return b}(z.b),G=function(a){function b(a,d){c(this,b);var g=a.get(d.chunkManager);g=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,g));Object(z.d)(g,a,d);return g}f(b,a);return b}(E),
w=function(){function a(b,d){c(this,a);this.heapOperations=b;this.linkedListOperations=d;this.heapRoots=[null,null];this.recentHead=new L;d.initializeHead(this.recentHead)}u(a,[{key:"add",value:function(a){var b=a.priorityTier;if(b===n.d.RECENT)this.linkedListOperations.insertAfter(this.recentHead,a);else{var d=this.heapRoots;d[b]=this.heapOperations.meld(d[b],a)}}},{key:"candidates",value:function(){function a(a,B){for(;;)switch(b){case 0:if(z.heapOperations.compare!==L.priorityLess){b=1;break}u=
z;h=u.linkedListOperations;x=u.recentHead;case 3:v=h.back(x);if(null!=v){b=5;break}b=4;break;case 5:return b=7,{value:v,done:!1};case 7:if(void 0===B){b=8;break}b=-1;throw B;case 8:case 6:b=3;break;case 4:f=z,y=f.heapRoots,t=n.d.LAST_ORDERED_TIER;case 9:if(!(t>=n.d.FIRST_ORDERED_TIER)){b=11;break}case 12:w=y[t];if(null!=w){b=14;break}b=13;break;case 14:return b=16,{value:w,done:!1};case 16:if(void 0===B){b=17;break}b=-1;throw B;case 17:case 15:b=12;break;case 13:case 10:--t;b=9;break;case 11:b=2;
break;case 1:p=z.heapRoots,r=n.d.FIRST_ORDERED_TIER;case 18:if(!(r<=n.d.LAST_ORDERED_TIER)){b=20;break}case 21:q=p[r];if(null!=q){b=23;break}b=22;break;case 23:return b=25,{value:q,done:!1};case 25:if(void 0===B){b=26;break}b=-1;throw B;case 26:case 24:b=21;break;case 22:case 19:++r;b=18;break;case 20:k=z,g=k.linkedListOperations,c=k.recentHead;case 27:d=g.front(c);if(null!=d){b=29;break}b=28;break;case 29:return b=31,{value:d,done:!1};case 31:if(void 0===B){b=32;break}b=-1;throw B;case 32:case 30:b=
27;break;case 28:case 2:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,c,g,k,q,r,p,w,t,y,f,v,x,h,u,z=this,e={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();e[Symbol.iterator]=function(){return this};return e}},{key:"delete",value:function(a){var b=a.priorityTier;if(b===n.d.RECENT)this.linkedListOperations.pop(a);else{var d=this.heapRoots;d[b]=this.heapOperations.remove(d[b],a)}}}]);
return a}(),x=function(a){function b(a,d){c(this,b);var g=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));g.itemLimit=a;g.sizeLimit=d;g.currentSize=0;g.currentItems=0;g.capacityChanged=new v.a;g.registerDisposer(a.changed.add(g.capacityChanged.dispatch));g.registerDisposer(d.changed.add(g.capacityChanged.dispatch));return g}f(b,a);u(b,[{key:"adjust",value:function(a,b){this.currentItems-=a;this.currentSize-=b}},{key:"availableSize",get:function(){return this.sizeLimit.value-this.currentSize}},
{key:"availableItems",get:function(){return this.itemLimit.value-this.currentItems}}]);return b}(m.a),K=function(g){function q(a,d){c(this,q);var g=h(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,a,d));g.queuedPromotionQueue=b(L.priorityGreater);g.downloadEvictionQueue=b(L.priorityLess);g.systemMemoryEvictionQueue=new w(new y.a(L.priorityLess),k.a);g.gpuMemoryPromotionQueue=b(L.priorityGreater);g.gpuMemoryEvictionQueue=b(L.priorityLess);g.updatePending=null;g.numQueued=0;g.numFailed=0;var r=
function(b){b=g.registerDisposer(new x(a.get(b.itemLimit),a.get(b.sizeLimit)));b.capacityChanged.add(function(){return g.scheduleUpdate()});return b};g.gpuMemoryCapacity=r(d.gpuMemoryCapacity);g.systemMemoryCapacity=r(d.systemMemoryCapacity);g.downloadCapacity=r(d.downloadCapacity);return g}f(q,g);u(q,[{key:"scheduleUpdate",value:function(){null===this.updatePending&&(this.updatePending=setTimeout(this.process.bind(this),0))}},{key:"chunkQueuesForChunk",value:function(a){function b(b,q){for(;;)switch(d){case 0:g=
!1;c=a.state;if(!g&&c!==n.e.QUEUED){d=2;break}g=!0;d=3;return{value:k.queuedPromotionQueue,done:!1};case 3:if(void 0===q){d=4;break}d=-1;throw q;case 4:d=1;break;case 2:if(!g&&c!==n.e.DOWNLOADING){d=5;break}g=!0;d=6;return{value:k.downloadEvictionQueue,done:!1};case 6:if(void 0===q){d=7;break}d=-1;throw q;case 7:return d=8,{value:k.systemMemoryEvictionQueue,done:!1};case 8:if(void 0===q){d=9;break}d=-1;throw q;case 9:d=1;break;case 5:if(g||c===n.e.SYSTEM_MEMORY_WORKER)g=!0;if(!g&&c!==n.e.SYSTEM_MEMORY){d=
10;break}g=!0;d=11;return{value:k.systemMemoryEvictionQueue,done:!1};case 11:if(void 0===q){d=12;break}d=-1;throw q;case 12:if(a.priorityTier===n.d.RECENT||a.backendOnly){d=13;break}d=14;return{value:k.gpuMemoryPromotionQueue,done:!1};case 14:if(void 0===q){d=15;break}d=-1;throw q;case 15:case 13:d=1;break;case 10:if(!g&&c!==n.e.GPU_MEMORY){d=16;break}g=!0;d=17;return{value:k.systemMemoryEvictionQueue,done:!1};case 17:if(void 0===q){d=18;break}d=-1;throw q;case 18:return d=19,{value:k.gpuMemoryEvictionQueue,
done:!1};case 19:if(void 0===q){d=20;break}d=-1;throw q;case 20:d=1;break;case 16:case 1:d=-1;default:return{value:void 0,done:!0}}}var d=0,c,g,k=this,q={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();q[Symbol.iterator]=function(){return this};return q}},{key:"adjustCapacitiesForChunk",value:function(a,b){b=b?-1:1;switch(a.state){case n.e.FAILED:this.numFailed-=b;break;case n.e.QUEUED:this.numQueued-=
b;break;case n.e.DOWNLOADING:this.downloadCapacity.adjust(b,0);this.systemMemoryCapacity.adjust(b,0);break;case n.e.SYSTEM_MEMORY:case n.e.SYSTEM_MEMORY_WORKER:this.systemMemoryCapacity.adjust(b,b*a.systemMemoryBytes);break;case n.e.GPU_MEMORY:this.systemMemoryCapacity.adjust(b,b*a.systemMemoryBytes),this.gpuMemoryCapacity.adjust(b,b*a.gpuMemoryBytes)}}},{key:"removeChunkFromQueues_",value:function(a){for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),d=b.next();!d.done;d=b.next())d.value.delete(a)}},
{key:"addChunkToQueues_",value:function(a){if(a.state===n.e.QUEUED&&a.priorityTier===n.d.RECENT)return a.source.removeChunk(a),this.adjustCapacitiesForChunk(a,!1),!1;for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),d=b.next();!d.done;d=b.next())d.value.add(a);return!0}},{key:"performChunkPriorityUpdate",value:function(a){a.priorityTier===a.newPriorityTier&&a.priority===a.newPriority?(a.newPriorityTier=n.d.RECENT,a.newPriority=Number.NEGATIVE_INFINITY):(this.removeChunkFromQueues_(a),a.updatePriorityProperties(),
a.state===n.e.NEW&&(a.state=n.e.QUEUED,this.adjustCapacitiesForChunk(a,!0)),this.addChunkToQueues_(a))}},{key:"updateChunkState",value:function(a,b){b!==a.state&&(this.adjustCapacitiesForChunk(a,!1),this.removeChunkFromQueues_(a),a.state=b,this.adjustCapacitiesForChunk(a,!0),this.addChunkToQueues_(a),this.scheduleUpdate())}},{key:"processGPUPromotions_",value:function(){function a(a){b.freeChunkGPUMemory(a);a.source.chunkManager.queueManager.updateChunkState(a,n.e.SYSTEM_MEMORY)}for(var b=this,c=
this.gpuMemoryPromotionQueue.candidates(),g=this.gpuMemoryEvictionQueue.candidates(),q=this.gpuMemoryCapacity;;){var k=c.next().value;if(void 0===k)break;else{if(!d(k.gpuMemoryBytes,q,k.priorityTier,k.priority,g,a))break;this.copyChunkToGPU(k);this.updateChunkState(k,n.e.GPU_MEMORY)}}}},{key:"freeChunkGPUMemory",value:function(a){this.rpc.invoke("Chunk.update",{id:a.key,state:n.e.SYSTEM_MEMORY,source:a.source.rpcId})}},{key:"freeChunkSystemMemory",value:function(a){a.state===n.e.SYSTEM_MEMORY_WORKER?
a.freeSystemMemory():this.rpc.invoke("Chunk.update",{id:a.key,state:n.e.EXPIRED,source:a.source.rpcId})}},{key:"copyChunkToGPU",value:function(a){var b=this.rpc;if(a.state===n.e.SYSTEM_MEMORY)b.invoke("Chunk.update",{id:a.key,source:a.source.rpcId,state:n.e.GPU_MEMORY});else{var d={},c=[];a.serialize(d,c);d.state=n.e.GPU_MEMORY;b.invoke("Chunk.update",d,c)}}},{key:"processQueuePromotions_",value:function(){for(var b=this,c=this,g=function(a){switch(a.state){case n.e.DOWNLOADING:var d=a.downloadCancellationToken;
a.downloadCancellationToken=void 0;d.cancel();break;case n.e.GPU_MEMORY:c.freeChunkGPUMemory(a);case n.e.SYSTEM_MEMORY_WORKER:case n.e.SYSTEM_MEMORY:c.freeChunkSystemMemory(a)}b.updateChunkState(a,n.e.QUEUED)},k=this.queuedPromotionQueue.candidates(),q=this.downloadEvictionQueue.candidates(),r=this.systemMemoryEvictionQueue.candidates(),p=this.downloadCapacity,t=this.systemMemoryCapacity;;){var w=k.next();if(w.done)break;w=w.value;var y=w.priorityTier,f=w.priority;if(!d(0,p,y,f,q,g))break;if(!d(0,
t,y,f,r,g))break;this.updateChunkState(w,n.e.DOWNLOADING);a(w)}}},{key:"process",value:function(){this.updatePending&&(this.updatePending=null,this.processGPUPromotions_(),this.processQueuePromotions_(),this.logStatistics())}},{key:"logStatistics",value:function(){}},{key:"invalidateSourceCache",value:function(a){for(var b=$jscomp.makeIterator(a.chunks.values()),d=b.next();!d.done;d=b.next()){d=d.value;switch(d.state){case n.e.DOWNLOADING:var c=d.downloadCancellationToken;d.downloadCancellationToken=
void 0;c.cancel();break;case n.e.SYSTEM_MEMORY_WORKER:d.freeSystemMemory()}this.updateChunkState(d,n.e.QUEUED)}this.rpc.invoke("Chunk.update",{source:a.rpcId});this.scheduleUpdate()}}]);return q}(z.c);K=A([Object(z.g)(n.b)],K);var q=function(a){function b(a,d){c(this,b);var g=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));g.existingTierChunks=[];g.newTierChunks=[];g.updatePending=null;g.recomputeChunkPriorities=new v.a;g.recomputeChunkPrioritiesLate=new v.a;g.memoize=new p.a;g.queueManager=
a.get(d.chunkQueueManager).addRef();for(a=n.d.FIRST_TIER;a<=n.d.LAST_TIER;++a)a!==n.d.RECENT&&(g.existingTierChunks[a]=[]);return g}f(b,a);u(b,[{key:"scheduleUpdateChunkPriorities",value:function(){null===this.updatePending&&(this.updatePending=setTimeout(this.recomputeChunkPriorities_.bind(this),0))}},{key:"recomputeChunkPriorities_",value:function(){this.updatePending=null;this.recomputeChunkPriorities.dispatch();this.recomputeChunkPrioritiesLate.dispatch();this.updateQueueState([n.d.VISIBLE])}},
{key:"requestChunk",value:function(a,b,d){a.newPriorityTier===n.d.RECENT&&this.newTierChunks.push(a);a.newPriorityTier=b;a.newPriority=d}},{key:"updateQueueState",value:function(a){var b=this.existingTierChunks,d=this.queueManager;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){var g=b[c.value],k=$jscomp.makeIterator(g);for(c=k.next();!c.done;c=k.next())c=c.value,c.newPriorityTier===n.d.RECENT&&d.performChunkPriorityUpdate(c);g.length=0}a=this.newTierChunks;g=$jscomp.makeIterator(a);
for(c=g.next();!c.done;c=g.next())c=c.value,d.performChunkPriorityUpdate(c),b[c.priorityTier].push(c);a.length=0;this.queueManager.scheduleUpdate()}}]);return b}(z.c);q=A([Object(z.g)(n.a)],q);Object(z.f)(n.c,function(a){a=this.get(a.id);a.chunkManager.queueManager.invalidateSourceCache(a)})},function(m,e,l){l.d(e,"a",function(){return h});e.b=1E-6;var h="undefined"!==typeof Float32Array?Float32Array:Array;e.c=Math.random},function(m,e,l){m="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&
"undefined"!==typeof Int32Array;e.assign=function(c){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var b=a.shift();if(b){if("object"!==typeof b)throw new TypeError(b+"must be non-object");for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=b[d])}}return c};e.shrinkBuf=function(c,a){if(c.length===a)return c;if(c.subarray)return c.subarray(0,a);c.length=a;return c};var h={arraySet:function(c,a,b,d,n){if(a.subarray&&c.subarray)c.set(a.subarray(b,b+d),n);else for(var g=0;g<
d;g++)c[n+g]=a[b+g]},flattenChunks:function(c){var a,b;var d=b=0;for(a=c.length;d<a;d++)b+=c[d].length;var n=new Uint8Array(b);d=b=0;for(a=c.length;d<a;d++){var g=c[d];n.set(g,b);b+=g.length}return n}},f={arraySet:function(c,a,b,d,n){for(var g=0;g<d;g++)c[n+g]=a[b+g]},flattenChunks:function(c){return[].concat.apply([],c)}};e.setTyped=function(c){c?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,h)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,f))};e.setTyped(m)},function(m,
e,l){function h(a){if("object"===typeof a){if(null===a)return"null";if(Array.isArray(a)){var b="[",d=a.length,c=0;if(c<d)for(b+=h(a[c]);++c<d;)b+=",",b+=h(a[c]);return b+"]"}b="{";d=Object.keys(a).sort();c=0;var r=d.length;if(c<r){var p=d[c];b+=JSON.stringify(p);for(b=b+":"+h(a[p]);++c<r;)b+=",",p=d[c],b+=JSON.stringify(p),b+=":",b+=h(a[p])}return b+"}"}return JSON.stringify(a)}function f(d){for(var c="";0<d.length;){var g=d.match(a);if(null===g){var k=d;g=d=""}else{k=d.substr(0,g.index);d=d.substr(g.index+
g[0].length);var r=g[1];if(void 0!==r){if(g=r,2<=g.length&&"'"===g.charAt(0)&&"'"===g.charAt(g.length-1)){g=g.substr(1,g.length-2);for(r='"';0<g.length;){var p=g.match(b);if(null===p){r+=g;break}r+=p[1];r+="\\";r+='"';g=g.substr(p.index+p[0].length)}g=r+'"'}}else g=g[2]}c+=k.replace(/\(/g,"[").replace(/\)/g,"]").replace("True","true").replace("False","false").replace(/,\s*([\}\]])/g,"$1");c+=g}return c}e.c=h;e.b=function(a){return JSON.parse(f(a))};e.a=function(a,b){if(!Array.isArray(a))throw Error("Expected array, but received: "+
JSON.stringify(a)+".");return a.map(b)};e.e=function(a){if("object"!==typeof a||null==a||Array.isArray(a))throw Error("Expected JSON object, but received: "+JSON.stringify(a)+".");return a};e.g=function(a){if("string"!==typeof a)throw Error("Expected string, but received: "+JSON.stringify(a)+".");return a};e.f=function(a,b,c){a=a.hasOwnProperty(b)?a[b]:void 0;try{return c(a)}catch(k){throw Error("Error parsing "+JSON.stringify(b)+" property: "+k.message);}};e.d=function(a){var b=c.l.create(),d=b.length;
if(!Array.isArray(a)||a.length!==d)throw Error("Expected length "+d+" array, but received: "+JSON.stringify(a)+".");for(var k=0;k<d;++k){var r=b,p=k;var y=a[k];b:{var t=typeof y;if("number"===t||"string"===t)if(t=parseFloat(""+y),!Number.isNaN(t)){y=t;break b}throw Error("Expected floating-point number, but received: "+JSON.stringify(y)+".");}if(!Number.isFinite(y))throw Error("Expected finite floating-point number, but received: "+y+".");r[p]=y}return b};e.h=function(a){if(!Array.isArray(a))throw Error("Expected array, received: "+
JSON.stringify(a)+".");for(var b=$jscomp.makeIterator(a),d=b.next();!d.done;d=b.next())if(d=d.value,"string"!==typeof d)throw Error("Expected string, received: "+JSON.stringify(d)+".");return a};var c=l(1),a=new RegExp(/('(?:[^'\\]|(?:\\.))*')/.source+"|"+/("(?:[^'\\]|(?:\\.))*")/.source),b=/^((?:[^"'\\]|(?:\\.))*)"/},function(m,e,l){l.d(e,"a",function(){return n});var h=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&
(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),f=new Uint32Array(2),c=[];for(m=2;36>=m;++m){e=Math.floor(32/Math.log2(m));l=Math.pow(m,e);var a=Math.floor(e/2),b=Math.pow(m,a);a=Math.pow(m,e-a);var d="^[0-"+String.fromCharCode(48+Math.min(9,m-1));10<m&&(d+="a-"+String.fromCharCode(97+m-11),d+="A-"+String.fromCharCode(65+m-11));d+="]{1,"+Math.ceil(64/Math.log2(m))+"}$";c[m]={lowDigits:e,lowBase:l,lowBase1:b,lowBase2:a,pattern:new RegExp(d)}}var n=
function(){function a(b,d){b=void 0===b?0:b;d=void 0===d?0:d;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.low=b;this.high=d}h(a,[{key:"clone",value:function(){return new a(this.low,this.high)}},{key:"assign",value:function(a){this.low=a.low;this.high=a.high}},{key:"toString",value:function(a){a=void 0===a?10:a;var b=this.low,d=this.high;if(0===d)return b.toString(a);d*=4294967296;var g=c[a],k=g.lowBase;g=g.lowDigits;var n=d%k;d=Math.floor(d/k);b+=n;d+=Math.floor(b/
k);b=(b%k).toString(a);return d.toString(a)+"0".repeat(g-b.length)+b}},{key:"tryParseString",value:function(a,b){b=void 0===b?10:b;var d=c[b],g=d.lowDigits,k=d.lowBase,r=d.lowBase1,n=d.lowBase2;if(!d.pattern.test(a))return!1;if(a.length<=g)return this.low=parseInt(a,b),this.high=0,!0;g=a.length-g;d=parseInt(a.substr(g),b);a=parseInt(a.substr(0,g),b);k=Math.floor(a*k/4294967296);r=d+a%4294967296*r%4294967296*n%4294967296;4294967296<r&&(++k,r-=4294967296);if(r>>>0!==r||k>>>0!==k)return!1;this.low=r;
this.high=k;return!0}},{key:"parseString",value:function(a,b){if(!this.tryParseString(a,void 0===b?10:b))throw Error("Failed to parse string as uint64 value: "+JSON.stringify(a)+".");return this}},{key:"valid",value:function(){var a=this.low,b=this.high;return a>>>0===a&&b>>>0===b}},{key:"toJSON",value:function(){return this.toString()}},{key:"lshift",value:function(b){b&=63;if(0==b)return this.clone();var d=this.low,c=this.high;return 32>b?new a(d<<b,c<<b|d>>>32-b):new a(0,d<<b-32)}},{key:"rshift",
value:function(b){b&=63;if(0==b)return this.clone();var d=this.low,c=this.high;return 32>b?new a(d>>>b|c<<32-b,c>>b):new a(c>>b-32,0<=c?0:-1)}},{key:"or",value:function(b){return new a(this.low|b.low,this.high|b.high)}},{key:"xor",value:function(b){return new a(this.low^b.low,this.high^b.high)}},{key:"and",value:function(b){return new a(this.low&b.low,this.high&b.high)}}],[{key:"less",value:function(a,b){return a.high<b.high||a.high===b.high&&a.low<b.low}},{key:"compare",value:function(a,b){return a.high-
b.high||a.low-b.low}},{key:"equal",value:function(a,b){return a.low===b.low&&a.high===b.high}},{key:"min",value:function(b,d){return a.less(b,d)?b:d}},{key:"random",value:function(){crypto.getRandomValues(f);return new a(f[0],f[1])}},{key:"parseString",value:function(b,d){d=void 0===d?10:d;return(new a).parseString(b,d)}},{key:"encodeUint32Array",value:function(a){for(var b=new Uint32Array(2*a.length),d=0;d<a.length;d++){var c=a[d];b[2*d]=c.low;b[2*d+1]=c.high}return b}},{key:"decodeUint32Array",
value:function(b){b instanceof ArrayBuffer&&(b=new Uint32Array(b));if(1===b.length%2)throw Error("Decode error. Length of input array was not even: "+b.length);for(var d=Array(b.length/2),c=0;c<d.length;c++)d[c]=new a(b[2*c],b[2*c+1]);return d}}]);return a}();n.ZERO=new n(0,0)},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}l.d(e,"b",function(){return d});l.d(e,"c",function(){return n});e.d=function(a,c){return new Promise(function(g,k){if(a===b)c(g,k,b);else{var p=new d,t=a.add(function(){p.cancel()});c(function(a){t();g(a)},function(a){t();k(a)},p)}})};var c=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];
c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();m=new (function(){function a(){f(this,a);this.name="CancellationError";this.message="CANCELED"}c(a,[{key:"toString",value:function(){return"CANCELED"}}]);return a}());e.a=m;var a=function(){},b={isCanceled:!1,add:function(){return a},remove:a};e.e=b;var d=function(){function b(){f(this,b)}c(b,[{key:"cancel",value:function(){var a=
this.handlers;if(null!==a&&(this.handlers=null,void 0!==a)){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,b()}}},{key:"add",value:function(b){var d=this,c=this.handlers;if(null===c)return b(),a;void 0===c&&(c=this.handlers=new Set);c.add(b);return function(){d.remove(b)}}},{key:"remove",value:function(a){var b=this.handlers;null!=b&&b.delete(a)}},{key:"isCanceled",get:function(){return null===this.handlers}}]);return b}(),n=function(a){function d(){f(this,d);var a=(d.__proto__||
Object.getPrototypeOf(d)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.consumers=new Set;return a}h(d,a);c(d,[{key:"addConsumer",value:function(a){var d=this;a=void 0===a?b:a;var c=this.consumers;c.has(a)||a.isCanceled||(c.add(a),a.add(function(){c.delete(a);0===c.size&&d.cancel()}))}}]);return d}(d)},function(m,e,l){l.d(e,"e",function(){return h});l.d(e,"d",function(){return f});
var h;(function(c){c[c.GPU_MEMORY=0]="GPU_MEMORY";c[c.SYSTEM_MEMORY=1]="SYSTEM_MEMORY";c[c.SYSTEM_MEMORY_WORKER=2]="SYSTEM_MEMORY_WORKER";c[c.DOWNLOADING=3]="DOWNLOADING";c[c.QUEUED=4]="QUEUED";c[c.NEW=5]="NEW";c[c.FAILED=6]="FAILED";c[c.EXPIRED=7]="EXPIRED"})(h||(h={}));var f;(function(c){c[c.FIRST_TIER=0]="FIRST_TIER";c[c.FIRST_ORDERED_TIER=0]="FIRST_ORDERED_TIER";c[c.VISIBLE=0]="VISIBLE";c[c.PREFETCH=1]="PREFETCH";c[c.LAST_ORDERED_TIER=1]="LAST_ORDERED_TIER";c[c.RECENT=2]="RECENT";c[c.LAST_TIER=
2]="LAST_TIER"})(f||(f={}));e.f=1E13;e.b="ChunkQueueManager";e.a="ChunkManager";e.c="ChunkSource.invalidate"},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}function c(a,b,d){for(var c=0;3>c;++c)a[c]=Number.POSITIVE_INFINITY,b[c]=Number.NEGATIVE_INFINITY;d=$jscomp.makeIterator(d);for(c=d.next();!c.done;c=d.next()){var g=c.value.spec;c=g.lowerChunkBound;g=g.upperChunkBound;for(var q=0;3>q;++q)a[q]=Math.min(a[q],c[q]),b[q]=Math.max(b[q],g[q])}}function a(a,b,d,c){for(var g=v.FULLY_INSIDE,q=0;3>q;++q){var w=a[q];var k=b[q],t=d[q],p=c[q];w=w>=p||k<=t?v.FULLY_OUTSIDE:w>=t&&k<=p?v.FULLY_INSIDE:v.PARTIALLY_INSIDE;switch(w){case v.FULLY_OUTSIDE:return w;
case v.PARTIALLY_INSIDE:g=w}}return g}function b(a,b){var d=b.length,c=0;if(1<d)for(var g=0,q=0;q<d;++q){var k=b[q].spec.chunkLayout;var p=k.size;k=k.globalToLocalSpatialVector(t,a);for(var r=0,n=0,f=1,y=0;3>y;++y){var v=p[y];f*=v;v*=k[y];r=Math.min(r,v);n=Math.max(n,v)}p=f/(n-r);p>g&&(g=p,c=q)}return b[c]}function d(a){var b=a.voxelSize,d=void 0===a.lowerVoxelBound?p.f:a.lowerVoxelBound,c=a.upperVoxelBound,g=void 0===a.maxVoxelsPerChunkLog2?18:a.maxVoxelsPerChunkLog2;a=void 0===a.transform?p.c:a.transform;
a=Object(p.b)(p.l.create(),a);b=p.l.multiply(a,a,b);a=p.l.fromValues(1,1,1);if(void 0===c)var q=p.e;else{q=p.l.create();for(var k=0;3>k;++k)q[k]=Math.pow(2,Math.floor(Math.log2(c[k]-d[k])))}for(d=0;d<g;++d){c=Infinity;k=-1;for(var t=0;3>t;++t)if(!(a[t]>=q[t])){var r=a[t]*b[t];r<c&&(c=r,k=t)}c=k;if(-1===c)break;a[c]*=2}return a}l.d(e,"c",function(){return u});e.g=d;e.f=function(a,b){b=b.transform;return void 0===b?void 0===a?p.c:a:void 0===a?b:p.g.multiply(p.g.create(),b,a)};e.e=function(a){if(void 0!==
a.chunkDataSizes)return a.chunkDataSizes;var b=void 0===a.chunkLayoutPreference?A.ISOTROPIC:a.chunkLayoutPreference;switch(b){case A.ISOTROPIC:return[d(a)];case A.FLAT:b=[];for(var c=0;3>c;++c){var g=c;var k=a.lowerVoxelBound;var q=a.upperVoxelBound,r=c,n=a.voxelSize,f=a.maxVoxelsPerChunkLog2,y=a.transform;p.l.subtract(t,void 0===q?p.e:q,void 0===k?p.f:k);t[r]=1;k=d({voxelSize:n,upperVoxelBound:t,maxVoxelsPerChunkLog2:f,transform:y});b[g]=k}b.push(d(a));return b}throw Error("Invalid chunk layout preference: "+
b+".");};l.d(e,"d",function(){return L});var n=l(57),g=l(18),k=l(58),r=l(10),p=l(1);m=l(0);l.d(e,"a",function(){return r.b});var y=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),t=p.l.create(),v;(function(a){a[a.FULLY_OUTSIDE=0]="FULLY_OUTSIDE";a[a.FULLY_INSIDE=1]="FULLY_INSIDE";a[a.PARTIALLY_INSIDE=2]="PARTIALLY_INSIDE"})(v||
(v={}));var z=[p.l.create(),p.l.create(),p.l.create(),p.l.create()],u=function(d){function r(){h(this,r);var a=(r.__proto__||Object.getPrototypeOf(r)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.width=-1;a.height=-1;a.hasViewportToData=!1;a.hasValidViewport=!1;a.viewportToData=p.g.create();a.viewportAxes=[p.l.create(),p.l.create(),p.l.create()];a.previousViewportAxes=[p.l.create(),
p.l.create()];a.centerDataPosition=p.l.create();a.viewportPlaneDistanceToOrigin=0;a.visibleChunkLayouts=new Map;a.visibleLayers=new Map;a.visibleSourcesStale=!0;a.pixelSize=0;p.g.identity(a.viewportToData);return a}f(r,d);y(r,[{key:"onViewportChanged",value:function(){}},{key:"maybeSetHasValidViewport",value:function(){!this.hasValidViewport&&-1!==this.width&&-1!==this.height&&this.hasViewportToData&&(this.hasValidViewport=!0,this.onHasValidViewport());if(this.hasValidViewport)this.onViewportChanged()}},
{key:"onHasValidViewport",value:function(){}},{key:"setViewportSize",value:function(a,b){return a!==this.width||b!==this.height?(this.width=a,this.height=b,this.maybeSetHasValidViewport(),!0):!1}},{key:"setViewportToDataMatrix",value:function(a){if(this.hasViewportToData&&p.g.equals(this.viewportToData,a))return!1;this.hasViewportToData=!0;var b=this.viewportToData;p.g.copy(b,a);Object(p.j)(b);p.l.transformMat4(this.centerDataPosition,p.f,a);a=0;for(var d=this.viewportAxes,c=this.previousViewportAxes,
g=0;3>g;++g){var t=d[g];Object(p.k)(t,p.d[g],b);0===g&&(a=p.l.length(t));p.l.normalize(t,t)}this.viewportAxes=d;this.previousViewportAxes=c;if(!Object(k.a)(a,this.pixelSize)||.95>p.l.dot(d[0],c[0])||.95>p.l.dot(d[1],c[1]))p.l.copy(c[0],d[0]),p.l.copy(c[1],d[1]),this.visibleSourcesStale=!0,this.pixelSize=a;this.viewportPlaneDistanceToOrigin=p.l.dot(this.centerDataPosition,this.viewportAxes[2]);this.onViewportToDataMatrixChanged();this.maybeSetHasValidViewport();return!0}},{key:"onViewportToDataMatrixChanged",
value:function(){}},{key:"updateVisibleSources",value:function(){if(this.visibleSourcesStale){this.visibleSourcesStale=!1;var a=1.1*this.pixelSize,d=this.visibleChunkLayouts,c=this.viewportAxes[2],g=this.visibleLayers;d.clear();var k={};g=$jscomp.makeIterator(g);for(var t=g.next();!t.done;k={smallestVoxelSize:k.smallestVoxelSize,visibleSources:k.visibleSources},t=g.next()){t=$jscomp.makeIterator(t.value);var p=t.next().value;k.visibleSources=t.next().value;k.visibleSources.length=0;t=p.sources;var r=
t.length;p=void 0;k.smallestVoxelSize=t[0][0].spec.voxelSize;var n=function(b){return function(d){for(var c=0;3>c;++c){var g=d[c];if(g>a&&g>b.smallestVoxelSize[c])return!0}return!1}}(k),f=function(a){return function(b,c){a.visibleSources[a.visibleSources.length++]=b;var g=b.spec.chunkLayout,q=d.get(g);void 0===q&&(q=new Map,d.set(g,q));q.set(b,c)}}(k);for(p=r-1;;){r=b(c,t[p]);f(r,p);if(0===p||!n(r.spec.voxelSize))break;--p}k.visibleSources.reverse()}}}},{key:"computeVisibleChunks",value:function(b,
d){var k=this;this.updateVisibleSources();for(var q=this.width,r=this.height,w=this.viewportToData,n=0;3>n;++n)z[0][n]=-p.d[0][n]*q/2-p.d[1][n]*r/2,z[1][n]=-p.d[0][n]*q/2+p.d[1][n]*r/2,z[2][n]=p.d[0][n]*q/2-p.d[1][n]*r/2,z[3][n]=p.d[0][n]*q/2+p.d[1][n]*r/2;for(q=0;4>q;++q)p.l.transformMat4(z[q],z[q],w);var f=p.l.create(),y=p.l.create(),h=p.l.create(),u=p.l.create(),e=p.l.create(),x=p.l.create(),B=[],l=[];this.visibleChunkLayouts.forEach(function(q,r){function w(){for(var a=0,b=0,d=0;3>d;++d){var c=
x[d],g=f[d],q=y[d]-g,k=e[d]*q;a+=c*(g+k);b+=c*(g+q-k)}return a<I?!1:b<=I}function n(b){function c(){L=Object(g.b)(B,0,u,function(b){var d=b.spec;switch(a(f,y,d.lowerChunkBound,d.upperChunkBound)){case v.PARTIALLY_INSIDE:return!0;case v.FULLY_INSIDE:l.push(b);default:return!1}})}if(0!==l.length||0!==L){for(var q=1,k=0;3>k;++k)q*=Math.max(0,y[k]-f[k]);if(0!==q&&w())if(1===q)d(r,E,f,l);else{for(var t;;)if(q=f[b],k=y[b],t=k-q,1===t)b=(b+1)%3;else break;t=q+Math.floor(.5*t);var p=(b+1)%3,h=l.length;y[b]=
t;var u=L;c();n(p);l.length=h;L=u;y[b]=k;f[b]=t;c();n(p);f[b]=q;l.length=h;L=u}}}var E=b(r);c(h,u,q.keys());p.l.set(f,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);p.l.set(y,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);r.globalToLocalSpatialVector(x,k.viewportAxes[2]);for(var H=0;3>H;++H)e[H]=0<x[H]?1:0;var I=p.l.dot(r.globalToLocalGrid(t,k.centerDataPosition),x);for(H=0;4>H;++H)for(var A=r.globalToLocalGrid(t,z[H]),G=0;3>G;++G)f[G]=Math.min(f[G],
Math.floor(A[G])),y[G]=Math.max(y[G],Math.floor(A[G])+1);p.l.max(f,f,h);p.l.min(y,y,u);l.length=0;B.length=0;q=$jscomp.makeIterator(q.keys());for(H=q.next();!H.done;H=q.next())switch(H=H.value,A=H.spec,a(f,y,A.lowerChunkBound,A.upperChunkBound)){case v.FULLY_INSIDE:l.push(H);break;case v.PARTIALLY_INSIDE:B.push(H)}var L=B.length;n(0)})}}]);return r}(m.b),A;(function(a){a[a.ISOTROPIC=0]="ISOTROPIC";a[a.FLAT=1]="FLAT"})(A||(A={}));var L=function G(a){h(this,G);var b=void 0===a.lowerVoxelBound?p.f:a.lowerVoxelBound,
d=a.upperVoxelBound,c=a.chunkDataSize,g=a.voxelSize,k=a.transform,t=void 0===a.baseVoxelOffset?p.f:a.baseVoxelOffset,r=void 0===a.lowerClipBound?p.l.multiply(p.l.create(),g,b):a.lowerClipBound,w=void 0===a.upperClipBound?p.l.multiply(p.l.create(),g,d):a.upperClipBound;this.voxelSize=g;this.chunkDataSize=c;this.chunkLayout=n.a.get(p.l.multiply(p.l.create(),a.chunkDataSize,g),k);this.lowerClipBound=r;this.upperClipBound=w;this.lowerVoxelBound=b;this.upperVoxelBound=d;this.baseVoxelOffset=t;a=this.lowerChunkBound=
p.l.create();g=this.upperChunkBound=p.l.create();for(k=0;3>k;++k)a[k]=Math.floor(b[k]/c[k]),g[k]=Math.floor((d[k]-1)/c[k]+1)};e.b="SliceView"},function(m,e,l){l.d(e,"b",function(){return h});var h;(function(f){f[f.UINT8=0]="UINT8";f[f.UINT16=1]="UINT16";f[f.UINT32=2]="UINT32";f[f.UINT64=3]="UINT64";f[f.FLOAT32=4]="FLOAT32"})(h||(h={}));m=[];e.a=m;m[h.UINT8]=1;m[h.UINT16]=2;m[h.UINT32]=4;m[h.UINT64]=8;m[h.FLOAT32]=4},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}l.d(e,"a",function(){return n});e.b=function(a,c){c=void 0===c?"GET":c;var g=new XMLHttpRequest;g[d]=c;g[b]=a;g.open(c,a);return g};e.c=function(a,k,r){r=void 0===r?"GET":r;var g=new XMLHttpRequest;if(Array.isArray(a)){var n=a.length;n=1===n?0:Math.abs(Object(c.a)(k))%n;a=a[n]+k}else a+=k;g[d]=r;g[b]=a;g.open(r,a);
return g};e.e=function(a,b,d){d=void 0===d?f.e:d;a.responseType=b;return new Promise(function(b,c){var g=function(){a.abort()};d.add(g);a.onloadend=function(){var k=this.status;d.remove(g);200<=k&&300>k?b(this.response):c(n.fromXhr(a))};a.send()})};e.d=function(a,b,d,c){c=void 0===c?f.e:c;a.responseType=d;a.setRequestHeader("Content-Type","application/json");return new Promise(function(d,g){var k=function(){a.abort()};c.add(k);a.onloadend=function(){var b=this.status;c.remove(k);200<=b&&300>b?d(this.response):
g(n.fromXhr(a))};a.send(JSON.stringify(b))})};var f=l(7),c=l(66),a=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();$jscomp.initSymbol();var b=Symbol("url");$jscomp.initSymbol();var d=Symbol("method"),n=function(c){function g(a,b,d,c){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");
var k=a+" "+JSON.stringify(b)+" resulted in HTTP error "+d;c&&(k+=": "+c);k+=".";var t=(g.__proto__||Object.getPrototypeOf(g)).call(this,k);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");t=!t||"object"!==typeof t&&"function"!==typeof t?this:t;t.name="HttpError";t.message=k;t.method=a;t.url=b;t.code=d;t.statusMessage=c;return t}h(g,c);a(g,null,[{key:"fromXhr",value:function(a){return new g(a[d],a[b],a.status,a.statusText)}}]);return g}(Error)},function(m,
e,l){l.d(e,"b",function(){return h});e.c=function(c,a,b){b=void 0===b?f:b;if(a!==b)for(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength),a=0,b=c.length;a<b;a+=2){var d=c[a];c[a]=c[a+1];c[a+1]=d}};e.d=function(c,a,b){b=void 0===b?f:b;if(a!==b)for(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength),a=0,b=c.length;a<b;a+=4){var d=c[a];c[a]=c[a+3];c[a+3]=d;d=c[a+1];c[a+1]=c[a+2];c[a+2]=d}};var h;(function(c){c[c.LITTLE=0]="LITTLE";c[c.BIG=1]="BIG"})(h||(h={}));var f=function(){var c=Uint16Array.of(4386);
return 17===(new Uint8Array(c.buffer))[0]?h.BIG:h.LITTLE}();e.a=f},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}l.d(e,"a",function(){return k});m=l(22);var a=l(36),b=l(1);l=l(0);var d=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),n=function p(a,b,d){null===a&&(a=Function.prototype);
var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return p(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}};e=this&&this.__decorate||function(a,b,d,c){var g=arguments.length,k=3>g?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,t;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=Reflect.decorate(a,b,d,c);else for(var n=a.length-1;0<=n;n--)if(t=a[n])k=(3>g?t(k):3<g?t(b,d,k):t(b,d))||k;return 3<
g&&k&&Object.defineProperty(b,d,k),k};var g=function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.source=null;return a}c(b,a);d(b,[{key:"initializeVolumeChunk",value:function(a,d){n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initializeVolumeChunk",this).call(this,a,d);a=this.source;this.gpuMemoryBytes=this.systemMemoryBytes=a.spec.chunkBytes;this.data=null}},{key:"serialize",value:function(a,d){n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),
"serialize",this).call(this,a,d);a=a.data=this.data;d.push(a.buffer);this.data=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.data.byteLength;n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){this.data=null}}]);return b}(m.SliceViewChunk),k=function(k){function n(b,d){h(this,n);b=f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,b,d));b.spec=a.c.fromObject(d.spec);
return b}c(n,k);d(n,[{key:"getChunk",value:function(a){var d=Object(b.m)(a),c=this.chunks.get(d);void 0===c&&(c=this.getNewChunk_(g),c.initializeVolumeChunk(d,a),this.addChunk(c));return c}}]);return n}(m.SliceViewChunkSource);m=function(a){function b(){h(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);return b}(m.RenderLayer);m=e([Object(l.g)(a.b)],m)},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}l.d(e,"b",function(){return a});l.d(e,"a",function(){return b});var c=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,
c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),a=function(){function a(){f(this,a);this.handlers=new Set;this.count=0;var b=this;this.dispatch=function(){var a=this,d=arguments;++b.count;b.handlers.forEach(function(b){b.apply(a,d)})}}c(a,[{key:"add",value:function(a){var b=this;this.handlers.add(a);return function(){return b.remove(a)}}},{key:"remove",value:function(a){return this.handlers.delete(a)}},{key:"dispose",value:function(){this.handlers=void 0}}]);return a}(),
b=function(a){function b(){f(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}h(b,a);return b}(a)},function(m,e,l){function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&
null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.c=function(a){return function(a){function b(a){for(var d=[],c=0;c<arguments.length;++c)d[c-0]=arguments[c];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var n,p=h(this,(n=b.__proto__||Object.getPrototypeOf(b)).call.apply(n,
[].concat([this],$jscomp.arrayFromIterable(d))));p.visibility=d[0].get(d[1].visibility);p.registerDisposer(p.visibility.changed.add(function(){return p.chunkManager.scheduleUpdateChunkPriorities()}));return p}f(b,a);return b}(a)};e.b=function(a){return a===Number.POSITIVE_INFINITY?c.d.VISIBLE:c.d.PREFETCH};e.a=function(a){return a===Number.POSITIVE_INFINITY?0:a*c.f};l(59);var c=l(8)},function(m,e,l){e.a=function(c,a){Object(h.a)(c,Object(f.a)(new Uint8Array(a),c.chunkDataSize,c.source.spec.numChannels))};
var h=l(25),f=l(79)},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b,d,c){a.addEventListener(b,d,c);return function(){return a.removeEventListener(b,
d,c)}}l.d(e,"a",function(){return b});l.d(e,"b",function(){return d});var a=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),b=function(){function b(){f(this,b);this.refCount=1}a(b,[{key:"addRef",value:function(){++this.refCount;return this}},{key:"dispose",value:function(){0===--this.refCount&&this.refCountReachedZero()}},
{key:"refCountReachedZero",value:function(){this.disposed();var a=this.disposers;if(null!=a){for(var b=a.length;0<b;--b){var d=a[b-1];"object"===typeof d?d.dispose():d.call(this)}this.disposers=void 0}this.wasDisposed=!0}},{key:"disposed",value:function(){}},{key:"registerDisposer",value:function(a){var b=this.disposers;null==b?this.disposers=[a]:b.push(a);return a}},{key:"unregisterDisposer",value:function(a){var b=this.disposers;if(null!=b){var d=b.indexOf(a);-1!==d&&b.splice(d,1)}return a}},{key:"registerEventListener",
value:function(a,b,d,n){this.registerDisposer(c(a,b,d,n))}},{key:"registerCancellable",value:function(a){this.registerDisposer(function(){a.cancel()});return a}}]);return b}(),d=function(a){function b(a){f(this,b);var d=(b.__proto__||Object.getPrototypeOf(b)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.value=a;return d}h(b,a);return b}(b)},function(m,e,l){e.b=function(h,f,c,a){for(;f<
c;){var b=h[f];a(b)?++f:(--c,h[f]=h[c],h[c]=b)}return c};e.a=function(h,f){var c=h.length,a=Array(c);f=a[0]=void 0===f?1:f;for(var b=1;b<c;++b)f*=h[b-1],a[b]=f;return a};e.c=function(h,f,c){for(var a=new h.constructor(h.length),b=0;b<f*c;b+=c)for(var d=0;d<c;d++)a[d*f+b/c]=h[b+d];return a}},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){for(var d=r.l.create(),c=r.l.create(),q=r.l.create(),g=new Float32Array(a.length),k=new Float32Array(a.length/3),
t=b.length,w=0;w<t;w+=3)for(var n=0;3>n;++n)k[b[w+n]]+=1;for(w=0;w<t;w+=3){n=3*b[w];for(var p=3*b[w+1],f=3*b[w+2],v=0;3>v;++v)c[v]=a[p+v]-a[n+v],q[v]=a[f+v]-a[p+v];r.l.cross(d,c,q);r.l.normalize(d,d);for(n=0;3>n;++n)for(f=b[w+n],p=1/k[f],f*=3,v=0;3>v;++v)g[f+v]+=p*d[v]}a=g.length;for(b=0;b<a;b+=3)d=g.subarray(b,3),r.l.normalize(d,d);return g}function b(a,b,d,c,q,g,t,n){var w=new Float32Array(d,q,3*g);Object(k.d)(w,c);void 0===t&&(t=q+12*g);var p;void 0!==n&&(p=n*b);d=void 0===p?new Uint32Array(d,
t):new Uint32Array(d,t,p);if(0!==d.length%b)throw Error("Number of indices is not a multiple of "+b+": "+d.length+".");Object(k.d)(d,c);a.vertexPositions=w;a.indices=d}e.c=function(a,b,d){Object(p.e)(b);a.fragmentIds=Object(p.f)(b,d,p.h)};e.b=a;e.e=b;e.d=function(d,c,g,t,q,k,n){b(d,3,c,g,t,q,k,n);d.vertexNormals=a(d.vertexPositions,d.indices)};l.d(e,"a",function(){return E});var d=l(2),n=l(8);m=l(68);e=l(35);var g=l(23),k=l(12),r=l(1),p=l(5),y=l(6),t=l(15);l=l(0);var v=function(){function a(a,b){for(var d=
0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),z=function w(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return w(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},u=this&&this.__decorate||function(a,b,d,c){var g=
arguments.length,q=3>g?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,t;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)q=Reflect.decorate(a,b,d,c);else for(var k=a.length-1;0<=k;k--)if(t=a[k])q=(3>g?t(q):3<g?t(b,d,q):t(b,d))||q;return 3<g&&q&&Object.defineProperty(b,d,q),q},A=function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.backendOnly=!0;a.objectId=new y.a;return a}c(b,a);v(b,[{key:"initializeManifestChunk",value:function(a,
d,c){z(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.objectId.assign(d);c&&(this.clipBounds=c)}},{key:"freeSystemMemory",value:function(){this.fragmentIds=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=100;z(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this);this.priorityTier<n.d.RECENT&&this.source.chunkManager.scheduleUpdateChunkPriorities()}},{key:"toString",value:function(){return this.objectId.toString()}}]);
return b}(d.Chunk),L=function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.manifestChunk=null;a.fragmentId=null;a.vertexPositions=null;a.indices=null;a.vertexNormals=null;return a}c(b,a);v(b,[{key:"initializeFragmentChunk",value:function(a,d,c){z(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.manifestChunk=d;this.fragmentId=c}},{key:"freeSystemMemory",value:function(){this.fragmentId=this.vertexPositions=
this.indices=this.vertexNormals=this.manifestChunk=null}},{key:"serialize",value:function(a,d){z(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,d);a.objectKey=this.manifestChunk.key;var c=this.vertexPositions,g=this.indices,q=this.vertexNormals;a.vertexPositions=c;a.indices=g;a.vertexNormals=q;a=c.buffer;d.push(a);g=g.buffer;g!==a&&d.push(g);q=q.buffer;q!==a&&q!==g&&d.push(q);this.vertexPositions=this.indices=this.vertexNormals=null}},{key:"downloadSucceeded",
value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.vertexPositions.byteLength+this.indices.byteLength+this.vertexNormals.byteLength;z(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(d.Chunk),E=function(a){function b(a,d){h(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));return(c.fragmentSource=c.registerDisposer(a.getRef(d.fragmentSource))).meshSource=c}c(b,a);v(b,[{key:"getChunk",value:function(a,
b){var d=Object(g.b)(a,b),c=this.chunks.get(d);void 0===c&&(c=this.getNewChunk_(A),c.initializeManifestChunk(d,a,b),this.addChunk(c));return c}},{key:"getFragmentChunk",value:function(a,b){var d=a.key+"/"+b,c=this.fragmentSource,g=c.chunks.get(d);void 0===g&&(g=c.getNewChunk_(L),g.initializeFragmentChunk(d,a,b),c.addChunk(g));return g}}]);return b}(d.ChunkSource);d=function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.meshSource=null;return a}
c(b,a);v(b,[{key:"download",value:function(a,b){return this.meshSource.downloadFragment(a,b)}}]);return b}(d.ChunkSource);d=u([Object(l.g)(m.a)],d);e=function(a){function b(a,d){h(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));c.source=c.registerDisposer(a.getRef(d.source));c.registerDisposer(c.chunkManager.recomputeChunkPriorities.add(function(){c.updateChunkPriorities()}));return c}c(b,a);v(b,[{key:"updateChunkPriorities",value:function(){var a=this,b=this.visibility.value;
if(b!==Number.NEGATIVE_INFINITY){var d=Object(t.b)(b),c=Object(t.a)(b),k=this.source,p=this.chunkManager;Object(g.a)(this,function(b){b=k.getChunk(b,a.clipBounds.value);p.requestChunk(b,d,c+100);if(b.state===n.e.SYSTEM_MEMORY_WORKER)for(var g=$jscomp.makeIterator(b.fragmentIds),q=g.next();!q.done;q=g.next())q=k.getFragmentChunk(b,q.value),p.requestChunk(q,d,c+50)})}}}]);return b}(e.a);e=u([Object(l.g)(m.b)],e)},function(m,e,l){function h(f,c,a,b,d,n,g){for(var k=new Map,r=Array(3),p=2,y=0;3>y;++y){var t=
r[y]=Math.ceil(b[y]/c[y]);p*=t}y=r[0];t=r[1];r=r[2];var v=b[0],h=b[1];b=b[2];var u=c[0],e=c[1],l=c[2],E=f.length,G=E,w=[0,0,0];f.resize(E+p);p=n[0];for(var x=n[1],m=n[2],q=0;q<r;++q){w[2]=Math.min(l,b-q*l);for(var I=0;I<t;++I){w[1]=Math.min(e,h-I*e);for(var H=0;H<y;++H){w[0]=Math.min(u,v-H*u);var D=f.length-E,C=$jscomp.makeIterator(g(a,d+(q*l*m+I*e*x+H*u*p),n,c,w,E,k,f)),F=C.next().value;C=C.next().value;var O=f.data;O[G++]=C|F<<24;O[G++]=D}}}}e.c=function(f,c,a,b,d,n,g,k,r){if(1===d)var p=0;else for(p=
1;1<<p<d;)p*=2;var y=Math.ceil(p*b/32),t=f.length,v=y,h=!1,u=Array.prototype.join.call(n.subarray(0,d*r),",");b=a.get(u);void 0===b&&(h=!0,v+=d*r,b=t+y-c,a.set(u,b));f.resize(t+v);f=f.data;if(0<p)switch(p){case 1:for(c=a=0;a<y;++a)v=0,v|=k[g[c+0]]<<0,v|=k[g[c+1]]<<1,v|=k[g[c+2]]<<2,v|=k[g[c+3]]<<3,v|=k[g[c+4]]<<4,v|=k[g[c+5]]<<5,v|=k[g[c+6]]<<6,v|=k[g[c+7]]<<7,v|=k[g[c+8]]<<8,v|=k[g[c+9]]<<9,v|=k[g[c+10]]<<10,v|=k[g[c+11]]<<11,v|=k[g[c+12]]<<12,v|=k[g[c+13]]<<13,v|=k[g[c+14]]<<14,v|=k[g[c+15]]<<15,
v|=k[g[c+16]]<<16,v|=k[g[c+17]]<<17,v|=k[g[c+18]]<<18,v|=k[g[c+19]]<<19,v|=k[g[c+20]]<<20,v|=k[g[c+21]]<<21,v|=k[g[c+22]]<<22,v|=k[g[c+23]]<<23,v|=k[g[c+24]]<<24,v|=k[g[c+25]]<<25,v|=k[g[c+26]]<<26,v|=k[g[c+27]]<<27,v|=k[g[c+28]]<<28,v|=k[g[c+29]]<<29,v|=k[g[c+30]]<<30,v|=k[g[c+31]]<<31,f[t+a]=v,c+=32;break;case 2:for(c=a=0;a<y;++a)v=0,v|=k[g[c+0]]<<0,v|=k[g[c+1]]<<2,v|=k[g[c+2]]<<4,v|=k[g[c+3]]<<6,v|=k[g[c+4]]<<8,v|=k[g[c+5]]<<10,v|=k[g[c+6]]<<12,v|=k[g[c+7]]<<14,v|=k[g[c+8]]<<16,v|=k[g[c+9]]<<18,
v|=k[g[c+10]]<<20,v|=k[g[c+11]]<<22,v|=k[g[c+12]]<<24,v|=k[g[c+13]]<<26,v|=k[g[c+14]]<<28,v|=k[g[c+15]]<<30,f[t+a]=v,c+=16;break;case 4:for(c=a=0;a<y;++a)v=0,v|=k[g[c+0]]<<0,v|=k[g[c+1]]<<4,v|=k[g[c+2]]<<8,v|=k[g[c+3]]<<12,v|=k[g[c+4]]<<16,v|=k[g[c+5]]<<20,v|=k[g[c+6]]<<24,v|=k[g[c+7]]<<28,f[t+a]=v,c+=8;break;case 8:for(c=a=0;a<y;++a)v=0,v|=k[g[c+0]]<<0,v|=k[g[c+1]]<<8,v|=k[g[c+2]]<<16,v|=k[g[c+3]]<<24,f[t+a]=v,c+=4;break;case 16:for(c=a=0;a<y;++a)v=0,v|=k[g[c+0]]<<0,v|=k[g[c+1]]<<16,f[t+a]=v,c+=
2;break;case 32:for(c=a=0;a<y;++a)v=0,v|=k[g[c+0]]<<0,f[t+a]=v,c+=1}if(h)for(g=t+y,k=0,d*=r;k<d;++k)f[g++]=n[k];return[p,b]};e.a=h;e.b=function(f,c,a,b,d,n,g){var k=f.length,r=b[3];f.resize(k+r);for(var p=0;p<r;++p)f.data[k+p]=f.length,h(f,c,a,b,d+n[3]*p,n,g)}},function(m,e,l){e.a=function(b,d,n){n=void 0===n?c.a:n;var g=b.source.spec,k=g.dataType,r=Object(a.h)(b.chunkDataSize),p=f.a[k];g=r*p*g.numChannels;if(g!==d.byteLength)throw Error("Raw-format chunk is "+d.byteLength+" bytes, "+("but "+r+" * "+
p+" = "+g+" bytes are expected."));switch(k){case f.b.UINT8:d=new Uint8Array(d);break;case f.b.UINT16:d=new Uint16Array(d);Object(c.c)(d,n);break;case f.b.UINT32:case f.b.UINT64:d=new Uint32Array(d);Object(c.d)(d,n);break;case f.b.FLOAT32:d=new Float32Array(d);Object(c.d)(d,n);break;default:throw Error("Unexpected data type: "+k+".");}Object(h.a)(b,d)};var h=l(25),f=l(10),c=l(12),a=l(1)},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,
"__esModule",{value:!0});l.d(e,"SliceView",function(){return v});l.d(e,"SliceViewChunk",function(){return z});l.d(e,"SliceViewChunkSource",function(){return u});l.d(e,"RenderLayer",function(){return A});m=l(2);e=l(9);var a=l(1),b=l(14),d=l(15);l=l(0);var n=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),g=
function E(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return E(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},k=this&&this.__decorate||function(a,b,d,c){var g=arguments.length,q=3>g?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)q=Reflect.decorate(a,b,d,c);else for(var t=a.length-1;0<=t;t--)if(k=
a[t])q=(3>g?k(q):3<g?k(b,d,q):k(b,d))||q;return 3<g&&q&&Object.defineProperty(b,d,q),q},r=a.l.create(),p=a.l.create(),y=a.l.create(),t=function(a){function b(a,d){h(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));c.initializeSharedObject(a,d.id);return c}c(b,a);return b}(e.c),v=function(b){function k(a,b){h(this,k);var d=f(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,a,b));d.handleLayerChanged=function(){d.hasValidViewport&&d.chunkManager.scheduleUpdateChunkPriorities()};
d.registerDisposer(d.chunkManager.recomputeChunkPriorities.add(function(){d.updateVisibleChunks()}));return d}c(k,b);n(k,[{key:"onViewportChanged",value:function(){this.chunkManager.scheduleUpdateChunkPriorities()}},{key:"updateVisibleChunks",value:function(){var b=this,c=this.centerDataPosition,g=this.chunkManager,q=this.visibility.value;if(q!==Number.NEGATIVE_INFINITY){var k=Object(d.b)(q),t=Object(d.a)(q);t+=-1E12;this.computeVisibleChunks(function(a){a.globalToLocalSpatial(y,c);return b.visibleChunkLayouts.get(a)},
function(b,d,c,q){a.l.multiply(r,c,b.size);b=-a.l.distance(y,r);q=$jscomp.makeIterator(q);for(var n=q.next();!n.done;n=q.next()){var p=n.value;n=d.get(p);p=p.getChunk(c);g.requestChunk(p,k,t+b+1E9*n)}})}}},{key:"removeVisibleLayer",value:function(a){this.visibleLayers.delete(a);a.layerChanged.remove(this.handleLayerChanged);this.visibleSourcesStale=!0;this.hasValidViewport&&this.chunkManager.scheduleUpdateChunkPriorities()}},{key:"disposed",value:function(){for(var a=$jscomp.makeIterator(this.visibleLayers.keys()),
b=a.next();!b.done;b=a.next())this.removeVisibleLayer(b.value);g(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"disposed",this).call(this)}}]);return k}(Object(d.c)(Object(m.withChunkManager)(t)));v=k([Object(l.g)(e.b)],v);Object(l.f)("SliceView.updateView",function(a){var b=this.get(a.id);a.width&&b.setViewportSize(a.width,a.height);a.viewportToData&&b.setViewportToDataMatrix(a.viewportToData)});Object(l.f)("SliceView.addVisibleLayer",function(a){var b=this.get(a.id);a=this.get(a.layerId);
b.visibleLayers.set(a,[]);a.layerChanged.add(b.handleLayerChanged);b.visibleSourcesStale=!0;b.hasValidViewport&&b.chunkManager.scheduleUpdateChunkPriorities()});Object(l.f)("SliceView.removeVisibleLayer",function(a){var b=this.get(a.id);a=this.get(a.layerId);b.removeVisibleLayer(a)});var z=function(b){function d(){h(this,d);var b=f(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));b.source=null;b.chunkGridPosition=a.l.create();return b}c(d,b);n(d,[{key:"initializeVolumeChunk",value:function(b,
c){g(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"initialize",this).call(this,b);a.l.copy(this.chunkGridPosition,c);this.chunkDataSize=null}},{key:"serialize",value:function(a,b){g(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"serialize",this).call(this,a,b);b=this.chunkDataSize;b!==this.source.spec.chunkDataSize&&(a.chunkDataSize=b);a.chunkGridPosition=this.chunkGridPosition}},{key:"downloadSucceeded",value:function(){g(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),
"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){}},{key:"toString",value:function(){return this.source.toString()+":"+Object(a.m)(this.chunkGridPosition)}}]);return d}(m.Chunk),u=function(b){function d(a,b){h(this,d);return f(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b))}c(d,b);n(d,[{key:"computeChunkBounds",value:function(b){var d=this.spec,c=d.upperVoxelBound;d=d.chunkDataSize;for(var g=a.l.multiply(r,b.chunkGridPosition,d),k=!1,t=0;3>t;++t)(p[t]=Math.min(c[t],
g[t]+d[t])-g[t])!==d[t]&&(k=!0);a.l.add(g,g,this.spec.baseVoxelOffset);b.chunkDataSize=k?a.l.clone(p):d;return g}}]);return d}(m.ChunkSource),A=function(a){function d(a,c){h(this,d);var g=f(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,c));g.layerChanged=new b.a;var q=g.sources=[];c=$jscomp.makeIterator(c.sources);for(var k=c.next();!k.done;k=c.next()){var t=k.value;k=[];q.push(k);t=$jscomp.makeIterator(t);for(var n=t.next();!n.done;n=t.next())n=a.get(n.value),g.registerDisposer(n.addRef()),
k.push(n)}return g}c(d,a);return d}(l.c)},function(m,e,l){e.b=function(h,f){return h.low+","+h.high+(f?"_"+f.center.toString()+"_"+f.size.toString():"")};e.a=function(h,f){var c=h.segmentEquivalences;h=$jscomp.makeIterator(h.visibleSegments);for(var a=h.next();!a.done;a=h.next())if(a=a.value,c.disjointSets.isMinElement(a))for(var b=$jscomp.makeIterator(c.setElements(a)),d=b.next();!d.done;d=b.next())f(d.value,a)}},function(m,e,l){e.a=function(h,f){h.data=new Uint32Array(f)}},function(m,e,l){e.a=function(d,
n){var g=d.source.spec;if(g.compressedSegmentationBlockSize){var k=g.dataType;a.clear();var r=d.chunkDataSize;b[0]=r[0];b[1]=r[1];b[2]=r[2];b[3]=g.numChannels;switch(k){case h.a.UINT32:Object(f.a)(a,g.compressedSegmentationBlockSize,n,b);break;case h.a.UINT64:Object(c.a)(a,g.compressedSegmentationBlockSize,n,b);break;default:throw Error("Unsupported data type for compressed segmentation: "+h.a[k]);}d.data=new Uint32Array(a.view)}else d.data=n};var h=l(9),f=l(76),c=l(77),a=new (l(78).a)(2E4),b=Array(4)},
function(m,e,l){e=l(4).assign;var h=l(84),f=l(87);l=l(42);var c={};e(c,h,f,l);m.exports=c},function(m,e,l){m.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}l.d(e,"a",function(){return p});m=l(2);var a=l(8),b=l(7),d=l(11),n=l(103),g=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=
b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),k=function t(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return t(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},r=function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments));a.backendOnly=!0;return a}c(b,a);g(b,[{key:"initialize",value:function(a){k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.requesters=new Set}},{key:"downloadSucceeded",value:function(){k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this);var a=this.requesters,d=this.data;this.requesters=void 0;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c.value.resolve(d)}},{key:"downloadFailed",
value:function(a){k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadFailed",this).call(this,a);var d=this.requesters;this.requesters=void 0;d=$jscomp.makeIterator(d);for(var c=d.next();!c.done;c=d.next())c.value.reject(a)}},{key:"freeSystemMemory",value:function(){this.data=void 0}}]);return b}(m.Chunk),p=function(k){function t(a,b){h(this,t);var d=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a));d.decodeFile=b;d.registerDisposer(a);d.registerDisposer(d.chunkManager.recomputeChunkPrioritiesLate.add(function(){d.updateChunkPriorities()}));
return d}c(t,k);g(t,[{key:"updateChunkPriorities",value:function(){for(var a=this.chunkManager,b=$jscomp.makeIterator(this.chunks.values()),d=b.next();!d.done;d=b.next()){d=d.value;var c=d.requesters;if(void 0!==c){c=$jscomp.makeIterator(c);for(var g=c.next();!g.done;g=c.next())g=g.value.getPriority(),a.requestChunk(d,g.priorityTier,g.priority)}}}},{key:"download",value:function(a,b){var c=this;return Object(d.e)(Object(d.b)(a.key),"arraybuffer",b).then(function(b){a.data=c.decodeFile(b)})}},{key:"getData",
value:function(d,c,g){var k=this,t=this.chunks.get(d);void 0===t&&(t=this.getNewChunk_(r),t.initialize(d),this.addChunk(t));return Object(b.d)(g,function(d,g,n){switch(t.state){case a.e.FAILED:g(t.error);return;case a.e.SYSTEM_MEMORY_WORKER:d(t.data);return}var p={resolve:d,reject:g,getPriority:c};t.requesters.add(p);n.add(function(){var a=t.requesters;void 0!==a&&(a.delete(p),k.chunkManager.scheduleUpdateChunkPriorities());g(b.a)});k.chunkManager.scheduleUpdateChunkPriorities()})}}],[{key:"get",
value:function(a,b){return a.memoize.get("getFileSource:"+Object(n.a)(b),function(){return new t(a,b)})}},{key:"getData",value:function(a,b,d,c,g){a=t.get(a,b);d=a.getData(d,c,g);a.dispose();return d}}]);return t}(m.ChunkSourceBase)},function(m,e,l){var h=h||{};h.Utils=h.Utils||{};h.Utils.crcTable=null;h.Utils.GUNZIP_MAGIC_COOKIE1=31;h.Utils.GUNZIP_MAGIC_COOKIE2=139;h.Utils.getStringAt=function(f,c,a){for(var b="",d;c<a;c+=1)d=f.getUint8(c),0!==d&&(b+=String.fromCharCode(d));return b};h.Utils.getByteAt=
function(f,c){return f.getInt8(c)};h.Utils.getShortAt=function(f,c,a){return f.getInt16(c,a)};h.Utils.getIntAt=function(f,c,a){return f.getInt32(c,a)};h.Utils.getFloatAt=function(f,c,a){return f.getFloat32(c,a)};h.Utils.getDoubleAt=function(f,c,a){return f.getFloat64(c,a)};h.Utils.getLongAt=function(f,c,a){var b,d=[],n=0;for(b=0;8>b;b+=1)d[b]=h.Utils.getByteAt(f,c+b,a);for(b=d.length-1;0<=b;b--)n=256*n+d[b];return n};h.Utils.toArrayBuffer=function(f){var c;var a=new ArrayBuffer(f.length);var b=new Uint8Array(a);
for(c=0;c<f.length;c+=1)b[c]=f[c];return a};h.Utils.isString=function(f){return"string"===typeof f||f instanceof String};h.Utils.formatNumber=function(f,c){f=h.Utils.isString(f)?Number(f):f;f=c?f.toPrecision(5):f.toPrecision(7);return parseFloat(f)};h.Utils.makeCRCTable=function(){for(var f,c=[],a=0;256>a;a++){f=a;for(var b=0;8>b;b++)f=f&1?3988292384^f>>>1:f>>>1;c[a]=f}return c};h.Utils.crc32=function(f){for(var c=h.Utils.crcTable||(h.Utils.crcTable=h.Utils.makeCRCTable()),a=-1,b=0;b<f.byteLength;b++)a=
a>>>8^c[(a^f.getUint8(b))&255];return(a^-1)>>>0};"undefined"!==typeof m&&m.exports&&(m.exports=h.Utils)},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}l.d(e,"a",function(){return n});var c=l(17),a=l(5),b=function k(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return k(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},d=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&
a(b.prototype,d);c&&a(b,c);return b}}(),n=function(k){function n(){f(this,n);var a=(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}h(n,k);d(n,[{key:"get",value:function(d,c){"string"!==typeof d&&(d=Object(a.c)(d));return b(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"get",this).call(this,d,c)}},{key:"getUncounted",value:function(a,
b){return this.get(a,function(){return new c.b(b())}).value}}]);return n}(function(){function a(){f(this,a);this.map=new Map}d(a,[{key:"get",value:function(a,b){var d=this.map,c=d.get(a);void 0===c?(c=b(),c.registerDisposer(function(){d.delete(a)}),d.set(a,c)):c.addRef();return c}}]);return a}())},function(m,e,l){l(3);l(50);l(51);l(32);var h=l(52),f=l(53);l(54);var c=l(33);l(34);l.d(e,"a",function(){return h});l.d(e,"b",function(){return f});l.d(e,"c",function(){return c})},function(m,e,l){e.a=function(){var f=
new h.a(9);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=1;f[5]=0;f[6]=0;f[7]=0;f[8]=1;return f};var h=l(3)},function(m,e,l){function h(){var a=new y.a(3);a[0]=0;a[1]=0;a[2]=0;return a}function f(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)}function c(a,b,d){var c=new y.a(3);c[0]=a;c[1]=b;c[2]=d;return c}function a(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];return a}function b(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];return a}function d(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=
b[2]/d[2];return a}function n(a,b){var d=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(d*d+c*c+a*a)}function g(a,b){var d=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return d*d+c*c+a*a}function k(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a}function r(a,b){var d=b[0],c=b[1],g=b[2];d=d*d+c*c+g*g;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d);return a}function p(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}Object.defineProperty(e,"__esModule",{value:!0});e.create=h;e.clone=function(a){var b=
new y.a(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};e.length=f;e.fromValues=c;e.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a};e.set=function(a,b,d,c){a[0]=b;a[1]=d;a[2]=c;return a};e.add=function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];return a};e.subtract=a;e.multiply=b;e.divide=d;e.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};e.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};e.min=
function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);return a};e.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);return a};e.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};e.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;return a};e.scaleAndAdd=function(a,b,d,c){a[0]=b[0]+d[0]*c;a[1]=b[1]+d[1]*c;a[2]=b[2]+d[2]*c;return a};e.distance=n;e.squaredDistance=g;
e.squaredLength=k;e.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};e.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};e.normalize=r;e.dot=p;e.cross=function(a,b,d){var c=b[0],g=b[1];b=b[2];var k=d[0],n=d[1];d=d[2];a[0]=g*d-b*n;a[1]=b*k-c*d;a[2]=c*n-g*k;return a};e.lerp=function(a,b,d,c){var g=b[0],k=b[1];b=b[2];a[0]=g+c*(d[0]-g);a[1]=k+c*(d[1]-k);a[2]=b+c*(d[2]-b);return a};e.hermite=function(a,b,d,c,g,k){var n=k*k,p=n*(2*k-3)+1,f=n*(k-2)+k,t=n*(k-1);k=n*(3-2*k);
a[0]=b[0]*p+d[0]*f+c[0]*t+g[0]*k;a[1]=b[1]*p+d[1]*f+c[1]*t+g[1]*k;a[2]=b[2]*p+d[2]*f+c[2]*t+g[2]*k;return a};e.bezier=function(a,b,d,c,g,k){var n=1-k,p=n*n,f=k*k,t=p*n;p*=3*k;n*=3*f;k*=f;a[0]=b[0]*t+d[0]*p+c[0]*n+g[0]*k;a[1]=b[1]*t+d[1]*p+c[1]*n+g[1]*k;a[2]=b[2]*t+d[2]*p+c[2]*n+g[2]*k;return a};e.random=function(a,b){b=b||1;var d=2*y.c()*Math.PI,c=2*y.c()-1,g=Math.sqrt(1-c*c)*b;a[0]=Math.cos(d)*g;a[1]=Math.sin(d)*g;a[2]=c*b;return a};e.transformMat4=function(a,b,d){var c=b[0],g=b[1];b=b[2];var k=
d[3]*c+d[7]*g+d[11]*b+d[15];k=k||1;a[0]=(d[0]*c+d[4]*g+d[8]*b+d[12])/k;a[1]=(d[1]*c+d[5]*g+d[9]*b+d[13])/k;a[2]=(d[2]*c+d[6]*g+d[10]*b+d[14])/k;return a};e.transformMat3=function(a,b,d){var c=b[0],g=b[1];b=b[2];a[0]=c*d[0]+g*d[3]+b*d[6];a[1]=c*d[1]+g*d[4]+b*d[7];a[2]=c*d[2]+g*d[5]+b*d[8];return a};e.transformQuat=function(a,b,d){var c=b[0],g=b[1],k=b[2];b=d[0];var n=d[1],p=d[2];d=d[3];var f=d*c+n*k-p*g,r=d*g+p*c-b*k,t=d*k+b*g-n*c;c=-b*c-n*g-p*k;a[0]=f*d+c*-b+r*-p-t*-n;a[1]=r*d+c*-n+t*-b-f*-p;a[2]=
t*d+c*-p+f*-n-r*-b;return a};e.rotateX=function(a,b,d,c){var g=[],k=[];g[0]=b[0]-d[0];g[1]=b[1]-d[1];g[2]=b[2]-d[2];k[0]=g[0];k[1]=g[1]*Math.cos(c)-g[2]*Math.sin(c);k[2]=g[1]*Math.sin(c)+g[2]*Math.cos(c);a[0]=k[0]+d[0];a[1]=k[1]+d[1];a[2]=k[2]+d[2];return a};e.rotateY=function(a,b,d,c){var g=[],k=[];g[0]=b[0]-d[0];g[1]=b[1]-d[1];g[2]=b[2]-d[2];k[0]=g[2]*Math.sin(c)+g[0]*Math.cos(c);k[1]=g[1];k[2]=g[2]*Math.cos(c)-g[0]*Math.sin(c);a[0]=k[0]+d[0];a[1]=k[1]+d[1];a[2]=k[2]+d[2];return a};e.rotateZ=function(a,
b,d,c){var g=[],k=[];g[0]=b[0]-d[0];g[1]=b[1]-d[1];g[2]=b[2]-d[2];k[0]=g[0]*Math.cos(c)-g[1]*Math.sin(c);k[1]=g[0]*Math.sin(c)+g[1]*Math.cos(c);k[2]=g[2];a[0]=k[0]+d[0];a[1]=k[1]+d[1];a[2]=k[2]+d[2];return a};e.angle=function(a,b){a=c(a[0],a[1],a[2]);b=c(b[0],b[1],b[2]);r(a,a);r(b,b);b=p(a,b);return 1<b?0:-1>b?Math.PI:Math.acos(b)};e.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};e.equals=function(a,b){var d=a[0],
c=a[1];a=a[2];var g=b[0],k=b[1];b=b[2];return Math.abs(d-g)<=y.b*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(c-k)<=y.b*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(a-b)<=y.b*Math.max(1,Math.abs(a),Math.abs(b))};var y=l(3);e.sub=a;e.mul=b;e.div=d;e.dist=n;e.sqrDist=g;e.len=f;e.sqrLen=k;m=function(){var a=h();return function(b,d,c,g,k,n){d||(d=3);c||(c=0);for(g=g?Math.min(g*d+c,b.length):b.length;c<g;c+=d)a[0]=b[c],a[1]=b[c+1],a[2]=b[c+2],k(a,a,n),b[c]=a[0],b[c+1]=a[1],b[c+2]=a[2];return b}}();e.forEach=
m},function(m,e,l){function h(){var c=new f.a(4);c[0]=0;c[1]=0;c[2]=0;c[3]=0;return c}e.b=function(c){var a=new f.a(4);a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a};e.g=function(c,a,b,d){var n=new f.a(4);n[0]=c;n[1]=a;n[2]=b;n[3]=d;return n};e.c=function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c};e.l=function(c,a,b,d,n){c[0]=a;c[1]=b;c[2]=d;c[3]=n;return c};e.a=function(c,a,b){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};e.k=function(c,a,b){c[0]=a[0]*b;c[1]=
a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};e.h=function(c){var a=c[0],b=c[1],d=c[2];c=c[3];return Math.sqrt(a*a+b*b+d*d+c*c)};e.m=function(c){var a=c[0],b=c[1],d=c[2];c=c[3];return a*a+b*b+d*d+c*c};e.j=function(c,a){var b=a[0],d=a[1],n=a[2];a=a[3];var g=b*b+d*d+n*n+a*a;0<g&&(g=1/Math.sqrt(g),c[0]=b*g,c[1]=d*g,c[2]=n*g,c[3]=a*g);return c};e.d=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]};e.i=function(c,a,b,d){var n=a[0],g=a[1],k=a[2];a=a[3];c[0]=n+d*(b[0]-n);c[1]=g+d*(b[1]-g);c[2]=k+
d*(b[2]-k);c[3]=a+d*(b[3]-a);return c};e.f=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]};e.e=function(c,a){var b=c[0],d=c[1],n=c[2];c=c[3];var g=a[0],k=a[1],r=a[2];a=a[3];return Math.abs(b-g)<=f.b*Math.max(1,Math.abs(b),Math.abs(g))&&Math.abs(d-k)<=f.b*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(n-r)<=f.b*Math.max(1,Math.abs(n),Math.abs(r))&&Math.abs(c-a)<=f.b*Math.max(1,Math.abs(c),Math.abs(a))};var f=l(3);(function(){var c=h();return function(a,b,d,n,g,k){b||(b=4);d||
(d=0);for(n=n?Math.min(n*b+d,a.length):a.length;d<n;d+=b)c[0]=a[d],c[1]=a[d+1],c[2]=a[d+2],c[3]=a[d+3],g(c,c,k),a[d]=c[0],a[d+1]=c[1],a[d+2]=c[2],a[d+3]=c[3];return a}})()},function(m,e,l){function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=
Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}l.d(e,"a",function(){return c});l(69);l(71);m=l(2);e=l(15);l=l(0);var c=function(a){function b(a,c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.visibleSegments=a.get(c.visibleSegments);d.clipBounds=a.get(c.clipBounds);d.segmentEquivalences=
a.get(c.segmentEquivalences);a=function(){d.chunkManager.scheduleUpdateChunkPriorities()};d.registerDisposer(d.visibleSegments.changed.add(a));d.registerDisposer(d.segmentEquivalences.changed.add(a));d.registerDisposer(d.clipBounds.changed.add(a));return d}f(b,a);return b}(Object(e.c)(Object(m.withChunkManager)(l.c)))},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}l.d(e,"d",function(){return d});l.d(e,"c",function(){return n});var f=l(9),c=l(10),a=l(1);l.d(e,"a",function(){return c.b});var b=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,
c);return b}}(),d;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.IMAGE=1]="IMAGE";a[a.SEGMENTATION=2]="SEGMENTATION"})(d||(d={}));var n=function(g){function k(b){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");var d=(k.__proto__||Object.getPrototypeOf(k)).call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;var g=d.dataType=b.dataType,n=d.numChannels=b.numChannels;
d.chunkBytes=Object(a.h)(b.chunkDataSize)*c.a[g]*n;d.compressedSegmentationBlockSize=b.compressedSegmentationBlockSize;return d}h(k,g);b(k,[{key:"toObject",value:function(){return{transform:this.chunkLayout.transform,numChannels:this.numChannels,chunkDataSize:this.chunkDataSize,voxelSize:this.voxelSize,dataType:this.dataType,lowerVoxelBound:this.lowerVoxelBound,upperVoxelBound:this.upperVoxelBound,lowerClipBound:this.lowerClipBound,upperClipBound:this.upperClipBound,baseVoxelOffset:this.baseVoxelOffset,
compressedSegmentationBlockSize:this.compressedSegmentationBlockSize}}}],[{key:"make",value:function(a){return new k(Object.assign({},a,{transform:Object(f.f)(a.transform,a.volumeSourceOptions)}))}},{key:"fromObject",value:function(a){return new k(a)}},{key:"withDefaultCompression",value:function(a){var b=a.compressedSegmentationBlockSize,g=a.dataType,n=a.voxelSize,r=a.transform,h=a.lowerVoxelBound,e=a.upperVoxelBound;r=Object(f.f)(r,a.volumeSourceOptions);void 0!==b||a.volumeType!==d.SEGMENTATION||
g!==c.b.UINT32&&g!==c.b.UINT64||(b=Object(f.g)({voxelSize:n,transform:r,lowerVoxelBound:h,upperVoxelBound:e,maxVoxelsPerChunkLog2:9}));return new k(Object.assign({},a,{compressedSegmentationBlockSize:b,transform:r}))}},{key:"getDefaults",value:function(a){var b=Object.assign({},a,{transform:Object(f.f)(a.transform,a.volumeSourceOptions)});return(void 0===a.chunkDataSizes?Object(f.e)(b):a.chunkDataSizes).map(function(b){return k.withDefaultCompression(Object.assign({},a,{chunkDataSize:b}))})}}]);return k}(f.d);
e.b="volume/RenderLayer"},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});l.d(e,"NDStoreVolumeChunkSource",function(){return r});m=l(2);e=l(81);var f=l(16),c=l(82),a=l(21),
b=l(13),d=l(11);l=l(0);var n=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),g=this&&this.__decorate||function(a,b,d,c){var g=arguments.length,k=3>g?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=Reflect.decorate(a,b,d,c);else for(var f=
a.length-1;0<=f;f--)if(n=a[f])k=(3>g?n(k):3<g?n(b,d,k):n(b,d))||k;return 3<g&&k&&Object.defineProperty(b,d,k),k},k=new Map;k.set("npz",c.a);k.set("jpeg",f.a);k.set("raw",a.a);var r=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:
a;a.chunkDecoder=k.get(a.parameters.encoding);return a}h(b,a);n(b,[{key:"download",value:function(a,b){for(var c=this,g=this.parameters,k=g.urlPrefix+"/"+g.key+"/"+g.channel+"/"+(g.encoding+"/"+g.resolution),n=this.computeChunkBounds(a),f=a.chunkDataSize,p=0;3>p;++p)k+="/"+n[p]+","+(n[p]+f[p]);g.neariso&&(k+="/neariso/");return Object(d.e)(Object(d.c)(g.baseUrls,k),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(Object(m.WithParameters)(b.a,e.a));r=g([Object(l.g)()],r)},
function(m,e,l){m.exports=function(h,f,c,a){var b=h&65535|0;h=h>>>16&65535|0;for(var d;0!==c;){d=2E3<c?2E3:c;c-=d;do b=b+f[a++]|0,h=h+b|0;while(--d);b%=65521;h%=65521}return b|h<<16|0}},function(m,e,l){var h=function(){for(var f,c=[],a=0;256>a;a++){f=a;for(var b=0;8>b;b++)f=f&1?3988292384^f>>>1:f>>>1;c[a]=f}return c}();m.exports=function(f,c,a,b){a=b+a;for(f^=-1;b<a;b++)f=f>>>8^h[(f^c[b])&255];return f^-1}},function(m,e,l){function h(b,n){if(65537>n&&(b.subarray&&a||!b.subarray&&c))return String.fromCharCode.apply(null,
f.shrinkBuf(b,n));for(var d="",k=0;k<n;k++)d+=String.fromCharCode(b[k]);return d}var f=l(4),c=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(d){c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(d){a=!1}var b=new f.Buf8(256);for(m=0;256>m;m++)b[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;b[254]=b[254]=1;e.string2buf=function(a){var b,d,c=a.length,r=0;for(b=0;b<c;b++){var p=a.charCodeAt(b);if(55296===(p&64512)&&b+1<c){var h=a.charCodeAt(b+1);56320===(h&64512)&&(p=65536+(p-
55296<<10)+(h-56320),b++)}r+=128>p?1:2048>p?2:65536>p?3:4}var t=new f.Buf8(r);for(b=d=0;d<r;b++)p=a.charCodeAt(b),55296===(p&64512)&&b+1<c&&(h=a.charCodeAt(b+1),56320===(h&64512)&&(p=65536+(p-55296<<10)+(h-56320),b++)),128>p?t[d++]=p:(2048>p?t[d++]=192|p>>>6:(65536>p?t[d++]=224|p>>>12:(t[d++]=240|p>>>18,t[d++]=128|p>>>12&63),t[d++]=128|p>>>6&63),t[d++]=128|p&63);return t};e.buf2binstring=function(a){return h(a,a.length)};e.binstring2buf=function(a){for(var b=new f.Buf8(a.length),d=0,c=b.length;d<
c;d++)b[d]=a.charCodeAt(d);return b};e.buf2string=function(a,c){var d,k=c||a.length,n=Array(2*k);for(c=d=0;c<k;){var f=a[c++];if(128>f)n[d++]=f;else{var e=b[f];if(4<e)n[d++]=65533,c+=e-1;else{for(f&=2===e?31:3===e?15:7;1<e&&c<k;)f=f<<6|a[c++]&63,e--;1<e?n[d++]=65533:65536>f?n[d++]=f:(f-=65536,n[d++]=55296|f>>10&1023,n[d++]=56320|f&1023)}}}return h(n,d)};e.utf8border=function(a,c){var d;c=c||a.length;c>a.length&&(c=a.length);for(d=c-1;0<=d&&128===(a[d]&192);)d--;return 0>d||0===d?c:d+b[a[d]]>c?d:c}},
function(m,e,l){m.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},function(m,e,l){m.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,
Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(m,e,l){var h=h||{};h.Utils=h.Utils||l(29);h.NIFTI1=h.NIFTI1||function(){this.littleEndian=!1;this.dim_info=0;this.dims=[];this.slice_code=this.slice_end=this.slice_start=this.numBitsPerVoxel=this.datatypeCode=this.intent_code=this.intent_p3=this.intent_p2=this.intent_p1=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.toffset=this.slice_duration=this.cal_min=this.cal_max=
this.xyzt_units=this.scl_inter=0;this.intent_name=this.aux_file=this.description="";this.qoffset_z=this.qoffset_y=this.qoffset_x=this.quatern_d=this.quatern_c=this.quatern_b=this.sform_code=this.qform_code=0;this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.isHDR=!1;this.extensionFlag=[0,0,0,0];this.extensionCode=this.extensionSize=0};h.NIFTI1.TYPE_NONE=0;h.NIFTI1.TYPE_BINARY=1;h.NIFTI1.TYPE_UINT8=2;h.NIFTI1.TYPE_INT16=4;h.NIFTI1.TYPE_INT32=8;h.NIFTI1.TYPE_FLOAT32=16;h.NIFTI1.TYPE_COMPLEX64=
32;h.NIFTI1.TYPE_FLOAT64=64;h.NIFTI1.TYPE_RGB24=128;h.NIFTI1.TYPE_INT8=256;h.NIFTI1.TYPE_UINT16=512;h.NIFTI1.TYPE_UINT32=768;h.NIFTI1.TYPE_INT64=1024;h.NIFTI1.TYPE_UINT64=1280;h.NIFTI1.TYPE_FLOAT128=1536;h.NIFTI1.TYPE_COMPLEX128=1792;h.NIFTI1.TYPE_COMPLEX256=2048;h.NIFTI1.XFORM_UNKNOWN=0;h.NIFTI1.XFORM_SCANNER_ANAT=1;h.NIFTI1.XFORM_ALIGNED_ANAT=2;h.NIFTI1.XFORM_TALAIRACH=3;h.NIFTI1.XFORM_MNI_152=4;h.NIFTI1.SPATIAL_UNITS_MASK=7;h.NIFTI1.TEMPORAL_UNITS_MASK=56;h.NIFTI1.UNITS_UNKNOWN=0;h.NIFTI1.UNITS_METER=
1;h.NIFTI1.UNITS_MM=2;h.NIFTI1.UNITS_MICRON=3;h.NIFTI1.UNITS_SEC=8;h.NIFTI1.UNITS_MSEC=16;h.NIFTI1.UNITS_USEC=24;h.NIFTI1.UNITS_HZ=32;h.NIFTI1.UNITS_PPM=40;h.NIFTI1.UNITS_RADS=48;h.NIFTI1.MAGIC_COOKIE=348;h.NIFTI1.STANDARD_HEADER_SIZE=348;h.NIFTI1.MAGIC_NUMBER_LOCATION=344;h.NIFTI1.MAGIC_NUMBER=[110,43,49];h.NIFTI1.MAGIC_NUMBER2=[110,105,49];h.NIFTI1.EXTENSION_HEADER_SIZE=8;h.NIFTI1.prototype.readHeader=function(f){f=new DataView(f);var c=h.Utils.getIntAt(f,0,this.littleEndian),a,b;c!==h.NIFTI1.MAGIC_COOKIE&&
(this.littleEndian=!0,c=h.Utils.getIntAt(f,0,this.littleEndian));if(c!==h.NIFTI1.MAGIC_COOKIE)throw Error("This does not appear to be a NIFTI file!");this.dim_info=h.Utils.getByteAt(f,39);for(a=0;8>a;a+=1)c=40+2*a,this.dims[a]=h.Utils.getShortAt(f,c,this.littleEndian);this.intent_p1=h.Utils.getFloatAt(f,56,this.littleEndian);this.intent_p2=h.Utils.getFloatAt(f,60,this.littleEndian);this.intent_p3=h.Utils.getFloatAt(f,64,this.littleEndian);this.intent_code=h.Utils.getShortAt(f,68,this.littleEndian);
this.datatypeCode=h.Utils.getShortAt(f,70,this.littleEndian);this.numBitsPerVoxel=h.Utils.getShortAt(f,72,this.littleEndian);this.slice_start=h.Utils.getShortAt(f,74,this.littleEndian);for(a=0;8>a;a+=1)c=76+4*a,this.pixDims[a]=h.Utils.getFloatAt(f,c,this.littleEndian);this.vox_offset=h.Utils.getFloatAt(f,108,this.littleEndian);this.scl_slope=h.Utils.getFloatAt(f,112,this.littleEndian);this.scl_inter=h.Utils.getFloatAt(f,116,this.littleEndian);this.slice_end=h.Utils.getShortAt(f,120,this.littleEndian);
this.slice_code=h.Utils.getByteAt(f,122);this.xyzt_units=h.Utils.getByteAt(f,123);this.cal_max=h.Utils.getFloatAt(f,124,this.littleEndian);this.cal_min=h.Utils.getFloatAt(f,128,this.littleEndian);this.slice_duration=h.Utils.getFloatAt(f,132,this.littleEndian);this.toffset=h.Utils.getFloatAt(f,136,this.littleEndian);this.description=h.Utils.getStringAt(f,148,228);this.aux_file=h.Utils.getStringAt(f,228,252);this.qform_code=h.Utils.getShortAt(f,252,this.littleEndian);this.sform_code=h.Utils.getShortAt(f,
254,this.littleEndian);this.quatern_b=h.Utils.getFloatAt(f,256,this.littleEndian);this.quatern_c=h.Utils.getFloatAt(f,260,this.littleEndian);this.quatern_d=h.Utils.getFloatAt(f,264,this.littleEndian);this.qoffset_x=h.Utils.getFloatAt(f,268,this.littleEndian);this.qoffset_y=h.Utils.getFloatAt(f,272,this.littleEndian);this.qoffset_z=h.Utils.getFloatAt(f,276,this.littleEndian);for(a=0;3>a;a+=1)for(b=0;4>b;b+=1)c=280+4*(4*a+b),this.affine[a][b]=h.Utils.getFloatAt(f,c,this.littleEndian);this.affine[3][0]=
0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.intent_name=h.Utils.getStringAt(f,328,344);this.magic=h.Utils.getStringAt(f,344,348);this.isHDR=this.magic===h.NIFTI1.MAGIC_NUMBER2;f.byteLength>h.NIFTI1.MAGIC_COOKIE&&(this.extensionFlag[0]=h.Utils.getByteAt(f,348),this.extensionFlag[1]=h.Utils.getByteAt(f,349),this.extensionFlag[2]=h.Utils.getByteAt(f,350),this.extensionFlag[3]=h.Utils.getByteAt(f,351),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(f),this.extensionCode=
this.getExtensionCode(f)))};h.NIFTI1.prototype.toFormattedString=function(){var f=h.Utils.formatNumber;var c=""+("Dim Info = "+this.dim_info+"\n");c+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n";c+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n";c+="Intent Code = "+this.intent_code+"\n";c+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+
")\n";c+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n";c+="Slice Start = "+this.slice_start+"\n";c+="Voxel Dimensions (1-8): "+f(this.pixDims[0])+", "+f(this.pixDims[1])+", "+f(this.pixDims[2])+", "+f(this.pixDims[3])+", "+f(this.pixDims[4])+", "+f(this.pixDims[5])+", "+f(this.pixDims[6])+", "+f(this.pixDims[7])+"\n";c+="Image Offset = "+this.vox_offset+"\n";c+="Data Scale:  Slope = "+f(this.scl_slope)+"  Intercept = "+f(this.scl_inter)+"\n";c+="Slice End = "+this.slice_end+"\n";c+="Slice Code = "+
this.slice_code+"\n";c+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(h.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(h.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n";c+="Display Range:  Max = "+f(this.cal_max)+"  Min = "+f(this.cal_min)+"\n";c+="Slice Duration = "+this.slice_duration+"\n";c+="Time Axis Shift = "+this.toffset+"\n";c+='Description: "'+this.description+'"\n';c+='Auxiliary File: "'+this.aux_file+'"\n';c+="Q-Form Code = "+this.qform_code+" ("+
this.getTransformCodeString(this.qform_code)+")\n";c+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n";c+="Quaternion Parameters:  b = "+f(this.quatern_b)+"  c = "+f(this.quatern_c)+"  d = "+f(this.quatern_d)+"\n";c+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n";c+="S-Form Parameters X: "+f(this.affine[0][0])+", "+f(this.affine[0][1])+", "+f(this.affine[0][2])+", "+f(this.affine[0][3])+"\n";c+="S-Form Parameters Y: "+
f(this.affine[1][0])+", "+f(this.affine[1][1])+", "+f(this.affine[1][2])+", "+f(this.affine[1][3])+"\n";c+="S-Form Parameters Z: "+f(this.affine[2][0])+", "+f(this.affine[2][1])+", "+f(this.affine[2][2])+", "+f(this.affine[2][3])+"\n";c+='Intent Name: "'+this.intent_name+'"\n';this.extensionFlag[0]&&(c+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n");return c};h.NIFTI1.prototype.getDatatypeCodeString=function(f){return f===h.NIFTI1.TYPE_UINT8?"1-Byte Unsigned Integer":
f===h.NIFTI1.TYPE_INT16?"2-Byte Signed Integer":f===h.NIFTI1.TYPE_INT32?"4-Byte Signed Integer":f===h.NIFTI1.TYPE_FLOAT32?"4-Byte Float":f===h.NIFTI1.TYPE_FLOAT64?"8-Byte Float":f===h.NIFTI1.TYPE_RGB24?"RGB":f===h.NIFTI1.TYPE_INT8?"1-Byte Signed Integer":f===h.NIFTI1.TYPE_UINT16?"2-Byte Unsigned Integer":f===h.NIFTI1.TYPE_UINT32?"4-Byte Unsigned Integer":f===h.NIFTI1.TYPE_INT64?"8-Byte Signed Integer":f===h.NIFTI1.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"};h.NIFTI1.prototype.getTransformCodeString=
function(f){return f===h.NIFTI1.XFORM_SCANNER_ANAT?"Scanner":f===h.NIFTI1.XFORM_ALIGNED_ANAT?"Aligned":f===h.NIFTI1.XFORM_TALAIRACH?"Talairach":f===h.NIFTI1.XFORM_MNI_152?"MNI":"Unknown"};h.NIFTI1.prototype.getUnitsCodeString=function(f){return f===h.NIFTI1.UNITS_METER?"Meters":f===h.NIFTI1.UNITS_MM?"Millimeters":f===h.NIFTI1.UNITS_MICRON?"Microns":f===h.NIFTI1.UNITS_SEC?"Seconds":f===h.NIFTI1.UNITS_MSEC?"Milliseconds":f===h.NIFTI1.UNITS_USEC?"Microseconds":f===h.NIFTI1.UNITS_HZ?"Hz":f===h.NIFTI1.UNITS_PPM?
"PPM":f===h.NIFTI1.UNITS_RADS?"Rads":"Unknown"};h.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])};h.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=function(f,c,a,b,d,n,g,k,r,p){var h=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],t=a;h[3][0]=h[3][1]=h[3][2]=0;h[3][3]=1;a=1-(f*f+c*c+t*t);1E-7>a?(a=1/Math.sqrt(f*f+c*
c+t*t),f*=a,c*=a,t*=a,a=0):a=Math.sqrt(a);g=0<g?g:1;k=0<k?k:1;r=0<r?r:1;0>p&&(r=-r);h[0][0]=(a*a+f*f-c*c-t*t)*g;h[0][1]=2*(f*c-a*t)*k;h[0][2]=2*(f*t+a*c)*r;h[1][0]=2*(f*c+a*t)*g;h[1][1]=(a*a+c*c-f*f-t*t)*k;h[1][2]=2*(c*t-a*f)*r;h[2][0]=2*(f*t-a*c)*g;h[2][1]=2*(c*t+a*f)*k;h[2][2]=(a*a+t*t-c*c-f*f)*r;h[0][3]=b;h[1][3]=d;h[2][3]=n;return h};h.NIFTI1.prototype.convertNiftiSFormToNEMA=function(f){var c,a,b,d;var n=[[0,0,0],[0,0,0],[0,0,0]];var g=[[0,0,0],[0,0,0],[0,0,0]];var k=f[0][0];var r=f[0][1];var p=
f[0][2];var h=f[1][0];var t=f[1][1];var e=f[1][2];var l=f[2][0];var u=f[2][1];var A=f[2][2];f=Math.sqrt(k*k+h*h+l*l);if(0===f)return null;k/=f;h/=f;l/=f;f=Math.sqrt(r*r+t*t+u*u);if(0===f)return null;r/=f;t/=f;u/=f;f=k*r+h*t+l*u;if(1E-4<Math.abs(f)){r-=f*k;t-=f*h;u-=f*l;f=Math.sqrt(r*r+t*t+u*u);if(0===f)return null;r/=f;t/=f;u/=f}f=Math.sqrt(p*p+e*e+A*A);0===f?(p=h*u-l*t,e=l*r-u*k,A=k*t-h*r):(p/=f,e/=f,A/=f);f=k*p+h*e+l*A;if(1E-4<Math.abs(f)){p-=f*k;e-=f*h;A-=f*l;f=Math.sqrt(p*p+e*e+A*A);if(0===f)return null;
p/=f;e/=f;A/=f}f=r*p+t*e+u*A;if(1E-4<Math.abs(f)){p-=f*r;e-=f*t;A-=f*u;f=Math.sqrt(p*p+e*e+A*A);if(0===f)return null;p/=f;e/=f;A/=f}n[0][0]=k;n[0][1]=r;n[0][2]=p;n[1][0]=h;n[1][1]=t;n[1][2]=e;n[2][0]=l;n[2][1]=u;n[2][2]=A;l=this.nifti_mat33_determ(n);if(0===l)return null;var m=-666;k=h=t=e=1;r=2;p=3;for(u=1;3>=u;u+=1)for(A=1;3>=A;A+=1)if(u!==A)for(c=1;3>=c;c+=1)if(u!==c&&A!==c)for(g[0][0]=g[0][1]=g[0][2]=g[1][0]=g[1][1]=g[1][2]=g[2][0]=g[2][1]=g[2][2]=0,a=-1;1>=a;a+=2)for(b=-1;1>=b;b+=2)for(d=-1;1>=
d;d+=2)g[0][u-1]=a,g[1][A-1]=b,g[2][c-1]=d,f=this.nifti_mat33_determ(g),0<f*l&&(f=this.nifti_mat33_mul(g,n),f=f[0][0]+f[1][1]+f[2][2],f>m&&(m=f,k=u,r=A,p=c,h=a,t=b,e=d));n=g=f=l=u=A=0;switch(k*h){case 1:n="X";l="+";break;case -1:n="X";l="-";break;case 2:n="Y";l="+";break;case -2:n="Y";l="-";break;case 3:n="Z";l="+";break;case -3:n="Z",l="-"}switch(r*t){case 1:g="X";u="+";break;case -1:g="X";u="-";break;case 2:g="Y";u="+";break;case -2:g="Y";u="-";break;case 3:g="Z";u="+";break;case -3:g="Z",u="-"}switch(p*
e){case 1:f="X";A="+";break;case -1:f="X";A="-";break;case 2:f="Y";A="+";break;case -2:f="Y";A="-";break;case 3:f="Z";A="+";break;case -3:f="Z",A="-"}return n+g+f+l+u+A};h.NIFTI1.prototype.nifti_mat33_mul=function(f,c){var a=[[0,0,0],[0,0,0],[0,0,0]],b,d;for(b=0;3>b;b+=1)for(d=0;3>d;d+=1)a[b][d]=f[b][0]*c[0][d]+f[b][1]*c[1][d]+f[b][2]*c[2][d];return a};h.NIFTI1.prototype.nifti_mat33_determ=function(f){var c=f[0][0];var a=f[0][1];var b=f[0][2];var d=f[1][0];var n=f[1][1];var g=f[1][2];var k=f[2][0];
var h=f[2][1];f=f[2][2];return c*n*f-c*h*g-d*a*f+d*h*b+k*a*g-k*n*b};h.NIFTI1.prototype.getExtensionLocation=function(){return h.NIFTI1.MAGIC_COOKIE+4};h.NIFTI1.prototype.getExtensionSize=function(f){return h.Utils.getIntAt(f,this.getExtensionLocation(),this.littleEndian)};h.NIFTI1.prototype.getExtensionCode=function(f){return h.Utils.getIntAt(f,this.getExtensionLocation()+4,this.littleEndian)};"undefined"!==typeof m&&m.exports&&(m.exports=h.NIFTI1)},function(m,e,l){function h(a,b){if(!(a instanceof
b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}function a(a,b){b=b.match(E);if(null===b||void 0===b[1])throw Error('Data source URL must have the form "<protocol>://<path>".');var d=b[1];a=a.get(d);if(void 0===a)throw Error("Unsupported data source: "+JSON.stringify(d)+".");return[a,b[2],d]}function b(b,d,c,g){var q=$jscomp.makeIterator(a(A,d));d=q.next().value;q=q.next().value;return d.getMesh(b,q,c,g)}function d(b,d,c,g){var q=$jscomp.makeIterator(a(L,d));d=q.next().value;q=q.next().value;return d.getMeshVertexAttributes(b,
q,c,g)}function n(a){var b=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b=Math.min(b,c),d=Math.max(d,c);return[b,d]}function g(a,c,g,q){for(var k=[b(a,c.meshSourceUrl,g,q)],f=$jscomp.makeIterator(c.attributeSourceUrls),p=f.next();!p.done;p=f.next())k.push(d(a,p.value,g,q));return Promise.all(k).then(function(a){function b(a,b,d){for(var c=a.length,q=0;q<c;++q){var k=a[q],f=b[q],p=d,h=$jscomp.makeIterator(n(f)),r=h.next().value;
h=h.next().value;g.info.vertexAttributes.push({name:k.name,source:p,numComponents:k.numComponents,dataType:k.dataType,min:r,max:h});g.vertexAttributes.push(f)}}var d=a[0],g={info:{numVertices:d.info.numVertices,numTriangles:d.info.numTriangles,vertexAttributes:[]},vertexPositions:d.vertexPositions,indices:d.indices,vertexNormals:d.vertexNormals,vertexAttributes:[]};b(d.info.vertexAttributes,d.vertexAttributes);c.attributeSourceUrls.forEach(function(c,g){g=a[g+1];if(g.numVertices!==d.info.numVertices)throw Error("Vertex attribute source "+
JSON.stringify(c)+" specifies attributes for "+(g.numVertices+" vertices, but mesh has "+d.info.numVertices+" vertices."));b(g.attributeInfo,g.attributes,c)});return g})}e.a=function(a,b){A.set(a,b)};e.b=function(a,b){L.set(a,b)};m=l(2);var k=l(8),r=l(19),p=l(109),y=l(5),t=l(15);l=l(0);var v=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,
d);c&&a(b,c);return b}}(),z=function x(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return x(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}};e=this&&this.__decorate||function(a,b,d,c){var g=arguments.length,k=3>g?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,q;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=Reflect.decorate(a,b,d,c);else for(var n=
a.length-1;0<=n;n--)if(q=a[n])k=(3>g?q(k):3<g?q(b,d,k):q(b,d))||k;return 3<g&&k&&Object.defineProperty(b,d,k),k};var u=function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.data=null;return a}c(b,a);v(b,[{key:"freeSystemMemory",value:function(){this.data=null}},{key:"serialize",value:function(a,d){z(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,d);var c=this.data,g=c.vertexPositions,k=c.indices,q=c.vertexNormals;
c=c.vertexAttributes;a.vertexPositions=g;a.indices=k;a.vertexNormals=q;a.vertexAttributes=c;a=new Set;a.add(g.buffer);a.add(k.buffer);a.add(q.buffer);g=$jscomp.makeIterator(c);for(k=g.next();!k.done;k=g.next())a.add(k.value.buffer);d.push.apply(d,[].concat($jscomp.arrayFromIterable(a)));this.data=null}},{key:"downloadSucceeded",value:function(){var a=this.data,d=a.vertexAttributes;a=this.gpuMemoryBytes=a.vertexPositions.byteLength+a.indices.byteLength+a.vertexNormals.byteLength;d=$jscomp.makeIterator(d);
for(var c=d.next();!c.done;c=d.next())a+=c.value.byteLength;this.systemMemoryBytes=this.gpuMemoryBytes=a;z(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(m.Chunk),A=new Map,L=new Map,E=/^(?:([a-zA-Z-+_]+):\/\/)?(.*)$/,G=function(a){function b(){h(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);v(b,[{key:"getChunk",value:function(){var a=p.b,b=this.chunks.get(a);void 0===b&&(b=this.getNewChunk_(u),
b.initialize(a),this.addChunk(b));return b}},{key:"download",value:function(a,b){var d=this;return g(this.chunkManager,this.parameters,function(){return{priorityTier:a.priorityTier,priority:a.priority}},b).then(function(b){if(Object(y.c)(b.info)!==Object(y.c)(d.parameters.info))throw Error("Mesh info has changed.");void 0===b.vertexNormals&&(b.vertexNormals=Object(r.b)(b.vertexPositions,b.indices));a.data=b})}}]);return b}(Object(m.WithParameters)(m.ChunkSource,p.d));G=e([Object(l.g)()],G);m=function(a){function b(a,
d){h(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));c.source=c.registerDisposer(a.getRef(d.source));c.registerDisposer(c.chunkManager.recomputeChunkPriorities.add(function(){c.updateChunkPriorities()}));return c}c(b,a);v(b,[{key:"updateChunkPriorities",value:function(){var a=this.visibility.value;if(a!==Number.NEGATIVE_INFINITY){var b=Object(t.b)(a);a=Object(t.a)(a);var d=this.chunkManager,c=this.source.getChunk();d.requestChunk(c,b,a+50)}}}]);return b}(Object(t.c)(Object(m.withChunkManager)(l.c)));
m=e([Object(l.g)(p.c)],m);Object(l.e)(p.a,function(a,b){var d=this.getRef(a.chunkManager);try{return g(d,a.parameters,function(){return{priorityTier:k.d.VISIBLE,priority:1E3}},b).then(function(a){return{value:a.info}})}finally{d.dispose()}})},function(m,e,l){e.a=function(f){f=f instanceof ArrayBuffer?new Uint8Array(f):new Uint8Array(f.buffer,f.byteOffset,f.byteLength);var c=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);return 2<c.length&&31===c[0]&&139===c[1]?Object(h.inflate)(f):f};var h=l(26);
l.n(h)},function(m,e,l){l(47);l(2);l(22);l(61);l(37);l(92);l(94);l(99);l(100);l(102);l(107);m.exports=l(110)},function(m,e,l){Object.defineProperty(e,"__esModule",{value:!0});l.d(e,"rpc",function(){return h});var h=new (l(0).a)(self)},function(m,e,l){var h=function(){function f(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&f(c.prototype,a);b&&f(c,b);return c}}();m=
function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}h(f,null,[{key:"insertAfter",value:function(c,a){var b=c.next0;a.next0=b;a.prev0=c;c.next0=a;b.prev0=a}},{key:"insertBefore",value:function(c,a){var b=c.prev0;a.prev0=b;a.next0=c;c.prev0=a;b.next0=a}},{key:"front",value:function(c){var a=c.next0;return a===c?null:a}},{key:"back",value:function(c){var a=c.prev0;return a===c?null:a}},{key:"pop",value:function(c){var a=c.next0,b=c.prev0;a.prev0=
b;b.next0=a;c.next0=null;c.prev0=null;return c}},{key:"iterator",value:function(c){function a(a,k){for(;;)switch(b){case 0:d=c.next0;case 1:if(d===c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===k){b=5;break}b=-1;throw k;case 5:case 2:d=d.next0;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,n={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();n[Symbol.iterator]=
function(){return this};return n}},{key:"reverseIterator",value:function(c){function a(a,k){for(;;)switch(b){case 0:d=c.prev0;case 1:if(d===c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===k){b=5;break}b=-1;throw k;case 5:case 2:d=d.prev0;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,n={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();n[Symbol.iterator]=
function(){return this};return n}},{key:"initializeHead",value:function(c){c.next0=c.prev0=c}}]);return f}();e.a=m},function(m,e,l){var h=function(){function f(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&f(c.prototype,a);b&&f(c,b);return c}}();m=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");}h(f,null,[{key:"insertAfter",
value:function(c,a){var b=c.next1;a.next1=b;a.prev1=c;c.next1=a;b.prev1=a}},{key:"insertBefore",value:function(c,a){var b=c.prev1;a.prev1=b;a.next1=c;c.prev1=a;b.next1=a}},{key:"front",value:function(c){var a=c.next1;return a===c?null:a}},{key:"back",value:function(c){var a=c.prev1;return a===c?null:a}},{key:"pop",value:function(c){var a=c.next1,b=c.prev1;a.prev1=b;b.next1=a;c.next1=null;c.prev1=null;return c}},{key:"iterator",value:function(c){function a(a,k){for(;;)switch(b){case 0:d=c.next1;case 1:if(d===
c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===k){b=5;break}b=-1;throw k;case 5:case 2:d=d.next1;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,n={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();n[Symbol.iterator]=function(){return this};return n}},{key:"reverseIterator",value:function(c){function a(a,k){for(;;)switch(b){case 0:d=c.prev1;case 1:if(d===
c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===k){b=5;break}b=-1;throw k;case 5:case 2:d=d.prev1;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,n={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();n[Symbol.iterator]=function(){return this};return n}},{key:"initializeHead",value:function(c){c.next1=c.prev1=c}}]);return f}();e.a=m},function(m,e,l){l(3)},
function(m,e,l){l(3)},function(m,e,l){function h(a,b,d){var c=b[0],g=b[1],k=b[2],f=b[3],p=b[4],h=b[5],e=b[6],l=b[7],z=b[8],u=b[9],A=b[10],m=b[11],E=b[12],G=b[13],w=b[14];b=b[15];var x=d[0],K=d[1],q=d[2],I=d[3];a[0]=x*c+K*p+q*z+I*E;a[1]=x*g+K*h+q*u+I*G;a[2]=x*k+K*e+q*A+I*w;a[3]=x*f+K*l+q*m+I*b;x=d[4];K=d[5];q=d[6];I=d[7];a[4]=x*c+K*p+q*z+I*E;a[5]=x*g+K*h+q*u+I*G;a[6]=x*k+K*e+q*A+I*w;a[7]=x*f+K*l+q*m+I*b;x=d[8];K=d[9];q=d[10];I=d[11];a[8]=x*c+K*p+q*z+I*E;a[9]=x*g+K*h+q*u+I*G;a[10]=x*k+K*e+q*A+I*w;a[11]=
x*f+K*l+q*m+I*b;x=d[12];K=d[13];q=d[14];I=d[15];a[12]=x*c+K*p+q*z+I*E;a[13]=x*g+K*h+q*u+I*G;a[14]=x*k+K*e+q*A+I*w;a[15]=x*f+K*l+q*m+I*b;return a}function f(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];a[4]=b[4]-d[4];a[5]=b[5]-d[5];a[6]=b[6]-d[6];a[7]=b[7]-d[7];a[8]=b[8]-d[8];a[9]=b[9]-d[9];a[10]=b[10]-d[10];a[11]=b[11]-d[11];a[12]=b[12]-d[12];a[13]=b[13]-d[13];a[14]=b[14]-d[14];a[15]=b[15]-d[15];return a}Object.defineProperty(e,"__esModule",{value:!0});e.create=function(){var a=
new c.a(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.clone=function(a){var b=new c.a(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};e.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];
a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};e.fromValues=function(a,b,d,n,g,k,f,p,h,e,l,z,u,A,m,E){var r=new c.a(16);r[0]=a;r[1]=b;r[2]=d;r[3]=n;r[4]=g;r[5]=k;r[6]=f;r[7]=p;r[8]=h;r[9]=e;r[10]=l;r[11]=z;r[12]=u;r[13]=A;r[14]=m;r[15]=E;return r};e.set=function(a,b,d,c,g,k,f,p,h,e,l,z,u,A,m,E,G){a[0]=b;a[1]=d;a[2]=c;a[3]=g;a[4]=k;a[5]=f;a[6]=p;a[7]=h;a[8]=e;a[9]=l;a[10]=z;a[11]=u;a[12]=A;a[13]=m;a[14]=E;a[15]=G;return a};e.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;
a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.transpose=function(a,b){if(a===b){var d=b[1],c=b[2],g=b[3],k=b[6],f=b[7],p=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=d;a[6]=b[9];a[7]=b[13];a[8]=c;a[9]=k;a[11]=b[14];a[12]=g;a[13]=f;a[14]=p}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};e.invert=function(a,b){var d=b[0],c=
b[1],g=b[2],k=b[3],f=b[4],p=b[5],h=b[6],e=b[7],l=b[8],z=b[9],u=b[10],A=b[11],m=b[12],E=b[13],G=b[14];b=b[15];var w=d*p-c*f,x=d*h-g*f,K=d*e-k*f,q=c*h-g*p,I=c*e-k*p,H=g*e-k*h,D=l*E-z*m,C=l*G-u*m,F=l*b-A*m,O=z*G-u*E,N=z*b-A*E,Q=u*b-A*G,J=w*Q-x*N+K*O+q*F-I*C+H*D;if(!J)return null;J=1/J;a[0]=(p*Q-h*N+e*O)*J;a[1]=(g*N-c*Q-k*O)*J;a[2]=(E*H-G*I+b*q)*J;a[3]=(u*I-z*H-A*q)*J;a[4]=(h*F-f*Q-e*C)*J;a[5]=(d*Q-g*F+k*C)*J;a[6]=(G*K-m*H-b*x)*J;a[7]=(l*H-u*K+A*x)*J;a[8]=(f*N-p*F+e*D)*J;a[9]=(c*F-d*N-k*D)*J;a[10]=(m*
I-E*K+b*w)*J;a[11]=(z*K-l*I-A*w)*J;a[12]=(p*C-f*O-h*D)*J;a[13]=(d*O-c*C+g*D)*J;a[14]=(E*x-m*q-G*w)*J;a[15]=(l*q-z*x+u*w)*J;return a};e.adjoint=function(a,b){var d=b[0],c=b[1],g=b[2],k=b[3],f=b[4],p=b[5],h=b[6],e=b[7],l=b[8],z=b[9],u=b[10],A=b[11],m=b[12],E=b[13],G=b[14];b=b[15];a[0]=p*(u*b-A*G)-z*(h*b-e*G)+E*(h*A-e*u);a[1]=-(c*(u*b-A*G)-z*(g*b-k*G)+E*(g*A-k*u));a[2]=c*(h*b-e*G)-p*(g*b-k*G)+E*(g*e-k*h);a[3]=-(c*(h*A-e*u)-p*(g*A-k*u)+z*(g*e-k*h));a[4]=-(f*(u*b-A*G)-l*(h*b-e*G)+m*(h*A-e*u));a[5]=d*(u*
b-A*G)-l*(g*b-k*G)+m*(g*A-k*u);a[6]=-(d*(h*b-e*G)-f*(g*b-k*G)+m*(g*e-k*h));a[7]=d*(h*A-e*u)-f*(g*A-k*u)+l*(g*e-k*h);a[8]=f*(z*b-A*E)-l*(p*b-e*E)+m*(p*A-e*z);a[9]=-(d*(z*b-A*E)-l*(c*b-k*E)+m*(c*A-k*z));a[10]=d*(p*b-e*E)-f*(c*b-k*E)+m*(c*e-k*p);a[11]=-(d*(p*A-e*z)-f*(c*A-k*z)+l*(c*e-k*p));a[12]=-(f*(z*G-u*E)-l*(p*G-h*E)+m*(p*u-h*z));a[13]=d*(z*G-u*E)-l*(c*G-g*E)+m*(c*u-g*z);a[14]=-(d*(p*G-h*E)-f*(c*G-g*E)+m*(c*h-g*p));a[15]=d*(p*u-h*z)-f*(c*u-g*z)+l*(c*h-g*p);return a};e.determinant=function(a){var b=
a[0],d=a[1],c=a[2],g=a[3],k=a[4],f=a[5],p=a[6],h=a[7],e=a[8],l=a[9],z=a[10],u=a[11],A=a[12],m=a[13],E=a[14];a=a[15];return(b*f-d*k)*(z*a-u*E)-(b*p-c*k)*(l*a-u*m)+(b*h-g*k)*(l*E-z*m)+(d*p-c*f)*(e*a-u*A)-(d*h-g*f)*(e*E-z*A)+(c*h-g*p)*(e*m-l*A)};e.multiply=h;e.translate=function(a,b,d){var c=d[0],g=d[1];d=d[2];if(b===a)a[12]=b[0]*c+b[4]*g+b[8]*d+b[12],a[13]=b[1]*c+b[5]*g+b[9]*d+b[13],a[14]=b[2]*c+b[6]*g+b[10]*d+b[14],a[15]=b[3]*c+b[7]*g+b[11]*d+b[15];else{var k=b[0];var f=b[1];var p=b[2];var h=b[3];
var e=b[4];var l=b[5];var z=b[6];var u=b[7];var A=b[8];var m=b[9];var E=b[10];var G=b[11];a[0]=k;a[1]=f;a[2]=p;a[3]=h;a[4]=e;a[5]=l;a[6]=z;a[7]=u;a[8]=A;a[9]=m;a[10]=E;a[11]=G;a[12]=k*c+e*g+A*d+b[12];a[13]=f*c+l*g+m*d+b[13];a[14]=p*c+z*g+E*d+b[14];a[15]=h*c+u*g+G*d+b[15]}return a};e.scale=function(a,b,d){var c=d[0],g=d[1];d=d[2];a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*g;a[5]=b[5]*g;a[6]=b[6]*g;a[7]=b[7]*g;a[8]=b[8]*d;a[9]=b[9]*d;a[10]=b[10]*d;a[11]=b[11]*d;a[12]=b[12];a[13]=b[13];
a[14]=b[14];a[15]=b[15];return a};e.rotate=function(a,b,d,f){var g=f[0],k=f[1];f=f[2];var n=Math.sqrt(g*g+k*k+f*f);if(Math.abs(n)<c.b)return null;n=1/n;g*=n;k*=n;f*=n;var p=Math.sin(d);var h=Math.cos(d);var e=1-h;d=b[0];n=b[1];var l=b[2];var z=b[3];var u=b[4];var m=b[5];var L=b[6];var E=b[7];var G=b[8];var w=b[9];var x=b[10];var K=b[11];var q=g*g*e+h;var I=k*g*e+f*p;var H=f*g*e-k*p;var D=g*k*e-f*p;var C=k*k*e+h;var F=f*k*e+g*p;var O=g*f*e+k*p;g=k*f*e-g*p;k=f*f*e+h;a[0]=d*q+u*I+G*H;a[1]=n*q+m*I+w*
H;a[2]=l*q+L*I+x*H;a[3]=z*q+E*I+K*H;a[4]=d*D+u*C+G*F;a[5]=n*D+m*C+w*F;a[6]=l*D+L*C+x*F;a[7]=z*D+E*C+K*F;a[8]=d*O+u*g+G*k;a[9]=n*O+m*g+w*k;a[10]=l*O+L*g+x*k;a[11]=z*O+E*g+K*k;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};e.rotateX=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var g=b[4],k=b[5],f=b[6],h=b[7],e=b[8],l=b[9],v=b[10],m=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=g*d+e*c;a[5]=k*d+l*c;a[6]=f*d+v*c;a[7]=
h*d+m*c;a[8]=e*d-g*c;a[9]=l*d-k*c;a[10]=v*d-f*c;a[11]=m*d-h*c;return a};e.rotateY=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var g=b[0],k=b[1],f=b[2],h=b[3],e=b[8],l=b[9],v=b[10],m=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=g*d-e*c;a[1]=k*d-l*c;a[2]=f*d-v*c;a[3]=h*d-m*c;a[8]=g*c+e*d;a[9]=k*c+l*d;a[10]=f*c+v*d;a[11]=h*c+m*d;return a};e.rotateZ=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var g=b[0],k=b[1],f=b[2],h=b[3],e=b[4],
l=b[5],v=b[6],m=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=g*d+e*c;a[1]=k*d+l*c;a[2]=f*d+v*c;a[3]=h*d+m*c;a[4]=e*d-g*c;a[5]=l*d-k*c;a[6]=v*d-f*c;a[7]=m*d-h*c;return a};e.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};e.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;
a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromRotation=function(a,b,d){var f=d[0],g=d[1];d=d[2];var k=Math.sqrt(f*f+g*g+d*d);if(Math.abs(k)<c.b)return null;k=1/k;f*=k;g*=k;d*=k;k=Math.sin(b);b=Math.cos(b);var h=1-b;a[0]=f*f*h+b;a[1]=g*f*h+d*k;a[2]=d*f*h-g*k;a[3]=0;a[4]=f*g*h-d*k;a[5]=g*g*h+b;a[6]=d*g*h+f*k;a[7]=0;a[8]=f*d*h+g*k;a[9]=g*d*h-f*k;a[10]=d*d*h+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromXRotation=function(a,b){var d=Math.sin(b);b=Math.cos(b);a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromYRotation=function(a,b){var d=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.fromZRotation=function(a,b){var d=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
e.fromRotationTranslation=function(a,b,d){var c=b[0],g=b[1],k=b[2],f=b[3],h=c+c,e=g+g,l=k+k;b=c*h;var v=c*e;c*=l;var m=g*e;g*=l;k*=l;h*=f;e*=f;f*=l;a[0]=1-(m+k);a[1]=v+f;a[2]=c-e;a[3]=0;a[4]=v-f;a[5]=1-(b+k);a[6]=g+h;a[7]=0;a[8]=c+e;a[9]=g-h;a[10]=1-(b+m);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};e.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};e.getScaling=function(a,b){var d=b[0],c=b[1],g=b[2],k=b[4],f=b[5],h=b[6],e=b[8],l=b[9];b=b[10];a[0]=Math.sqrt(d*
d+c*c+g*g);a[1]=Math.sqrt(k*k+f*f+h*h);a[2]=Math.sqrt(e*e+l*l+b*b);return a};e.getRotation=function(a,b){var d=b[0]+b[5]+b[10];0<d?(d=2*Math.sqrt(d+1),a[3]=.25*d,a[0]=(b[6]-b[9])/d,a[1]=(b[8]-b[2])/d,a[2]=(b[1]-b[4])/d):b[0]>b[5]&b[0]>b[10]?(d=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/d,a[0]=.25*d,a[1]=(b[1]+b[4])/d,a[2]=(b[8]+b[2])/d):b[5]>b[10]?(d=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/d,a[0]=(b[1]+b[4])/d,a[1]=.25*d,a[2]=(b[6]+b[9])/d):(d=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-
b[4])/d,a[0]=(b[8]+b[2])/d,a[1]=(b[6]+b[9])/d,a[2]=.25*d);return a};e.fromRotationTranslationScale=function(a,b,d,c){var g=b[0],k=b[1],f=b[2],h=b[3],e=g+g,n=k+k,l=f+f;b=g*e;var m=g*n;g*=l;var u=k*n;k*=l;f*=l;e*=h;n*=h;h*=l;l=c[0];var A=c[1];c=c[2];a[0]=(1-(u+f))*l;a[1]=(m+h)*l;a[2]=(g-n)*l;a[3]=0;a[4]=(m-h)*A;a[5]=(1-(b+f))*A;a[6]=(k+e)*A;a[7]=0;a[8]=(g+n)*c;a[9]=(k-e)*c;a[10]=(1-(b+u))*c;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};e.fromRotationTranslationScaleOrigin=function(a,b,
c,f,g){var d=b[0],h=b[1],p=b[2],e=b[3],n=d+d,l=h+h,m=p+p;b=d*n;var u=d*l;d*=m;var A=h*l;h*=m;p*=m;n*=e;l*=e;e*=m;m=f[0];var L=f[1];f=f[2];var E=g[0],G=g[1];g=g[2];a[0]=(1-(A+p))*m;a[1]=(u+e)*m;a[2]=(d-l)*m;a[3]=0;a[4]=(u-e)*L;a[5]=(1-(b+p))*L;a[6]=(h+n)*L;a[7]=0;a[8]=(d+l)*f;a[9]=(h-n)*f;a[10]=(1-(b+A))*f;a[11]=0;a[12]=c[0]+E-(a[0]*E+a[4]*G+a[8]*g);a[13]=c[1]+G-(a[1]*E+a[5]*G+a[9]*g);a[14]=c[2]+g-(a[2]*E+a[6]*G+a[10]*g);a[15]=1;return a};e.fromQuat=function(a,b){var c=b[0],f=b[1],g=b[2];b=b[3];var k=
c+c,h=f+f,e=g+g;c*=k;var l=f*k;f*=h;var t=g*k,m=g*h;g*=e;k*=b;h*=b;b*=e;a[0]=1-f-g;a[1]=l+b;a[2]=t-h;a[3]=0;a[4]=l-b;a[5]=1-c-g;a[6]=m+k;a[7]=0;a[8]=t+h;a[9]=m-k;a[10]=1-c-f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};e.frustum=function(a,b,c,f,g,k,h){var d=1/(c-b),e=1/(g-f),n=1/(k-h);a[0]=2*k*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*k*e;a[6]=0;a[7]=0;a[8]=(c+b)*d;a[9]=(g+f)*e;a[10]=(h+k)*n;a[11]=-1;a[12]=0;a[13]=0;a[14]=h*k*2*n;a[15]=0;return a};e.perspective=function(a,b,c,f,g){b=1/Math.tan(b/
2);var d=1/(f-g);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(g+f)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*g*f*d;a[15]=0;return a};e.perspectiveFromFieldOfView=function(a,b,c,f){var d=Math.tan(b.upDegrees*Math.PI/180),k=Math.tan(b.downDegrees*Math.PI/180),h=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var e=2/(h+b),n=2/(d+k);a[0]=e;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=n;a[6]=0;a[7]=0;a[8]=-((h-b)*e*.5);a[9]=(d-k)*n*.5;a[10]=f/(c-f);a[11]=-1;a[12]=
0;a[13]=0;a[14]=f*c/(c-f);a[15]=0;return a};e.ortho=function(a,b,c,f,g,k,h){var d=1/(b-c),e=1/(f-g),n=1/(k-h);a[0]=-2*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*e;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*n;a[11]=0;a[12]=(b+c)*d;a[13]=(g+f)*e;a[14]=(h+k)*n;a[15]=1;return a};e.lookAt=function(a,b,d,f){var g=b[0],k=b[1];b=b[2];var h=f[0];var e=f[1];var n=f[2];var l=d[0];f=d[1];var m=d[2];if(Math.abs(g-l)<c.b&&Math.abs(k-f)<c.b&&Math.abs(b-m)<c.b)return mat4.identity(a);d=g-l;f=k-f;l=b-m;var z=1/Math.sqrt(d*d+
f*f+l*l);d*=z;f*=z;l*=z;m=e*l-n*f;n=n*d-h*l;h=h*f-e*d;(z=Math.sqrt(m*m+n*n+h*h))?(z=1/z,m*=z,n*=z,h*=z):h=n=m=0;e=f*h-l*n;var u=l*m-d*h;var A=d*n-f*m;(z=Math.sqrt(e*e+u*u+A*A))?(z=1/z,e*=z,u*=z,A*=z):A=u=e=0;a[0]=m;a[1]=e;a[2]=d;a[3]=0;a[4]=n;a[5]=u;a[6]=f;a[7]=0;a[8]=h;a[9]=A;a[10]=l;a[11]=0;a[12]=-(m*g+n*k+h*b);a[13]=-(e*g+u*k+A*b);a[14]=-(d*g+f*k+l*b);a[15]=1;return a};e.targetTo=function(a,b,c,f){var d=b[0],k=b[1];b=b[2];var h=f[0],e=f[1],n=f[2];f=d-c[0];var l=k-c[1];c=b-c[2];var m=f*f+l*l+c*
c;0<m&&(m=1/Math.sqrt(m),f*=m,l*=m,c*=m);m=e*c-n*l;n=n*f-h*c;h=h*l-e*f;a[0]=m;a[1]=n;a[2]=h;a[3]=0;a[4]=l*h-c*n;a[5]=c*m-f*h;a[6]=f*n-l*m;a[7]=0;a[8]=f;a[9]=l;a[10]=c;a[11]=0;a[12]=d;a[13]=k;a[14]=b;a[15]=1;return a};e.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};e.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+
Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};e.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+
c[15];return a};e.subtract=f;e.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a};e.multiplyScalarAndAdd=function(a,b,c,f){a[0]=b[0]+c[0]*f;a[1]=b[1]+c[1]*f;a[2]=b[2]+c[2]*f;a[3]=b[3]+c[3]*f;a[4]=b[4]+c[4]*f;a[5]=b[5]+c[5]*f;a[6]=b[6]+c[6]*f;a[7]=b[7]+c[7]*f;a[8]=b[8]+c[8]*f;a[9]=b[9]+c[9]*f;a[10]=b[10]+c[10]*
f;a[11]=b[11]+c[11]*f;a[12]=b[12]+c[12]*f;a[13]=b[13]+c[13]*f;a[14]=b[14]+c[14]*f;a[15]=b[15]+c[15]*f;return a};e.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};e.equals=function(a,b){var d=a[0],f=a[1],g=a[2],k=a[3],h=a[4],e=a[5],l=a[6],t=a[7],m=a[8],z=a[9],u=a[10],A=a[11],L=a[12],E=a[13],G=a[14];
a=a[15];var w=b[0],x=b[1],K=b[2],q=b[3],I=b[4],H=b[5],D=b[6],C=b[7],F=b[8],O=b[9],N=b[10],Q=b[11],J=b[12],B=b[13],M=b[14];b=b[15];return Math.abs(d-w)<=c.b*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(f-x)<=c.b*Math.max(1,Math.abs(f),Math.abs(x))&&Math.abs(g-K)<=c.b*Math.max(1,Math.abs(g),Math.abs(K))&&Math.abs(k-q)<=c.b*Math.max(1,Math.abs(k),Math.abs(q))&&Math.abs(h-I)<=c.b*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(e-H)<=c.b*Math.max(1,Math.abs(e),Math.abs(H))&&Math.abs(l-D)<=c.b*Math.max(1,
Math.abs(l),Math.abs(D))&&Math.abs(t-C)<=c.b*Math.max(1,Math.abs(t),Math.abs(C))&&Math.abs(m-F)<=c.b*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(z-O)<=c.b*Math.max(1,Math.abs(z),Math.abs(O))&&Math.abs(u-N)<=c.b*Math.max(1,Math.abs(u),Math.abs(N))&&Math.abs(A-Q)<=c.b*Math.max(1,Math.abs(A),Math.abs(Q))&&Math.abs(L-J)<=c.b*Math.max(1,Math.abs(L),Math.abs(J))&&Math.abs(E-B)<=c.b*Math.max(1,Math.abs(E),Math.abs(B))&&Math.abs(G-M)<=c.b*Math.max(1,Math.abs(G),Math.abs(M))&&Math.abs(a-b)<=c.b*Math.max(1,
Math.abs(a),Math.abs(b))};var c=l(3);e.mul=h;e.sub=f},function(m,e,l){function h(){var a=new d.a(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}function f(a,b,c){c*=.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a}function c(a,b,c){var d=b[0],g=b[1],k=b[2];b=b[3];var f=c[0],h=c[1],e=c[2];c=c[3];a[0]=d*c+b*f+g*e-k*h;a[1]=g*c+b*h+k*f-d*e;a[2]=k*c+b*e+d*h-g*f;a[3]=b*c-d*f-g*h-k*e;return a}function a(a,b,c,d){var g=b[0],k=b[1],f=b[2];b=b[3];var h=c[0],e=c[1],n=c[2];c=c[3];var p=
g*h+k*e+f*n+b*c;0>p&&(p=-p,h=-h,e=-e,n=-n,c=-c);if(1E-6<1-p){var l=Math.acos(p);var r=Math.sin(l);p=Math.sin((1-d)*l)/r;d=Math.sin(d*l)/r}else p=1-d;a[0]=p*g+d*h;a[1]=p*k+d*e;a[2]=p*f+d*n;a[3]=p*b+d*c;return a}function b(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var g=(d+1)%3,k=(d+2)%3;c=Math.sqrt(b[3*d+d]-b[3*g+g]-b[3*k+k]+1);a[d]=.5*c;c=.5/c;a[3]=(b[3*g+k]-b[3*k+g])*
c;a[g]=(b[3*g+d]+b[3*d+g])*c;a[k]=(b[3*k+d]+b[3*d+k])*c}return a}Object.defineProperty(e,"__esModule",{value:!0});e.create=h;e.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};e.setAxisAngle=f;e.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);0!=d?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0);return c};e.multiply=c;e.rotateX=function(a,b,c){c*=.5;var d=b[0],g=b[1],k=b[2];b=b[3];var f=Math.sin(c);c=Math.cos(c);a[0]=d*c+b*f;a[1]=g*c+k*f;a[2]=k*c-g*f;a[3]=
b*c-d*f;return a};e.rotateY=function(a,b,c){c*=.5;var d=b[0],g=b[1],k=b[2];b=b[3];var f=Math.sin(c);c=Math.cos(c);a[0]=d*c-k*f;a[1]=g*c+b*f;a[2]=k*c+d*f;a[3]=b*c-g*f;return a};e.rotateZ=function(a,b,c){c*=.5;var d=b[0],g=b[1],k=b[2];b=b[3];var f=Math.sin(c);c=Math.cos(c);a[0]=d*c+g*f;a[1]=g*c-d*f;a[2]=k*c+b*f;a[3]=b*c-k*f;return a};e.calculateW=function(a,b){var c=b[0],d=b[1];b=b[2];a[0]=c;a[1]=d;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-b*b));return a};e.slerp=a;e.invert=function(a,b){var c=b[0],
d=b[1],g=b[2];b=b[3];var k=c*c+d*d+g*g+b*b;k=k?1/k:0;a[0]=-c*k;a[1]=-d*k;a[2]=-g*k;a[3]=b*k;return a};e.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};e.fromMat3=b;e.fromEuler=function(a,b,c,d){var g=.5*Math.PI/180;b*=g;c*=g;d*=g;g=Math.sin(b);b=Math.cos(b);var k=Math.sin(c);c=Math.cos(c);var f=Math.sin(d);d=Math.cos(d);a[0]=g*c*d-b*k*f;a[1]=b*k*d+g*c*f;a[2]=b*c*f-g*k*d;a[3]=b*c*d+g*k*f;return a};e.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};
var d=l(3),n=l(32),g=l(33);m=l(34);e.clone=m.b;e.fromValues=m.g;e.copy=m.c;e.set=m.l;e.add=m.a;e.mul=c;e.scale=m.k;e.dot=m.d;e.lerp=m.i;l=m.h;e.length=l;e.len=l;l=m.m;e.squaredLength=l;e.sqrLen=l;var k=m.j;e.normalize=k;e.exactEquals=m.f;e.equals=m.e;m=function(){var a=g.create(),b=g.fromValues(1,0,0),c=g.fromValues(0,1,0);return function(d,h,e){var n=g.dot(h,e);if(-.999999>n)return g.cross(a,b,h),1E-6>g.len(a)&&g.cross(a,c,h),g.normalize(a,a),f(d,a,Math.PI),d;if(.999999<n)return d[0]=0,d[1]=0,d[2]=
0,d[3]=1,d;g.cross(a,h,e);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=1+n;return k(d,d)}}();e.rotationTo=m;m=function(){var b=h(),c=h();return function(d,g,k,f,h,e){a(b,g,h,e);a(c,k,f,e);a(d,b,c,2*e*(1-e));return d}}();e.sqlerp=m;m=function(){var a=n.a();return function(c,d,g,f){a[0]=g[0];a[3]=g[1];a[6]=g[2];a[1]=f[0];a[4]=f[1];a[7]=f[2];a[2]=-d[0];a[5]=-d[1];a[8]=-d[2];return k(c,b(c,a))}}();e.setAxes=m},function(m,e,l){function h(){var c=new f.a(2);c[0]=0;c[1]=0;return c}var f=l(3);(function(){var c=h();
return function(a,b,d,f,g,k){b||(b=2);d||(d=0);for(f=f?Math.min(f*b+d,a.length):a.length;d<f;d+=b)c[0]=a[d],c[1]=a[d+1],g(c,c,k),a[d]=c[0],a[d+1]=c[1];return a}})()},function(m,e,l){var h=function(){function f(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&f(c.prototype,a);b&&f(c,b);return c}}();m=function(){function f(c){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");
this.compare=c}h(f,[{key:"meld",value:function(c,a){if(null===a)return c;if(null===c)return a;var b=this.compare;b(a,c)&&(b=c,c=a,a=b);b=c.child0;a.next0=b;a.prev0=c;null!==b&&(b.prev0=a);c.child0=a;return c}},{key:"combineChildren",value:function(c){var a=c.child0;if(null===a)return null;for(c=null;;){var b=a.next0;if(null===b)var d=null;else d=b.next0,a=this.meld(a,b);a.next0=c;c=a;if(null===d)break;a=d}d=c;for(c=c.next0;null!==c;)a=c.next0,d=this.meld(d,c),c=a;d.prev0=null;d.next0=null;return d}},
{key:"removeMin",value:function(c){var a=this.combineChildren(c);c.next0=null;c.prev0=null;c.child0=null;return a}},{key:"remove",value:function(c,a){if(c===a)return this.removeMin(c);var b=a.prev0,d=a.next0;b.child0===a?b.child0=d:b.next0=d;null!==d&&(d.prev0=b);c=this.meld(c,this.combineChildren(a));a.next0=null;a.prev0=null;a.child0=null;return c}},{key:"entries",value:function(c){function a(a,e){for(;;)switch(b){case 0:if(null===c){b=1;break}k=c.child0;b=2;return{value:c,done:!1};case 2:if(void 0===
e){b=3;break}b=-1;throw e;case 3:case 4:if(null===k){b=5;break}g=k.next0;f=$jscomp.makeIterator(h.entries(k));case 6:if((d=f.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===e){b=9;break}b=-1;throw e;case 9:b=6;break;case 7:k=g;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,f,g,k,h=this,e={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();
e[Symbol.iterator]=function(){return this};return e}},{key:"removedEntries",value:function(c){function a(a,e){for(;;)switch(b){case 0:if(null===c){b=1;break}k=c.child0;c.child0=null;c.next0=null;c.prev0=null;b=2;return{value:c,done:!1};case 2:if(void 0===e){b=3;break}b=-1;throw e;case 3:case 4:if(null===k){b=5;break}g=k.next0;k.child0=null;k.next0=null;k.prev0=null;f=$jscomp.makeIterator(h.entries(k));case 6:if((d=f.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===e){b=
9;break}b=-1;throw e;case 9:b=6;break;case 7:k=g;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,f,g,k,h=this,e={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();e[Symbol.iterator]=function(){return this};return e}}]);return f}();e.a=m},function(m,e,l){var h=function(){function f(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&f(c.prototype,a);b&&f(c,b);return c}}();m=function(){function f(c){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.compare=c}h(f,[{key:"meld",value:function(c,a){if(null===a)return c;if(null===c)return a;var b=this.compare;b(a,c)&&(b=c,c=a,a=b);b=c.child1;a.next1=b;a.prev1=c;null!==b&&(b.prev1=a);c.child1=a;return c}},{key:"combineChildren",value:function(c){var a=c.child1;
if(null===a)return null;for(c=null;;){var b=a.next1;if(null===b)var d=null;else d=b.next1,a=this.meld(a,b);a.next1=c;c=a;if(null===d)break;a=d}d=c;for(c=c.next1;null!==c;)a=c.next1,d=this.meld(d,c),c=a;d.prev1=null;d.next1=null;return d}},{key:"removeMin",value:function(c){var a=this.combineChildren(c);c.next1=null;c.prev1=null;c.child1=null;return a}},{key:"remove",value:function(c,a){if(c===a)return this.removeMin(c);var b=a.prev1,d=a.next1;b.child1===a?b.child1=d:b.next1=d;null!==d&&(d.prev1=b);
c=this.meld(c,this.combineChildren(a));a.next1=null;a.prev1=null;a.child1=null;return c}},{key:"entries",value:function(c){function a(a,e){for(;;)switch(b){case 0:if(null===c){b=1;break}k=c.child1;b=2;return{value:c,done:!1};case 2:if(void 0===e){b=3;break}b=-1;throw e;case 3:case 4:if(null===k){b=5;break}g=k.next1;f=$jscomp.makeIterator(h.entries(k));case 6:if((d=f.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===e){b=9;break}b=-1;throw e;case 9:b=6;break;case 7:k=g;
b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,f,g,k,h=this,e={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();e[Symbol.iterator]=function(){return this};return e}},{key:"removedEntries",value:function(c){function a(a,e){for(;;)switch(b){case 0:if(null===c){b=1;break}k=c.child1;c.child1=null;c.next1=null;c.prev1=null;b=2;return{value:c,done:!1};case 2:if(void 0===
e){b=3;break}b=-1;throw e;case 3:case 4:if(null===k){b=5;break}g=k.next1;k.child1=null;k.next1=null;k.prev1=null;f=$jscomp.makeIterator(h.entries(k));case 6:if((d=f.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===e){b=9;break}b=-1;throw e;case 9:b=6;break;case 7:k=g;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,f,g,k,h=this,e={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");
}};$jscomp.initSymbolIterator();e[Symbol.iterator]=function(){return this};return e}}]);return f}();e.a=m},function(m,e,l){l.d(e,"a",function(){return c});var h=l(1),f=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,f){c&&a(b.prototype,c);f&&a(b,f);return b}}(),c=function(){function a(b,c){c=void 0===c?h.c:c;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.size=h.l.clone(b);this.transform=h.g.clone(c);this.invTransform=h.g.invert(h.g.create(),c)}f(a,[{key:"toObject",value:function(a){a.size=this.size;a.transform=this.transform}},{key:"localSpatialToGlobal",value:function(a,c){return h.l.transformMat4(a,c,this.transform)}},{key:"globalToLocalSpatial",value:function(a,c){return h.l.transformMat4(a,c,this.invTransform)}},{key:"globalToLocalGrid",value:function(a,c){this.globalToLocalSpatial(a,c);h.l.divide(a,a,this.size);return a}},{key:"localSpatialVectorToGlobal",
value:function(a,c){return Object(h.k)(a,c,this.transform)}},{key:"globalToLocalSpatialVector",value:function(a,c){return Object(h.k)(a,c,this.invTransform)}},{key:"assignLocalSpatialToGlobalMat4",value:function(a){return h.g.copy(a,this.transform)}}],[{key:"get",value:function(b,c){c=void 0===c?h.c:c;var d=a.cache,g=JSON.stringify([Array.from(b),Array.from(c)]),f=d.get(g);void 0===f&&(f=new a(b,c),d.set(g,f));return f}},{key:"fromObject",value:function(b){return a.get(b.size,b.transform)}}]);return a}();
c.cache=new Map},function(m,e,l){e.a=function(h,f){return h===f?!0:1E-6>Math.abs(h-f)/Math.min(Math.abs(h),Math.abs(f))}},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=l(60);m=l(0);var c=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),a=function n(a,b,c){null===a&&(a=Function.prototype);var g=Object.getOwnPropertyDescriptor(a,b);if(void 0===g){if(a=Object.getPrototypeOf(a),null!==a)return n(a,b,c)}else{if("value"in g)return g.value;b=g.get;return void 0===b?void 0:b.call(c)}};e=this&&this.__decorate||function(a,
b,c,f){var g=arguments.length,k=3>g?b:null===f?f=Object.getOwnPropertyDescriptor(b,c):f,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=Reflect.decorate(a,b,c,f);else for(var e=a.length-1;0<=e;e--)if(h=a[e])k=(3>g?h(k):3<g?h(b,c,k):h(b,c))||k;return 3<g&&k&&Object.defineProperty(b,c,k),k};l=b=function(e){function g(a,b){b=void 0===b?{}:b;if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var c=(g.__proto__||Object.getPrototypeOf(g)).call(this,a,
b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.updatingValue_=!1;void 0!==a&&(c.base=new f.a(b.value),c.setupChangedHandler());return c}h(g,e);c(g,[{key:"initializeCounterpart",value:function(b,c){c=void 0===c?{}:c;c.value=this.value;a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"initializeCounterpart",this).call(this,b,c)}},{key:"setupChangedHandler",value:function(){var a=this;
this.registerDisposer(this.base.changed.add(function(){if(a.updatingValue_)a.updatingValue_=!1;else{var b=a.rpc;null!==b&&b.invoke("SharedWatchableValue.changed",{id:a.rpcId,value:a.value})}}))}},{key:"value",get:function(){return this.base.value},set:function(a){this.base.value=a}},{key:"changed",get:function(){return this.base.changed}}],[{key:"makeFromExisting",value:function(a,c){var g=new b;g.base=c;g.setupChangedHandler();g.initializeCounterpart(a);return g}},{key:"make",value:function(a,c){return b.makeFromExisting(a,
new f.a(c))}}]);return g}(m.c);l=b=e([Object(m.g)("SharedWatchableValue")],l);Object(m.f)("SharedWatchableValue.changed",function(a){var b=this.get(a.id);b.updatingValue_=!0;b.base.value=a.value;b.updatingValue_=!1});var b},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}l.d(e,"a",function(){return b});var c=l(14),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=function(){function b(a){f(this,b);this.value_=a;this.changed=new c.a}a(b,
[{key:"value",get:function(){return this.value_},set:function(a){a!==this.value_&&(this.value_=a,this.changed.dispatch())}}]);return b}();(function(b){function c(a,b,d){d=void 0===d?a:d;f(this,c);a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.validator=b;a.defaultValue=d;return a}h(c,b);a(c,[{key:"toJSON",value:function(){if(this.value_!==
this.defaultValue)return this.value_}},{key:"reset",value:function(){this.value=this.defaultValue}},{key:"restoreState",value:function(a){if(void 0!==a){var b=this.validator;try{this.value=b(a);return}catch(r){}}this.value=this.defaultValue}}]);return c})(b)},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&
"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){a&&(b.change_spec={change_stack_id:a.changeStackId},a.timeStamp&&(b.change_spec.time_stamp=a.timeStamp),a.skipEquivalences&&(b.change_spec.skip_equivalences=
a.skipEquivalences))}function b(a,b){return Object(r.WithParameters)(Object(p.a)()(a),b)}function d(a,b){Object(v.c)(a,b,"fragmentKey");a.clipBounds&&(a.fragmentIds=n(a.fragmentIds,a.clipBounds));return a}function n(a,b){b;if(!a)return a;var c=[];a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var f=E.l.clone([500,500,500]),k=d;var q=f;var h=new w.a;if(!h.tryParseString(k,16))throw Error("Couldn't parse fragmentId "+k+" as hex-encoded Uint64");if(h.high)throw Error("Fragment ids > 2^32 not supported yet");
k=Object(E.a)(h);h=E.l.create();q=E.l.mul(h,k,q);k=E.l.create();E.l.scale(k,f,.5);h=E.l.create();E.l.add(h,q,k);g({center:h,size:f},b)&&c.push(d)}return c}function g(a,b){function c(a,b,c){return[].concat($jscomp.arrayFromIterable(a.map(function(a,d){return a+c*b[d]/2}).values()))}function d(a){return{min:E.l.clone(c(a.center,a.size,-1)),max:E.l.clone(c(a.center,a.size,1))}}a=d(a);b=d(b);return a.min[0]<=b.max[0]&&a.max[0]>=b.min[0]&&a.min[1]<=b.max[1]&&a.max[1]>=b.min[1]&&a.min[2]<=b.max[2]&&a.max[2]>=
b.min[2]}function k(a,b){Object(G.e)(b);var c=Object(G.f)(b,"fragmentKey",G.h);b=Object(G.f)(b,"supervoxelId",G.h);if(c.length!==b.length)throw Error("Expected fragmentKey and supervoxelId arrays to have the same length.");a.fragmentIds=b.map(function(a,b){return a+"\x00"+c[b]});a.clipBounds&&(a.fragmentIds=n(a.fragmentIds,a.clipBounds))}Object.defineProperty(e,"__esModule",{value:!0});l.d(e,"BrainmapsVolumeChunkSource",function(){return I});l.d(e,"BrainmapsMeshSource",function(){return H});l.d(e,
"BrainmapsSkeletonSource",function(){return D});var r=l(2),p=l(62),y=l(65),t=l(67),v=l(19),z=l(74);m=l(24);e=l(16);var u=l(21),A=l(13),L=l(12),E=l(1),G=l(5),w=l(6);l=l(0);var x=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),K=this&&this.__decorate||function(a,b,c,d){var g=arguments.length,f=3>g?b:null===
d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var q=a.length-1;0<=q;q--)if(k=a[q])f=(3>g?k(f):3<g?k(b,c,f):k(b,c))||f;return 3<g&&f&&Object.defineProperty(b,c,f),f},q=new Map([[t.c.RAW,u.a],[t.c.JPEG,e.a],[t.c.COMPRESSED_SEGMENTATION,m.a]]),I=function(b){function d(){h(this,d);var a=f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments));a.chunkDecoder=q.get(a.parameters.encoding);
return a}c(d,b);x(d,[{key:"applyEncodingParams",value:function(a){var b=this.parameters.encoding;switch(b){case t.c.RAW:a.subvolume_format="RAW";break;case t.c.JPEG:a.subvolume_format="SINGLE_IMAGE";a.image_format_options={image_format:"JPEG",jpeg_quality:70};break;case t.c.COMPRESSED_SEGMENTATION:a.subvolume_format="RAW";a.image_format_options={compressed_segmentation_block_size:Object(E.m)(this.spec.compressedSegmentationBlockSize)};break;default:throw Error("Invalid encoding: "+b);}}},{key:"download",
value:function(b,c){var d=this,g=this.parameters,f=this.computeChunkBounds(b),k=b.chunkDataSize;var q="/v1/volumes/"+g.volumeId+"/subvolume:binary";f={geometry:{corner:Object(E.m)(f),size:Object(E.m)(k),scale:g.scaleIndex}};this.applyEncodingParams(f);a(g.changeSpec,f);q={method:"POST",payload:JSON.stringify(f),path:q,responseType:"arraybuffer"};return Object(y.a)(g.instance,this.credentialsProvider,q,c).then(function(a){return d.chunkDecoder(b,a)})}}]);return d}(b(A.a,t.d));I=K([Object(l.g)()],I);
var H=function(b){function g(){h(this,g);var a=f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments));a.manifestDecoder=void 0!==a.parameters.changeSpec?k:d;var b=a.parameters.changeSpec;b=void 0!==b?"&header.changeStackId="+b.changeStackId+"&return_supervoxel_ids=true":"";a.listFragmentsParams=b;return a}c(g,b);x(g,[{key:"download",value:function(a,b){var c=this,d=this.parameters;return Object(y.a)(d.instance,this.credentialsProvider,{method:"GET",path:"/v1/objects/"+d.volumeId+"/meshes/"+
(d.meshName+":listfragments?object_id="+a.objectId)+this.listFragmentsParams,responseType:"json"},b).then(function(b){return c.manifestDecoder(a,b)})}},{key:"downloadFragment",value:function(b,c){var d=this.parameters,g=b.fragmentId;if(void 0!==d.changeSpec){var f=g.indexOf("\x00");var k=g.substring(0,f);g=g.substring(f+1)}else k=b.manifestChunk.objectId.toString();f="/v1/objects/"+d.volumeId+("/meshes/"+d.meshName)+"/fragment:binary";k={fragment_key:g,object_id:k};a(d.changeSpec,k);k={method:"POST",
path:f,payload:JSON.stringify(k),responseType:"arraybuffer"};return Object(y.a)(d.instance,this.credentialsProvider,k,c).then(function(a){var c=new DataView(a),d=c.getUint32(0,!0);if(0!==c.getUint32(4,!0))throw Error("The number of vertices should not exceed 2^32-1.");Object(v.d)(b,a,L.b.LITTLE,8,d)})}}]);return g}(b(v.a,t.a));H=K([Object(l.g)()],H);var D=function(b){function d(){h(this,d);return f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}c(d,b);x(d,[{key:"download",value:function(b,
c){var d=this.parameters,g={object_id:""+b.objectId},f="/v1/objects/"+d.volumeId+("/meshes/"+d.meshName)+"/skeleton:binary";a(d.changeSpec,g);g={method:"POST",path:f,payload:JSON.stringify(g),responseType:"arraybuffer"};return Object(y.a)(d.instance,this.credentialsProvider,g,c).then(function(a){var c=new DataView(a),d=c.getUint32(0,!0);if(0!==c.getUint32(4,!0))throw Error("The number of vertices should not exceed 2^32-1.");var g=c.getUint32(8,!0);if(0!==c.getUint32(12,!0))throw Error("The number of edges should not exceed 2^32-1.");
Object(z.b)(b,a,L.b.LITTLE,16,d,void 0,g)})}}]);return d}(b(z.a,t.b));D=K([Object(l.g)()],D)},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.a=function(){return function(a){return function(a){function b(a){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];h(this,b);var g;d=f(this,(g=b.__proto__||Object.getPrototypeOf(b)).call.apply(g,[].concat([this],$jscomp.arrayFromIterable(c))));d.credentialsProvider=d.rpc.getRef(c[1].credentialsProvider);return d}
c(b,a);return b}(a)}};var a=l(63),b=l(64);m=l(0);e=this&&this.__decorate||function(a,b,c,f){var d=arguments.length,g=3>d?b:null===f?f=Object.getOwnPropertyDescriptor(b,c):f,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,b,c,f);else for(var h=a.length-1;0<=h;h--)if(k=a[h])g=(3>d?k(g):3<d?k(b,c,g):k(b,c))||g;return 3<d&&g&&Object.defineProperty(b,c,g),g};l=function(d){function e(){h(this,e);var c=f(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments));
c.get=Object(a.a)(function(a,d){return c.rpc.promiseInvoke(b.a,{providerId:c.rpcId,invalidCredentials:a},d)});return c}c(e,d);return e}(m.c);l=e([Object(m.g)(b.b)],l)},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.a=function(b){var c,d,g;return function(f,k){if(void 0!==d&&(void 0===c||void 0===f||c.generation!==f.generation))return void 0===c&&g.addConsumer(k),d;c=void 0;g=new a.c;return d=b(f,g).then(function(a){c=a;g=void 0;return a},function(a){g.isCanceled&&(d=g=void 0);throw a;})}};var a=l(7);m=l(17);var b=l(30),d=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();(function(a){function b(){h(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);return b})(m.a);var n=function(){function a(){h(this,a);this.providers=new Map}d(a,[{key:"register",value:function(a,b){this.providers.set(a,b)}},{key:"getCredentialsProvider",
value:function(a,b){var c=this.providers.get(a);if(void 0===c)throw Error("No registered credentials provider: "+JSON.stringify(a));return c(b)}}]);return a}();(function(a){function b(){h(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,new n))}c(b,a);d(b,[{key:"register",value:function(a,b){this.base.register(a,b)}}]);return b})(function(a){function g(a){h(this,g);var c=f(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));c.base=a;c.memoize=new b.a;return c}c(g,a);d(g,
[{key:"getCredentialsProvider",value:function(a,b){var c=this;return this.memoize.get({key:a,parameters:b},function(){return c.registerDisposer(c.base.getCredentialsProvider(a,b).addRef())})}}]);return g}(m.a))},function(m,e,l){e.b="CredentialsProvider";e.a="CredentialsProvider.get"},function(m,e,l){e.a=function(c,a,b,d){d=void 0===d?h.e:d;var e=void 0;return new Promise(function(g,k){function l(h){null!==e&&(e=Object(f.c)(c.serverUrls,b.path,b.method),e.responseType=b.responseType,e.setRequestHeader("Authorization",
h.credentials.tokenType+" "+h.credentials.accessToken),e.onloadend=function(){if(null!==e){var b=this.status;200<=b&&300>b?(d.remove(n),g(this.response)):401===b?a.get(h,d).then(l):504===b||503===b?a.get(void 0,d).then(l):(d.remove(n),k(f.a.fromXhr(this)))}},e.send(b.payload))}var n=function(){var a=e;e=null;null!=a&&a.abort();k(h.a)};d.add(n);a.get(void 0,d).then(l)})};var h=l(7),f=l(11)},function(m,e,l){e.a=function(h){for(var f=0,c=h.length,a=0;a<c;++a)f=31*f+h.charCodeAt(a)|0;return f}},function(m,
e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}l.d(e,"c",function(){return c});l.d(e,"d",function(){return a});l.d(e,"a",function(){return b});
l.d(e,"b",function(){return d});var c;(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION"})(c||(c={}));var a=function g(){f(this,g)};a.RPC_ID="brainmaps/VolumeChunkSource";var b=function k(){f(this,k)};b.RPC_ID="brainmaps/MeshSource";var d=function(a){function b(){f(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||
"object"!==typeof a&&"function"!==typeof a?this:a}h(b,a);return b}(b);d.RPC_ID="brainmaps/SkeletonSource"},function(m,e,l){e.b="mesh/MeshLayer";e.a="mesh/FragmentSource"},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}
var f=l(70),c=l(5),a=l(14),b=l(6);m=l(0);var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),n=function p(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return p(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===
b?void 0:b.call(c)}};e=this&&this.__decorate||function(a,b,c,d){var g=arguments.length,f=3>g?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(k=a[h])f=(3>g?k(f):3<g?k(b,c,f):k(b,c))||f;return 3<g&&f&&Object.defineProperty(b,c,f),f};l=function(g){function k(){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");var b=(k.__proto__||Object.getPrototypeOf(k)).apply(this,
arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.disjointSets=new f.a;b.changed=new a.a;return b}h(k,g);d(k,[{key:"disposed",value:function(){this.changed=this.disjointSets=void 0;n(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"disposed",this).call(this)}},{key:"split",value:function(){this.disjointSets.split()}},{key:"link",value:function(a,b,c){this.disjointSets.link(a,
b,void 0===c?!1:c)&&((c=this.rpc)&&c.invoke("DisjointUint64Sets.add",{id:this.rpcId,al:a.low,ah:a.high,bl:b.low,bh:b.high}),this.changed.dispatch())}},{key:"get",value:function(a){return this.disjointSets.get(a)}},{key:"clear",value:function(){if(this.disjointSets.clear()){var a=this.rpc;a&&a.invoke("DisjointUint64Sets.clear",{id:this.rpcId});this.changed.dispatch()}}},{key:"setElements",value:function(a){return this.disjointSets.setElements(a)}},{key:"toJSON",value:function(){return this.disjointSets.toJSON()}},
{key:"splitJSON",value:function(){return this.disjointSets.splitJSON()}},{key:"restoreState",value:function(a){var d=this;this.clear();if(void 0!==a){var g=[new b.a,new b.a];Object(c.a)(a,function(a){Object(c.a)(a,function(a,b){Object(f.b)(g[b%2],String(a));0!==b&&d.link(g[0],g[1])})})}this.changed.dispatch()}},{key:"restoreSaved",value:function(a){var d=this;if(void 0!==a){var g=[new b.a,new b.a];Object(c.a)(a,function(a){Object(c.a)(a,function(a,b){Object(f.b)(g[b%2],String(a));0!==b&&d.link(g[0],
g[1],!0)})})}this.changed.dispatch()}},{key:"size",get:function(){return this.disjointSets.size}},{key:"hasSplits",get:function(){return this.disjointSets.hasSplits}}],[{key:"makeWithCounterpart",value:function(a){var b=new this;b.initializeCounterpart(a);return b}}]);return k}(m.c);l=e([Object(m.g)("DisjointUint64Sets")],l);var g=new b.a,k=new b.a;Object(m.f)("DisjointUint64Sets.add",function(a){var b=this.get(a.id);g.low=a.al;g.high=a.ah;k.low=a.bl;k.high=a.bh;b.disjointSets.link(g,k)&&b.changed.dispatch()});
Object(m.f)("DisjointUint64Sets.clear",function(a){a=this.get(a.id);a.disjointSets.clear()&&a.changed.dispatch()})},function(m,e,l){function h(a){for(var b=a,c=a[g];c!==a;)a=c,c=a[g];for(a=b[g];c!==a;)b[g]=c,b=a,a=b[g];return c}function f(a){function b(b,f){for(;;)switch(c){case 0:g=!0,d=a;case 1:if(!g&&d===a){c=3;break}c=4;return{value:d,done:!1};case 4:if(void 0===f){c=5;break}c=-1;throw f;case 5:d=d[k];case 2:g=!1;c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,g,f={next:function(a){return b(a,
void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();f[Symbol.iterator]=function(){return this};return f}function c(a){var b=a.clone();b[g]=b;b[n]=0;b[y]=!1;b[k]=b[r]=b;b[p]=a[p]||0;return b}function a(a,b){var c=$jscomp.makeIterator(b.split(":"));b=c.next().value;c=c.next().value;c=parseInt(c)||0;a.parseString(b,10)[p]=c}e.b=a;l.d(e,"a",function(){return v});var b=l(6),d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();$jscomp.initSymbol();var n=Symbol("disjoint_sets:rank");$jscomp.initSymbol();var g=Symbol("disjoint_sets:parent");$jscomp.initSymbol();var k=Symbol("disjoint_sets:next");$jscomp.initSymbol();var r=Symbol("disjoint_sets:prev");$jscomp.initSymbol();var p=Symbol("disjoint_sets:split");$jscomp.initSymbol();var y=Symbol("disjoint_sets:save");
$jscomp.initSymbol();var t=Symbol("disjoint_sets:min");m=c(new b.a);e=c(new b.a);a(m,"0:1");a(e,"0:2");var v=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.map=new Map;this.generation=0;this.splitState={zMap:new Map([["0:1",[0]]]),yMap:new Map([["1:2",[0]]]),xMap:new Map([["2:3",[0]]]),mainMap:new Map([["45",[0]]]),subregions:[["45:1","2:3","1:2","0:1"]]}}$jscomp.initSymbol();$jscomp.initSymbolIterator();d(a,[{key:"get",value:function(a){var b=
this.map.get(a.toString());return void 0===b?a:h(b)[t]}},{key:"isMinElement",value:function(a){var c=this.get(a);return c===a||b.a.equal(c,a)}},{key:"makeSet",value:function(a,b){b=void 0===b?!1:b;var d=a.toString(),g=this.map.get(d);if(void 0===g)return g=c(a),this.saveNode(g,b),g[t]=g,this.map.set(d,g),g;this.saveNode(g,b);return h(g)}},{key:"saveNode",value:function(a,b){a[y]=void 0===b?!1:b}},{key:"isSaved",value:function(a){return a[y]}},{key:"split",value:function(){}},{key:"link",value:function(a,
c,d){d=void 0===d?!1:d;a=this.makeSet(a,d);c=this.makeSet(c,d);if(a===c)return!1;this.generation++;d=a;var f=c,h=d[n],e=f[n];h>e?f[g]=d:(d[g]=f,h===e&&(f[n]=e+1),d=f);f=a;h=c;e=f[r];var l=h[r];h[r]=e;e[k]=h;f[r]=l;l[k]=f;d[t]=b.a.min(a[t],c[t]);return!0}},{key:"setElements",value:function(a){function b(b,q){for(;;)switch(c){case 0:h=a.toString();k=e.map.get(h);if(void 0!==k){c=1;break}c=3;return{value:a,done:!1};case 3:if(void 0===q){c=4;break}c=-1;throw q;case 4:c=2;break;case 1:g=$jscomp.makeIterator(f(k));
case 5:if((d=g.next(b)).done){c=6;break}c=7;return{value:d.value,done:!1};case 7:if(void 0===q){c=8;break}c=-1;throw q;case 8:c=5;break;case 6:case 2:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,g,k,h,e=this,q={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();q[Symbol.iterator]=function(){return this};return q}},{key:"clear",value:function(){var a=this.map;if(0===a.size)return!1;
++this.generation;a.clear();return!0}},{key:"mappings",value:function(a){function b(b,e){for(;;)switch(c){case 0:a=void 0===a?Array(2):a,f=$jscomp.makeIterator(k.map.values()),g=f.next();case 1:if(g.done){c=3;break}d=g.value;a[0]=d;a[1]=h(d)[t];c=4;return{value:a,done:!1};case 4:if(void 0===e){c=5;break}c=-1;throw e;case 5:case 2:g=f.next();c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,g,f,k=this,e={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},
return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();e[Symbol.iterator]=function(){return this};return e}},{key:Symbol.iterator,value:function(){return this.mappings()}},{key:"toJSON",value:function(){for(var a=[],c=$jscomp.makeIterator(this.map.values()),d=c.next();!d.done;d=c.next())if(d=d.value,d[g]===d){for(var k=[],h=$jscomp.makeIterator(f(d)),e=h.next();!e.done;e=h.next())e=e.value,this.isSaved(d)&&this.isSaved(e)||k.push(e);k.length&&(-1===k.indexOf(d)&&k.unshift(d),
k.sort(b.a.compare),a.push(k))}a.sort(function(a,c){return b.a.compare(a[0],c[0])});return a.map(function(a){return a.map(function(a){var b=a[p];a=a.toString();b=b?a+":"+b.toString():a;return b})})}},{key:"splitJSON",value:function(){return this.splitState.subregions.map(function(a){return a.join(":")})}},{key:"size",get:function(){return this.map.size}},{key:"hasSplits",get:function(){return 0<this.splitState.subregions.length}}]);return a}()},function(m,e,l){function h(a,b){if("function"!==typeof b&&
null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var f=l(72),c=l(14);m=l(0);var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,
c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=function g(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return g(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};e=this&&this.__decorate||function(a,b,c,d){var f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,
b,c,d);else for(var h=a.length-1;0<=h;h--)if(k=a[h])g=(3>f?k(g):3<f?k(b,c,g):k(b,c))||g;return 3<f&&g&&Object.defineProperty(b,c,g),g};l=d=function(g){function k(){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");var a=(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.hashTable=new f.a;a.changed=new c.b;
return a}h(k,g);$jscomp.initSymbol();$jscomp.initSymbolIterator();a(k,[{key:"disposed",value:function(){b(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"disposed",this).call(this);this.changed=this.hashTable=void 0}},{key:"add_",value:function(a){return this.hashTable.add(a)}},{key:"add",value:function(a){if(this.add_(a)){var b=this.rpc;b&&b.invoke("Uint64Set.add",{id:this.rpcId,value:a});this.changed.dispatch(a,!0)}}},{key:"has",value:function(a){return this.hashTable.has(a)}},{key:Symbol.iterator,
value:function(){return this.hashTable.keys()}},{key:"delete_",value:function(a){return this.hashTable.delete(a)}},{key:"delete",value:function(a){if(this.delete_(a)){var b=this.rpc;b&&b.invoke("Uint64Set.delete",{id:this.rpcId,value:a});this.changed.dispatch(a,!1)}}},{key:"clear",value:function(){if(this.hashTable.clear()){var a=this.rpc;a&&a.invoke("Uint64Set.clear",{id:this.rpcId});this.changed.dispatch(null,!1)}}},{key:"toJSON",value:function(){for(var a=[],b=$jscomp.makeIterator(this),c=b.next();!c.done;c=
b.next())a.push(c.value.toString());a.sort();return a}},{key:"size",get:function(){return this.hashTable.size}}],[{key:"makeWithCounterpart",value:function(a){var b=new d;b.initializeCounterpart(a);return b}}]);return k}(m.c);l=d=e([Object(m.g)("Uint64Set")],l);Object(m.f)("Uint64Set.add",function(a){var b=this.get(a.id);b.add_(a.value)&&b.changed.dispatch()});Object(m.f)("Uint64Set.delete",function(a){var b=this.get(a.id);b.delete_(a.value)&&b.changed.dispatch()});Object(m.f)("Uint64Set.clear",function(a){a=
this.get(a.id);a.hashTable.clear()&&a.changed.dispatch()});var d},function(m,e,l){function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}l.d(e,"a",function(){return y});var a=l(73),b=l(6),d=function L(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return L(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];
d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),g=0,k=0,r=0,p=0;m=function(){function d(a){a=void 0===a?d.generateHashFunctions(3):a;c(this,d);this.loadFactor=.9;this.size=0;this.growFactor=1.2;this.maxHeight=8192;this.emptyHigh=this.emptyLow=4294967295;this.maxAttempts=this.maxRehashAttempts=5;this.maxWidth=4096/this.entryStride;this.generation=0;this.mungedEmptyKey=-1;
this.hashFunctions=a;this.allocate(4,1)}n(d,[{key:"updateHashFunctions",value:function(a){this.hashFunctions=d.generateHashFunctions(a);this.mungedEmptyKey=-1}},{key:"tableWithMungedEmptyKey",value:function(a){for(var b=this.hashFunctions.length,c=Array(b),d=0;d<b;++d)c[d]=this.getHash(d,this.emptyLow,this.emptyHigh);d=this.mungedEmptyKey;if(-1===d)a:for(;;){d=16777216*Math.random()>>>0;for(var f=0;f<b;++f)for(var g=this.getHash(f,d,d),k=0;k<b;++k)if(c[k]===g)continue a;this.mungedEmptyKey=d;break}f=
this.table;g=this.emptyLow;k=this.emptyHigh;for(var h=0;h<b;++h){var e=c[h];f[e]===g&&f[e+1]===k&&(f[e]=d,f[e+1]=d)}try{a(f)}finally{for(a=0;a<b;++a)h=c[a],f[h]===d&&f[h+1]===d&&(f[h]=g,f[h+1]=k)}}},{key:"getHash",value:function(a,b,c){a=this.hashFunctions[a];var d=this.width,f=this.height;d=a[0].compute(b,c)%d;b=a[1].compute(b,c)%f;return this.entryStride*(b*this.width+d)}},{key:"keys",value:function(a){function c(c,q){for(;;)switch(d){case 0:a=void 0===a?new b.a:a,u=t,m=u.emptyLow,p=u.emptyHigh,
n=u.entryStride,l=t,e=l.table,h=0,k=e.length;case 1:if(!(h<k)){d=3;break}g=e[h];f=e[h+1];if(g===m&&f===p){d=4;break}a.low=g;a.high=f;d=5;return{value:a,done:!1};case 5:if(void 0===q){d=6;break}d=-1;throw q;case 6:case 4:case 2:h+=n;d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,f,g,k,h,e,l,n,p,m,u,t=this,E={next:function(a){return c(a,void 0)},throw:function(a){return c(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();E[Symbol.iterator]=
function(){return this};return E}},{key:"indexOfPair",value:function(a,b){var c=this.table,d=this.emptyHigh;if(a===this.emptyLow&&b===d)return-1;d=0;for(var f=this.hashFunctions.length;d<f;++d){var g=this.getHash(d,a,b);if(c[g]===a&&c[g+1]===b)return g}return-1}},{key:"indexOf",value:function(a){return this.indexOfPair(a.low,a.high)}},{key:"chooseAnotherEmptyKey",value:function(){for(var a=this.emptyLow,b=this.emptyHigh,c=this.table,d=this.entryStride,f,g;f=4294967296*Math.random()>>>0,g=4294967296*
Math.random()>>>0,f===a&&g===b||this.hasPair(f,g););this.emptyLow=f;this.emptyHigh=g;for(var k=0,h=c.length;k<h;k+=d)c[k]===a&&c[k+1]===b&&(c[k]=f,c[k+1]=g)}},{key:"has",value:function(a){return-1!==this.indexOf(a)}},{key:"hasPair",value:function(a,b){return-1!==this.indexOfPair(a,b)}},{key:"delete",value:function(a){a=this.indexOf(a);if(-1!==a){var b=this.table;b[a]=this.emptyLow;b[a+1]=this.emptyHigh;++this.generation;this.size--;return!0}return!1}},{key:"clearTable",value:function(){for(var a=
this.table,b=this.entryStride,c=this.emptyLow,d=this.emptyHigh,f=a.length,g=0;g<f;g+=b)a[g]=c,a[g+1]=d}},{key:"clear",value:function(){if(0===this.size)return!1;this.size=0;++this.generation;this.clearTable();return!0}},{key:"swapPending",value:function(a,b){var c=g,d=k;this.storePending(a,b);a[b]=c;a[b+1]=d}},{key:"storePending",value:function(a,b){g=a[b];k=a[b+1]}},{key:"backupPending",value:function(){r=g;p=k}},{key:"restorePending",value:function(){g=r;k=p}},{key:"tryToInsert",value:function(){for(var a=
0,b=this.emptyLow,c=this.emptyHigh,d=this.maxAttempts,f=this.table,h=this.hashFunctions.length,e=Math.floor(Math.random()*h);;){var l=this.getHash(e,g,k);this.swapPending(f,l);if(g===b&&k===c)return!0;if(++a===d)break;e=(e+Math.floor(Math.random()*(h-1))+1)%h}return!1}},{key:"allocate",value:function(a,b){var c=a*b;this.width=a;this.height=b;this.table=new Uint32Array(c*this.entryStride);this.maxAttempts=c;this.clearTable();this.capacity=c*this.loadFactor;this.mungedEmptyKey=-1}},{key:"rehash",value:function(a,
b,c){this.allocate(b,c);this.updateHashFunctions(this.hashFunctions.length);b=this.emptyLow;c=this.emptyHigh;for(var d=this.entryStride,f=0,g=a.length;f<g;f+=d){var k=a[f+1];if(a[f]!==b||k!==c)if(this.storePending(a,f),!this.tryToInsert())return!1}return!0}},{key:"grow",value:function(a){for(var b=this.table,c=this.width,d=this.height,f=this.maxWidth,g=this.maxHeight;;){var k=c*d;c=Math.min(f,Math.ceil(a/this.height));c*d<a&&(d=Math.min(g,Math.ceil(a/c)));var h=c*d;if(h<a&&h===k)throw Error("Maximum table size exceeded");
for(k=0;k<this.maxRehashAttempts;++k)if(this.rehash(b,c,d))return;a=Math.ceil(this.growFactor*a)}}},{key:"insertInternal",value:function(){++this.generation;g===this.emptyLow&&k===this.emptyHigh&&this.chooseAnotherEmptyKey();++this.size>this.capacity&&(this.backupPending(),this.grow(Math.ceil(this.growFactor*this.width*this.height)),this.restorePending());for(;!this.tryToInsert();)this.backupPending(),this.grow(this.width*this.height),this.restorePending()}}],[{key:"generateHashFunctions",value:function(b){b=
void 0===b?3:b;for(var c=[],d=0;d<b;++d){var f=[a.a.generate(),a.a.generate()];c.push(f)}return c}}]);return d}();var y=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}f(b,a);$jscomp.initSymbol();$jscomp.initSymbolIterator();n(b,[{key:"add",value:function(a){var b=a.low;a=a.high;if(this.hasPair(b,a))return!1;g=b;k=a;this.insertInternal();return!0}},{key:Symbol.iterator,value:function(){return this.keys()}}]);return b}(m);y.prototype.entryStride=
2;var t=0,v=0,z=0,u=0;(function(a){function e(){c(this,e);return h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}f(e,a);$jscomp.initSymbol();$jscomp.initSymbolIterator();n(e,[{key:"set",value:function(a,b){var c=a.low;a=a.high;if(this.hasPair(c,a))return!1;g=c;k=a;t=b.low;v=b.high;this.insertInternal();return!0}},{key:"get",value:function(a,b){a=this.indexOf(a);if(-1===a)return!1;var c=this.table;b.low=c[a+2];b.high=c[a+3];return!0}},{key:"swapPending",value:function(a,b){var c=
t,f=v;d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"swapPending",this).call(this,a,b);a[b+2]=c;a[b+3]=f}},{key:"storePending",value:function(a,b){d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"storePending",this).call(this,a,b);t=a[b+2];v=a[b+3]}},{key:"backupPending",value:function(){d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"backupPending",this).call(this);z=t;u=v}},{key:"restorePending",value:function(){d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),
"restorePending",this).call(this);t=z;v=u}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(a){function c(c,q){for(;;)switch(d){case 0:a=void 0===a?[new b.a,new b.a]:a,M=r,B=M.emptyLow,t=M.emptyHigh,u=M.entryStride,m=r,p=m.table,n=$jscomp.makeIterator(a),l=n.next().value,e=n.next().value,h=0,k=p.length;case 1:if(!(h<k)){d=3;break}g=p[h];f=p[h+1];if(g===B&&f===t){d=4;break}l.low=g;l.high=f;e.low=p[h+2];e.high=p[h+3];d=5;return{value:a,done:!1};case 5:if(void 0===
q){d=6;break}d=-1;throw q;case 6:case 4:case 2:h+=u;d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,f,g,k,h,e,l,n,p,m,u,t,B,M,r=this,la={next:function(a){return c(a,void 0)},throw:function(a){return c(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();la[Symbol.iterator]=function(){return this};return la}}]);return e})(m).prototype.entryStride=4},function(m,e,l){l.d(e,"a",function(){return f});var h=function(){function c(a,b){for(var c=
0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),f=function(){function c(a,b,d,f){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.a0=a;this.a1=b;this.b=d;this.c=f}h(c,[{key:"computeDotProduct",value:function(a,b){var c=this.a0,f=this.a1;return c[0]*(a&255)+c[1]*(a>>8&255)+c[2]*(a>>16&255)+c[3]*(a>>24&255)+
(f[0]*(b&255)+f[1]*(b>>8&255)+f[2]*(b>>16&255)+f[3]*(b>>24&255))}},{key:"compute",value:function(a,b){var c=this.b,f=this.c;a=this.computeDotProduct(a,b);return(a+a*a%4093*f+c)%4093}},{key:"toString",value:function(){return"new HashFunction(Float32Array.of("+this.a0+"), "+("Float32Array.of("+this.a1+"), "+this.b+", "+this.c+")")}}],[{key:"generate",value:function(){function a(){return Math.floor(4093*Math.random())}return new c(Float32Array.of(a(),a(),a(),a()),Float32Array.of(a(),a(),a(),a()),a(),
a())}}]);return c}()},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}l.d(e,"a",function(){return t});e.b=function(b,c,d,f,g,k,h){Object(a.e)(b,2,c,d,f,g,k,h)};e=l(2);var a=l(19),b=l(35),d=l(23);m=l(75);var n=l(6),g=l(15);l=l(0);var k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&
a(b,d);return b}}(),r=function z(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return z(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},p=this&&this.__decorate||function(a,b,c,d){var f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=
a.length-1;0<=h;h--)if(k=a[h])g=(3>f?k(g):3<f?k(b,c,g):k(b,c))||g;return 3<f&&g&&Object.defineProperty(b,c,g),g},y=function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.objectId=new n.a;a.vertexPositions=null;a.vertexAttributes=null;a.indices=null;return a}c(b,a);k(b,[{key:"initializeSkeletonChunk",value:function(a,c){r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.objectId.assign(c)}},{key:"freeSystemMemory",
value:function(){this.vertexPositions=this.indices=null}},{key:"getVertexAttributeBytes",value:function(){var a=this.vertexPositions.byteLength,b=this.vertexAttributes;null!=b&&b.forEach(function(b){a+=b.byteLength});return a}},{key:"serialize",value:function(a,c){r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);var d=this.vertexPositions,f=this.indices;a.indices=f;c.push(f.buffer);f=this.vertexAttributes;if(null!=f&&0<f.length){var g=new Uint8Array(this.getVertexAttributeBytes());
g.set(new Uint8Array(d.buffer,d.byteOffset,d.byteLength));var k=a.vertexAttributeOffsets=new Uint32Array(f.length+1);k[0]=0;var h=d.byteLength;f.forEach(function(a,b){k[b+1]=h;g.set(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),h);h+=a.byteLength});c.push(g.buffer);a.vertexAttributes=g}else a.vertexAttributes=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),a.vertexAttributeOffsets=Uint32Array.of(0),d.buffer!==c[0]&&c.push(d.buffer);this.vertexPositions=this.indices=this.vertexAttributes=null}},
{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.indices.byteLength+this.getVertexAttributeBytes();r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(e.Chunk),t=function(a){function b(){h(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);k(b,[{key:"getChunk",value:function(a){var b=Object(d.b)(a),c=this.chunks.get(b);void 0===c&&(c=this.getNewChunk_(y),c.initializeSkeletonChunk(b,
a),this.addChunk(c));return c}}]);return b}(e.ChunkSource);e=function(a){function b(a,c){h(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.source=d.registerDisposer(a.getRef(c.source));d.registerDisposer(d.chunkManager.recomputeChunkPriorities.add(function(){d.updateChunkPriorities()}));return d}c(b,a);k(b,[{key:"updateChunkPriorities",value:function(){var a=this.visibility.value;if(a!==Number.NEGATIVE_INFINITY){var b=Object(g.b)(a),c=Object(g.a)(a),f=this.source,k=
this.chunkManager;Object(d.a)(this,function(a){a=f.getChunk(a);k.requestChunk(a,b,c+60)})}}}]);return b}(b.a);e=p([Object(l.g)(m.a)],e)},function(m,e,l){e.a="skeleton/SkeletonLayer"},function(m,e,l){function h(c,h,e,l,m,v,z,u){var k=m[0],p=m[1],t=m[2];m=l[0];var r=l[1];l=l[2];var w=e[0],x=e[1],y=e[2];y-=x*p;x-=w*k;if(0===k*p*t)return[0,0];e=m*r*l+31;if(void 0===a||a.length<e)a=new Uint32Array(e),b=new Uint32Array(1*e),d=new Uint32Array(1*e),n=new Uint32Array(e),g=new Uint32Array(e);e=a.subarray(0,
e);e.fill(0);for(var q=b,I=d,H=n,D=g,C=0,F=c[h]+1>>>0,O=0,N=m-k,Q=m*r-m*p,J=0;J<t;++J,h+=y,O+=Q)for(var B=0;B<p;++B,h+=x,O+=N)for(var M=0;M<k;++M,h+=w){var R=c[h];R!==F&&(F=q[1*C]=R,H[C]=C++);e[O++]=C}H.subarray(0,C).sort(function(a,b){return q[a]-q[b]});c=-1;k=q[1*H[0]]+1>>>0;for(p=0;p<C;++p)t=H[p],w=q[1*t],w!==k&&(++c,k=I[1*c]=w),D[t+1]=c;++c;return Object(f.c)(u,v,z,m*r*l,c,I,e,D,1)}e.a=function(a,b,d,g,e,l){e=void 0===e?0:e;l=void 0===l?Object(c.a)(g,1):l;return Object(f.b)(a,b,d,g,e,l,h)};var f=
l(20),c=l(18),a,b,d,n,g},function(m,e,l){function h(c,h,e,l,m,v,z,u){var k=m[0],p=m[1],t=m[2];m=l[0];var r=l[1];l=l[2];var w=e[0],x=e[1],y=e[2];y-=x*p;x-=w*k;if(0===k*p*t)return[0,0];e=m*r*l+31;if(void 0===a||a.length<e)a=new Uint32Array(e),b=new Uint32Array(2*e),d=new Uint32Array(2*e),n=new Uint32Array(e),g=new Uint32Array(e);e=a.subarray(0,e);e.fill(0);for(var q=b,I=d,H=n,D=g,C=0,F=c[h]+1>>>0,O=0,N=0,Q=m-k,J=m*r-m*p,B=0;B<t;++B,h+=y,N+=J)for(var M=0;M<p;++M,h+=x,N+=Q)for(var R=0;R<k;++R,h+=w){var la=
c[h],ka=c[h+1];if(la!==F||ka!==O)F=q[2*C]=la,O=q[2*C+1]=ka,H[C]=C++;e[N++]=C}H.subarray(0,C).sort(function(a,b){var c=q[2*a],d=q[2*b];return q[2*a+1]-q[2*b+1]||c-d});c=-1;k=q[2*H[0]]+1>>>0;for(p=x=0;p<C;++p){t=H[p];y=2*t;w=q[y];y=q[y+1];if(w!==k||y!==x)++c,x=2*c,k=I[x]=w,x=I[x+1]=y;D[t+1]=c}++c;return Object(f.c)(u,v,z,m*r*l,c,I,e,D,2)}e.a=function(a,b,d,g,e,l){e=void 0===e?0:e;l=void 0===l?Object(c.a)(g,2):l;return Object(f.b)(a,b,d,g,e,l,h)};var f=l(20),c=l(18),a,b,d,n,g},function(m,e,l){l.d(e,
"a",function(){return f});var h=function(){function c(a,b){for(var c=0;c<b.length;c++){var f=b[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),f=function(){function c(a){a=void 0===a?16:a;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.length=0;this.data=new Uint32Array(a)}h(c,[{key:"resize",value:function(a){var b=this.data;if(a>
b.length){var c=new Uint32Array(Math.max(a,2*b.length));c.set(b.subarray(0,this.length));this.data=c}this.length=a}},{key:"shrinkToFit",value:function(){this.data=new Uint32Array(this.view)}},{key:"clear",value:function(){this.length=0}},{key:"appendArray",value:function(a){var b=this.length;this.resize(b+a.length);this.data.set(a,b)}},{key:"eraseRange",value:function(a,b){this.data.copyWithin(a,b,this.length);this.length-=b-a}},{key:"view",get:function(){var a=this.data;return new Uint32Array(a.buffer,
a.byteOffset,this.length)}}]);return c}()},function(m,e,l){e.a=function(a,b,d){var e=new h.JpegDecoder;e.parse(a);if(e.width*e.height!==b[0]*b[1]*b[2])throw Error("JPEG data does not have the expected dimensions: "+("width="+e.width+", height="+e.height+", ")+("chunkDataSize="+c.l.str(b)));if(e.numComponents!==d)throw Error("JPEG data does not have the expected number of components: "+("components="+e.numComponents+", expected="+d));if(1===e.numComponents)return e.getData(e.width,e.height,!1);if(3===
e.numComponents)return a=e.getData(e.width,e.height,!1),Object(f.c)(a,e.width*e.height,3);throw Error("JPEG data has an unsupported number of components: components="+e.numComponents);};var h=l(80);l.n(h);var f=l(18),c=l(1)},function(m,e,l){function h(c,a){if(0===c.indexOf("data:")){var b=c.indexOf("base64,")+7;c=atob(c.substring(b));b=new Uint8Array(c.length);for(var d=c.length-1;0<=d;d--)b[d]=c.charCodeAt(d);a(b.buffer)}else{var f=new XMLHttpRequest;f.open("GET",c,!0);f.responseType="arraybuffer";
f.onload=function(){a(f.response)};f.send(null)}}e=function(){function c(){this._src=null;this._parser=new f.JpegImage;this.onload=null}c.prototype={get src(){return this._src},set src(a){this.load(a)},get width(){return this._parser.width},get height(){return this._parser.height},load:function(a){this._src=a;h(a,function(a){this.parse(new Uint8Array(a));if(this.onload)this.onload()}.bind(this))},parse:function(a){this._parser.parse(a)},getData:function(a,b){return this._parser.getData(a,b,!1)},copyToImageData:function(a){if(2===
this._parser.numComponents||4<this._parser.numComponents)throw Error("Unsupported amount of components");var b=a.width,c=a.height,f=b*c*4;a=a.data;if(1===this._parser.numComponents){var g=this._parser.getData(b,c,!1);for(c=b=0;b<f;){var k=g[c++];a[b++]=k;a[b++]=k;a[b++]=k;a[b++]=255}}else for(g=this._parser.getData(b,c,!0),c=b=0;b<f;)a[b++]=g[c++],a[b++]=g[c++],a[b++]=g[c++],a[b++]=255}};return c}();var f;(function(c){function a(a){for(var b=1,c=0;a>b;)b<<=1,c++;return c}function b(a,b){return a[b]<<
8|a[b+1]}function d(a,b){return(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}function f(a,b,c){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!1});return c}var g=function(){function a(){}function b(a,b){for(var c=0,d=[],f,g,k=16;0<k&&!a[k-1];)k--;d.push({children:[],index:0});var h=d[0],e;for(f=0;f<k;f++){for(g=0;g<a[f];g++){h=d.pop();for(h.children[h.index]=b[c];0<h.index;)h=d.pop();h.index++;for(d.push(h);d.length<=f;)d.push(e={children:[],index:0}),h.children[h.index]=e.children,
h=e;c++}f+1<k&&(d.push(e={children:[],index:0}),h.children[h.index]=e.children,h=e)}return d[0].children}function c(a,b,c,d,f,h,k,e,l){function q(){if(0<D)return D--,x>>D&1;x=a[b++];if(255===x){var c=a[b++];if(c)throw"unexpected marker: "+(x<<8|c).toString(16);}D=7;return x>>>7}function w(a){for(;;){a=a[q()];if("number"===typeof a)return a;if("object"!==typeof a)throw"invalid huffman sequence";}}function n(a){for(var b=0;0<a;)b=b<<1|q(),a--;return b}function m(a){if(1===a)return 1===q()?1:-1;var b=
n(a);return b>=1<<a-1?b:b+(-1<<a)+1}function B(a,b){var c=w(a.huffmanTableDC);c=0===c?0:m(c);a.blockData[b]=a.pred+=c;for(c=1;64>c;){var d=w(a.huffmanTableAC),f=d&15;d>>=4;if(0===f){if(15>d)break;c+=16}else c+=d,a.blockData[b+g[c]]=m(f),c++}}function p(a,b){var c=w(a.huffmanTableDC);c=0===c?0:m(c)<<l;a.blockData[b]=a.pred+=c}function H(a,b){a.blockData[b]|=q()<<l}function t(a,b){if(0<C)C--;else for(var c=h;c<=k;){var d=w(a.huffmanTableAC),f=d&15;d>>=4;if(0===f){if(15>d){C=n(d)+(1<<d)-1;break}c+=16}else c+=
d,a.blockData[b+g[c]]=m(f)*(1<<l),c++}}function u(a,b){for(var c=h,d=0,f;c<=k;){f=g[c];switch(v){case 0:d=w(a.huffmanTableAC);f=d&15;d>>=4;if(0===f)15>d?(C=n(d)+(1<<d),v=4):(d=16,v=1);else{if(1!==f)throw"invalid ACn encoding";z=m(f);v=d?2:3}continue;case 1:case 2:a.blockData[b+f]?a.blockData[b+f]+=q()<<l:(d--,0===d&&(v=2===v?3:0));break;case 3:a.blockData[b+f]?a.blockData[b+f]+=q()<<l:(a.blockData[b+f]=z<<l,v=0);break;case 4:a.blockData[b+f]&&(a.blockData[b+f]+=q()<<l)}c++}4===v&&(C--,0===C&&(v=0))}
var I=c.mcusPerLine,r=b,x=0,D=0,C=0,v=0,z,A=d.length,y,E,F,G;e=c.progressive?0===h?0===e?p:H:0===e?t:u:B;var K=0;c=1===A?d[0].blocksPerLine*d[0].blocksPerColumn:I*c.mcusPerColumn;f||(f=c);for(var L,Hb;K<c;){for(y=0;y<A;y++)d[y].pred=0;C=0;if(1===A){var X=d[0];for(G=0;G<f;G++)e(X,64*((X.blocksPerLine+1)*(K/X.blocksPerLine|0)+K%X.blocksPerLine)),K++}else for(G=0;G<f;G++){for(y=0;y<A;y++)for(X=d[y],L=X.h,Hb=X.v,E=0;E<Hb;E++)for(F=0;F<L;F++)e(X,64*((X.blocksPerLine+1)*((K/I|0)*X.v+E)+(K%I*X.h+F)));K++}D=
0;X=a[b]<<8|a[b+1];if(65280>=X)throw"marker was not found";if(65488<=X&&65495>=X)b+=2;else break}return b-r}function d(a,b){a=b.blocksPerLine;for(var c=b.blocksPerColumn,d=new Int16Array(64),f=0;f<c;f++)for(var g=0;g<a;g++){for(var h,k,e,l,w,n,m,B,p,t,u,r,x=64*((b.blocksPerLine+1)*f+g),v=d,z=b.quantizationTable,y=b.blockData,A=0;64>A;A+=8)h=y[x+A],B=y[x+A+1],m=y[x+A+2],n=y[x+A+3],w=y[x+A+4],l=y[x+A+5],e=y[x+A+6],k=y[x+A+7],h*=z[A],0===(B|m|n|w|l|e|k)?(h=5793*h+512>>10,v[A]=h,v[A+1]=h,v[A+2]=h,v[A+
3]=h,v[A+4]=h,v[A+5]=h,v[A+6]=h,v[A+7]=h):(B*=z[A+1],m*=z[A+2],n*=z[A+3],w*=z[A+4],l*=z[A+5],e*=z[A+6],k*=z[A+7],r=5793*h+128>>8,u=5793*w+128>>8,t=m,p=e,w=2896*(B-k)+128>>8,k=2896*(B+k)+128>>8,n<<=4,l<<=4,r=r+u+1>>1,u=r-u,h=3784*t+1567*p+128>>8,t=1567*t-3784*p+128>>8,p=h,w=w+l+1>>1,l=w-l,k=k+n+1>>1,n=k-n,r=r+p+1>>1,p=r-p,u=u+t+1>>1,t=u-t,h=2276*w+3406*k+2048>>12,w=3406*w-2276*k+2048>>12,k=h,h=799*n+4017*l+2048>>12,n=4017*n-799*l+2048>>12,l=h,v[A]=r+k,v[A+7]=r-k,v[A+1]=u+l,v[A+6]=u-l,v[A+2]=t+n,v[A+
5]=t-n,v[A+3]=p+w,v[A+4]=p-w);for(z=0;8>z;++z)h=v[z],B=v[z+8],m=v[z+16],n=v[z+24],w=v[z+32],l=v[z+40],e=v[z+48],k=v[z+56],0===(B|m|n|w|l|e|k)?(h=5793*h+8192>>14,h=-2040>h?0:2024<=h?255:h+2056>>4,y[x+z]=h,y[x+z+8]=h,y[x+z+16]=h,y[x+z+24]=h,y[x+z+32]=h,y[x+z+40]=h,y[x+z+48]=h,y[x+z+56]=h):(r=5793*h+2048>>12,u=5793*w+2048>>12,t=m,p=e,w=2896*(B-k)+2048>>12,k=2896*(B+k)+2048>>12,r=(r+u+1>>1)+4112,u=r-u,h=3784*t+1567*p+2048>>12,t=1567*t-3784*p+2048>>12,p=h,w=w+l+1>>1,l=w-l,k=k+n+1>>1,n=k-n,r=r+p+1>>1,p=
r-p,u=u+t+1>>1,t=u-t,h=2276*w+3406*k+2048>>12,w=3406*w-2276*k+2048>>12,k=h,h=799*n+4017*l+2048>>12,n=4017*n-799*l+2048>>12,l=h,h=r+k,k=r-k,B=u+l,e=u-l,m=t+n,l=t-n,n=p+w,w=p-w,h=16>h?0:4080<=h?255:h>>4,B=16>B?0:4080<=B?255:B>>4,m=16>m?0:4080<=m?255:m>>4,n=16>n?0:4080<=n?255:n>>4,w=16>w?0:4080<=w?255:w>>4,l=16>l?0:4080<=l?255:l>>4,e=16>e?0:4080<=e?255:e>>4,k=16>k?0:4080<=k?255:k>>4,y[x+z]=h,y[x+z+8]=B,y[x+z+16]=m,y[x+z+24]=n,y[x+z+32]=w,y[x+z+40]=l,y[x+z+48]=e,y[x+z+56]=k)}return b.blockData}function f(a){return 0>=
a?0:255<=a?255:a}var g=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);a.prototype={parse:function(a){function f(){var b=a[e]<<8|a[e+1];e+=2;return b}function h(){var b=f();b=a.subarray(e,e+b-2);e+=b.length;return b}function k(a){for(var b=Math.ceil(a.samplesPerLine/8/a.maxH),c=Math.ceil(a.scanLines/8/a.maxV),d=0;d<a.components.length;d++){y=a.components[d];
var f=Math.ceil(Math.ceil(a.samplesPerLine/8)*y.h/a.maxH),g=Math.ceil(Math.ceil(a.scanLines/8)*y.v/a.maxV);y.blockData=new Int16Array(64*c*y.v*(b*y.h+1));y.blocksPerLine=f;y.blocksPerColumn=g}a.mcusPerLine=b;a.mcusPerColumn=c}var e=0,l=null,w=null,n=[],m=[],p=[];var t=f();if(65496!==t)throw"SOI not found";for(t=f();65497!==t;){switch(t){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var u=
h();65504===t&&74===u[0]&&70===u[1]&&73===u[2]&&70===u[3]&&0===u[4]&&(l={version:{major:u[5],minor:u[6]},densityUnits:u[7],xDensity:u[8]<<8|u[9],yDensity:u[10]<<8|u[11],thumbWidth:u[12],thumbHeight:u[13],thumbData:u.subarray(14,14+3*u[12]*u[13])});65518===t&&65===u[0]&&100===u[1]&&111===u[2]&&98===u[3]&&101===u[4]&&0===u[5]&&(w={version:u[6],flags0:u[7]<<8|u[8],flags1:u[9]<<8|u[10],transformCode:u[11]});break;case 65499:t=f()+e-2;for(var r;e<t;){var B=a[e++],M=new Uint16Array(64);if(0===B>>4)for(u=
0;64>u;u++)r=g[u],M[r]=a[e++];else if(1===B>>4)for(u=0;64>u;u++)r=g[u],M[r]=f();else throw"DQT: invalid table spec";n[B&15]=M}break;case 65472:case 65473:case 65474:if(v)throw"Only single frame JPEGs supported";f();var v={};v.extended=65473===t;v.progressive=65474===t;v.precision=a[e++];v.scanLines=f();v.samplesPerLine=f();v.components=[];v.componentIds={};u=a[e++];for(t=M=B=0;t<u;t++){r=a[e];var z=a[e+1]>>4;var ka=a[e+1]&15;B<z&&(B=z);M<ka&&(M=ka);z=v.components.push({h:z,v:ka,quantizationTable:n[a[e+
2]]});v.componentIds[r]=z-1;e+=3}v.maxH=B;v.maxV=M;k(v);break;case 65476:r=f();for(t=2;t<r;){B=a[e++];M=new Uint8Array(16);for(u=z=0;16>u;u++,e++)z+=M[u]=a[e];ka=new Uint8Array(z);for(u=0;u<z;u++,e++)ka[u]=a[e];t+=17+z;(0===B>>4?p:m)[B&15]=b(M,ka)}break;case 65501:f();var A=f();break;case 65498:f();r=a[e++];u=[];for(t=0;t<r;t++){B=v.componentIds[a[e++]];var y=v.components[B];B=a[e++];y.huffmanTableDC=p[B>>4];y.huffmanTableAC=m[B&15];u.push(y)}t=a[e++];r=a[e++];B=a[e++];t=c(a,e,v,u,A,t,r,B>>4,B&15);
e+=t;break;case 65535:255!==a[e]&&e--;break;default:if(255===a[e-3]&&192<=a[e-2]&&254>=a[e-2])e-=3;else throw"unknown JPEG marker "+t.toString(16);}t=f()}this.width=v.samplesPerLine;this.height=v.scanLines;this.jfif=l;this.adobe=w;this.components=[];for(t=0;t<v.components.length;t++)y=v.components[t],this.components.push({output:d(v,y),scaleX:y.h/v.maxH,scaleY:y.v/v.maxV,blocksPerLine:y.blocksPerLine,blocksPerColumn:y.blocksPerColumn});this.numComponents=this.components.length},_getLinearizedBlockData:function(a,
b){var c=this.width/a,d=this.height/b,f,g,h=this.components.length,e=a*b*h,k=new Uint8Array(e),l=new Uint32Array(a);for(g=0;g<h;g++){var n=this.components[g];var w=n.scaleX*c;var m=n.scaleY*d;var B=g;var p=n.output;var u=n.blocksPerLine+1<<3;for(f=0;f<a;f++)n=0|f*w,l[f]=(n&4294967288)<<3|n&7;for(w=0;w<b;w++)for(n=0|w*m,n=u*(n&4294967288)|(n&7)<<3,f=0;f<a;f++)k[B]=p[n+l[f]],B+=h}if(b=this.decodeTransform)for(g=0;g<e;)for(a=n=0;n<h;n++,g++,a+=2)k[g]=(k[g]*b[a]>>8)+b[a+1];return k},_isColorConversionNeeded:function(){return this.adobe&&
this.adobe.transformCode?!0:3===this.numComponents?!0:!1},_convertYccToRgb:function(a){for(var b,c,d,g=0,h=a.length;g<h;g+=3)b=a[g],c=a[g+1],d=a[g+2],a[g]=f(b-179.456+1.402*d),a[g+1]=f(b+135.459-.344*c-.714*d),a[g+2]=f(b-226.816+1.772*c);return a},_convertYcckToRgb:function(a){for(var b,c,d,g,h=0,e=0,k=a.length;e<k;e+=4){b=a[e];c=a[e+1];d=a[e+2];g=a[e+3];var l=-122.67195406894+c*(-6.60635669420364E-5*c+4.37130475926232E-4*d-5.4080610064599E-5*b+4.8449797120281E-4*g-.154362151871126)+d*(-9.57964378445773E-4*
d+8.17076911346625E-4*b-.00477271405408747*g+1.53380253221734)+b*(9.61250184130688E-4*b-.00266257332283933*g+.48357088451265)+g*(-3.36197177618394E-4*g+.484791561490776),n=107.268039397724+c*(2.19927104525741E-5*c-6.40992018297945E-4*d+6.59397001245577E-4*b+4.26105652938837E-4*g-.176491792462875)+d*(-7.78269941513683E-4*d+.00130872261408275*b+7.70482631801132E-4*g-.151051492775562)+b*(.00126935368114843*b-.00265090189010898*g+.25802910206845)+g*(-3.18913117588328E-4*g-.213742400323665);b=-20.810012546947+
c*(-5.70115196973677E-4*c-2.63409051004589E-5*d+.0020741088115012*b-.00288260236853442*g+.814272968359295)+d*(-1.53496057440975E-5*d-1.32689043961446E-4*b+5.60833691242812E-4*g-.195152027534049)+b*(.00174418132927582*b-.00255243321439347*g+.116935020465145)+g*(-3.43531996510555E-4*g+.24165260232407);a[h++]=f(l);a[h++]=f(n);a[h++]=f(b)}return a},_convertYcckToCmyk:function(a){for(var b,c,d,g=0,h=a.length;g<h;g+=4)b=a[g],c=a[g+1],d=a[g+2],a[g]=f(434.456-b-1.402*d),a[g+1]=f(119.541-b+.344*c+.714*d),
a[g+2]=f(481.816-b-1.772*c);return a},_convertCmykToRgb:function(a){for(var b,c,d,f,g=0,h=1/255/255,e=0,k=a.length;e<k;e+=4){b=a[e];c=a[e+1];d=a[e+2];f=a[e+3];var l=b*(-4.387332384609988*b+54.48615194189176*c+18.82290502165302*d+212.25662451639585*f-72734.4411664936)+c*(1.7149763477362134*c-5.6096736904047315*d-17.873870861415444*f-1401.7366389350734)+d*(-2.5217340131683033*d-21.248923337353073*f+4465.541406466231)-f*(21.86122147463605*f+48317.86113160301),n=b*(8.841041422036149*b+60.118027045597366*
c+6.871425592049007*d+31.159100130055922*f-20220.756542821975)+c*(-15.310361306967817*c+17.575251261109482*d+131.35250912493976*f-48691.05921601825)+d*(4.444339102852739*d+9.8632861493405*f-6341.191035517494)-f*(20.737325471181034*f+47890.15695978492);b=b*(.8842522430003296*b+8.078677503112928*c+30.89978309703729*d-.23883238689178934*f-3616.812083916688)+c*(10.49593273432072*c+63.02378494754052*d+50.606957656360734*f-28620.90484698408)+d*(.03296041114873217*d+115.60384449646641*f-49363.43385999684)-
f*(22.33816807309886*f+45932.16563550634);a[g++]=0<=l?255:-16581375>=l?0:255+l*h|0;a[g++]=0<=n?255:-16581375>=n?0:255+n*h|0;a[g++]=0<=b?255:-16581375>=b?0:255+b*h|0}return a},getData:function(a,b,c){if(4<this.numComponents)throw"Unsupported color mode";a=this._getLinearizedBlockData(a,b);if(3===this.numComponents)return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return c?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(c)return this._convertCmykToRgb(a)}return a}};
return a}();"use strict";var k=function(){function a(a,b,c){this.data=a;this.bp=b;this.dataEnd=c;this.chigh=a[b];this.clow=0;this.byteIn();this.chigh=this.chigh<<7&65535|this.clow>>9&127;this.clow=this.clow<<7&65535;this.ct-=7;this.a=32768}var b=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},
{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,
switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,
nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},
{qe:22017,nmps:46,nlps:46,switchFlag:0}];a.prototype={byteIn:function(){var a=this.data,b=this.bp;255===a[b]?143<a[b+1]?(this.clow+=65280,this.ct=8):(b++,this.clow+=a[b]<<9,this.ct=7,this.bp=b):(b++,this.clow+=b<this.dataEnd?a[b]<<8:65280,this.ct=8,this.bp=b);65535<this.clow&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(a,c){var d=a[c]>>1,f=a[c]&1;d=b[d];var g=d.qe,h=this.a-g;if(this.chigh<g)h<g?(h=g,g=f,d=d.nmps):(h=g,g=1^f,1===d.switchFlag&&(f=g),d=d.nlps);else{this.chigh-=g;if(0!==
(h&32768))return this.a=h,f;h<g?(g=1^f,1===d.switchFlag&&(f=g),d=d.nlps):(g=f,d=d.nmps)}do 0===this.ct&&this.byteIn(),h<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--;while(0===(h&32768));this.a=h;a[c]=d<<1|f;return g}};return a}();"use strict";var h=function(){function c(){this.failOnCorruptedImage=!1}function f(a,b,c){a=c.xcb_;c=c.ycb_;var d=1<<a,f=1<<c,g=b.tbx0>>a,h=b.tby0>>c,e=b.tbx1+d-1>>a,k=b.tby1+f-1>>c,q=b.resolution.precinctParameters,l=[],B=[],
n,m;for(m=h;m<k;m++)for(n=g;n<e;n++){var w={cbx:n,cby:m,tbx0:d*n,tby0:f*m,tbx1:d*(n+1),tby1:f*(m+1)};w.tbx0_=Math.max(b.tbx0,w.tbx0);w.tby0_=Math.max(b.tby0,w.tby0);w.tbx1_=Math.min(b.tbx1,w.tbx1);w.tby1_=Math.min(b.tby1,w.tby1);var p=Math.floor((w.tbx0_-b.tbx0)/q.precinctWidthInSubband)+Math.floor((w.tby0_-b.tby0)/q.precinctHeightInSubband)*q.numprecinctswide;w.precinctNumber=p;w.subbandType=b.type;w.Lblock=3;if(!(w.tbx1_<=w.tbx0_||w.tby1_<=w.tby0_)){l.push(w);var t=B[p];void 0!==t?(n<t.cbxMin?t.cbxMin=
n:n>t.cbxMax&&(t.cbxMax=n),m<t.cbyMin?t.cbxMin=m:m>t.cbyMax&&(t.cbyMax=m)):B[p]=t={cbxMin:n,cbyMin:m,cbxMax:n,cbyMax:m};w.precinct=t}}b.codeblockParameters={codeblockWidth:a,codeblockHeight:c,numcodeblockwide:e-g+1,numcodeblockhigh:k-h+1};b.codeblocks=l;b.precincts=B}function g(a,b,c){var d=[];a=a.subbands;for(var f=0,g=a.length;f<g;f++)for(var h=a[f].codeblocks,e=0,k=h.length;e<k;e++){var q=h[e];q.precinctNumber===b&&d.push(q)}return{layerNumber:c,codeblocks:d}}function h(a){var b=a.tiles[a.currentTile.index],
c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,f=0;for(a=0;a<d;a++)f=Math.max(f,b.components[a].codingStyleParameters.decompositionLevelsCount);var h=0,e=0,k=0,q=0;this.nextPacket=function(){for(;h<c;h++){for(;e<=f;e++){for(;k<d;k++){var a=b.components[k];if(!(e>a.codingStyleParameters.decompositionLevelsCount)){a=a.resolutions[e];for(var l=a.precinctParameters.numprecincts;q<l;)return a=g(a,q,h),q++,a;q=0}}k=0}e=0}throw Error("JPX Error: Out of packets");}}function e(a){var b=a.tiles[a.currentTile.index],
c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,f=0;for(a=0;a<d;a++)f=Math.max(f,b.components[a].codingStyleParameters.decompositionLevelsCount);var h=0,e=0,k=0,q=0;this.nextPacket=function(){for(;h<=f;h++){for(;e<c;e++){for(;k<d;k++){var a=b.components[k];if(!(h>a.codingStyleParameters.decompositionLevelsCount)){a=a.resolutions[h];for(var l=a.precinctParameters.numprecincts;q<l;)return a=g(a,q,e),q++,a;q=0}}k=0}e=0}throw Error("JPX Error: Out of packets");}}function l(a){var b=a.tiles[a.currentTile.index],
c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,f,h,e,k=0;for(e=0;e<d;e++)k=Math.max(k,b.components[e].codingStyleParameters.decompositionLevelsCount);var q=new Int32Array(k+1);for(h=0;h<=k;++h){for(e=a=0;e<d;++e){var l=b.components[e].resolutions;h<l.length&&(a=Math.max(a,l[h].precinctParameters.numprecincts))}q[h]=a}var n=e=h=f=0;this.nextPacket=function(){for(;h<=k;h++){for(;n<q[h];n++){for(;e<d;e++){var a=b.components[e];if(!(h>a.codingStyleParameters.decompositionLevelsCount||(a=a.resolutions[h],
n>=a.precinctParameters.numprecincts))){for(;f<c;)return a=g(a,n,f),f++,a;f=0}}e=0}n=0}throw Error("JPX Error: Out of packets");}}function n(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,f=q(b),h=0,e=0,k=0,l=0,n=0;this.nextPacket=function(){for(;n<f.maxNumHigh;n++){for(;l<f.maxNumWide;l++){for(;k<d;k++){for(var a=b.components[k],q=a.codingStyleParameters.decompositionLevelsCount;e<=q;e++){var B=a.resolutions[e],w=t(l,n,f.components[k].resolutions[e],
f,B);if(null!==w){for(;h<c;)return a=g(B,w,h),h++,a;h=0}}e=0}k=0}l=0}throw Error("JPX Error: Out of packets");}}function p(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,f=q(b),h=0,e=0,k=0,l=0,n=0;this.nextPacket=function(){for(;k<d;++k){for(var a=b.components[k],q=f.components[k],B=a.codingStyleParameters.decompositionLevelsCount;n<q.maxNumHigh;n++){for(;l<q.maxNumWide;l++){for(;e<=B;e++){var w=a.resolutions[e],m=t(l,n,q.resolutions[e],q,w);if(null!==
m){for(;h<c;)return a=g(w,m,h),h++,a;h=0}}e=0}l=0}n=0}throw Error("JPX Error: Out of packets");}}function t(a,b,c,d,f){a*=d.minWidth;b*=d.minHeight;return 0!==a%c.width||0!==b%c.height?null:a/c.height+b/c.width*f.precinctParameters.numprecinctswide}function q(a){for(var b=a.components.length,c=Number.MAX_VALUE,d=Number.MAX_VALUE,f=0,g=0,h=Array(b),e=0;e<b;e++){for(var k=a.components[e],q=k.codingStyleParameters.decompositionLevelsCount,l=Array(q+1),n=Number.MAX_VALUE,w=Number.MAX_VALUE,m=0,p=0,t=
1;0<=q;--q){var u=k.resolutions[q],r=t*u.precinctParameters.precinctWidth,H=t*u.precinctParameters.precinctHeight;n=Math.min(n,r);w=Math.min(w,H);m=Math.max(m,u.precinctParameters.numprecinctswide);p=Math.max(p,u.precinctParameters.numprecinctshigh);l[q]={width:r,height:H};t<<=1}c=Math.min(c,n);d=Math.min(d,w);f=Math.max(f,m);g=Math.max(g,p);h[e]={resolutions:l,minWidth:n,minHeight:w,maxNumWide:m,maxNumHigh:p}}return{components:h,minWidth:c,minHeight:d,maxNumWide:f,maxNumHigh:g}}function r(b,c,d,
f){function g(a){for(;l<a;){var b=c[d+k];k++;n?(q=q<<7|b,l+=7,n=!1):(q=q<<8|b,l+=8);255===b&&(n=!0)}l-=a;return q>>>l&(1<<a)-1}function h(a){return 255===c[d+k-1]&&c[d+k]===a?(k+=1,!0):255===c[d+k]&&c[d+k+1]===a?(k+=2,!0):!1}function e(){if(0===g(1))return 1;if(0===g(1))return 2;var a=g(2);if(3>a)return a+3;a=g(5);if(31>a)return a+6;a=g(7);return a+37}var k=0,q,l=0,n=!1,B=b.COD.sopMarkerUsed,w=b.COD.ephMarkerUsed;for(b=b.tiles[b.currentTile.index].packetsIterator;k<f;){l=0;n&&(k++,n=!1);B&&h(145)&&
(k+=4);var m=b.nextPacket();if(g(1)){for(var p=m.layerNumber,t=[],u,r=0,H=m.codeblocks.length;r<H;r++){u=m.codeblocks[r];var v=u.precinct,M=u.cbx-v.cbxMin,z=u.cby-v.cbyMin,x=!1,A=!1;if(void 0!==u.included)x=!!g(1);else{v=u.precinct;if(void 0!==v.inclusionTree)var I=v.inclusionTree;else{var D=v.cbxMax-v.cbxMin+1;var R=v.cbyMax-v.cbyMin+1;I=new C(D,R,p);D=new y(D,R);v.inclusionTree=I;v.zeroBitPlanesTree=D}if(I.reset(M,z,p))for(;;)if(g(1)){if(R=!I.nextLevel()){x=A=u.included=!0;break}}else{I.incrementValue(p);
break}}if(x){if(A){D=v.zeroBitPlanesTree;for(D.reset(M,z);;)if(g(1)){if(R=!D.nextLevel())break}else D.incrementValue();u.zeroBitPlanes=D.value}for(v=e();g(1);)u.Lblock++;M=a(v);M=g((v<1<<M?M-1:M)+u.Lblock);t.push({codeblock:u,codingpasses:v,dataLength:M})}}l=0;n&&(k++,n=!1);for(w&&h(146);0<t.length;)m=t.shift(),u=m.codeblock,void 0===u.data&&(u.data=[]),u.data.push({data:c,start:d+k,end:d+k+m.dataLength,codingpasses:m.codingpasses}),k+=m.dataLength}}return k}var H={LL:0,LH:1,HL:1,HH:2};c.prototype=
{parse:function(a){if(65359===b(a,0))this.parseCodestream(a,0,a.length);else for(var c=0,f=a.length;c<f;){var g=8,h=d(a,c),e=d(a,c+4);c+=g;1===h&&(h=4294967296*d(a,c)+d(a,c+4),c+=8,g+=8);0===h&&(h=f-c+g);if(h<g)throw Error("JPX Error: Invalid box field size");g=h-g;h=!0;switch(e){case 1785737832:h=!1;break;case 1668246642:e=a[c];if(1===e)switch(e=d(a,c+3),e){case 16:case 17:case 18:break;default:m("Unknown colorspace "+e)}else 2===e&&v("ICC profile not supported");break;case 1785737827:this.parseCodestream(a,
c,c+g);break;case 1783636E3:218793738!==d(a,c)&&m("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var k=String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255);m("Unsupported header type "+e+" ("+k+")")}h&&(c+=g)}},parseImageProperties:function(a){for(var b=a.getByte();0<=b;){var c=b;b=a.getByte();if(65361===(c<<8|b)){a.skip(4);b=a.getInt32()>>>0;c=a.getInt32()>>>0;var d=a.getInt32()>>>0,f=a.getInt32()>>>0;a.skip(16);a=a.getUint16();
this.width=b-d;this.height=c-f;this.componentsCount=a;this.bitsPerComponent=8;return}}throw Error("JPX Error: No size marker found in JPX stream");},parseCodestream:function(a,c,g){var q={};try{var B=!1;for(var w=c;w+1<g;){var t=b(a,w);w+=2;var u=0,v;switch(t){case 65359:q.mainHeader=!0;break;case 65497:break;case 65361:u=b(a,w);var M={};M.Xsiz=d(a,w+4);M.Ysiz=d(a,w+8);M.XOsiz=d(a,w+12);M.YOsiz=d(a,w+16);M.XTsiz=d(a,w+20);M.YTsiz=d(a,w+24);M.XTOsiz=d(a,w+28);M.YTOsiz=d(a,w+32);var y=b(a,w+36);M.Csiz=
y;var z=[];var x=w+38;for(var A=0;A<y;A++){var I={precision:(a[x]&127)+1,isSigned:!!(a[x]&128),XRsiz:a[x+1],YRsiz:a[x+1]},D=I,C=M;D.x0=Math.ceil(C.XOsiz/D.XRsiz);D.x1=Math.ceil(C.Xsiz/D.XRsiz);D.y0=Math.ceil(C.YOsiz/D.YRsiz);D.y1=Math.ceil(C.Ysiz/D.YRsiz);D.width=D.x1-D.x0;D.height=D.y1-D.y0;z.push(I)}q.SIZ=M;q.components=z;for(var E=void 0,G=q,K=z,J=G.SIZ,L=[],O=Math.ceil((J.Xsiz-J.XTOsiz)/J.XTsiz),lc=Math.ceil((J.Ysiz-J.YTOsiz)/J.YTsiz),Wa=0;Wa<lc;Wa++)for(var Xa=0;Xa<O;Xa++)E={},E.tx0=Math.max(J.XTOsiz+
Xa*J.XTsiz,J.XOsiz),E.ty0=Math.max(J.YTOsiz+Wa*J.YTsiz,J.YOsiz),E.tx1=Math.min(J.XTOsiz+(Xa+1)*J.XTsiz,J.Xsiz),E.ty1=Math.min(J.YTOsiz+(Wa+1)*J.YTsiz,J.Ysiz),E.width=E.tx1-E.tx0,E.height=E.ty1-E.ty0,E.components=[],L.push(E);G.tiles=L;for(var Ya=0,mc=J.Csiz;Ya<mc;Ya++)for(var Za=K[Ya],gb=0,nc=L.length;gb<nc;gb++){var ea={};E=L[gb];ea.tcx0=Math.ceil(E.tx0/Za.XRsiz);ea.tcy0=Math.ceil(E.ty0/Za.YRsiz);ea.tcx1=Math.ceil(E.tx1/Za.XRsiz);ea.tcy1=Math.ceil(E.ty1/Za.YRsiz);ea.width=ea.tcx1-ea.tcx0;ea.height=
ea.tcy1-ea.tcy0;E.components[Ya]=ea}q.QCC=[];q.COC=[];break;case 65372:u=b(a,w);var Ia={};x=w+2;var ua=a[x++];switch(ua&31){case 0:var ma=8;var va=!0;break;case 1:ma=16;va=!1;break;case 2:ma=16;va=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+ua);}Ia.noQuantization=8===ma;Ia.scalarExpounded=va;Ia.guardBits=ua>>5;for(v=[];x<u+w;){var fa={};8===ma?(fa.epsilon=a[x++]>>3,fa.mu=0):(fa.epsilon=a[x]>>3,fa.mu=(a[x]&7)<<8|a[x+1],x+=2);v.push(fa)}Ia.SPqcds=v;q.mainHeader?q.QCD=Ia:(q.currentTile.QCD=
Ia,q.currentTile.QCC=[]);break;case 65373:u=b(a,w);var Ja={};x=w+2;if(257>q.SIZ.Csiz)var hb=a[x++];else hb=b(a,x),x+=2;ua=a[x++];switch(ua&31){case 0:ma=8;va=!0;break;case 1:ma=16;va=!1;break;case 2:ma=16;va=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+ua);}Ja.noQuantization=8===ma;Ja.scalarExpounded=va;Ja.guardBits=ua>>5;for(v=[];x<u+w;)fa={},8===ma?(fa.epsilon=a[x++]>>3,fa.mu=0):(fa.epsilon=a[x]>>3,fa.mu=(a[x]&7)<<8|a[x+1],x+=2),v.push(fa);Ja.SPqcds=v;q.mainHeader?q.QCC[hb]=Ja:
q.currentTile.QCC[hb]=Ja;break;case 65362:u=b(a,w);var S={};x=w+2;var ib=a[x++];S.entropyCoderWithCustomPrecincts=!!(ib&1);S.sopMarkerUsed=!!(ib&2);S.ephMarkerUsed=!!(ib&4);S.progressionOrder=a[x++];S.layersCount=b(a,x);x+=2;S.multipleComponentTransform=a[x++];S.decompositionLevelsCount=a[x++];S.xcb=(a[x++]&15)+2;S.ycb=(a[x++]&15)+2;var Ka=a[x++];S.selectiveArithmeticCodingBypass=!!(Ka&1);S.resetContextProbabilities=!!(Ka&2);S.terminationOnEachCodingPass=!!(Ka&4);S.verticalyStripe=!!(Ka&8);S.predictableTermination=
!!(Ka&16);S.segmentationSymbolUsed=!!(Ka&32);S.reversibleTransformation=a[x++];if(S.entropyCoderWithCustomPrecincts){for(var Ib=[];x<u+w;){var Jb=a[x++];Ib.push({PPx:Jb&15,PPy:Jb>>4})}S.precinctsSizes=Ib}var wa=[];S.selectiveArithmeticCodingBypass&&wa.push("selectiveArithmeticCodingBypass");S.resetContextProbabilities&&wa.push("resetContextProbabilities");S.terminationOnEachCodingPass&&wa.push("terminationOnEachCodingPass");S.verticalyStripe&&wa.push("verticalyStripe");S.predictableTermination&&wa.push("predictableTermination");
if(0<wa.length)throw B=!0,Error("JPX Error: Unsupported COD options ("+wa.join(", ")+")");q.mainHeader?q.COD=S:(q.currentTile.COD=S,q.currentTile.COC=[]);break;case 65424:u=b(a,w);var W={};W.index=b(a,w+2);W.length=d(a,w+4);W.dataEnd=W.length+w-2;W.partIndex=a[w+8];W.partsCount=a[w+9];q.mainHeader=!1;0===W.partIndex&&(W.COD=q.COD,W.COC=q.COC.slice(0),W.QCD=q.QCD,W.QCC=q.QCC.slice(0));q.currentTile=W;break;case 65427:W=q.currentTile;if(0===W.partIndex){for(var na=q,oc=na.SIZ.Csiz,Kb=na.tiles[W.index],
xa=0;xa<oc;xa++){var Lb=Kb.components[xa];Lb.quantizationParameters=void 0!==na.currentTile.QCC[xa]?na.currentTile.QCC[xa]:na.currentTile.QCD;Lb.codingStyleParameters=void 0!==na.currentTile.COC[xa]?na.currentTile.COC[xa]:na.currentTile.COD}Kb.codingStyleDefaultParameters=na.currentTile.COD;for(var ba=q,ya=ba.tiles[ba.currentTile.index],pc=ba.SIZ.Csiz,jb=0;jb<pc;jb++){for(var T=ya.components[jb],kb=T.codingStyleParameters.decompositionLevelsCount,Mb=[],Na=[],za=0;za<=kb;za++){var $a=za,Aa=T.codingStyleParameters,
ha={};Aa.entropyCoderWithCustomPrecincts?(ha.PPx=Aa.precinctsSizes[$a].PPx,ha.PPy=Aa.precinctsSizes[$a].PPy):(ha.PPx=15,ha.PPy=15);ha.xcb_=0<$a?Math.min(Aa.xcb,ha.PPx-1):Math.min(Aa.xcb,ha.PPx);ha.ycb_=0<$a?Math.min(Aa.ycb,ha.PPy-1):Math.min(Aa.ycb,ha.PPy);var qa=ha;var U={},ra=1<<kb-za;U.trx0=Math.ceil(T.tcx0/ra);U.try0=Math.ceil(T.tcy0/ra);U.trx1=Math.ceil(T.tcx1/ra);U.try1=Math.ceil(T.tcy1/ra);U.resLevel=za;var lb=1<<qa.PPx,mb=1<<qa.PPy,Nb=0===U.resLevel,Ob=U.trx1>U.trx0?Math.ceil(U.trx1/lb)-Math.floor(U.trx0/
lb):0,Pb=U.try1>U.try0?Math.ceil(U.try1/mb)-Math.floor(U.try0/mb):0;U.precinctParameters={precinctWidth:lb,precinctHeight:mb,numprecinctswide:Ob,numprecinctshigh:Pb,numprecincts:Ob*Pb,precinctWidthInSubband:1<<qa.PPx+(Nb?0:-1),precinctHeightInSubband:1<<qa.PPy+(Nb?0:-1)};Mb.push(U);if(0===za){var P={type:"LL"};P.tbx0=Math.ceil(T.tcx0/ra);P.tby0=Math.ceil(T.tcy0/ra);P.tbx1=Math.ceil(T.tcx1/ra);P.tby1=Math.ceil(T.tcy1/ra);P.resolution=U;f(ba,P,qa);Na.push(P);U.subbands=[P]}else{var ca=1<<kb-za+1,ab=
[];P={type:"HL"};P.tbx0=Math.ceil(T.tcx0/ca-.5);P.tby0=Math.ceil(T.tcy0/ca);P.tbx1=Math.ceil(T.tcx1/ca-.5);P.tby1=Math.ceil(T.tcy1/ca);P.resolution=U;f(ba,P,qa);Na.push(P);ab.push(P);P={type:"LH"};P.tbx0=Math.ceil(T.tcx0/ca);P.tby0=Math.ceil(T.tcy0/ca-.5);P.tbx1=Math.ceil(T.tcx1/ca);P.tby1=Math.ceil(T.tcy1/ca-.5);P.resolution=U;f(ba,P,qa);Na.push(P);ab.push(P);P={type:"HH"};P.tbx0=Math.ceil(T.tcx0/ca-.5);P.tby0=Math.ceil(T.tcy0/ca-.5);P.tbx1=Math.ceil(T.tcx1/ca-.5);P.tby1=Math.ceil(T.tcy1/ca-.5);
P.resolution=U;f(ba,P,qa);Na.push(P);ab.push(P);U.subbands=ab}}T.resolutions=Mb;T.subbands=Na}var Qb=ya.codingStyleDefaultParameters.progressionOrder;switch(Qb){case 0:ya.packetsIterator=new h(ba);break;case 1:ya.packetsIterator=new e(ba);break;case 2:ya.packetsIterator=new l(ba);break;case 3:ya.packetsIterator=new n(ba);break;case 4:ya.packetsIterator=new p(ba);break;default:throw Error("JPX Error: Unsupported progression order "+Qb);}}u=W.dataEnd-w;r(q,a,w,u);break;case 65365:case 65367:case 65368:case 65380:u=
b(a,w);break;case 65363:throw Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw Error("JPX Error: Unknown codestream code: "+t.toString(16));}w+=u}}catch(Rb){if(B||this.failOnCorruptedImage)throw Rb;m("Trying to recover from "+Rb.message)}for(var Sb=q.components,La=q.SIZ.Csiz,Tb=[],nb=0,qc=q.tiles.length;nb<qc;nb++){var ob=q.tiles[nb],Ba=[],da;for(da=0;da<La;da++){for(var rc=Ba,sc=da,Ca=ob.components[da],pb=Ca.codingStyleParameters,qb=Ca.quantizationParameters,tc=pb.decompositionLevelsCount,
bb=qb.SPqcds,uc=qb.scalarExpounded,vc=qb.guardBits,wc=pb.segmentationSymbolUsed,xc=q.components[da].precision,rb=pb.reversibleTransformation,yc=rb?new Q:new N,Ub=[],sb=0,Oa=0;Oa<=tc;Oa++){for(var Ma=Ca.resolutions[Oa],tb=Ma.trx1-Ma.trx0,Vb=Ma.try1-Ma.try0,Wb=new Float32Array(tb*Vb),ub=0,zc=Ma.subbands.length;ub<zc;ub++){if(uc){var Xb=bb[sb].mu;var vb=bb[sb].epsilon;sb++}else Xb=bb[0].mu,vb=bb[0].epsilon+(0<Oa?1-Oa:0);for(var Yb=Ma.subbands[ub],Ac=H[Yb.type],Bc=Wb,Zb=tb,sa=Yb,Cc=rb?1:Math.pow(2,xc+
Ac-vb)*(1+Xb/2048),wb=vc+vb-1,$b=rb,Dc=wc,Ec=sa.tbx0,Fc=sa.tby0,cb=sa.tbx1-sa.tbx0,ac=sa.codeblocks,Gc="H"===sa.type.charAt(0)?1:0,Hc="H"===sa.type.charAt(1)?Zb:0,xb=0,Ic=ac.length;xb<Ic;++xb){var ia=ac[xb],db=ia.tbx1_-ia.tbx0_,yb=ia.tby1_-ia.tby0_;if(0!==db&&0!==yb&&void 0!==ia.data){var ta=new F(db,yb,ia.subbandType,ia.zeroBitPlanes,wb);var zb=2;var eb=ia.data,Ab=0,bc=0,fb;var Z=0;for(fb=eb.length;Z<fb;Z++){var Da=eb[Z];Ab+=Da.end-Da.start;bc+=Da.codingpasses}var cc=new Uint8Array(Ab),Ea=0;Z=0;
for(fb=eb.length;Z<fb;Z++){Da=eb[Z];var dc=Da.data.subarray(Da.start,Da.end);cc.set(dc,Ea);Ea+=dc.length}var Jc=new k(cc,0,Ab);ta.setDecoder(Jc);for(Z=0;Z<bc;Z++){switch(zb){case 0:ta.runSignificancePropogationPass();break;case 1:ta.runMagnitudeRefinementPass();break;case 2:ta.runCleanupPass(),Dc&&ta.checkSegmentationSymbol()}zb=(zb+1)%3}var Pa=ia.tbx0_-Ec+(ia.tby0_-Fc)*cb,Kc=ta.coefficentsSign,Lc=ta.coefficentsMagnitude,Mc=ta.bitsDecoded,Nc=$b?0:.5,Bb;Ea=0;var Oc="LL"!==sa.type;for(Z=0;Z<yb;Z++){var Pc=
2*(Pa/cb|0)*(Zb-cb)+Gc+Hc;for(Bb=0;Bb<db;Bb++){var Fa=Lc[Ea];if(0!==Fa){Fa=(Fa+Nc)*Cc;0!==Kc[Ea]&&(Fa=-Fa);var ec=Mc[Ea];Bc[Oc?Pc+(Pa<<1):Pa]=$b&&ec>=wb?Fa:Fa*(1<<wb-ec)}Pa++;Ea++}Pa+=cb-db}}}}Ub.push({width:tb,height:Vb,items:Wb})}var Cb=yc.calculate(Ub,Ca.tcx0,Ca.tcy0);rc[sc]={left:Ca.tcx0,top:Ca.tcy0,width:Cb.width,height:Cb.height,items:Cb.items}}var Qa=Ba[0],oa=new Uint8Array(Qa.items.length*La),Qc={left:Qa.left,top:Qa.top,width:Qa.width,height:Qa.height,items:oa},Y=0,V;if(ob.codingStyleDefaultParameters.multipleComponentTransform){var fc=
4===La,Db=Ba[0].items,gc=Ba[1].items,hc=Ba[2].items,Rc=fc?Ba[3].items:null;var aa=Sb[0].precision-8;var Ra=(128<<aa)+.5;var ja=255*(1<<aa);var ic=.5*ja;var Eb=-ic;var Sc=ob.components[0],jc=La-3;var Sa=Db.length;if(Sc.codingStyleParameters.reversibleTransformation)for(V=0;V<Sa;V++,Y+=jc){var Ta=Db[V]+Ra;var Ua=gc[V];var Va=hc[V];var pa=Ta-(Va+Ua>>2);var Ga=pa+Va;var Ha=pa+Ua;oa[Y++]=0>=Ga?0:Ga>=ja?255:Ga>>aa;oa[Y++]=0>=pa?0:pa>=ja?255:pa>>aa;oa[Y++]=0>=Ha?0:Ha>=ja?255:Ha>>aa}else for(V=0;V<Sa;V++,
Y+=jc)Ta=Db[V]+Ra,Ua=gc[V],Va=hc[V],Ga=Ta+1.402*Va,pa=Ta-.34413*Ua-.71414*Va,Ha=Ta+1.772*Ua,oa[Y++]=0>=Ga?0:Ga>=ja?255:Ga>>aa,oa[Y++]=0>=pa?0:pa>=ja?255:pa>>aa,oa[Y++]=0>=Ha?0:Ha>=ja?255:Ha>>aa;if(fc)for(V=0,Y=3;V<Sa;V++,Y+=4){var Fb=Rc[V];oa[Y]=Fb<=Eb?0:Fb>=ic?255:Fb+Ra>>aa}}else for(da=0;da<La;da++){var kc=Ba[da].items;aa=Sb[da].precision-8;Ra=(128<<aa)+.5;ja=127.5*(1<<aa);Eb=-ja;Y=da;V=0;for(Sa=kc.length;V<Sa;V++){var Gb=kc[V];oa[Y]=Gb<=Eb?0:Gb>=ja?255:Gb+Ra>>aa;Y+=La}}Tb.push(Qc)}this.tiles=Tb;
this.width=q.SIZ.Xsiz-q.SIZ.XOsiz;this.height=q.SIZ.Ysiz-q.SIZ.YOsiz;this.componentsCount=q.SIZ.Csiz}};var y=function(){function b(b,c){var d=a(Math.max(b,c))+1;this.levels=[];for(var f=0;f<d;f++)this.levels.push({width:b,height:c,items:[]}),b=Math.ceil(b/2),c=Math.ceil(c/2)}b.prototype={reset:function(a,b){for(var c=0,d=0,f;c<this.levels.length;){f=this.levels[c];var g=a+b*f.width;if(void 0!==f.items[g]){d=f.items[g];break}f.index=g;a>>=1;b>>=1;c++}c--;f=this.levels[c];f.items[f.index]=d;this.currentLevel=
c;delete this.value},incrementValue:function(){var a=this.levels[this.currentLevel];a.items[a.index]++},nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];a--;if(0>a)return this.value=c,!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return b}(),C=function(){function b(b,c,d){var f=a(Math.max(b,c))+1;this.levels=[];for(var g=0;g<f;g++){for(var h=new Uint8Array(b*c),e=0,k=h.length;e<k;e++)h[e]=d;this.levels.push({width:b,height:c,items:h});b=Math.ceil(b/
2);c=Math.ceil(c/2)}}b.prototype={reset:function(a,b,c){for(var d=0;d<this.levels.length;){var f=this.levels[d],g=a+b*f.width;f.index=g;f=f.items[g];if(255===f)break;if(f>c)return this.currentLevel=d,this.propagateValues(),!1;a>>=1;b>>=1;d++}this.currentLevel=d-1;return!0},incrementValue:function(a){var b=this.levels[this.currentLevel];b.items[b.index]=a+1;this.propagateValues()},propagateValues:function(){for(var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];0<=--a;)b=this.levels[a],b.items[b.index]=
c},nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];b.items[b.index]=255;a--;if(0>a)return!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return b}(),F=function(){function a(a,f,g,h,e){this.width=a;this.height=f;this.contextLabelTable="HH"===g?d:"HL"===g?c:b;a*=f;this.neighborsSignificance=new Uint8Array(a);this.coefficentsSign=new Uint8Array(a);this.coefficentsMagnitude=14<e?new Uint32Array(a):6<e?new Uint16Array(a):new Uint8Array(a);this.processingFlags=
new Uint8Array(a);e=new Uint8Array(a);if(0!==h)for(f=0;f<a;f++)e[f]=h;this.bitsDecoded=e;this.reset()}var b=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),c=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),d=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,
0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);a.prototype={setDecoder:function(a){this.decoder=a},reset:function(){this.contexts=new Int8Array(19);this.contexts[0]=8;this.contexts[17]=92;this.contexts[18]=6},setNeighborsSignificance:function(a,b,c){var d=this.neighborsSignificance,f=this.width,g=this.height,h=0<b;b=b+1<f;if(0<a){var e=c-f;h&&(d[e-1]+=16);b&&(d[e+1]+=16);d[e]+=4}a+1<g&&(e=c+f,h&&(d[e-1]+=16),b&&(d[e+1]+=16),d[e]+=
4);h&&(d[c-1]+=1);b&&(d[c+1]+=1);d[c]|=128},runSignificancePropogationPass:function(){for(var a=this.decoder,b=this.width,c=this.height,d=this.coefficentsMagnitude,f=this.coefficentsSign,g=this.neighborsSignificance,e=this.processingFlags,h=this.contexts,k=this.contextLabelTable,q=this.bitsDecoded,l=0;l<c;l+=4)for(var n=0;n<b;n++)for(var w=l*b+n,B=0;4>B;B++,w+=b){var m=l+B;if(m>=c)break;e[w]&=-2;if(!d[w]&&g[w]){if(a.readBit(h,k[g[w]])){var p=this.decodeSignBit(m,n,w);f[w]=p;d[w]=1;this.setNeighborsSignificance(m,
n,w);e[w]|=2}q[w]++;e[w]|=1}}},decodeSignBit:function(a,b,c){var d=this.width,f=this.height,g=this.coefficentsMagnitude,e=this.coefficentsSign;var h=0<b&&0!==g[c-1];b+1<d&&0!==g[c+1]?(b=e[c+1],h?(h=e[c-1],b=1-b-h):b=1-b-b):h?(h=e[c-1],b=1-h-h):b=0;var k=3*b;h=0<a&&0!==g[c-d];a+1<f&&0!==g[c+d]?(b=e[c+d],h?(h=e[c-d],b=1-b-h+k):b=1-b-b+k):h?(h=e[c-d],b=1-h-h+k):b=k;return 0<=b?this.decoder.readBit(this.contexts,9+b):this.decoder.readBit(this.contexts,9-b)^1},runMagnitudeRefinementPass:function(){for(var a=
this.decoder,b=this.width,c=this.coefficentsMagnitude,d=this.neighborsSignificance,f=this.contexts,g=this.bitsDecoded,h=this.processingFlags,e=b*this.height,k=4*b,q=0,l;q<e;q=l){l=Math.min(e,q+k);for(var n=0;n<b;n++)for(var w=q+n;w<l;w+=b)if(c[w]&&0===(h[w]&1)){var B=16;0!==(h[w]&2)&&(h[w]^=2,B=0===(d[w]&127)?15:14);B=a.readBit(f,B);c[w]=c[w]<<1|B;g[w]++;h[w]|=1}}},runCleanupPass:function(){for(var a=this.decoder,b=this.width,c=this.height,d=this.neighborsSignificance,f=this.coefficentsMagnitude,
g=this.coefficentsSign,h=this.contexts,e=this.contextLabelTable,k=this.bitsDecoded,q=this.processingFlags,l=2*b,n=3*b,w,B=0;B<c;B=w){w=Math.min(B+4,c);for(var m=B*b,p=B+3<c,u=0;u<b;u++){var t=m+u,r=0,H=t,v=B;if(p&&0===q[t]&&0===q[t+b]&&0===q[t+l]&&0===q[t+n]&&0===d[t]&&0===d[t+b]&&0===d[t+l]&&0===d[t+n]){if(!a.readBit(h,18)){k[t]++;k[t+b]++;k[t+l]++;k[t+n]++;continue}r=a.readBit(h,17)<<1|a.readBit(h,17);0!==r&&(v=B+r,H+=r*b);var x=this.decodeSignBit(v,u,H);g[H]=x;f[H]=1;this.setNeighborsSignificance(v,
u,H);q[H]|=2;H=t;for(t=B;t<=v;t++,H+=b)k[H]++;r++}for(v=B+r;v<w;v++,H+=b)f[H]||0!==(q[H]&1)||(1===a.readBit(h,e[d[H]])&&(x=this.decodeSignBit(v,u,H),g[H]=x,f[H]=1,this.setNeighborsSignificance(v,u,H),q[H]|=2),k[H]++)}}},checkSegmentationSymbol:function(){var a=this.decoder,b=this.contexts;if(10!==(a.readBit(b,17)<<3|a.readBit(b,17)<<2|a.readBit(b,17)<<1|a.readBit(b,17)))throw Error("JPX Error: Invalid segmentation symbol");}};return a}(),O=function(){function a(){}a.prototype.calculate=function(a,
b,c){for(var d=a[0],f=1,g=a.length;f<g;f++)d=this.iterate(d,a[f],b,c);return d};a.prototype.extend=function(a,b,c){var d=b-1,f=b+1,g=b+c-2;b+=c;a[d--]=a[f++];a[b++]=a[g--];a[d--]=a[f++];a[b++]=a[g--];a[d--]=a[f++];a[b++]=a[g--];a[d]=a[f];a[b]=a[g]};a.prototype.iterate=function(a,b,c,d){var f=a.width,g=a.height,h=a.items,e=b.width,k=b.height;b=b.items;var q,l,n;for(q=n=0;q<g;q++){var w=2*q*e;for(l=0;l<f;l++,n++,w+=2)b[w]=h[n]}a.items=null;a=new Float32Array(e+8);if(1===e){if(0!==(c&1))for(n=w=0;w<
k;w++,n+=e)b[n]*=.5}else for(n=w=0;w<k;w++,n+=e)a.set(b.subarray(n,n+e),4),this.extend(a,4,e),this.filter(a,4,e),b.set(a.subarray(4,4+e),n);c=16;f=[];for(q=0;q<c;q++)f.push(new Float32Array(k+8));q=0;a=4+k;if(1===k){if(0!==(d&1))for(d=0;d<e;d++)b[d]*=.5}else for(d=0;d<e;d++){if(0===q){c=Math.min(e-d,c);n=d;for(w=4;w<a;n+=e,w++)for(g=0;g<c;g++)f[g][w]=b[n+g];q=c}q--;n=f[q];this.extend(n,4,k);this.filter(n,4,k);if(0===q)for(n=d-c+1,w=4;w<a;n+=e,w++)for(g=0;g<c;g++)b[n+g]=f[g][w]}return{width:e,height:k,
items:b}};return a}(),N=function(){function a(){O.call(this)}a.prototype=Object.create(O.prototype);a.prototype.filter=function(a,b,c){c>>=1;b|=0;var d;var f=b-3;for(d=c+4;d--;f+=2)a[f]*=.8128930661159609;f=b-2;var g=.443506852043971*a[f-1];for(d=c+3;d--;f+=2){var e=.443506852043971*a[f+1];a[f]=1.230174104914001*a[f]-g-e;if(d--)f+=2,g=.443506852043971*a[f+1],a[f]=1.230174104914001*a[f]-g-e;else break}f=b-1;g=.882911075530934*a[f-1];for(d=c+2;d--;f+=2)if(e=.882911075530934*a[f+1],a[f]-=g+e,d--)f+=
2,g=.882911075530934*a[f+1],a[f]-=g+e;else break;f=b;g=-.052980118572961*a[f-1];for(d=c+1;d--;f+=2)if(e=-.052980118572961*a[f+1],a[f]-=g+e,d--)f+=2,g=-.052980118572961*a[f+1],a[f]-=g+e;else break;if(0!==c)for(f=b+1,g=-1.586134342059924*a[f-1],d=c;d--;f+=2)if(e=-1.586134342059924*a[f+1],a[f]-=g+e,d--)f+=2,g=-1.586134342059924*a[f+1],a[f]-=g+e;else break};return a}(),Q=function(){function a(){O.call(this)}a.prototype=Object.create(O.prototype);a.prototype.filter=function(a,b,c){c>>=1;b|=0;var d;var f=
b;for(d=c+1;d--;f+=2)a[f]-=a[f-1]+a[f+1]+2>>2;f=b+1;for(d=c;d--;f+=2)a[f]+=a[f-1]+a[f+1]>>1};return a}();return c}();"use strict";var e=function(){function c(){}function g(a,b,c){this.data=a;this.start=b;this.end=c}function e(a,b,c){function d(a){for(var b=0,d=0;d<a;d++){var e=c.readBit(f,g);g=256>g?g<<1|e:(g<<1|e)&511|256;b=b<<1|e}return b>>>0}var f=a.getContexts(b),g=1;a=d(1);b=d(1)?d(1)?d(1)?d(1)?d(1)?d(32)+4436:d(12)+340:d(8)+84:d(6)+20:d(4)+4:d(2);return 0===a?b:0<b?-b:null}function h(a,b,c){a=
a.getContexts("IAID");for(var d=1,f=0;f<c;f++){var g=b.readBit(a,d);d=d<<1|g}return 31>c?d&(1<<c)-1:d&2147483647}function n(a,b,c){var d=c.decoder;c=c.contextCache.getContexts("GB");var f,g,e,h=[];for(f=0;f<b;f++){var k=h[f]=new Uint8Array(a);var q=1>f?k:h[f-1];var l=2>f?k:h[f-2];var n=l[0]<<13|l[1]<<12|l[2]<<11|q[0]<<7|q[1]<<6|q[2]<<5|q[3]<<4;for(g=0;g<a;g++)k[g]=e=d.readBit(c,n),n=(n&31735)<<1|(g+3<a?l[g+3]<<11:0)|(g+4<a?q[g+4]<<4:0)|e}return h}function m(a,b,c,d,f,g,e,h){a&&l("JBIG2 error: MMR encoding is not supported");
if(0===d&&!g&&!f&&4===e.length&&3===e[0].x&&-1===e[0].y&&-3===e[1].x&&-1===e[1].y&&2===e[2].x&&-2===e[2].y&&-2===e[3].x&&-2===e[3].y)return n(b,c,h);a=!!g;var k=v[d].concat(e);k.sort(function(a,b){return a.y-b.y||a.x-b.x});e=k.length;var q=new Int8Array(e),w=new Int8Array(e),m=[],p=0,t=0,B=0,u=0,H,r;for(r=0;r<e;r++)q[r]=k[r].x,w[r]=k[r].y,t=Math.min(t,k[r].x),B=Math.max(B,k[r].x),u=Math.min(u,k[r].y),r<e-1&&k[r].y===k[r+1].y&&k[r].x===k[r+1].x-1?p|=1<<e-1-r:m.push(r);var x=m.length,y=new Int8Array(x),
z=new Int8Array(x),I=new Uint16Array(x);for(H=0;H<x;H++)r=m[H],y[H]=k[r].x,z[H]=k[r].y,I[H]=1<<e-1-r;k=-t;u=-u;B=b-B;d=F[d];m=new Uint8Array(b);t=[];H=h.decoder;h=h.contextCache.getContexts("GB");for(var A=0,D,C,E,M=0,N,G=0;G<c;G++){if(f&&(r=H.readBit(h,d),A^=r)){t.push(m);continue}m=new Uint8Array(m);t.push(m);for(D=0;D<b;D++)if(a&&g[G][D])m[D]=0;else{if(D>=k&&D<B&&G>=u)for(M=M<<1&p,r=0;r<x;r++){if(C=G+z[r],E=D+y[r],C=t[C][E])C=I[r],M|=C}else for(M=0,N=e-1,r=0;r<e;r++,N--)E=D+q[r],0<=E&&E<b&&(C=
G+w[r],0<=C&&(C=t[C][E])&&(M|=C<<N));r=H.readBit(h,M);m[D]=r}}return t}function w(a,b,c,d,f,g,e,h,k){var q=y[c].coding;0===c&&(q=q.concat([h[0]]));var n=q.length,w=new Int32Array(n),m=new Int32Array(n),p;for(p=0;p<n;p++)w[p]=q[p].x,m[p]=q[p].y;var t=y[c].reference;0===c&&(t=t.concat([h[1]]));h=t.length;q=new Int32Array(h);var B=new Int32Array(h);for(p=0;p<h;p++)q[p]=t[p].x,B[p]=t[p].y;t=d[0].length;var u=d.length;c=O[c];var r=[],H=k.decoder;k=k.contextCache.getContexts("GR");for(var v=0,x=0;x<b;x++){e&&
(p=H.readBit(k,c),(v^=p)&&l("JBIG2 error: prediction is not supported"));var z=new Uint8Array(a);r.push(z);for(var D=0;D<a;D++){var I=0;for(p=0;p<n;p++){var A=x+m[p];var C=D+w[p];I=0>A||0>C||C>=a?I<<1:I<<1|r[A][C]}for(p=0;p<h;p++)A=x+B[p]+g,C=D+q[p]+f,I=0>A||A>=u||0>C||C>=t?I<<1:I<<1|d[A][C];p=H.readBit(k,I);z[D]=p}}return r}function p(a,b,c,d,f,g,k,q,n,m,p,t,u,r,H,v,x){a&&l("JBIG2 error: huffman is not supported");a=[];for(r=0;r<d;r++){var B=new Uint8Array(c);if(f)for(var y=0;y<c;y++)B[y]=f;a.push(B)}d=
x.decoder;f=x.contextCache;y=-e(f,"IADT",d);var z=0;for(r=0;r<g;){var I=e(f,"IADT",d);y+=I;I=e(f,"IAFS",d);I=z+=I;do{var D=1===k?0:e(f,"IAIT",d);B=k*y+D;D=h(f,d,n);var A=b&&e(f,"IARI",d);D=q[D];var C=D[0].length,E=D.length;if(A){A=e(f,"IARDW",d);var M=e(f,"IARDH",d),G=e(f,"IARDX",d),N=e(f,"IARDY",d);C+=A;E+=M;D=w(C,E,H,D,(A>>1)+G,(M>>1)+N,!1,v,x)}A=B-(t&1?0:E);M=I-(t&2?C:0);if(m){for(G=0;G<E;G++)if(B=a[M+G]){var F=D[G];var K=Math.min(c-A,C);switch(u){case 0:for(N=0;N<K;N++)B[A+N]|=F[N];break;case 2:for(N=
0;N<K;N++)B[A+N]^=F[N];break;default:l("JBIG2 error: operator "+u+" is not supported")}}I+=E-1}else{for(N=0;N<E;N++)if(B=a[A+N])switch(F=D[N],u){case 0:for(G=0;G<C;G++)B[M+G]|=F[G];break;case 2:for(G=0;G<C;G++)B[M+G]^=F[G];break;default:l("JBIG2 error: operator "+u+" is not supported")}I+=C-1}r++;D=e(f,"IADS",d);if(null===D)break;I+=D+p}while(1)}return a}function t(a,b){return{width:d(a,b),height:d(a,b+4),x:d(a,b+8),y:d(a,b+12),combinationOperator:a[b+16]&7}}function q(){}function r(){}c.prototype=
{getContexts:function(a){return a in this?this[a]:this[a]=new Int8Array(65536)}};g.prototype={get decoder(){var a=new k(this.data,this.start,this.end);return f(this,"decoder",a)},get contextCache(){var a=new c;return f(this,"contextCache",a)}};var H=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"patternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion",
"ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],v=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},
{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],y=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},
{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],F=[39717,1941,229,405],O=[32,8];q.prototype={onPageInformation:function(a){this.currentPageInfo=a;var b=new Uint8Array((a.width+7>>3)*a.height);if(a.defaultPixelValue){a=0;for(var c=b.length;a<c;a++)b[a]=255}this.buffer=b},drawBitmap:function(a,b){var c=this.currentPageInfo,d=a.width,f=a.height,
g=c.width+7>>3,e=c.combinationOperatorOverride?a.combinationOperator:c.combinationOperator;c=this.buffer;var h=128>>(a.x&7);a=a.y*g+(a.x>>3);var k;switch(e){case 0:for(e=0;e<f;e++){var q=h;var n=a;for(k=0;k<d;k++)b[e][k]&&(c[n]|=q),q>>=1,q||(q=128,n++);a+=g}break;case 2:for(e=0;e<f;e++){q=h;n=a;for(k=0;k<d;k++)b[e][k]&&(c[n]^=q),q>>=1,q||(q=128,n++);a+=g}break;default:l("JBIG2 error: operator "+e+" is not supported")}},onImmediateGenericRegion:function(a,b,c,d){var f=a.info;b=new g(b,c,d);a=m(a.mmr,
f.width,f.height,a.template,a.prediction,null,a.at,b);this.drawBitmap(f,a)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(b,c,d,f,k,q){b.huffman&&l("JBIG2 error: huffman is not supported");var n=this.symbols;n||(this.symbols=n={});for(var t=[],u=0,B=d.length;u<B;u++)t=t.concat(n[d[u]]);q=new g(f,k,q);u=b.huffman;B=b.refinement;d=t;t=b.numberOfNewSymbols;var r=b.template,H=b.at,v=b.refinementTemplate,x=b.refinementAt;u&&
l("JBIG2 error: huffman is not supported");b=[];var y=0,z=a(d.length+t);f=q.decoder;for(k=q.contextCache;b.length<t;){var D=e(k,"IADH",f);y+=D;for(D=0;;){var I=e(k,"IADW",f);if(null===I)break;D+=I;if(B)if(I=e(k,"IAAI",f),1<I)I=p(u,B,D,y,0,I,1,d.concat(b),z,0,0,1,0,void 0,v,x,q);else{I=h(k,f,z);var A=e(k,"IARDX",f),C=e(k,"IARDY",f);I=w(D,y,v,I<d.length?d[I]:b[I-d.length],A,C,!1,x,q)}else I=m(!1,D,y,r,!1,null,H,q);b.push(I)}}q=[];u=[];B=!1;for(r=d.length+t;u.length<r;){for(H=e(k,"IAEX",f);H--;)u.push(B);
B=!B}f=0;for(k=d.length;f<k;f++)u[f]&&q.push(d[f]);for(d=0;d<t;f++,d++)u[f]&&q.push(b[d]);n[c]=q},onImmediateTextRegion:function(b,c,d,f,e){for(var h=b.info,k=this.symbols,q=[],l=0,n=c.length;l<n;l++)q=q.concat(k[c[l]]);c=a(q.length);d=new g(d,f,e);b=p(b.huffman,b.refinement,h.width,h.height,b.defaultPixelValue,b.numberOfSymbolInstances,b.stripSize,q,c,b.transposed,b.dsOffset,b.referenceCorner,b.combinationOperator,void 0,b.refinementTemplate,b.refinementAt,d);this.drawBitmap(h,b)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,
arguments)}};r.prototype={parseChunks:function(a){for(var c=new q,f=0,g=a.length;f<g;f++){for(var e=a[f],h={},k=e.data,n=e.end,w=[],m=e.start;m<n;){e=k;var p=m;m={};m.number=d(e,p);var u=e[p+4];var r=u&63;H[r]||l("JBIG2 error: invalid segment type: "+r);m.type=r;m.typeName=H[r];m.deferredNonRetain=!!(u&128);u=!!(u&64);var v=e[p+5],x=v>>5&7;var y=[v&31];p+=6;if(7===v)for(x=d(e,p-1)&536870911,p+=3,v=x+7>>3,y[0]=e[p++];0<--v;)y.push(e[p++]);else 5!==v&&6!==v||l("JBIG2 error: invalid referred-to flags");
m.retainBits=y;v=256>=m.number?1:65536>=m.number?2:4;var z=[];for(y=0;y<x;y++){var I=1===v?e[p]:2===v?b(e,p):d(e,p);z.push(I);p+=v}m.referredTo=z;u?(m.pageAssociation=d(e,p),p+=4):m.pageAssociation=e[p++];m.length=d(e,p);p+=4;if(4294967295===m.length)if(38===r){u=t(e,p);x=!!(e[p+17]&1);r=new Uint8Array(6);x||(r[0]=255,r[1]=172);r[2]=u.height>>>24&255;r[3]=u.height>>16&255;r[4]=u.height>>8&255;r[5]=u.height&255;y=p;for(u=e.length;y<u;y++){for(x=0;6>x&&r[x]===e[y+x];)x++;if(6===x){m.length=y+6;break}}4294967295===
m.length&&l("JBIG2 error: segment end was not found")}else l("JBIG2 error: invalid unknown segment length");m.headerEnd=p;e=m;m=e.headerEnd;p={header:e,data:k};h.randomAccess||(p.start=m,m+=e.length,p.end=m);w.push(p);if(51===e.type)break}if(h.randomAccess)for(h=0,k=w.length;h<k;h++)w[h].start=m,m+=w[h].header.length,w[h].end=m;h=c;k=0;for(n=w.length;k<n;k++){x=void 0;u=w[k];e=h;m=u.header;p=u.data;r=u.start;u=u.end;switch(m.type){case 0:z={};x=b(p,r);z.huffman=!!(x&1);z.refinement=!!(x&2);z.huffmanDHSelector=
x>>2&3;z.huffmanDWSelector=x>>4&3;z.bitmapSizeSelector=x>>6&1;z.aggregationInstancesSelector=x>>7&1;z.bitmapCodingContextUsed=!!(x&256);z.bitmapCodingContextRetained=!!(x&512);z.template=x>>10&3;z.refinementTemplate=x>>12&1;r+=2;if(!z.huffman){v=0===z.template?4:1;y=[];for(x=0;x<v;x++)y.push({x:p[r]<<24>>24,y:p[r+1]<<24>>24}),r+=2;z.at=y}if(z.refinement&&!z.refinementTemplate){y=[];for(x=0;2>x;x++)y.push({x:p[r]<<24>>24,y:p[r+1]<<24>>24}),r+=2;z.refinementAt=y}z.numberOfExportedSymbols=d(p,r);r+=
4;z.numberOfNewSymbols=d(p,r);x=[z,m.number,m.referredTo,p,r+4,u];break;case 6:case 7:v={};v.info=t(p,r);r+=17;x=b(p,r);r+=2;v.huffman=!!(x&1);v.refinement=!!(x&2);v.stripSize=1<<(x>>2&3);v.referenceCorner=x>>4&3;v.transposed=!!(x&64);v.combinationOperator=x>>7&3;v.defaultPixelValue=x>>9&1;v.dsOffset=x<<17>>27;v.refinementTemplate=x>>15&1;v.huffman&&(x=b(p,r),r+=2,v.huffmanFS=x&3,v.huffmanDS=x>>2&3,v.huffmanDT=x>>4&3,v.huffmanRefinementDW=x>>6&3,v.huffmanRefinementDH=x>>8&3,v.huffmanRefinementDX=
x>>10&3,v.huffmanRefinementDY=x>>12&3,v.huffmanRefinementSizeSelector=!!(x&14));if(v.refinement&&!v.refinementTemplate){y=[];for(x=0;2>x;x++)y.push({x:p[r]<<24>>24,y:p[r+1]<<24>>24}),r+=2;v.refinementAt=y}v.numberOfSymbolInstances=d(p,r);r+=4;v.huffman&&l("JBIG2 error: huffman is not supported");x=[v,m.referredTo,p,r,u];break;case 38:case 39:z={};z.info=t(p,r);r+=17;x=p[r++];z.mmr=!!(x&1);z.template=x>>1&3;z.prediction=!!(x&8);if(!z.mmr){v=0===z.template?4:1;y=[];for(x=0;x<v;x++)y.push({x:p[r]<<24>>
24,y:p[r+1]<<24>>24}),r+=2;z.at=y}x=[z,p,r,u];break;case 48:u={width:d(p,r),height:d(p,r+4),resolutionX:d(p,r+8),resolutionY:d(p,r+12)};4294967295===u.height&&delete u.height;x=p[r+16];b(p,r+17);u.lossless=!!(x&1);u.refinement=!!(x&2);u.defaultPixelValue=x>>2&1;u.combinationOperator=x>>3&3;u.requiresBuffer=!!(x&32);u.combinationOperatorOverride=!!(x&64);x=[u];break;case 49:break;case 50:break;case 51:break;case 62:break;default:l("JBIG2 error: segment type "+m.typeName+"("+m.type+") is not implemented")}m=
"on"+m.typeName;m in e&&e[m].apply(e,x)}}return c}};return r}(),l=function(){console.error.apply(console,arguments);throw Error("PDFJS error: "+arguments[0]);},m=function(){console.warn.apply(console,arguments)},v=function(){console.info.apply(console,arguments)};e.prototype.parse=function(a){var b=0,c=a.length;151===a[b]&&74===a[b+1]&&66===a[b+2]&&50===a[b+3]&&13===a[b+4]&&10===a[b+5]&&26===a[b+6]&&10===a[b+7]||l("JBIG2 error: invalid header");b+=8;a[b++]&2||(d(a,b),b+=4);a=this.parseChunks([{data:a,
start:b,end:c}]);b=a.currentPageInfo.width;c=a.currentPageInfo.height;var f=a.buffer;a=new Uint8Array(b*c);for(var g=0,e=0,h=0;h<c;h++)for(var k=0,n,q=0;q<b;q++)k||(k=128,n=f[e++]),a[g++]=n&k?0:255,k>>=1;this.width=b;this.height=c;this.data=a};c.JpegImage=g;c.JpxImage=h;c.Jbig2Image=e})(f||(f={}));m.exports={JpegImage:e,JpegDecoder:f.JpegImage,JpxDecoder:f.JpxImage,Jbig2Decoder:f.Jbig2Image}},function(m,e,l){l.d(e,"a",function(){return h});var h=function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
};h.RPC_ID="ndstore/VolumeChunkSource"},function(m,e,l){e.a=function(d,e){e=Object(a.a)(Object(b.inflate)(new Uint8Array(e)));var g=d.chunkDataSize,k=d.source,l=k.spec.numChannels,n=e.shape;if(4!==n.length||n[0]!==l||n[1]!==g[2]||n[2]!==g[1]||n[3]!==g[0])throw Error("Shape "+JSON.stringify(n)+" does not match chunkDataSize "+Object(c.m)(g));g=e.dataType.dataType;k=k.spec;if(g!==k.dataType)throw Error("Data type "+f.a[g]+" does not match "+("expected data type "+f.a[k.dataType]));Object(h.a)(d,e.data)};
var h=l(25),f=l(9),c=l(1),a=l(83),b=l(26);l.n(b)},function(m,e,l){e.a=function(a){if(147!==a[0]||78!==a[1]||85!==a[2]||77!==a[3]||80!==a[4]||89!==a[5])throw Error("Data does not match npy format.");var b=a[6],d=a[7];if(1!==b||0!==d)throw Error("Unsupported npy version "+b+"."+d);b=(new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint16(8,!0);d=(new TextDecoder("utf-8")).decode(a.subarray(10,b+10));b+=10;try{var g=Object(f.b)(d)}catch(u){throw Error("Failed to parse npy header: "+u);}var e=g.descr;
d=g.shape;var h=1;if(!Array.isArray(d))throw Error("Invalid shape ${JSON.stringify(shape)}");for(var l=$jscomp.makeIterator(d),m=l.next();!m.done;m=l.next()){m=m.value;if("number"!==typeof m)throw Error("Invalid shape ${JSON.stringify(shape)}");h*=m}l=c.get(e);if(void 0===l)throw Error("Unsupported numpy data type "+JSON.stringify(e));e=l.arrayConstructor;h*=l.javascriptElementsPerArrayElement;if(e.BYTES_PER_ELEMENT*h+b!==a.byteLength)throw Error("Expected length does not match length of data");a=
new e(a.buffer,a.byteOffset+b,h);l.fixEndianness(a);return new n(a,d,l,!0===g.fortran_order)};m=l(10);var h=l(12),f=l(5),c=new Map;c.set("|u1",{arrayConstructor:Uint8Array,fixEndianness:function(){},javascriptElementsPerArrayElement:1,elementBytes:1,dataType:m.b.UINT8});c.set("|i1",{arrayConstructor:Uint8Array,fixEndianness:function(){},javascriptElementsPerArrayElement:1,elementBytes:1,dataType:m.b.UINT8});l={};e=$jscomp.makeIterator([["<",h.b.LITTLE],[">",h.b.BIG]]);for(var a=e.next();!a.done;l=
{endianness:l.endianness},a=e.next()){var b=$jscomp.makeIterator(a.value);a=b.next().value;l.endianness=b.next().value;b=$jscomp.makeIterator(["u","i"]);for(var d=b.next();!d.done;d=b.next())d=d.value,c.set(""+a+d+"2",{arrayConstructor:Uint16Array,elementBytes:2,fixEndianness:function(a){return function(b){Object(h.c)(b,a.endianness)}}(l),javascriptElementsPerArrayElement:1,dataType:m.b.UINT16}),c.set(""+a+d+"4",{arrayConstructor:Uint32Array,elementBytes:4,fixEndianness:function(a){return function(b){Object(h.d)(b,
a.endianness)}}(l),javascriptElementsPerArrayElement:1,dataType:m.b.UINT32}),c.set(""+a+d+"8",{arrayConstructor:Uint32Array,elementBytes:8,fixEndianness:function(a){return function(b){Object(h.d)(b,a.endianness)}}(l),javascriptElementsPerArrayElement:2,dataType:m.b.UINT64});c.set(a+"f4",{arrayConstructor:Float32Array,elementBytes:4,fixEndianness:function(a){return function(b){Object(h.d)(b,a.endianness)}}(l),javascriptElementsPerArrayElement:1,dataType:m.b.FLOAT32})}var n=function k(a,b,c,d){if(!(this instanceof
k))throw new TypeError("Cannot call a class as a function");this.data=a;this.shape=b;this.dataType=c;this.fortranOrder=d}},function(m,e,l){function h(f){if(!(this instanceof h))return new h(f);f=this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},f||{});f.raw&&0<f.windowBits?f.windowBits=-f.windowBits:f.gzip&&0<f.windowBits&&16>f.windowBits&&(f.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new n;this.strm.avail_out=0;
var e=c.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(0!==e)throw Error(d[e]);f.header&&c.deflateSetHeader(this.strm,f.header);if(f.dictionary){f="string"===typeof f.dictionary?b.string2buf(f.dictionary):"[object ArrayBuffer]"===g.call(f.dictionary)?new Uint8Array(f.dictionary):f.dictionary;e=c.deflateSetDictionary(this.strm,f);if(0!==e)throw Error(d[e]);this._dict_set=!0}}function f(a,b){b=new h(b);b.push(a,!0);if(b.err)throw b.msg||d[b.err];return b.result}var c=
l(85),a=l(4),b=l(40),d=l(27),n=l(41),g=Object.prototype.toString;h.prototype.push=function(d,f){var e=this.strm,h=this.options.chunkSize;if(this.ended)return!1;f=f===~~f?f:!0===f?4:0;"string"===typeof d?e.input=b.string2buf(d):"[object ArrayBuffer]"===g.call(d)?e.input=new Uint8Array(d):e.input=d;e.next_in=0;e.avail_in=e.input.length;do{0===e.avail_out&&(e.output=new a.Buf8(h),e.next_out=0,e.avail_out=h);d=c.deflate(e,f);if(1!==d&&0!==d)return this.onEnd(d),this.ended=!0,!1;if(0===e.avail_out||0===
e.avail_in&&(4===f||2===f))if("string"===this.options.to)this.onData(b.buf2binstring(a.shrinkBuf(e.output,e.next_out)));else this.onData(a.shrinkBuf(e.output,e.next_out))}while((0<e.avail_in||0===e.avail_out)&&1!==d);if(4===f)return d=c.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,0===d;2===f&&(this.onEnd(0),e.avail_out=0);return!0};h.prototype.onData=function(a){this.chunks.push(a)};h.prototype.onEnd=function(b){0===b&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks));
this.chunks=[];this.err=b;this.msg=this.strm.msg};e.Deflate=h;e.deflate=f;e.deflateRaw=function(a,b){b=b||{};b.raw=!0;return f(a,b)};e.gzip=function(a,b){b=b||{};b.gzip=!0;return f(a,b)}},function(m,e,l){function h(a,b){a.msg=x[b];return b}function f(a){for(var b=a.length;0<=--b;)a[b]=0}function c(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out);0!==c&&(L.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=
c,0===b.pending&&(b.pending_out=0))}function a(a,b){E._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,b);a.block_start=a.strstart;c(a.strm)}function b(a,b){a.pending_buf[a.pending++]=b}function d(a,b){a.pending_buf[a.pending++]=b>>>8&255;a.pending_buf[a.pending++]=b&255}function n(a,b){var c=a.max_chain_length,d=a.strstart,f=a.prev_length,g=a.nice_match,e=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,h=a.window,k=a.w_mask,q=a.prev,l=a.strstart+258,n=h[d+f-1],w=h[d+
f];a.prev_length>=a.good_match&&(c>>=2);g>a.lookahead&&(g=a.lookahead);do{var m=b;if(h[m+f]===w&&h[m+f-1]===n&&h[m]===h[d]&&h[++m]===h[d+1]){d+=2;for(m++;h[++d]===h[++m]&&h[++d]===h[++m]&&h[++d]===h[++m]&&h[++d]===h[++m]&&h[++d]===h[++m]&&h[++d]===h[++m]&&h[++d]===h[++m]&&h[++d]===h[++m]&&d<l;);m=258-(l-d);d=l-258;if(m>f){a.match_start=b;f=m;if(m>=g)break;n=h[d+f-1];w=h[d+f]}}}while((b=q[b&k])>e&&0!==--c);return f<=a.lookahead?f:a.lookahead}function g(a){var b=a.w_size,c;do{var d=a.window_size-a.lookahead-
a.strstart;if(a.strstart>=b+(b-262)){L.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;var f=c=a.hash_size;do{var g=a.head[--f];a.head[f]=g>=b?g-b:0}while(--c);f=c=b;do g=a.prev[--f],a.prev[f]=g>=b?g-b:0;while(--c);d+=b}if(0===a.strm.avail_in)break;f=a.strm;c=a.window;g=a.strstart+a.lookahead;var e=f.avail_in;e>d&&(e=d);0===e?c=0:(f.avail_in-=e,L.arraySet(c,f.input,f.next_in,e,g),1===f.state.wrap?f.adler=G(f.adler,c,e,g):2===f.state.wrap&&(f.adler=w(f.adler,c,e,g)),
f.next_in+=e,f.total_in+=e,c=e);a.lookahead+=c;if(3<=a.lookahead+a.insert)for(d=a.strstart-a.insert,a.ins_h=a.window[d],a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+3-1])&a.hash_mask,a.prev[d&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=d,d++,a.insert--,3>a.lookahead+a.insert););}while(262>a.lookahead&&0!==a.strm.avail_in)}function k(b,c){for(var d;;){if(262>b.lookahead){g(b);if(262>b.lookahead&&0===c)return 1;if(0===b.lookahead)break}d=
0;3<=b.lookahead&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,d=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);0!==d&&b.strstart-d<=b.w_size-262&&(b.match_length=n(b,d));if(3<=b.match_length)if(d=E._tr_tally(b,b.strstart-b.match_start,b.match_length-3),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&3<=b.lookahead){b.match_length--;do b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,b.prev[b.strstart&
b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart;while(0!==--b.match_length);b.strstart++}else b.strstart+=b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else d=E._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=2>b.strstart?b.strstart:2;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function r(b,c){for(var d,
f;;){if(262>b.lookahead){g(b);if(262>b.lookahead&&0===c)return 1;if(0===b.lookahead)break}d=0;3<=b.lookahead&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,d=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);b.prev_length=b.match_length;b.prev_match=b.match_start;b.match_length=2;0!==d&&b.prev_length<b.max_lazy_match&&b.strstart-d<=b.w_size-262&&(b.match_length=n(b,d),5>=b.match_length&&(1===b.strategy||3===b.match_length&&4096<b.strstart-b.match_start)&&
(b.match_length=2));if(3<=b.prev_length&&b.match_length<=b.prev_length){f=b.strstart+b.lookahead-3;d=E._tr_tally(b,b.strstart-1-b.prev_match,b.prev_length-3);b.lookahead-=b.prev_length-1;b.prev_length-=2;do++b.strstart<=f&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);while(0!==--b.prev_length);b.match_available=0;b.match_length=2;b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}else if(b.match_available){if((d=
E._tr_tally(b,0,b.window[b.strstart-1]))&&a(b,!1),b.strstart++,b.lookahead--,0===b.strm.avail_out)return 1}else b.match_available=1,b.strstart++,b.lookahead--}b.match_available&&(E._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0);b.insert=2>b.strstart?b.strstart:2;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function p(b,c){for(var d,f,e,h=b.window;;){if(258>=b.lookahead){g(b);if(258>=b.lookahead&&0===c)return 1;if(0===b.lookahead)break}b.match_length=
0;if(3<=b.lookahead&&0<b.strstart&&(f=b.strstart-1,d=h[f],d===h[++f]&&d===h[++f]&&d===h[++f])){for(e=b.strstart+258;d===h[++f]&&d===h[++f]&&d===h[++f]&&d===h[++f]&&d===h[++f]&&d===h[++f]&&d===h[++f]&&d===h[++f]&&f<e;);b.match_length=258-(e-f);b.match_length>b.lookahead&&(b.match_length=b.lookahead)}3<=b.match_length?(d=E._tr_tally(b,1,b.match_length-3),b.lookahead-=b.match_length,b.strstart+=b.match_length,b.match_length=0):(d=E._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++);if(d&&
(a(b,!1),0===b.strm.avail_out))return 1}b.insert=0;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function y(b,c){for(var d;;){if(0===b.lookahead&&(g(b),0===b.lookahead)){if(0===c)return 1;break}b.match_length=0;d=E._tr_tally(b,0,b.window[b.strstart]);b.lookahead--;b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=0;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function t(a,b,c,d,f){this.good_length=
a;this.max_lazy=b;this.nice_length=c;this.max_chain=d;this.func=f}function v(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=
this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new L.Buf16(1146);this.dyn_dtree=new L.Buf16(122);this.bl_tree=new L.Buf16(78);f(this.dyn_ltree);f(this.dyn_dtree);f(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new L.Buf16(16);this.heap=new L.Buf16(573);f(this.heap);this.heap_max=this.heap_len=0;this.depth=new L.Buf16(573);f(this.depth);this.bi_valid=
this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function z(a){if(!a||!a.state)return h(a,-2);a.total_in=a.total_out=0;a.data_type=2;var b=a.state;b.pending=0;b.pending_out=0;0>b.wrap&&(b.wrap=-b.wrap);b.status=b.wrap?42:113;a.adler=2===b.wrap?0:1;b.last_flush=0;E._tr_init(b);return 0}function u(a){var b=z(a);0===b&&(a=a.state,a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=K[a.level].max_lazy,a.good_match=K[a.level].good_length,
a.nice_match=K[a.level].nice_length,a.max_chain_length=K[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return b}function A(a,b,c,d,f,g){if(!a)return-2;var e=1;-1===b&&(b=6);0>d?(e=0,d=-d):15<d&&(e=2,d-=16);if(1>f||9<f||8!==c||8>d||15<d||0>b||9<b||0>g||4<g)return h(a,-2);8===d&&(d=9);var k=new v;a.state=k;k.strm=a;k.wrap=e;k.gzhead=null;k.w_bits=d;k.w_size=1<<k.w_bits;k.w_mask=k.w_size-1;k.hash_bits=f+7;k.hash_size=
1<<k.hash_bits;k.hash_mask=k.hash_size-1;k.hash_shift=~~((k.hash_bits+3-1)/3);k.window=new L.Buf8(2*k.w_size);k.head=new L.Buf16(k.hash_size);k.prev=new L.Buf16(k.w_size);k.lit_bufsize=1<<f+6;k.pending_buf_size=4*k.lit_bufsize;k.pending_buf=new L.Buf8(k.pending_buf_size);k.d_buf=1*k.lit_bufsize;k.l_buf=3*k.lit_bufsize;k.level=b;k.strategy=g;k.method=c;return u(a)}var L=l(4),E=l(86),G=l(38),w=l(39),x=l(27);var K=[new t(0,0,0,0,function(b,c){var d=65535;for(d>b.pending_buf_size-5&&(d=b.pending_buf_size-
5);;){if(1>=b.lookahead){g(b);if(0===b.lookahead&&0===c)return 1;if(0===b.lookahead)break}b.strstart+=b.lookahead;b.lookahead=0;var f=b.block_start+d;if(0===b.strstart||b.strstart>=f)if(b.lookahead=b.strstart-f,b.strstart=f,a(b,!1),0===b.strm.avail_out)return 1;if(b.strstart-b.block_start>=b.w_size-262&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=0;if(4===c)return a(b,!0),0===b.strm.avail_out?3:4;b.strstart>b.block_start&&a(b,!1);return 1}),new t(4,4,8,4,k),new t(4,5,16,8,k),new t(4,6,32,32,
k),new t(4,4,16,16,r),new t(8,16,32,32,r),new t(8,16,128,128,r),new t(8,32,128,256,r),new t(32,128,258,1024,r),new t(32,258,258,4096,r)];e.deflateInit=function(a,b){return A(a,b,8,15,8,0)};e.deflateInit2=A;e.deflateReset=u;e.deflateResetKeep=z;e.deflateSetHeader=function(a,b){if(!a||!a.state||2!==a.state.wrap)return-2;a.state.gzhead=b;return 0};e.deflate=function(a,g){if(!a||!a.state||5<g||0>g)return a?h(a,-2):-2;var e=a.state;if(!a.output||!a.input&&0!==a.avail_in||666===e.status&&4!==g)return h(a,
0===a.avail_out?-5:-2);e.strm=a;var k=e.last_flush;e.last_flush=g;if(42===e.status)if(2===e.wrap)a.adler=0,b(e,31),b(e,139),b(e,8),e.gzhead?(b(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),b(e,e.gzhead.time&255),b(e,e.gzhead.time>>8&255),b(e,e.gzhead.time>>16&255),b(e,e.gzhead.time>>24&255),b(e,9===e.level?2:2<=e.strategy||2>e.level?4:0),b(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(b(e,e.gzhead.extra.length&255),b(e,e.gzhead.extra.length>>
8&255)),e.gzhead.hcrc&&(a.adler=w(a.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=69):(b(e,0),b(e,0),b(e,0),b(e,0),b(e,0),b(e,9===e.level?2:2<=e.strategy||2>e.level?4:0),b(e,3),e.status=113);else{var l=8+(e.w_bits-8<<4)<<8;l|=(2<=e.strategy||2>e.level?0:6>e.level?1:6===e.level?2:3)<<6;0!==e.strstart&&(l|=32);e.status=113;d(e,l+(31-l%31));0!==e.strstart&&(d(e,a.adler>>>16),d(e,a.adler&65535));a.adler=1}if(69===e.status)if(e.gzhead.extra){for(l=e.pending;e.gzindex<(e.gzhead.extra.length&65535)&&
(e.pending!==e.pending_buf_size||(e.gzhead.hcrc&&e.pending>l&&(a.adler=w(a.adler,e.pending_buf,e.pending-l,l)),c(a),l=e.pending,e.pending!==e.pending_buf_size));)b(e,e.gzhead.extra[e.gzindex]&255),e.gzindex++;e.gzhead.hcrc&&e.pending>l&&(a.adler=w(a.adler,e.pending_buf,e.pending-l,l));e.gzindex===e.gzhead.extra.length&&(e.gzindex=0,e.status=73)}else e.status=73;if(73===e.status)if(e.gzhead.name){l=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>l&&(a.adler=w(a.adler,e.pending_buf,
e.pending-l,l)),c(a),l=e.pending,e.pending===e.pending_buf_size)){var n=1;break}n=e.gzindex<e.gzhead.name.length?e.gzhead.name.charCodeAt(e.gzindex++)&255:0;b(e,n)}while(0!==n);e.gzhead.hcrc&&e.pending>l&&(a.adler=w(a.adler,e.pending_buf,e.pending-l,l));0===n&&(e.gzindex=0,e.status=91)}else e.status=91;if(91===e.status)if(e.gzhead.comment){l=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>l&&(a.adler=w(a.adler,e.pending_buf,e.pending-l,l)),c(a),l=e.pending,e.pending===e.pending_buf_size)){n=
1;break}n=e.gzindex<e.gzhead.comment.length?e.gzhead.comment.charCodeAt(e.gzindex++)&255:0;b(e,n)}while(0!==n);e.gzhead.hcrc&&e.pending>l&&(a.adler=w(a.adler,e.pending_buf,e.pending-l,l));0===n&&(e.status=103)}else e.status=103;103===e.status&&(e.gzhead.hcrc?(e.pending+2>e.pending_buf_size&&c(a),e.pending+2<=e.pending_buf_size&&(b(e,a.adler&255),b(e,a.adler>>8&255),a.adler=0,e.status=113)):e.status=113);if(0!==e.pending){if(c(a),0===a.avail_out)return e.last_flush=-1,0}else if(0===a.avail_in&&(g<<
1)-(4<g?9:0)<=(k<<1)-(4<k?9:0)&&4!==g)return h(a,-5);if(666===e.status&&0!==a.avail_in)return h(a,-5);if(0!==a.avail_in||0!==e.lookahead||0!==g&&666!==e.status){k=2===e.strategy?y(e,g):3===e.strategy?p(e,g):K[e.level].func(e,g);if(3===k||4===k)e.status=666;if(1===k||3===k)return 0===a.avail_out&&(e.last_flush=-1),0;if(2===k&&(1===g?E._tr_align(e):5!==g&&(E._tr_stored_block(e,0,0,!1),3===g&&(f(e.head),0===e.lookahead&&(e.strstart=0,e.block_start=0,e.insert=0))),c(a),0===a.avail_out))return e.last_flush=
-1,0}if(4!==g)return 0;if(0>=e.wrap)return 1;2===e.wrap?(b(e,a.adler&255),b(e,a.adler>>8&255),b(e,a.adler>>16&255),b(e,a.adler>>24&255),b(e,a.total_in&255),b(e,a.total_in>>8&255),b(e,a.total_in>>16&255),b(e,a.total_in>>24&255)):(d(e,a.adler>>>16),d(e,a.adler&65535));c(a);0<e.wrap&&(e.wrap=-e.wrap);return 0!==e.pending?0:1};e.deflateEnd=function(a){if(!a||!a.state)return-2;var b=a.state.status;if(42!==b&&69!==b&&73!==b&&91!==b&&103!==b&&113!==b&&666!==b)return h(a,-2);a.state=null;return 113===b?h(a,
-3):0};e.deflateSetDictionary=function(a,b){var c=b.length;if(!a||!a.state)return-2;var d=a.state;var e=d.wrap;if(2===e||1===e&&42!==d.status||d.lookahead)return-2;1===e&&(a.adler=G(a.adler,b,c,0));d.wrap=0;if(c>=d.w_size){0===e&&(f(d.head),d.strstart=0,d.block_start=0,d.insert=0);var h=new L.Buf8(d.w_size);L.arraySet(h,b,c-d.w_size,d.w_size,0);b=h;c=d.w_size}h=a.avail_in;var k=a.next_in;var l=a.input;a.avail_in=c;a.next_in=0;a.input=b;for(g(d);3<=d.lookahead;){b=d.strstart;c=d.lookahead-2;do d.ins_h=
(d.ins_h<<d.hash_shift^d.window[b+3-1])&d.hash_mask,d.prev[b&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=b,b++;while(--c);d.strstart=b;d.lookahead=2;g(d)}d.strstart+=d.lookahead;d.block_start=d.strstart;d.insert=d.lookahead;d.lookahead=0;d.match_length=d.prev_length=2;d.match_available=0;a.next_in=k;a.input=l;a.avail_in=h;d.wrap=e;return 0};e.deflateInfo="pako deflate (from Nodeca project)"},function(m,e,l){function h(a){for(var b=a.length;0<=--b;)a[b]=0}function f(a,b,c,d,f){this.static_tree=a;this.extra_bits=
b;this.extra_base=c;this.elems=d;this.max_length=f;this.has_stree=a&&a.length}function c(a,b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b}function a(a,b){a.pending_buf[a.pending++]=b&255;a.pending_buf[a.pending++]=b>>>8&255}function b(b,c,d){b.bi_valid>16-d?(b.bi_buf|=c<<b.bi_valid&65535,a(b,b.bi_buf),b.bi_buf=c>>16-b.bi_valid,b.bi_valid+=d-16):(b.bi_buf|=c<<b.bi_valid&65535,b.bi_valid+=d)}function d(a,c,d){b(a,d[2*c],d[2*c+1])}function n(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(0<--b);return c>>>
1}function g(a,b,c){var d=Array(16),f=0,e;for(e=1;15>=e;e++)d[e]=f=f+c[e-1]<<1;for(c=0;c<=b;c++)f=a[2*c+1],0!==f&&(a[2*c]=n(d[f]++,f))}function k(a){var b;for(b=0;286>b;b++)a.dyn_ltree[2*b]=0;for(b=0;30>b;b++)a.dyn_dtree[2*b]=0;for(b=0;19>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function r(b){8<b.bi_valid?a(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf);b.bi_buf=0;b.bi_valid=0}function p(a,b,c,d){var f=2*b,e=2*c;return a[f]<a[e]||a[f]===
a[e]&&d[b]<=d[c]}function y(a,b,c){for(var d=a.heap[c],f=c<<1;f<=a.heap_len;){f<a.heap_len&&p(b,a.heap[f+1],a.heap[f],a.depth)&&f++;if(p(b,d,a.heap[f],a.depth))break;a.heap[c]=a.heap[f];c=f;f<<=1}a.heap[c]=d}function t(a,c,f){var e=0;if(0!==a.last_lit){do{var g=a.pending_buf[a.d_buf+2*e]<<8|a.pending_buf[a.d_buf+2*e+1];var h=a.pending_buf[a.l_buf+e];e++;if(0===g)d(a,h,c);else{var k=D[h];d(a,k+256+1,c);var l=G[k];0!==l&&(h-=C[k],b(a,h,l));g--;k=256>g?H[g]:H[256+(g>>>7)];d(a,k,f);l=w[k];0!==l&&(g-=
F[k],b(a,g,l))}}while(e<a.last_lit)}d(a,256,c)}function v(a,b){var c=b.dyn_tree,d=b.stat_desc.static_tree,f=b.stat_desc.has_stree,e=b.stat_desc.elems,h,k=-1;a.heap_len=0;a.heap_max=573;for(h=0;h<e;h++)0!==c[2*h]?(a.heap[++a.heap_len]=k=h,a.depth[h]=0):c[2*h+1]=0;for(;2>a.heap_len;){var l=a.heap[++a.heap_len]=2>k?++k:0;c[2*l]=1;a.depth[l]=0;a.opt_len--;f&&(a.static_len-=d[2*l+1])}b.max_code=k;for(h=a.heap_len>>1;1<=h;h--)y(a,c,h);l=e;do h=a.heap[1],a.heap[1]=a.heap[a.heap_len--],y(a,c,1),d=a.heap[1],
a.heap[--a.heap_max]=h,a.heap[--a.heap_max]=d,c[2*l]=c[2*h]+c[2*d],a.depth[l]=(a.depth[h]>=a.depth[d]?a.depth[h]:a.depth[d])+1,c[2*h+1]=c[2*d+1]=l,a.heap[1]=l++,y(a,c,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];h=b.dyn_tree;l=b.max_code;d=b.stat_desc.static_tree;f=b.stat_desc.has_stree;e=b.stat_desc.extra_bits;var n=b.stat_desc.extra_base,w=b.stat_desc.max_length,m,p=0;for(m=0;15>=m;m++)a.bl_count[m]=0;h[2*a.heap[a.heap_max]+1]=0;for(b=a.heap_max+1;573>b;b++){var q=a.heap[b];m=h[2*h[2*
q+1]+1]+1;m>w&&(m=w,p++);h[2*q+1]=m;if(!(q>l)){a.bl_count[m]++;var u=0;q>=n&&(u=e[q-n]);var t=h[2*q];a.opt_len+=t*(m+u);f&&(a.static_len+=t*(d[2*q+1]+u))}}if(0!==p){do{for(m=w-1;0===a.bl_count[m];)m--;a.bl_count[m]--;a.bl_count[m+1]+=2;a.bl_count[w]--;p-=2}while(0<p);for(m=w;0!==m;m--)for(q=a.bl_count[m];0!==q;)d=a.heap[--b],d>l||(h[2*d+1]!==m&&(a.opt_len+=(m-h[2*d+1])*h[2*d],h[2*d+1]=m),q--)}g(c,k,a.bl_count)}function z(a,b,c){var d,f=-1,e=b[1],g=0,h=7,k=4;0===e&&(h=138,k=3);b[2*(c+1)+1]=65535;for(d=
0;d<=c;d++){var l=e;e=b[2*(d+1)+1];++g<h&&l===e||(g<k?a.bl_tree[2*l]+=g:0!==l?(l!==f&&a.bl_tree[2*l]++,a.bl_tree[32]++):10>=g?a.bl_tree[34]++:a.bl_tree[36]++,g=0,f=l,0===e?(h=138,k=3):l===e?(h=6,k=3):(h=7,k=4))}}function u(a,c,f){var e,g=-1,h=c[1],k=0,l=7,n=4;0===h&&(l=138,n=3);for(e=0;e<=f;e++){var m=h;h=c[2*(e+1)+1];if(!(++k<l&&m===h)){if(k<n){do d(a,m,a.bl_tree);while(0!==--k)}else 0!==m?(m!==g&&(d(a,m,a.bl_tree),k--),d(a,16,a.bl_tree),b(a,k-3,2)):10>=k?(d(a,17,a.bl_tree),b(a,k-3,3)):(d(a,18,a.bl_tree),
b(a,k-11,7));k=0;g=m;0===h?(l=138,n=3):m===h?(l=6,n=3):(l=7,n=4)}}}function A(a){var b=4093624447,c;for(c=0;31>=c;c++,b>>>=1)if(b&1&&0!==a.dyn_ltree[2*c])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(c=32;256>c;c++)if(0!==a.dyn_ltree[2*c])return 1;return 0}function L(c,d,f,e){b(c,0+(e?1:0),3);r(c);a(c,f);a(c,~f);E.arraySet(c.pending_buf,c.window,d,f,c.pending);c.pending+=f}var E=l(4),G=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,
1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=Array(576);h(q);var I=Array(60);h(I);var H=Array(512);h(H);var D=Array(256);h(D);var C=Array(29);h(C);var F=Array(30);h(F);var O,N,Q,J=!1;e._tr_init=function(a){if(!J){var b,d,e,h=Array(16);for(e=d=0;28>e;e++)for(C[e]=d,b=0;b<1<<G[e];b++)D[d++]=e;D[d-1]=e;for(e=d=0;16>e;e++)for(F[e]=d,b=0;b<1<<w[e];b++)H[d++]=e;for(d>>=7;30>e;e++)for(F[e]=d<<7,
b=0;b<1<<w[e]-7;b++)H[256+d++]=e;for(b=0;15>=b;b++)h[b]=0;for(b=0;143>=b;)q[2*b+1]=8,b++,h[8]++;for(;255>=b;)q[2*b+1]=9,b++,h[9]++;for(;279>=b;)q[2*b+1]=7,b++,h[7]++;for(;287>=b;)q[2*b+1]=8,b++,h[8]++;g(q,287,h);for(b=0;30>b;b++)I[2*b+1]=5,I[2*b]=n(b,5);O=new f(q,G,257,286,15);N=new f(I,w,0,30,15);Q=new f([],x,0,19,7);J=!0}a.l_desc=new c(a.dyn_ltree,O);a.d_desc=new c(a.dyn_dtree,N);a.bl_desc=new c(a.bl_tree,Q);a.bi_buf=0;a.bi_valid=0;k(a)};e._tr_stored_block=L;e._tr_flush_block=function(a,c,d,f){var e=
0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=A(a));v(a,a.l_desc);v(a,a.d_desc);z(a,a.dyn_ltree,a.l_desc.max_code);z(a,a.dyn_dtree,a.d_desc.max_code);v(a,a.bl_desc);for(e=18;3<=e&&0===a.bl_tree[2*K[e]+1];e--);a.opt_len+=3*(e+1)+14;var g=a.opt_len+3+7>>>3;var h=a.static_len+3+7>>>3;h<=g&&(g=h)}else g=h=d+5;if(d+4<=g&&-1!==c)L(a,c,d,f);else if(4===a.strategy||h===g)b(a,2+(f?1:0),3),t(a,q,I);else{b(a,4+(f?1:0),3);c=a.l_desc.max_code+1;d=a.d_desc.max_code+1;e+=1;b(a,c-257,5);b(a,d-1,5);b(a,
e-4,4);for(g=0;g<e;g++)b(a,a.bl_tree[2*K[g]+1],3);u(a,a.dyn_ltree,c-1);u(a,a.dyn_dtree,d-1);t(a,a.dyn_ltree,a.dyn_dtree)}k(a);f&&r(a)};e._tr_tally=function(a,b,c){a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(D[c]+256+1)]++,a.dyn_dtree[2*(256>b?H[b]:H[256+(b>>>7)])]++);return a.last_lit===a.lit_bufsize-1};e._tr_align=function(c){b(c,2,3);d(c,256,
q);16===c.bi_valid?(a(c,c.bi_buf),c.bi_buf=0,c.bi_valid=0):8<=c.bi_valid&&(c.pending_buf[c.pending++]=c.bi_buf&255,c.bi_buf>>=8,c.bi_valid-=8)}},function(m,e,l){function h(b){if(!(this instanceof h))return new h(b);var f=this.options=a.assign({chunkSize:16384,windowBits:0,to:""},b||{});f.raw&&0<=f.windowBits&&16>f.windowBits&&(f.windowBits=-f.windowBits,0===f.windowBits&&(f.windowBits=-15));!(0<=f.windowBits&&16>f.windowBits)||b&&b.windowBits||(f.windowBits+=32);15<f.windowBits&&48>f.windowBits&&
0===(f.windowBits&15)&&(f.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new g;this.strm.avail_out=0;b=c.inflateInit2(this.strm,f.windowBits);if(b!==d.Z_OK)throw Error(n[b]);this.header=new k;c.inflateGetHeader(this.strm,this.header)}function f(a,b){b=new h(b);b.push(a,!0);if(b.err)throw b.msg||n[b.err];return b.result}var c=l(88),a=l(4),b=l(40),d=l(42),n=l(27),g=l(41),k=l(91),r=Object.prototype.toString;h.prototype.push=function(f,e){var g=this.strm,h=this.options.chunkSize,
k=this.options.dictionary,l=!1;if(this.ended)return!1;e=e===~~e?e:!0===e?d.Z_FINISH:d.Z_NO_FLUSH;"string"===typeof f?g.input=b.binstring2buf(f):"[object ArrayBuffer]"===r.call(f)?g.input=new Uint8Array(f):g.input=f;g.next_in=0;g.avail_in=g.input.length;do{0===g.avail_out&&(g.output=new a.Buf8(h),g.next_out=0,g.avail_out=h);f=c.inflate(g,d.Z_NO_FLUSH);f===d.Z_NEED_DICT&&k&&(f="string"===typeof k?b.string2buf(k):"[object ArrayBuffer]"===r.call(k)?new Uint8Array(k):k,f=c.inflateSetDictionary(this.strm,
f));f===d.Z_BUF_ERROR&&!0===l&&(f=d.Z_OK,l=!1);if(f!==d.Z_STREAM_END&&f!==d.Z_OK)return this.onEnd(f),this.ended=!0,!1;if(g.next_out&&(0===g.avail_out||f===d.Z_STREAM_END||0===g.avail_in&&(e===d.Z_FINISH||e===d.Z_SYNC_FLUSH)))if("string"===this.options.to){var n=b.utf8border(g.output,g.next_out);var m=g.next_out-n;var p=b.buf2string(g.output,n);g.next_out=m;g.avail_out=h-m;m&&a.arraySet(g.output,g.output,n,m,0);this.onData(p)}else this.onData(a.shrinkBuf(g.output,g.next_out));0===g.avail_in&&0===
g.avail_out&&(l=!0)}while((0<g.avail_in||0===g.avail_out)&&f!==d.Z_STREAM_END);f===d.Z_STREAM_END&&(e=d.Z_FINISH);if(e===d.Z_FINISH)return f=c.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===d.Z_OK;e===d.Z_SYNC_FLUSH&&(this.onEnd(d.Z_OK),g.avail_out=0);return!0};h.prototype.onData=function(a){this.chunks.push(a)};h.prototype.onEnd=function(b){b===d.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};
e.Inflate=h;e.inflate=f;e.inflateRaw=function(a,b){b=b||{};b.raw=!0;return f(a,b)};e.ungzip=f},function(m,e,l){function h(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function f(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=
this.distbits=this.lenbits=0;this.next=null;this.lens=new g.Buf16(320);this.work=new g.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function c(a){if(!a||!a.state)return-2;var b=a.state;a.total_in=a.total_out=b.total=0;a.msg="";b.wrap&&(a.adler=b.wrap&1);b.mode=1;b.last=0;b.havedict=0;b.dmax=32768;b.head=null;b.hold=0;b.bits=0;b.lencode=b.lendyn=new g.Buf32(852);b.distcode=b.distdyn=new g.Buf32(592);b.sane=1;b.back=-1;return 0}function a(a){if(!a||!a.state)return-2;var b=
a.state;b.wsize=0;b.whave=0;b.wnext=0;return c(a)}function b(b,c){if(!b||!b.state)return-2;var d=b.state;if(0>c){var f=0;c=-c}else f=(c>>4)+1,48>c&&(c&=15);if(c&&(8>c||15<c))return-2;null!==d.window&&d.wbits!==c&&(d.window=null);d.wrap=f;d.wbits=c;return a(b)}function d(a,c){if(!a)return-2;var d=new f;a.state=d;d.window=null;c=b(a,c);0!==c&&(a.state=null);return c}function n(a,b,c,d){var f=a.state;null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new g.Buf8(f.wsize));d>=f.wsize?(g.arraySet(f.window,
b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(a=f.wsize-f.wnext,a>d&&(a=d),g.arraySet(f.window,b,c-d,a,f.wnext),(d-=a)?(g.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=a,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=a)));return 0}var g=l(4),k=l(38),r=l(39),p=l(89),y=l(90),t=!0,v,z;e.inflateReset=a;e.inflateReset2=b;e.inflateResetKeep=c;e.inflateInit=function(a){return d(a,15)};e.inflateInit2=d;e.inflate=function(a,b){var c,d=new g.Buf8(4),f=[16,17,18,0,8,7,9,6,
10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;var e=a.state;12===e.mode&&(e.mode=13);var l=a.next_out;var m=a.output;var q=a.avail_out;var u=a.next_in;var A=a.input;var D=a.avail_in;var C=e.hold;var F=e.bits;var O=D;var N=q;var Q=0;a:for(;;)switch(e.mode){case 1:if(0===e.wrap){e.mode=13;break}for(;16>F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}if(e.wrap&2&&35615===C){e.check=0;d[0]=C&255;d[1]=C>>>8&255;e.check=r(e.check,d,2,0);F=C=0;e.mode=2;break}e.flags=
0;e.head&&(e.head.done=!1);if(!(e.wrap&1)||(((C&255)<<8)+(C>>8))%31){a.msg="incorrect header check";e.mode=30;break}if(8!==(C&15)){a.msg="unknown compression method";e.mode=30;break}C>>>=4;F-=4;var J=(C&15)+8;if(0===e.wbits)e.wbits=J;else if(J>e.wbits){a.msg="invalid window size";e.mode=30;break}e.dmax=1<<J;a.adler=e.check=1;e.mode=C&512?10:12;F=C=0;break;case 2:for(;16>F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}e.flags=C;if(8!==(e.flags&255)){a.msg="unknown compression method";e.mode=30;break}if(e.flags&
57344){a.msg="unknown header flags set";e.mode=30;break}e.head&&(e.head.text=C>>8&1);e.flags&512&&(d[0]=C&255,d[1]=C>>>8&255,e.check=r(e.check,d,2,0));F=C=0;e.mode=3;case 3:for(;32>F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}e.head&&(e.head.time=C);e.flags&512&&(d[0]=C&255,d[1]=C>>>8&255,d[2]=C>>>16&255,d[3]=C>>>24&255,e.check=r(e.check,d,4,0));F=C=0;e.mode=4;case 4:for(;16>F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}e.head&&(e.head.xflags=C&255,e.head.os=C>>8);e.flags&512&&(d[0]=C&255,d[1]=C>>>8&255,
e.check=r(e.check,d,2,0));F=C=0;e.mode=5;case 5:if(e.flags&1024){for(;16>F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}e.length=C;e.head&&(e.head.extra_len=C);e.flags&512&&(d[0]=C&255,d[1]=C>>>8&255,e.check=r(e.check,d,2,0));F=C=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(e.flags&1024){var B=e.length;B>D&&(B=D);B&&(e.head&&(J=e.head.extra_len-e.length,e.head.extra||(e.head.extra=Array(e.head.extra_len)),g.arraySet(e.head.extra,A,u,B,J)),e.flags&512&&(e.check=r(e.check,A,B,u)),D-=B,u+=B,e.length-=
B);if(e.length)break a}e.length=0;e.mode=7;case 7:if(e.flags&2048){if(0===D)break a;B=0;do J=A[u+B++],e.head&&J&&65536>e.length&&(e.head.name+=String.fromCharCode(J));while(J&&B<D);e.flags&512&&(e.check=r(e.check,A,B,u));D-=B;u+=B;if(J)break a}else e.head&&(e.head.name=null);e.length=0;e.mode=8;case 8:if(e.flags&4096){if(0===D)break a;B=0;do J=A[u+B++],e.head&&J&&65536>e.length&&(e.head.comment+=String.fromCharCode(J));while(J&&B<D);e.flags&512&&(e.check=r(e.check,A,B,u));D-=B;u+=B;if(J)break a}else e.head&&
(e.head.comment=null);e.mode=9;case 9:if(e.flags&512){for(;16>F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}if(C!==(e.check&65535)){a.msg="header crc mismatch";e.mode=30;break}F=C=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0);a.adler=e.check=0;e.mode=12;break;case 10:for(;32>F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}a.adler=e.check=h(C);F=C=0;e.mode=11;case 11:if(0===e.havedict)return a.next_out=l,a.avail_out=q,a.next_in=u,a.avail_in=D,e.hold=C,e.bits=F,2;a.adler=e.check=1;e.mode=12;case 12:if(5===
b||6===b)break a;case 13:if(e.last){C>>>=F&7;F-=F&7;e.mode=27;break}for(;3>F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}e.last=C&1;C>>>=1;--F;switch(C&3){case 0:e.mode=14;break;case 1:J=e;if(t){v=new g.Buf32(512);z=new g.Buf32(32);for(B=0;144>B;)J.lens[B++]=8;for(;256>B;)J.lens[B++]=9;for(;280>B;)J.lens[B++]=7;for(;288>B;)J.lens[B++]=8;y(1,J.lens,0,288,v,0,J.work,{bits:9});for(B=0;32>B;)J.lens[B++]=5;y(2,J.lens,0,32,z,0,J.work,{bits:5});t=!1}J.lencode=v;J.lenbits=9;J.distcode=z;J.distbits=5;e.mode=
20;if(6===b){C>>>=2;F-=2;break a}break;case 2:e.mode=17;break;case 3:a.msg="invalid block type",e.mode=30}C>>>=2;F-=2;break;case 14:C>>>=F&7;for(F-=F&7;32>F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}if((C&65535)!==(C>>>16^65535)){a.msg="invalid stored block lengths";e.mode=30;break}e.length=C&65535;F=C=0;e.mode=15;if(6===b)break a;case 15:e.mode=16;case 16:if(B=e.length){B>D&&(B=D);B>q&&(B=q);if(0===B)break a;g.arraySet(m,A,u,B,l);D-=B;u+=B;q-=B;l+=B;e.length-=B;break}e.mode=12;break;case 17:for(;14>
F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}e.nlen=(C&31)+257;C>>>=5;F-=5;e.ndist=(C&31)+1;C>>>=5;F-=5;e.ncode=(C&15)+4;C>>>=4;F-=4;if(286<e.nlen||30<e.ndist){a.msg="too many length or distance symbols";e.mode=30;break}e.have=0;e.mode=18;case 18:for(;e.have<e.ncode;){for(;3>F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}e.lens[f[e.have++]]=C&7;C>>>=3;F-=3}for(;19>e.have;)e.lens[f[e.have++]]=0;e.lencode=e.lendyn;e.lenbits=7;B={bits:e.lenbits};Q=y(0,e.lens,0,19,e.lencode,0,e.work,B);e.lenbits=B.bits;if(Q){a.msg=
"invalid code lengths set";e.mode=30;break}e.have=0;e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;;){var M=e.lencode[C&(1<<e.lenbits)-1];B=M>>>24;M&=65535;if(B<=F)break;if(0===D)break a;D--;C+=A[u++]<<F;F+=8}if(16>M)C>>>=B,F-=B,e.lens[e.have++]=M;else{if(16===M){for(J=B+2;F<J;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}C>>>=B;F-=B;if(0===e.have){a.msg="invalid bit length repeat";e.mode=30;break}J=e.lens[e.have-1];B=3+(C&3);C>>>=2;F-=2}else if(17===M){for(J=B+3;F<J;){if(0===D)break a;D--;C+=A[u++]<<
F;F+=8}C>>>=B;F-=B;J=0;B=3+(C&7);C>>>=3;F-=3}else{for(J=B+7;F<J;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}C>>>=B;F-=B;J=0;B=11+(C&127);C>>>=7;F-=7}if(e.have+B>e.nlen+e.ndist){a.msg="invalid bit length repeat";e.mode=30;break}for(;B--;)e.lens[e.have++]=J}}if(30===e.mode)break;if(0===e.lens[256]){a.msg="invalid code -- missing end-of-block";e.mode=30;break}e.lenbits=9;B={bits:e.lenbits};Q=y(1,e.lens,0,e.nlen,e.lencode,0,e.work,B);e.lenbits=B.bits;if(Q){a.msg="invalid literal/lengths set";e.mode=30;break}e.distbits=
6;e.distcode=e.distdyn;B={bits:e.distbits};Q=y(2,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,B);e.distbits=B.bits;if(Q){a.msg="invalid distances set";e.mode=30;break}e.mode=20;if(6===b)break a;case 20:e.mode=21;case 21:if(6<=D&&258<=q){a.next_out=l;a.avail_out=q;a.next_in=u;a.avail_in=D;e.hold=C;e.bits=F;p(a,N);l=a.next_out;m=a.output;q=a.avail_out;u=a.next_in;A=a.input;D=a.avail_in;C=e.hold;F=e.bits;12===e.mode&&(e.back=-1);break}for(e.back=0;;){M=e.lencode[C&(1<<e.lenbits)-1];B=M>>>24;J=M>>>16&255;
M&=65535;if(B<=F)break;if(0===D)break a;D--;C+=A[u++]<<F;F+=8}if(J&&0===(J&240)){var R=B;var la=J;for(c=M;;){M=e.lencode[c+((C&(1<<R+la)-1)>>R)];B=M>>>24;J=M>>>16&255;M&=65535;if(R+B<=F)break;if(0===D)break a;D--;C+=A[u++]<<F;F+=8}C>>>=R;F-=R;e.back+=R}C>>>=B;F-=B;e.back+=B;e.length=M;if(0===J){e.mode=26;break}if(J&32){e.back=-1;e.mode=12;break}if(J&64){a.msg="invalid literal/length code";e.mode=30;break}e.extra=J&15;e.mode=22;case 22:if(e.extra){for(J=e.extra;F<J;){if(0===D)break a;D--;C+=A[u++]<<
F;F+=8}e.length+=C&(1<<e.extra)-1;C>>>=e.extra;F-=e.extra;e.back+=e.extra}e.was=e.length;e.mode=23;case 23:for(;;){M=e.distcode[C&(1<<e.distbits)-1];B=M>>>24;J=M>>>16&255;M&=65535;if(B<=F)break;if(0===D)break a;D--;C+=A[u++]<<F;F+=8}if(0===(J&240)){R=B;la=J;for(c=M;;){M=e.distcode[c+((C&(1<<R+la)-1)>>R)];B=M>>>24;J=M>>>16&255;M&=65535;if(R+B<=F)break;if(0===D)break a;D--;C+=A[u++]<<F;F+=8}C>>>=R;F-=R;e.back+=R}C>>>=B;F-=B;e.back+=B;if(J&64){a.msg="invalid distance code";e.mode=30;break}e.offset=M;
e.extra=J&15;e.mode=24;case 24:if(e.extra){for(J=e.extra;F<J;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}e.offset+=C&(1<<e.extra)-1;C>>>=e.extra;F-=e.extra;e.back+=e.extra}if(e.offset>e.dmax){a.msg="invalid distance too far back";e.mode=30;break}e.mode=25;case 25:if(0===q)break a;B=N-q;if(e.offset>B){B=e.offset-B;if(B>e.whave&&e.sane){a.msg="invalid distance too far back";e.mode=30;break}B>e.wnext?(B-=e.wnext,J=e.wsize-B):J=e.wnext-B;B>e.length&&(B=e.length);R=e.window}else R=m,J=l-e.offset,B=e.length;
B>q&&(B=q);q-=B;e.length-=B;do m[l++]=R[J++];while(--B);0===e.length&&(e.mode=21);break;case 26:if(0===q)break a;m[l++]=e.length;q--;e.mode=21;break;case 27:if(e.wrap){for(;32>F;){if(0===D)break a;D--;C|=A[u++]<<F;F+=8}N-=q;a.total_out+=N;e.total+=N;N&&(a.adler=e.check=e.flags?r(e.check,m,N,l-N):k(e.check,m,N,l-N));N=q;if((e.flags?C:h(C))!==e.check){a.msg="incorrect data check";e.mode=30;break}F=C=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;32>F;){if(0===D)break a;D--;C+=A[u++]<<F;F+=8}if(C!==(e.total&
4294967295)){a.msg="incorrect length check";e.mode=30;break}F=C=0}e.mode=29;case 29:Q=1;break a;case 30:Q=-3;break a;case 31:return-4;default:return-2}a.next_out=l;a.avail_out=q;a.next_in=u;a.avail_in=D;e.hold=C;e.bits=F;if((e.wsize||N!==a.avail_out&&30>e.mode&&(27>e.mode||4!==b))&&n(a,a.output,a.next_out,N-a.avail_out))return e.mode=31,-4;O-=a.avail_in;N-=a.avail_out;a.total_in+=O;a.total_out+=N;e.total+=N;e.wrap&&N&&(a.adler=e.check=e.flags?r(e.check,m,N,a.next_out-N):k(e.check,m,N,a.next_out-N));
a.data_type=e.bits+(e.last?64:0)+(12===e.mode?128:0)+(20===e.mode||15===e.mode?256:0);(0===O&&0===N||4===b)&&0===Q&&(Q=-5);return Q};e.inflateEnd=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};e.inflateGetHeader=function(a,b){if(!a||!a.state)return-2;a=a.state;if(0===(a.wrap&2))return-2;a.head=b;b.done=!1;return 0};e.inflateSetDictionary=function(a,b){var c=b.length;if(!a||!a.state)return-2;var d=a.state;if(0!==d.wrap&&11!==d.mode)return-2;if(11===
d.mode){var e=k(1,b,c,0);if(e!==d.check)return-3}if(n(a,b,c,c))return d.mode=31,-4;d.havedict=1;return 0};e.inflateInfo="pako inflate (from Nodeca project)"},function(m,e,l){m.exports=function(e,f){var c=e.state;var a=e.next_in;var b=e.input;var d=a+(e.avail_in-5);var h=e.next_out;var g=e.output;f=h-(f-e.avail_out);var k=h+(e.avail_out-257);var l=c.dmax;var m=c.wsize;var y=c.whave;var t=c.wnext;var v=c.window;var z=c.hold;var u=c.bits;var A=c.lencode;var L=c.distcode;var E=(1<<c.lenbits)-1;var G=
(1<<c.distbits)-1;a:do{15>u&&(z+=b[a++]<<u,u+=8,z+=b[a++]<<u,u+=8);var w=A[z&E];b:for(;;){var x=w>>>24;z>>>=x;u-=x;x=w>>>16&255;if(0===x)g[h++]=w&65535;else if(x&16){var K=w&65535;if(x&=15)u<x&&(z+=b[a++]<<u,u+=8),K+=z&(1<<x)-1,z>>>=x,u-=x;15>u&&(z+=b[a++]<<u,u+=8,z+=b[a++]<<u,u+=8);w=L[z&G];c:for(;;){x=w>>>24;z>>>=x;u-=x;x=w>>>16&255;if(x&16){w&=65535;x&=15;u<x&&(z+=b[a++]<<u,u+=8,u<x&&(z+=b[a++]<<u,u+=8));w+=z&(1<<x)-1;if(w>l){e.msg="invalid distance too far back";c.mode=30;break a}z>>>=x;u-=x;
x=h-f;if(w>x){x=w-x;if(x>y&&c.sane){e.msg="invalid distance too far back";c.mode=30;break a}var q=0;var I=v;if(0===t){if(q+=m-x,x<K){K-=x;do g[h++]=v[q++];while(--x);q=h-w;I=g}}else if(t<x){if(q+=m+t-x,x-=t,x<K){K-=x;do g[h++]=v[q++];while(--x);q=0;if(t<K){x=t;K-=x;do g[h++]=v[q++];while(--x);q=h-w;I=g}}}else if(q+=t-x,x<K){K-=x;do g[h++]=v[q++];while(--x);q=h-w;I=g}for(;2<K;)g[h++]=I[q++],g[h++]=I[q++],g[h++]=I[q++],K-=3;K&&(g[h++]=I[q++],1<K&&(g[h++]=I[q++]))}else{q=h-w;do g[h++]=g[q++],g[h++]=
g[q++],g[h++]=g[q++],K-=3;while(2<K);K&&(g[h++]=g[q++],1<K&&(g[h++]=g[q++]))}}else if(0===(x&64)){w=L[(w&65535)+(z&(1<<x)-1)];continue c}else{e.msg="invalid distance code";c.mode=30;break a}break}}else if(0===(x&64)){w=A[(w&65535)+(z&(1<<x)-1)];continue b}else{x&32?c.mode=12:(e.msg="invalid literal/length code",c.mode=30);break a}break}}while(a<d&&h<k);K=u>>3;a-=K;u-=K<<3;e.next_in=a;e.next_out=h;e.avail_in=a<d?5+(d-a):5-(a-d);e.avail_out=h<k?257+(k-h):257-(h-k);c.hold=z&(1<<u)-1;c.bits=u}},function(m,
e,l){var h=l(4),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];m.exports=function(d,e,g,k,l,m,y,t){var n=t.bits,p,r,A,L,E,G,w=0,x=new h.Buf16(16);
var K=new h.Buf16(16);var q,I=0;for(p=0;15>=p;p++)x[p]=0;for(r=0;r<k;r++)x[e[g+r]]++;var H=n;for(A=15;1<=A&&0===x[A];A--);H>A&&(H=A);if(0===A)return l[m++]=20971520,l[m++]=20971520,t.bits=1,0;for(n=1;n<A&&0===x[n];n++);H<n&&(H=n);for(p=L=1;15>=p;p++)if(L<<=1,L-=x[p],0>L)return-1;if(0<L&&(0===d||1!==A))return-1;K[1]=0;for(p=1;15>p;p++)K[p+1]=K[p]+x[p];for(r=0;r<k;r++)0!==e[g+r]&&(y[K[e[g+r]]++]=r);if(0===d){var D=q=y;var C=19}else 1===d?(D=f,w-=257,q=c,I-=257,C=256):(D=a,q=b,C=-1);r=E=0;p=n;var F=
m;k=H;K=0;var O=-1;var N=1<<H;var Q=N-1;if(1===d&&852<N||2===d&&592<N)return 1;for(;;){var J=p-K;if(y[r]<C){var B=0;var M=y[r]}else y[r]>C?(B=q[I+y[r]],M=D[w+y[r]]):(B=96,M=0);L=1<<p-K;n=G=1<<k;do G-=L,l[F+(E>>K)+G]=J<<24|B<<16|M|0;while(0!==G);for(L=1<<p-1;E&L;)L>>=1;0!==L?(E&=L-1,E+=L):E=0;r++;if(0===--x[p]){if(p===A)break;p=e[g+y[r]]}if(p>H&&(E&Q)!==O){0===K&&(K=H);F+=n;k=p-K;for(L=1<<k;k+K<A;){L-=x[k+K];if(0>=L)break;k++;L<<=1}N+=1<<k;if(1===d&&852<N||2===d&&592<N)return 1;O=E&Q;l[O]=H<<24|k<<
16|F-m|0}}0!==E&&(l[F+E]=p-K<<24|4194304);t.bits=H;return 0}},function(m,e,l){m.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:
b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(e,"__esModule",{value:!0});l.d(e,"DVIDVolumeChunkSource",function(){return p});l.d(e,"TileChunkSource",function(){return y});m=l(2);var a=l(93),b=l(24),d=l(16);e=
l(13);var n=l(11);l=l(0);var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=
a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},r=new Map([[a.b.JPEG,d.a]]),p=function(e){function k(){h(this,k);return f(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}c(k,e);g(k,[{key:"download",value:function(a,b){var c=this.parameters;var d=this.computeChunkBounds(a);d=this.getPath(d,a.chunkDataSize);var e=this.getDecoder(c);return Object(n.e)(Object(n.c)(c.baseUrls,d),"arraybuffer",b).then(function(b){return e(a,
b)})}},{key:"getPath",value:function(b,c){var d=this.parameters;return d.encoding===a.c.JPEG?"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/raw/0_1_2/"+(c[0]+"_"+c[1]+"_"+c[2]+"/")+(b[0]+"_"+b[1]+"_"+b[2]+"/jpeg"):"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/raw/0_1_2/"+(c[0]+"_"+c[1]+"_"+c[2]+"/")+(b[0]+"_"+b[1]+"_"+b[2]+"?compression=googlegzip")}},{key:"getDecoder",value:function(c){return c.encoding===a.c.JPEG?d.a:b.a}}]);return k}(Object(m.WithParameters)(e.a,a.d));p=k([Object(l.g)()],p);var y=
function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.chunkDecoder=r.get(a.parameters.encoding);return a}c(b,a);g(b,[{key:"download",value:function(a,b){var c=this,d=this.parameters,e=a.chunkGridPosition;a.chunkDataSize=this.spec.chunkDataSize;return Object(n.e)(Object(n.c)(d.baseUrls,"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/tile/"+(d.dims+"/"+d.level+"/")+(e[0]+"_"+e[1]+"_"+e[2])),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,
b)})}}]);return b}(Object(m.WithParameters)(e.a,a.a));y=k([Object(l.g)()],y)},function(m,e,l){function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}l.d(e,"c",function(){return a});l.d(e,"d",function(){return b});l.d(e,"b",function(){return d});l.d(e,"a",function(){return n});var a;(function(a){a[a.JPEG=0]="JPEG";a[a.COMPRESSED_SEGMENTATION=1]="COMPRESSED_SEGMENTATION"})(a||(a={}));m=function k(){c(this,k)};var b=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments))}f(b,a);return b}(m);b.RPC_ID="dvid/VolumeChunkSource";var d;(function(a){a[a.JPEG=0]="JPEG"})(d||(d={}));var n=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}f(b,a);return b}(m);n.RPC_ID="dvid/TileChunkSource"},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a){var b=[];Object(z.a)(a,function(a){Object(z.e)(a);b.push(Object(z.g)(a.sectionId))});return b}function b(a,b,c){return Object(v.d)(Object(v.c)(b.baseUrls,
"/render-ws/v1/owner/"+b.owner+"/project/"+b.project+"/"+("stack/"+b.stack+"/local-to-world-coordinates"),"PUT"),a,"json",c)}function d(a,c,d,e){var f=[];Object(z.a)(c,function(a){var b=Object(z.g)(a.pId),c=Object(z.g)(a.qId),d=Object(z.e)(a.matches);a=d.p;d=d.q;for(var e=0;e<a[0].length;e++)f.push({tileId:b,local:[a[0][e],a[1][e]]}),f.push({tileId:c,local:[d[0][e],d[1][e]]})});return b(f,d,e).then(function(b){for(var c=new y.a,d=0;d<b.length;d++){var e=Object(z.e)(b[d]);e=Object(z.d)(e.world);c.appendArray(e)}a.vertexPositions=
c.view})}function n(a,b,c,e){if(1===b.length)b="/render-ws/v1/owner/"+c.owner+"/matchCollection/"+(c.matchCollection+"/group/"+b[0]+"/matchesWith/"+b[0]);else if(2===b.length)b="/render-ws/v1/owner/"+c.owner+"/matchCollection/"+(c.matchCollection+"/group/"+b[0]+"/matchesWith/"+b[1]);else throw Error("Invalid section Id vector of length: "+JSON.stringify(b.length));return Object(v.e)(Object(v.c)(c.baseUrls,b),"json",e).then(function(b){return d(a,b,c,e)})}function g(b,c,d,e){return Object(v.e)(Object(v.c)(d.baseUrls,
c),"json",e).then(function(c){return n(b,a(c),d,e)})}Object.defineProperty(e,"__esModule",{value:!0});l.d(e,"TileChunkSource",function(){return E});l.d(e,"PointMatchSource",function(){return G});m=l(2);e=l(95);var k=l(16),r=l(96),p=l(13),y=l(98),t=l(1),v=l(11),z=l(5);l=l(0);var u=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);
d&&a(b,d);return b}}(),A=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},L=new Map;L.set("jpg",k.a);var E=function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments));a.chunkDecoder=L.get(a.parameters.encoding);var c=a.parameters;var d=[];void 0!==c.channel&&d.push("channels="+c.channel);void 0!==c.minIntensity&&d.push("minIntensity="+JSON.stringify(c.minIntensity));void 0!==c.maxIntensity&&d.push("maxIntensity="+JSON.stringify(c.maxIntensity));void 0!==c.maxTileSpecsToRender&&d.push("maxTileSpecsToRender="+JSON.stringify(c.maxTileSpecsToRender));void 0!==c.filter&&d.push("filter="+JSON.stringify(c.filter));c=d.join("&");a.queryString=c;return a}c(b,
a);u(b,[{key:"download",value:function(a,b){var c=this,d=this.parameters,e=a.chunkGridPosition,f=1/Math.pow(2,d.level);a.chunkDataSize=this.spec.chunkDataSize;var g=a.chunkDataSize[0]*Math.pow(2,d.level),h=a.chunkDataSize[1]*Math.pow(2,d.level),k=t.l.create();k[0]=e[0]*g;k[1]=e[1]*h;k[2]=e[2];return Object(v.e)(Object(v.c)(d.baseUrls,"/render-ws/v1/owner/"+d.owner+"/project/"+d.project+"/stack/"+d.stack+"/z/"+k[2]+"/box/"+k[0]+","+k[1]+","+g+","+h+","+f+"/jpeg-image?"+this.queryString),"arraybuffer",
b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(Object(m.WithParameters)(p.a,e.b));E=A([Object(l.g)()],E);var G=function(a){function b(){h(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);u(b,[{key:"download",value:function(a,b){var c=this.parameters,d=a.chunkGridPosition,e=t.l.create();e[2]=d[2];return g(a,"/render-ws/v1/owner/"+c.owner+"/project/"+c.project+"/"+("stack/"+c.stack+"/sectionData?minZ="+e[2]+"&")+("maxZ="+(e[2]+c.zoffset)),c,
b)}}]);return b}(Object(m.WithParameters)(r.a,e.a));G=A([Object(l.g)()],G)},function(m,e,l){function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function f(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}l.d(e,"b",function(){return a});l.d(e,"a",function(){return b});m=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}f(b,a);return b}(function n(){c(this,n)});var a=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}
f(b,a);return b}(m);a.RPC_ID="render/TileChunkSource";var b=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}f(b,a);return b}(m);b.RPC_ID="render/PointMatchSource"},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:
b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}l.d(e,"a",function(){return k});m=l(22);var a=l(97),b=l(1);l=l(0);var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),n=function p(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return p(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};e=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,
g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var g=function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.source=null;a.vertexPositions=null;a.vertexNormals=null;return a}c(b,a);d(b,[{key:"initializeVolumeChunk",value:function(a,c){n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),
"initializeVolumeChunk",this).call(this,a,c);a=0;this.vertexPositions&&(a+=this.vertexPositions.buffer.byteLength);this.vertexNormals&&(a+=this.vertexNormals.buffer.byteLength);this.gpuMemoryBytes=this.systemMemoryBytes=a;this.vertexPositions=null}},{key:"serialize",value:function(a,c){n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);var d=this.vertexPositions,e=this.vertexNormals;a.vertexPositions=d;c.push(d.buffer);e&&(a.vertexNormals=e,c.push(e.buffer));
this.vertexNormals=this.vertexPositions=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.vertexPositions.byteLength;n(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){this.vertexNormals=this.vertexPositions=null}}]);return b}(m.SliceViewChunk),k=function(e){function k(b,c){h(this,k);b=f(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,b,c));b.spec=a.b.fromObject(c.spec);
return b}c(k,e);d(k,[{key:"getChunk",value:function(a){var c=Object(b.m)(a),d=this.chunks.get(c);void 0===d&&(d=this.getNewChunk_(g),d.initializeVolumeChunk(c,a),this.addChunk(d));return d}}]);return k}(m.SliceViewChunkSource);m=function(a){function b(){h(this,b);return f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);return b}(m.RenderLayer);m=e([Object(l.g)(a.a)],m)},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}l.d(e,"b",function(){return d});var f=l(9),c=l(1),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b;(function(a){a[a.LINE=
0]="LINE";a[a.POINT=1]="POINT"})(b||(b={}));var d=function(b){function d(a){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");a=(d.__proto__||Object.getPrototypeOf(d)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}h(d,b);a(d,[{key:"toObject",value:function(){return{transform:this.chunkLayout.transform,chunkDataSize:this.chunkDataSize,voxelSize:this.voxelSize,
lowerVoxelBound:this.lowerVoxelBound,upperVoxelBound:this.upperVoxelBound,lowerClipBound:this.lowerClipBound,upperClipBound:this.upperClipBound,baseVoxelOffset:this.baseVoxelOffset}}}],[{key:"make",value:function(a){return new d(Object.assign({},a,{transform:Object(f.f)(a.transform,a.vectorGraphicsSourceOptions)}))}},{key:"fromObject",value:function(a){return new d(a)}},{key:"withDefaults",value:function(a){var b=a.transform,e=a.lowerVoxelBound,g=a.upperVoxelBound,h=a.chunkDataSize;b=Object(f.f)(b,
a.vectorGraphicsSourceOptions);if(void 0===h&&(h=c.l.clone(g),void 0!==e))for(g=0;3>g;g++)h[g]+=Math.abs(e[g]);console.log(h);console.log(a);return new d(Object.assign({},a,{transform:b,chunkDataSize:h}))}}]);return d}(f.d);e.a="vectorgraphics/RenderLayer"},function(m,e,l){l.d(e,"a",function(){return f});var h=function(){function c(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,
b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),f=function(){function c(a){a=void 0===a?16:a;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.length=0;this.data=new Float32Array(a)}h(c,[{key:"resize",value:function(a){var b=this.data;if(a>b.length){var c=new Float32Array(Math.max(a,2*b.length));c.set(b.subarray(0,this.length));this.data=c}this.length=a}},{key:"shrinkToFit",value:function(){this.data=new Float32Array(this.view)}},{key:"clear",value:function(){this.length=
0}},{key:"appendArray",value:function(a){var b=this.length;this.resize(b+a.length);this.data.set(a,b)}},{key:"eraseRange",value:function(a,b){this.data.copyWithin(a,b,this.length);this.length-=b-a}},{key:"view",get:function(){var a=this.data;return new Float32Array(a.buffer,a.byteOffset,this.length)}}]);return c}()},function(m,e,l){Object.defineProperty(e,"__esModule",{value:!0});l(37)},function(m,e,l){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}
function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){return Object(d.c)(a,
b,"fragments")}function b(a,b){var c=(new DataView(b)).getUint32(0,!0);Object(d.d)(a,b,p.b.LITTLE,4,c)}Object.defineProperty(e,"__esModule",{value:!0});l.d(e,"PrecomputedVolumeChunkSource",function(){return u});e.decodeManifestChunk=a;e.decodeFragmentChunk=b;l.d(e,"PrecomputedMeshSource",function(){return A});m=l(2);e=l(101);var d=l(19),n=l(24),g=l(16),k=l(21),r=l(13),p=l(12),y=l(11);l=l(0);var t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),v=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},z=new Map;z.set(e.b.RAW,
k.a);z.set(e.b.JPEG,g.a);z.set(e.b.COMPRESSED_SEGMENTATION,n.a);var u=function(a){function b(){h(this,b);var a=f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.chunkDecoder=z.get(a.parameters.encoding);return a}c(b,a);t(b,[{key:"download",value:function(a,b){var c=this,d=this.parameters,e=this.computeChunkBounds(a),f=a.chunkDataSize;return Object(y.e)(Object(y.c)(d.baseUrls,d.path+"/"+e[0]+"-"+(e[0]+f[0])+"_"+(e[1]+"-"+(e[1]+f[1])+"_")+(e[2]+"-"+(e[2]+f[2]))),"arraybuffer",
b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(Object(m.WithParameters)(r.a,e.c));u=v([Object(l.g)()],u);var A=function(d){function e(){h(this,e);return f(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}c(e,d);t(e,[{key:"download",value:function(b,c){var d=this.parameters;return Object(y.e)(Object(y.c)(d.baseUrls,d.path+"/"+b.objectId+":"+d.lod),"json",c).then(function(c){return a(b,c)})}},{key:"downloadFragment",value:function(a,c){var d=this.parameters;return Object(y.e)(Object(y.c)(d.baseUrls,
d.path+"/"+a.fragmentId),"arraybuffer",c).then(function(c){return b(a,c)})}}]);return e}(Object(m.WithParameters)(d.a,e.a));A=v([Object(l.g)()],A)},function(m,e,l){function h(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");}l.d(e,"b",function(){return f});l.d(e,"c",function(){return c});l.d(e,"a",function(){return a});var f;(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION"})(f||(f={}));var c=function d(){h(this,
d)};c.RPC_ID="precomputed/VolumeChunkSource";var a=function n(){h(this,n)};a.RPC_ID="precomputed/MeshSource"},function(m,e,l){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function c(a){Object(v.isCompressed)(a)&&(a=Object(v.decompress)(a));var b=new u;b.uncompressedData=a;a=Object(v.readHeader)(a);if(null===a)throw Error("Failed to parse NIFTI header.");b.header=a;return b}function a(a,b,d,e){return n.a.getData(a,c,b,d,e)}function b(b,c,e){return a(b,c,function(){return{priorityTier:d.d.VISIBLE,priority:1E3}},e).then(function(a){return a.header})}Object.defineProperty(e,"__esModule",{value:!0});l.d(e,"NiftiFileData",function(){return u});l.d(e,"NiftiVolumeChunkSource",
function(){return L});m=l(2);var d=l(8),n=l(28),g=l(104),k=l(21);e=l(13);var r=l(36),p=l(12),y=l(1),t=l(0),v=l(105);l.n(v);var z=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();l=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===
typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var u=function G(){f(this,G)},A=new Map([[g.b.INT8,{dataType:r.a.UINT8,volumeType:r.d.IMAGE}],[g.b.UINT8,{dataType:r.a.UINT8,volumeType:r.d.IMAGE}],[g.b.INT16,{dataType:r.a.UINT16,volumeType:r.d.IMAGE}],[g.b.UINT16,{dataType:r.a.UINT16,volumeType:r.d.IMAGE}],[g.b.INT32,{dataType:r.a.UINT32,volumeType:r.d.SEGMENTATION}],
[g.b.UINT32,{dataType:r.a.UINT32,volumeType:r.d.SEGMENTATION}],[g.b.INT64,{dataType:r.a.UINT64,volumeType:r.d.SEGMENTATION}],[g.b.UINT64,{dataType:r.a.UINT64,volumeType:r.d.SEGMENTATION}],[g.b.FLOAT32,{dataType:r.a.FLOAT32,volumeType:r.d.IMAGE}]]);Object(t.e)(g.a,function(a,c){return b(this.getRef(a.chunkManager),a.url,c).then(function(a){var b=A.get(a.datatypeCode);if(void 0===b)throw Error("Unsupported data type: "+((g.b[a.datatypeCode]||a.datatypeCode)+"."));if(1!==a.dims[4])throw Error("Time series data not supported.");
var c=1;switch(a.xyzt_units&v.NIFTI1.SPATIAL_UNITS_MASK){case v.NIFTI1.UNITS_METER:c=1E9;break;case v.NIFTI1.UNITS_MM:c=1E6;break;case v.NIFTI1.UNITS_MICRON:c=1E3}var d=a.quatern_b,e=a.quatern_c,f=a.quatern_d,h=Math.sqrt(1-d*d-e*e-f*f),k=-1===a.pixDims[0]?-1:1,l=a.description;var m=a.affine;m=y.g.fromValues(m[0][0],m[1][0],m[2][0],m[3][0],m[0][1],m[1][1],m[2][1],m[3][1],m[0][2],m[1][2],m[2][2],m[3][2],m[0][3],m[1][3],m[2][3],m[3][3]);return{value:{description:l,affine:m,dataType:b.dataType,numChannels:a.dims[5],
volumeType:b.volumeType,voxelSize:y.l.fromValues(c*a.pixDims[1],c*a.pixDims[2],c*a.pixDims[3]),volumeSize:y.l.fromValues(a.dims[1],a.dims[2],a.dims[3]),qoffset:y.l.fromValues(c*a.qoffset_x,c*a.qoffset_y,c*a.qoffset_z),qform_code:a.qform_code,sform_code:a.sform_code,qfac:k,quatern:y.i.fromValues(d,e,f,h)}}})});var L=function(b){function c(){f(this,c);var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!==typeof a&&"function"!==typeof a?this:a}h(c,b);z(c,[{key:"download",value:function(b,c){b.chunkDataSize=this.spec.chunkDataSize;return a(this.chunkManager.addRef(),this.parameters.url,function(){return{priorityTier:b.priorityTier,priority:b.priority}},c).then(function(a){var c=Object(v.readImage)(a.header,a.uncompressedData);Object(k.a)(b,c,a.header.littleEndian?p.b.LITTLE:p.b.BIG)})}}]);return c}(Object(m.WithParameters)(e.a,g.c));L=l([Object(t.g)()],L)},function(m,e,l){e.a=function(c){if(c instanceof
Object){var a=c[h];void 0===a&&(a=c[h]=f++);return"o"+a}return""+JSON.stringify(c)};$jscomp.initSymbol();var h=Symbol("objectId"),f=0},function(m,e,l){l.d(e,"b",function(){return h});l.d(e,"c",function(){return f});e.a="nifti/getNiftiVolumeInfo";var h;(function(c){c[c.NONE=0]="NONE";c[c.BINARY=1]="BINARY";c[c.UINT8=2]="UINT8";c[c.INT16=4]="INT16";c[c.INT32=8]="INT32";c[c.FLOAT32=16]="FLOAT32";c[c.COMPLEX64=32]="COMPLEX64";c[c.FLOAT64=64]="FLOAT64";c[c.RGB24=128]="RGB24";c[c.INT8=256]="INT8";c[c.UINT16=
512]="UINT16";c[c.UINT32=768]="UINT32";c[c.INT64=1024]="INT64";c[c.UINT64=1280]="UINT64";c[c.FLOAT128=1536]="FLOAT128";c[c.COMPLEX128=1792]="COMPLEX128";c[c.COMPLEX256=2048]="COMPLEX256"})(h||(h={}));var f=function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");};f.RPC_ID="nifti/VolumeChunkSource"},function(m,e,l){var h=h||{};h.NIFTI1=h.NIFTI1||l(43);h.NIFTI2=h.NIFTI2||l(106);h.Utils=h.Utils||l(29);var f=f||l(26);h.isNIFTI1=function(c){if(c.byteLength<h.NIFTI1.STANDARD_HEADER_SIZE)return!1;
var a=new DataView(c);c=a.getUint8(h.NIFTI1.MAGIC_NUMBER_LOCATION);var b=a.getUint8(h.NIFTI1.MAGIC_NUMBER_LOCATION+1);a=a.getUint8(h.NIFTI1.MAGIC_NUMBER_LOCATION+2);return!(c!==h.NIFTI1.MAGIC_NUMBER[0]||b!==h.NIFTI1.MAGIC_NUMBER[1]||a!==h.NIFTI1.MAGIC_NUMBER[2])};h.isNIFTI2=function(c){if(c.byteLength<h.NIFTI1.STANDARD_HEADER_SIZE)return!1;var a=new DataView(c);c=a.getUint8(h.NIFTI2.MAGIC_NUMBER_LOCATION);var b=a.getUint8(h.NIFTI2.MAGIC_NUMBER_LOCATION+1);a=a.getUint8(h.NIFTI2.MAGIC_NUMBER_LOCATION+
2);return!(c!==h.NIFTI2.MAGIC_NUMBER[0]||b!==h.NIFTI2.MAGIC_NUMBER[1]||a!==h.NIFTI2.MAGIC_NUMBER[2])};h.isNIFTI=function(c){return h.isNIFTI1(c)||h.isNIFTI2(c)};h.isCompressed=function(c){if(c){var a=new DataView(c);c=a.getUint8(0);a=a.getUint8(1);if(c===h.Utils.GUNZIP_MAGIC_COOKIE1||a===h.Utils.GUNZIP_MAGIC_COOKIE2)return!0}return!1};h.decompress=function(c){return f.inflate(c).buffer};h.readHeader=function(c){var a=null;h.isCompressed(c)&&(c=h.decompress(c));h.isNIFTI1(c)?a=new h.NIFTI1:h.isNIFTI2(c)&&
(a=new h.NIFTI2);a?a.readHeader(c):console.error("That file does not appear to be NIFTI!");return a};h.hasExtension=function(c){return 0!=c.extensionFlag[0]};h.readImage=function(c,a){var b=c.vox_offset,d=1,e=1;c.dims[4]&&(d=c.dims[4]);c.dims[5]&&(e=c.dims[5]);return a.slice(b,b+c.numBitsPerVoxel/8*c.dims[2]*c.dims[3]*d*e*c.dims[1])};h.readExtension=function(c,a){var b=c.getExtensionLocation();return a.slice(b,b+c.extensionSize)};h.readExtensionData=function(c,a){var b=c.getExtensionLocation();return a.slice(b+
8,b+c.extensionSize-8)};"undefined"!==typeof m&&m.exports&&(m.exports=h)},function(m,e,l){var h=h||{};h.Utils=h.Utils||l(29);h.NIFTI1=h.NIFTI1||l(43);h.NIFTI2=h.NIFTI2||function(){this.littleEndian=!1;this.dim_info=0;this.dims=[];this.slice_code=this.slice_end=this.slice_start=this.numBitsPerVoxel=this.datatypeCode=this.intent_code=this.intent_p3=this.intent_p2=this.intent_p1=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.toffset=this.slice_duration=this.cal_min=this.cal_max=this.xyzt_units=
this.scl_inter=0;this.intent_name=this.aux_file=this.description="";this.qoffset_z=this.qoffset_y=this.qoffset_x=this.quatern_d=this.quatern_c=this.quatern_b=this.sform_code=this.qform_code=0;this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.extensionFlag=[0,0,0,0]};h.NIFTI2.MAGIC_COOKIE=540;h.NIFTI2.MAGIC_NUMBER_LOCATION=4;h.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10];h.NIFTI2.prototype.readHeader=function(e){e=new DataView(e);var c=h.Utils.getIntAt(e,0,this.littleEndian),
a,b;c!==h.NIFTI2.MAGIC_COOKIE&&(this.littleEndian=!0,c=h.Utils.getIntAt(e,0,this.littleEndian));if(c!==h.NIFTI2.MAGIC_COOKIE)throw Error("This does not appear to be a NIFTI file!");this.datatypeCode=h.Utils.getShortAt(e,12,this.littleEndian);this.numBitsPerVoxel=h.Utils.getShortAt(e,14,this.littleEndian);for(a=0;8>a;a+=1)c=16+8*a,this.dims[a]=h.Utils.getLongAt(e,c,this.littleEndian);this.intent_p1=h.Utils.getDoubleAt(e,80,this.littleEndian);this.intent_p2=h.Utils.getDoubleAt(e,88,this.littleEndian);
this.intent_p3=h.Utils.getDoubleAt(e,96,this.littleEndian);for(a=0;8>a;a+=1)c=104+8*a,this.pixDims[a]=h.Utils.getDoubleAt(e,c,this.littleEndian);this.vox_offset=h.Utils.getLongAt(e,168,this.littleEndian);this.scl_slope=h.Utils.getDoubleAt(e,176,this.littleEndian);this.scl_inter=h.Utils.getDoubleAt(e,184,this.littleEndian);this.cal_max=h.Utils.getDoubleAt(e,192,this.littleEndian);this.cal_min=h.Utils.getDoubleAt(e,200,this.littleEndian);this.slice_duration=h.Utils.getDoubleAt(e,208,this.littleEndian);
this.toffset=h.Utils.getDoubleAt(e,216,this.littleEndian);this.slice_start=h.Utils.getLongAt(e,224,this.littleEndian);this.slice_end=h.Utils.getLongAt(e,232,this.littleEndian);this.description=h.Utils.getStringAt(e,240,320);this.aux_file=h.Utils.getStringAt(e,320,344);this.qform_code=h.Utils.getIntAt(e,344,this.littleEndian);this.sform_code=h.Utils.getIntAt(e,348,this.littleEndian);this.quatern_b=h.Utils.getDoubleAt(e,352,this.littleEndian);this.quatern_c=h.Utils.getDoubleAt(e,360,this.littleEndian);
this.quatern_d=h.Utils.getDoubleAt(e,368,this.littleEndian);this.qoffset_x=h.Utils.getDoubleAt(e,376,this.littleEndian);this.qoffset_y=h.Utils.getDoubleAt(e,384,this.littleEndian);this.qoffset_z=h.Utils.getDoubleAt(e,392,this.littleEndian);for(a=0;3>a;a+=1)for(b=0;4>b;b+=1)c=400+8*(4*a+b),this.affine[a][b]=h.Utils.getDoubleAt(e,c,this.littleEndian);this.affine[3][0]=0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.slice_code=h.Utils.getIntAt(e,496,this.littleEndian);this.xyzt_units=
h.Utils.getIntAt(e,500,this.littleEndian);this.intent_code=h.Utils.getIntAt(e,504,this.littleEndian);this.intent_name=h.Utils.getStringAt(e,508,524);this.dim_info=h.Utils.getByteAt(e,524);e.byteLength>h.NIFTI2.MAGIC_COOKIE&&(this.extensionFlag[0]=h.Utils.getByteAt(e,540),this.extensionFlag[1]=h.Utils.getByteAt(e,541),this.extensionFlag[2]=h.Utils.getByteAt(e,542),this.extensionFlag[3]=h.Utils.getByteAt(e,543),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(e),this.extensionCode=this.getExtensionCode(e)))};
h.NIFTI2.prototype.toFormattedString=function(){var e=h.Utils.formatNumber;var c=""+("Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n");c+="Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n";c+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n";c+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n";c+="Voxel Dimensions (1-8): "+
e(this.pixDims[0])+", "+e(this.pixDims[1])+", "+e(this.pixDims[2])+", "+e(this.pixDims[3])+", "+e(this.pixDims[4])+", "+e(this.pixDims[5])+", "+e(this.pixDims[6])+", "+e(this.pixDims[7])+"\n";c+="Image Offset = "+this.vox_offset+"\n";c+="Data Scale:  Slope = "+e(this.scl_slope)+"  Intercept = "+e(this.scl_inter)+"\n";c+="Display Range:  Max = "+e(this.cal_max)+"  Min = "+e(this.cal_min)+"\n";c+="Slice Duration = "+this.slice_duration+"\n";c+="Time Axis Shift = "+this.toffset+"\n";c+="Slice Start = "+
this.slice_start+"\n";c+="Slice End = "+this.slice_end+"\n";c+='Description: "'+this.description+'"\n';c+='Auxiliary File: "'+this.aux_file+'"\n';c+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n";c+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n";c+="Quaternion Parameters:  b = "+e(this.quatern_b)+"  c = "+e(this.quatern_c)+"  d = "+e(this.quatern_d)+"\n";c+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+
"  z = "+this.qoffset_z+"\n";c+="S-Form Parameters X: "+e(this.affine[0][0])+", "+e(this.affine[0][1])+", "+e(this.affine[0][2])+", "+e(this.affine[0][3])+"\n";c+="S-Form Parameters Y: "+e(this.affine[1][0])+", "+e(this.affine[1][1])+", "+e(this.affine[1][2])+", "+e(this.affine[1][3])+"\n";c+="S-Form Parameters Z: "+e(this.affine[2][0])+", "+e(this.affine[2][1])+", "+e(this.affine[2][2])+", "+e(this.affine[2][3])+"\n";c+="Slice Code = "+this.slice_code+"\n";c+="Units Code = "+this.xyzt_units+" ("+
this.getUnitsCodeString(h.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(h.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n";c+="Intent Code = "+this.intent_code+"\n";c+='Intent Name: "'+this.intent_name+'"\n';return c+="Dim Info = "+this.dim_info+"\n"};h.NIFTI2.prototype.getExtensionLocation=function(){return h.NIFTI2.MAGIC_COOKIE+4};h.NIFTI2.prototype.getExtensionSize=h.NIFTI1.prototype.getExtensionSize;h.NIFTI2.prototype.getExtensionCode=h.NIFTI1.prototype.getExtensionCode;
h.NIFTI2.prototype.getDatatypeCodeString=h.NIFTI1.prototype.getDatatypeCodeString;h.NIFTI2.prototype.getTransformCodeString=h.NIFTI1.prototype.getTransformCodeString;h.NIFTI2.prototype.getUnitsCodeString=h.NIFTI1.prototype.getUnitsCodeString;h.NIFTI2.prototype.getQformMat=h.NIFTI1.prototype.getQformMat;h.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=h.NIFTI1.prototype.convertNiftiQFormToNiftiSForm;h.NIFTI2.prototype.convertNiftiSFormToNEMA=h.NIFTI1.prototype.convertNiftiSFormToNEMA;h.NIFTI2.prototype.nifti_mat33_mul=
h.NIFTI1.prototype.nifti_mat33_mul;h.NIFTI2.prototype.nifti_mat33_determ=h.NIFTI1.prototype.nifti_mat33_determ;"undefined"!==typeof m&&m.exports&&(m.exports=h.NIFTI2)},function(m,e,l){function h(a){return Object(c.a)(Object(b.a)(a))}Object.defineProperty(e,"__esModule",{value:!0});var f=l(28),c=l(108);m=l(44);var a=l(10),b=l(45);Object(m.a)("vtk",{description:"VTK",getMesh:function(b,c,e,k){return f.a.getData(b.addRef(),h,c,e,k).then(function(b){var c={info:{numTriangles:b.numTriangles,numVertices:b.numVertices,
vertexAttributes:[]},indices:b.indices,vertexPositions:b.vertexPositions,vertexAttributes:[]};b=$jscomp.makeIterator(b.vertexAttributes);for(var d=b.next();!d.done;d=b.next())d=d.value,c.info.vertexAttributes.push({name:d.name,dataType:a.b.FLOAT32,numComponents:d.numComponents}),c.vertexAttributes.push(d.data);return c})}})},function(m,e,l){e.a=function(a){var b=(new TextDecoder).decode(new Uint8Array(a.buffer,a.byteOffset,Math.min(a.byteLength,1E3))).match(h);if(null===b)throw Error("Failed to parse VTK file header.");
var c=b[0].length,d=b[4],e=b[3];b={version:b[1],comment:b[2],datasetType:d,dataFormat:e};a=new Uint8Array(a.buffer,a.byteOffset+c,a.byteLength-c);if("ASCII"===e){e=r.get(d);if(void 0===e)throw Error("VTK dataset type "+JSON.stringify(d)+" is not supported.");return e(b,a)}throw Error("VTK data format "+JSON.stringify(e)+" is not supported.");};var h=/^[ \t]*#[ \t]+vtk[ \t]+DataFile[ \t]+Version[ \t]+([^\s]+)[ \t]*\n(.*)\n[ \t]*(ASCII|BINARY)[ \t]*\n[ \t]*DATASET[ \t]+([^ ]+)[ \t]*\n/,f=/^[ \t]*POINT_DATA[ \t]+([0-9]+)[ \t]*$/,
c=/^[ \t]*POINTS[ \t]+([0-9]+)[ \t]+([^\s]+)[ \t]*$/,a=/^[ \t]*SCALARS[ \t]+([^\s]+)[ \t]+([^\s]+)(?:[ \t]+([0-9]+))?[ \t]*$/,b=/^[ \t]*LOOKUP_TABLE[ \t]+([^\s]+)[ \t]*$/,d=/^[ \t]*POLYGONS[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,n=/^[ \t]*3[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,g=/^[ \t]*$/,k=function y(a,b,c,d,e,f){if(!(this instanceof y))throw new TypeError("Cannot call a class as a function");this.header=a;this.numVertices=b;this.vertexPositions=c;this.numTriangles=d;this.indices=e;this.vertexAttributes=
f},r=new Map([["POLYDATA",function(e,h){function l(a,b,c,d){d=RegExp("^[ \t]*"+"([^s]+)[ \t]+".repeat(c-1)+"([^s]+)[ \t]*$");if(E-G<b)throw Error("VTK data ended unexpectedly while parsing "+a+".");for(var e=new Float32Array(b*c),f=0,g=0;g<b;++g){var h=y[G++],k=h.match(d);if(null===k)throw Error("Failed to parse "+a+" line "+g+": "+JSON.stringify(h)+".");for(h=0;h<c;++h)e[f++]=parseFloat(k[h+1])}return e}function m(a,b){if(void 0!==q)throw Error("POINTS specified more than once.");w=a;x=l("POINTS",
a,3,b)}function r(a,b){if(void 0!==q)throw Error("VERTICES specified more than once.");if(E-G<a)throw Error("VTK data ended unexpectedly");if(b!==4*a)throw Error("Only triangular faces are supported.");K=a;q=new Uint32Array(3*a);for(var c=b=0;c<a;++c){var d=y[G++].match(n);if(null===d)throw Error("Failed to parse indices for face "+c);q[b++]=parseInt(d[1],10);q[b++]=parseInt(d[2],10);q[b++]=parseInt(d[3],10)}}function t(c){if(w!==c)throw Error("Number of vertices specified in POINT_DATA section ("+
c+") "+("must match number of points ("+w+")."));for(;G<E;)if(c=y[G],c.match(g))++G;else{var d=c.match(a);if(null!==d){var e=void 0===d[3]?1:parseInt(d[3],10);++G;c=d[1];d=d[2];if(G===E)throw Error("Expected LOOKUP_TABLE directive.");var f=y[G++],h=f.match(b);if(null===h)throw Error("Expected LOOKUP_TABLE directive in "+JSON.stringify(f)+".");f=h[1];h=l("SCALARS("+c+")",w,e,d);I.push({name:c,data:h,numComponents:e,dataType:d,tableName:f})}}}for(var y=(new TextDecoder).decode(h).split("\n"),E=y.length,
G=0,w=-1,x=void 0,K=-1,q=void 0,I=[];G<E;)if(h=y[G],h.match(g))++G;else{var H=void 0;H=h.match(c);if(null!==H)++G,m(parseInt(H[1],10),H[2]);else if(H=h.match(d),null!==H)++G,r(parseInt(H[1],10),parseInt(H[2],10));else{H=h.match(f);if(null!==H){++G;t(parseInt(H[1],10));break}throw Error("Failed to parse VTK line "+JSON.stringify(h)+".");}}if(void 0===x)throw Error("Vertex positions not specified.");if(void 0===q)throw Error("Indices not specified.");return new k(e,w,x,K,q,I)}]])},function(m,e,l){function h(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}l.d(e,"d",function(){return c});e.c="single_mesh/SingleMeshLayer";e.a="single_mesh/getSingleMeshInfo";e.b=
"";var c=function(a){function b(){f(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}h(b,a);return b}(function b(){f(this,b)});c.RPC_ID="single_mesh/SingleMeshSource"},function(m,e,l){function h(b){b=(new TextDecoder).decode(Object(a.a)(b)).trim().split(/\n+/);if(!b)throw Error("CSV file is empty.");var d=b[0].split(","),
e=d.map(function(a){return{name:a.trim(),dataType:c.b.FLOAT32,numComponents:1}}),f=b.length-1,h=d.length;d=d.map(function(){return new Float32Array(f)});for(var l=0;l<f;++l)for(var m=b[l+1].split(","),y=0;y<h;++y)d[y][l]=parseFloat(m[y]);return{numVertices:f,attributeInfo:e,attributes:d}}Object.defineProperty(e,"__esModule",{value:!0});var f=l(28);m=l(44);var c=l(10),a=l(45);Object(m.b)("csv",{description:"Comma separated value text file",getMeshVertexAttributes:function(a,c,e,g){return f.a.getData(a.addRef(),
h,c,e,g)}})}]);
