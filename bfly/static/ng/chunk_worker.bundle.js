/*

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2017 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2017 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2015 Mozilla Foundation

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2017 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(n,g,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");n!=Array.prototype&&n!=Object.prototype&&(n[g]=e.value)};$jscomp.getGlobal=function(n){return"undefined"!=typeof window&&window===n?n:"undefined"!=typeof global&&null!=global?global:n};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(n){return $jscomp.SYMBOL_PREFIX+(n||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var n=$jscomp.global.Symbol.iterator;n||(n=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[n]&&$jscomp.defineProperty(Array.prototype,n,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(n){var g=0;return $jscomp.iteratorPrototype(function(){return g<n.length?{done:!1,value:n[g++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(n){$jscomp.initSymbolIterator();n={next:n};n[$jscomp.global.Symbol.iterator]=function(){return this};return n};$jscomp.makeIterator=function(n){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var g=n[Symbol.iterator];return g?g.call(n):$jscomp.arrayIterator(n)};$jscomp.arrayFromIterator=function(n){for(var g,e=[];!(g=n.next()).done;)e.push(g.value);return e};$jscomp.arrayFromIterable=function(n){return n instanceof Array?n:$jscomp.arrayFromIterator($jscomp.makeIterator(n))};
$jscomp.polyfill=function(n,g,e,h){if(g){e=$jscomp.global;n=n.split(".");for(h=0;h<n.length-1;h++){var m=n[h];m in e||(e[m]={});e=e[m]}n=n[n.length-1];h=e[n];g=g(h);g!=h&&null!=g&&$jscomp.defineProperty(e,n,{configurable:!0,writable:!0,value:g})}};$jscomp.polyfill("Object.setPrototypeOf",function(n){return n?n:"object"!=typeof"".__proto__?null:function(g,e){g.__proto__=e;if(g.__proto__!==e)throw new TypeError(g+" is not extensible");return g}},"es6","es5");
$jscomp.owns=function(n,g){return Object.prototype.hasOwnProperty.call(n,g)};
$jscomp.polyfill("WeakMap",function(n){function g(a){$jscomp.owns(a,h)||$jscomp.defineProperty(a,h,{value:{}})}function e(a){var b=Object[a];b&&(Object[a]=function(a){g(a);return b(a)})}if(function(){if(!n||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),d=new n([[a,2],[b,3]]);if(2!=d.get(a)||3!=d.get(b))return!1;d.delete(a);d.set(b,4);return!d.has(a)&&4==d.get(b)}catch(q){return!1}}())return n;var h="$jscomp_hidden_"+Math.random().toString().substring(2);e("freeze");e("preventExtensions");
e("seal");var m=0,c=function(a){this.id_=(m+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,b){g(a);if(!$jscomp.owns(a,h))throw Error("WeakMap key fail: "+a);a[h][this.id_]=b;return this};c.prototype.get=function(a){return $jscomp.owns(a,h)?a[h][this.id_]:void 0};c.prototype.has=function(a){return $jscomp.owns(a,h)&&$jscomp.owns(a[h],this.id_)};c.prototype.delete=
function(a){return $jscomp.owns(a,h)&&$jscomp.owns(a[h],this.id_)?delete a[h][this.id_]:!1};return c},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_MAP=!1;
$jscomp.polyfill("Map",function(n){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!n||!n.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),d=new n($jscomp.makeIterator([[a,"s"]]));if("s"!=d.get(a)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var c=d.entries(),k=c.next();if(k.done||k.value[0]!=a||"s"!=k.value[1])return!1;k=c.next();return k.done||4!=k.value[0].x||"t"!=k.value[1]||!c.next().done?!1:!0}catch(f){return!1}}())return n;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var g=new WeakMap,e=function(a){this.data_={};this.head_=c();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};e.prototype.set=function(a,d){var b=h(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=d:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:d},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};e.prototype.delete=
function(a){a=h(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=c();this.size=0};e.prototype.has=function(a){return!!h(this,a).entry};e.prototype.get=function(a){return(a=h(this,a).entry)&&a.value};e.prototype.entries=function(){return m(this,function(a){return[a.key,
a.value]})};e.prototype.keys=function(){return m(this,function(a){return a.key})};e.prototype.values=function(){return m(this,function(a){return a.value})};e.prototype.forEach=function(a,d){for(var b=this.entries(),c;!(c=b.next()).done;)c=c.value,a.call(d,c[1],c[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=function(b,d){var c;c=d&&typeof d;"object"==c||"function"==c?g.has(d)?c=g.get(d):(c=""+ ++a,g.set(d,c)):c="p_"+d;var k=b.data_[c];if(k&&$jscomp.owns(b.data_,c))for(b=0;b<k.length;b++){var f=
k[b];if(d!==d&&f.key!==f.key||d===f.key)return{id:c,list:k,index:b,entry:f}}return{id:c,list:k,index:-1,entry:void 0}},m=function(a,d){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:d(b)};b=null}return{done:!0,value:void 0}})},c=function(){var a={};return a.previous=a.next=a.head=a},a=0;return e},"es6-impl","es3");
$jscomp.polyfill("Number.isNaN",function(n){return n?n:function(g){return"number"===typeof g&&isNaN(g)}},"es6-impl","es3");$jscomp.polyfill("Number.isFinite",function(n){return n?n:function(g){return"number"!==typeof g?!1:!isNaN(g)&&Infinity!==g&&-Infinity!==g}},"es6-impl","es3");$jscomp.array=$jscomp.array||{};
$jscomp.iteratorFromArray=function(n,g){$jscomp.initSymbolIterator();n instanceof String&&(n+="");var e=0,h={next:function(){if(e<n.length){var m=e++;return{value:g(m,n[m]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};$jscomp.polyfill("Array.prototype.keys",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(g){return g})}},"es6-impl","es3");
$jscomp.polyfill("Number.isInteger",function(n){return n?n:function(g){return Number.isFinite(g)?g===Math.floor(g):!1}},"es6-impl","es3");$jscomp.polyfill("Array.from",function(n){return n?n:function(g,e,h){$jscomp.initSymbolIterator();e=null!=e?e:function(a){return a};var m=[],c=g[Symbol.iterator];if("function"==typeof c)for(g=c.call(g);!(c=g.next()).done;)m.push(e.call(h,c.value));else for(var c=g.length,a=0;a<c;a++)m.push(e.call(h,g[a]));return m}},"es6-impl","es3");
$jscomp.checkStringArgs=function(n,g,e){if(null==n)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return n+""};
$jscomp.polyfill("String.prototype.startsWith",function(n){return n?n:function(g,e){var h=$jscomp.checkStringArgs(this,g,"startsWith");g+="";var m=h.length,c=g.length;e=Math.max(0,Math.min(e|0,h.length));for(var a=0;a<c&&e<m;)if(h[e++]!=g[a++])return!1;return a>=c}},"es6-impl","es3");$jscomp.polyfill("Math.log2",function(n){return n?n:function(g){return Math.log(g)/Math.LN2}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.repeat",function(n){return n?n:function(g){var e=$jscomp.checkStringArgs(this,null,"repeat");if(0>g||1342177279<g)throw new RangeError("Invalid count value");g|=0;for(var h="";g;)if(g&1&&(h+=e),g>>>=1)e+=e;return h}},"es6-impl","es3");$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.polyfill("Set",function(n){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!n||!n.prototype.entries||"function"!=typeof Object.seal)return!1;try{var e=Object.seal({x:4}),h=new n($jscomp.makeIterator([e]));if(!h.has(e)||1!=h.size||h.add(e)!=h||1!=h.size||h.add({x:4})!=h||2!=h.size)return!1;var m=h.entries(),c=m.next();if(c.done||c.value[0]!=e||c.value[1]!=e)return!1;c=m.next();return c.done||c.value[0]==e||4!=c.value[0].x||c.value[1]!=c.value[0]?!1:m.next().done}catch(a){return!1}}())return n;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var g=function(e){this.map_=new Map;if(e){e=$jscomp.makeIterator(e);for(var h;!(h=e.next()).done;)this.add(h.value)}this.size=this.map_.size};g.prototype.add=function(e){this.map_.set(e,e);this.size=this.map_.size;return this};g.prototype.delete=function(e){e=this.map_.delete(e);this.size=this.map_.size;return e};g.prototype.clear=function(){this.map_.clear();this.size=0};g.prototype.has=function(e){return this.map_.has(e)};g.prototype.entries=function(){return this.map_.entries()};
g.prototype.values=function(){return this.map_.values()};g.prototype[Symbol.iterator]=g.prototype.values;g.prototype.forEach=function(e,h){var m=this;this.map_.forEach(function(c){return e.call(h,c,c,m)})};return g},"es6-impl","es3");$jscomp.EXPOSE_ASYNC_EXECUTOR=!0;$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(n){function g(){this.batch_=null}if(n&&!$jscomp.FORCE_POLYFILL_PROMISE)return n;g.prototype.asyncExecute=function(c){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(c);return this};g.prototype.asyncExecuteBatch_=function(){var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})};var e=$jscomp.global.setTimeout;g.prototype.asyncExecuteFunction=function(c){e(c,0)};g.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=
this.batch_;this.batch_=[];for(var a=0;a<c.length;++a){var b=c[a];delete c[a];try{b()}catch(d){this.asyncThrow_(d)}}}this.batch_=null};g.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c;})};var h=function(c){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{c(a.resolve,a.reject)}catch(b){a.reject(b)}};h.prototype.createResolveAndReject_=function(){function c(d){return function(c){b||(b=!0,d.call(a,c))}}var a=this,b=
!1;return{resolve:c(this.resolveTo_),reject:c(this.reject_)}};h.prototype.resolveTo_=function(c){if(c===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof h)this.settleSameAsPromise_(c);else{var a;a:switch(typeof c){case "object":a=null!=c;break a;case "function":a=!0;break a;default:a=!1}a?this.resolveToNonPromiseObj_(c):this.fulfill_(c)}};h.prototype.resolveToNonPromiseObj_=function(c){var a=void 0;try{a=c.then}catch(b){this.reject_(b);return}"function"==
typeof a?this.settleSameAsThenable_(a,c):this.fulfill_(c)};h.prototype.reject_=function(c){this.settle_(2,c)};h.prototype.fulfill_=function(c){this.settle_(1,c)};h.prototype.settle_=function(c,a){if(0!=this.state_)throw Error("Cannot settle("+c+", "+a|"): Promise already settled in state"+this.state_);this.state_=c;this.result_=a;this.executeOnSettledCallbacks_()};h.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var c=this.onSettledCallbacks_,a=0;a<c.length;++a)c[a].call(),
c[a]=null;this.onSettledCallbacks_=null}};var m=new g;h.prototype.settleSameAsPromise_=function(c){var a=this.createResolveAndReject_();c.callWhenSettled_(a.resolve,a.reject)};h.prototype.settleSameAsThenable_=function(c,a){var b=this.createResolveAndReject_();try{c.call(a,b.resolve,b.reject)}catch(d){b.reject(d)}};h.prototype.then=function(c,a){function b(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(E){q(E)}}:b}var d,q,k=new h(function(a,b){d=a;q=b});this.callWhenSettled_(b(c,d),
b(a,q));return k};h.prototype.catch=function(c){return this.then(void 0,c)};h.prototype.callWhenSettled_=function(c,a){function b(){switch(d.state_){case 1:c(d.result_);break;case 2:a(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?m.asyncExecute(b):this.onSettledCallbacks_.push(function(){m.asyncExecute(b)})};h.resolve=function(c){return c instanceof h?c:new h(function(a,b){a(c)})};h.reject=function(c){return new h(function(a,b){b(c)})};
h.race=function(c){return new h(function(a,b){for(var d=$jscomp.makeIterator(c),q=d.next();!q.done;q=d.next())h.resolve(q.value).callWhenSettled_(a,b)})};h.all=function(c){var a=$jscomp.makeIterator(c),b=a.next();return b.done?h.resolve([]):new h(function(d,c){function k(a){return function(b){f[a]=b;p--;0==p&&d(f)}}var f=[],p=0;do f.push(void 0),p++,h.resolve(b.value).callWhenSettled_(k(f.length-1),c),b=a.next();while(!b.done)})};$jscomp.EXPOSE_ASYNC_EXECUTOR&&(h.$jscomp$new$AsyncExecutor=function(){return new g});
return h},"es6-impl","es3");$jscomp.polyfill("Array.prototype.values",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(g,e){return e})}},"es6","es3");$jscomp.polyfill("Object.assign",function(n){return n?n:function(g,e){for(var h=1;h<arguments.length;h++){var m=arguments[h];if(m)for(var c in m)$jscomp.owns(m,c)&&(g[c]=m[c])}return g}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.entries",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(g,e){return[g,e]})}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.fill",function(n){return n?n:function(g,e,h){var m=this.length||0;0>e&&(e=Math.max(0,m+e));if(null==h||h>m)h=m;h=Number(h);0>h&&(h=Math.max(0,m+h));for(e=Number(e||0);e<h;e++)this[e]=g;return this}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.copyWithin",function(n){return n?n:function(g,e,h){var m=this.length;g=Number(g);e=Number(e);h=Number(null!=h?h:m);if(g<e)for(h=Math.min(h,m);e<h;)e in this?this[g++]=this[e++]:(delete this[g++],e++);else for(h=Math.min(h,m+e-g),g+=h-e;h>e;)--h in this?this[--g]=this[h]:delete this[g];return this}},"es6-impl","es3");
(function(n){function g(h){if(e[h])return e[h].exports;var m=e[h]={i:h,l:!1,exports:{}};n[h].call(m.exports,m,m.exports,g);m.l=!0;return m.exports}var e={};g.m=n;g.c=e;g.i=function(e){return e};g.d=function(e,m,c){g.o(e,m)||Object.defineProperty(e,m,{configurable:!1,enumerable:!0,get:c})};g.n=function(e){var m=e&&e.__esModule?function(){return e["default"]}:function(){return e};g.d(m,"a",m);return m};g.o=function(e,m){return Object.prototype.hasOwnProperty.call(e,m)};g.p="";return g(g.s=110)})([function(n,
g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){f.set(a,b)}function b(a,b,d){d=void 0===d?{}:d;null!=b&&a.initializeSharedObject(b,d.id)}g.d=a;g.c=function(b,c){a(b,function(a){var b=this,f=a.id,l=new d.d;a=c.call(this,a,l);this.set(f,{promise:a,cancellationToken:l});a.then(function(a){var d=a.value;a=a.transfers;b.delete(f);b.invoke("rpc.promise.response",{id:f,value:d},a)},function(a){b.delete(f);b.invoke("rpc.promise.response",{id:f,error:a.message,errorName:a.name})})})};
e.d(g,"h",function(){return r});e.d(g,"e",function(){return E});g.f=b;e.d(g,"b",function(){return l});g.g=function(a){return function(b){b.prototype.RPC_TYPE_ID=a}};g.a=function(a){return function(b){if(void 0!==a)b.prototype.RPC_TYPE_ID=a;else if(a=b.prototype.RPC_TYPE_ID,void 0===a)throw Error("RPC_TYPE_ID should have already been defined");v.set(a,b)}};var d=e(10);n=e(26);var q=function D(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),
null!==a)return D(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},k=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),f=new Map,p=function(a){function b(a,d){h(this,b);var c=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,d));c.name=a;c.message=d;return c}c(b,
a);return b}(Error);a("rpc.promise.cancel",function(a){this.get(a.id).cancellationToken.cancel()});a("rpc.promise.response",function(a){var b=a.id,c=this.get(b),f=c.resolve,c=c.reject;this.delete(b);a.hasOwnProperty("value")?f(a.value):a.errorName===d.b.name?c(d.b):c(new p(a.errorName,a.error))});var r=function(){function a(b){var d=this;h(this,a);this.target=b;this.objects=new Map;this.nextId=-1;b.onmessage=function(a){a=a.data;f.get(a.functionName).call(d,a)}}k(a,[{key:"set",value:function(a,b){this.objects.set(a,
b)}},{key:"delete",value:function(a){this.objects.delete(a)}},{key:"get",value:function(a){return this.objects.get(a)}},{key:"getRef",value:function(a){var b=this.get(a.id);b.referencedGeneration=a.gen;b.addRef();return b}},{key:"invoke",value:function(a,b,d){b.functionName=a;this.target.postMessage(b,d)}},{key:"promiseInvoke",value:function(a,b,c,f){c=void 0===c?d.c:c;var l=this;return e.i(d.a)(c,function(d,c,u){var k=b.id=l.newId();l.set(k,{resolve:d,reject:c});l.invoke(a,b,f);u.add(function(){l.invoke("rpc.promise.cancel",
{id:k})})})}},{key:"newId",value:function(){return this.nextId--}},{key:"numObjects",get:function(){return this.objects.size}}]);return a}(),E=function(a){function b(){h(this,b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.rpc=null;a.rpcId=null;return a}c(b,a);k(b,[{key:"initializeSharedObject",value:function(a,b){b=void 0===b?a.newId():b;this.rpc=a;this.rpcId=b;this.isOwner=!1;a.set(b,this)}},{key:"initializeCounterpart",value:function(a,b){b=void 0===b?{}:b;this.initializeSharedObject(a);
this.referencedGeneration=this.unreferencedGeneration=0;this.isOwner=!0;b.id=this.rpcId;b.type=this.RPC_TYPE_ID;a.invoke("SharedObject.new",b)}},{key:"dispose",value:function(){q(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this)}},{key:"addCounterpartRef",value:function(){return{id:this.rpcId,gen:++this.referencedGeneration}}},{key:"refCountReachedZero",value:function(){!0===this.isOwner?this.referencedGeneration===this.unreferencedGeneration&&this.ownerDispose():
!1===this.isOwner?this.rpc.invoke("SharedObject.refCountReachedZero",{id:this.rpcId,gen:this.referencedGeneration}):q(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"refCountReachedZero",this).call(this)}},{key:"ownerDispose",value:function(){var a=this.rpc,d=this.rpcId;q(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"refCountReachedZero",this).call(this);a.delete(d);a.invoke("SharedObject.dispose",{id:d})}},{key:"counterpartRefCountReachedZero",value:function(a){this.unreferencedGeneration=
a;0===this.refCount&&a===this.referencedGeneration&&this.ownerDispose()}}]);return b}(n.a),l=function(a){function d(a,c){c=void 0===c?{}:c;h(this,d);var f=m(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));b(f,a,c);return f}c(d,a);return d}(E);a("SharedObject.dispose",function(a){a=this.get(a.id);if(0!==a.refCount)throw Error("Attempted to dispose object with non-zero reference count.");a.disposed();this.delete(a.rpcId);a.rpcId=null;a.rpc=null});a("SharedObject.refCountReachedZero",function(a){this.get(a.id).counterpartRefCountReachedZero(a.gen)});
var v=new Map;a("SharedObject.new",function(a){--(new (v.get(a.type))(this,a)).refCount})},function(n,g,e){function h(a,d){var b=Math.abs(a[d]),c=Math.abs(a[d+1]),f=Math.abs(a[d+2]),p=Math.max(b,c,f);1E-4>b/p&&(a[d]=0);1E-4>c/p&&(a[d+1]=0);1E-4>f/p&&(a[d+2]=0)}function m(b){b=b.and(a[0]);for(var d=1;d<a.length;++d)b=b.xor(b.rshift(Math.pow(2,d))).and(a[d]);return b}g.e=function(a){return a[0]*a[1]*a[2]};g.d=function(a){return a[0]+","+a[1]+","+a[2]};g.f=function(a){h(a,0);h(a,4);h(a,8)};g.h=function(a,
d,c){var b=d[0],f=d[1];d=d[2];a[0]=c[0]*b+c[4]*f+c[8]*d;a[1]=c[1]*b+c[5]*f+c[9]*d;a[2]=c[2]*b+c[6]*f+c[10]*d;return a};g.k=function(a,d){var b=d[0],c=d[1],f=d[2],p=d[4],r=d[5],E=d[6],l=d[8],v=d[9];d=d[10];a[0]=Math.sqrt(b*b+c*c+f*f);a[1]=Math.sqrt(p*p+r*r+E*E);a[2]=Math.sqrt(l*l+v*v+d*d);return a};g.m=function(a){if(a.high)throw Error("Fragment ids >= 2^32 not supported yet");var b=m(a.rshift(0)),q=m(a.rshift(1));a=m(a.rshift(2));return c.a.clone([b.low,q.low,a.low])};var c=e(36);n=e(6);e.d(g,"b",
function(){return c.b});e.d(g,"c",function(){return c.c});e.d(g,"a",function(){return c.a});e=c.b.create();g.j=e;e=[c.a.fromValues(1,0,0),c.a.fromValues(0,1,0),c.a.fromValues(0,0,1)];g.i=e;e=c.a.fromValues(0,0,0);g.g=e;c.a.fromValues(1,1,1);e=c.a.fromValues(Infinity,Infinity,Infinity);g.l=e;c.c.create();var a=[new n.a(1227133513,306783378),new n.a(3272356035,818089008),new n.a(251719695,4027515120),new n.a(4278190335,16711680),new n.a(65535,16711680),new n.a(2097151,0)]},function(n,g,e){function h(a,
b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof
b))throw new TypeError("Cannot call a class as a function");}function a(a){var b=a.downloadCancellationToken=new k.d;a.source.download(a,b).then(function(){a.downloadCancellationToken===b&&(a.downloadCancellationToken=void 0,a.downloadSucceeded())},function(d){a.downloadCancellationToken===b&&(a.downloadCancellationToken=void 0,a.downloadFailed(d),console.log("Error retrieving chunk "+a+": "+d))})}function b(a){return new I(new l.a(a),p.a)}function d(a,b,d,c,f,l){for(;1>b.availableItems||b.availableSize<
a;){var u=f.next().value;if(void 0===u)return!1;var k=u.priorityTier;if(k<d||k===d&&u.priority>=c)return!1;l(u)}return!0}Object.defineProperty(g,"__esModule",{value:!0});e.d(g,"Chunk",function(){return t});e.d(g,"ChunkSourceBase",function(){return B});e.d(g,"ChunkSource",function(){return y});e.d(g,"ChunkQueueManager",function(){return F});e.d(g,"ChunkManager",function(){return H});g.WithParameters=function(a,b){a=function(a){function b(a){for(var d=[],f=0;f<arguments.length;++f)d[f-0]=arguments[f];
c(this,b);var u,f=h(this,(u=b.__proto__||Object.getPrototypeOf(b)).call.apply(u,[].concat([this],$jscomp.arrayFromIterable(d))));f.parameters=d[1].parameters;return f}m(b,a);return b}(a);return a=w([e.i(z.g)(b.RPC_ID)],a)};g.withChunkManager=function(a){return function(a){function b(a){for(var d=[],f=0;f<arguments.length;++f)d[f-0]=arguments[f];c(this,b);var u,f=h(this,(u=b.__proto__||Object.getPrototypeOf(b)).call.apply(u,[].concat([this],$jscomp.arrayFromIterable(d))));f.chunkManager=d[0].get(d[1].chunkManager);
return f}m(b,a);return b}(a)};var q=e(7),k=e(10),f=e(87),p=e(88),r=e(35),E=e(91),l=e(92),v=e(15),z=e(0),D=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),w=this&&this.__decorate||function(a,b,d,c){var f=arguments.length,u=3>f?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&
"function"===typeof Reflect.decorate)u=Reflect.decorate(a,b,d,c);else for(var k=a.length-1;0<=k;k--)if(l=a[k])u=(3>f?l(u):3<f?l(b,d,u):l(b,d))||u;return 3<f&&u&&Object.defineProperty(b,d,u),u},t=function(){function a(){c(this,a);this.key=this.source=this.prev1=this.next1=this.child1=this.prev0=this.next0=this.child0=null;this.state=q.a.NEW;this.error=null;this.newPriority=this.priority=0;this.newPriorityTier=this.priorityTier=q.b.RECENT;this.backendOnly=!1;this.downloadCancellationToken=void 0}D(a,
[{key:"initialize",value:function(a){this.key=a;this.state=q.a.NEW;this.priority=Number.NEGATIVE_INFINITY;this.priorityTier=q.b.RECENT;this.newPriority=Number.NEGATIVE_INFINITY;this.newPriorityTier=q.b.RECENT;this.error=null}},{key:"updatePriorityProperties",value:function(){this.priorityTier=this.newPriorityTier;this.priority=this.newPriority;this.newPriorityTier=q.b.RECENT;this.newPriority=Number.NEGATIVE_INFINITY}},{key:"dispose",value:function(){this.error=this.source=null}},{key:"downloadFailed",
value:function(a){this.error=a;this.queueManager.updateChunkState(this,q.a.FAILED)}},{key:"downloadSucceeded",value:function(){this.queueManager.updateChunkState(this,q.a.SYSTEM_MEMORY_WORKER)}},{key:"freeSystemMemory",value:function(){}},{key:"serialize",value:function(a,b){a.id=this.key;a.source=this.source.rpcId;a["new"]=!0}},{key:"toString",value:function(){return this.key}},{key:"chunkManager",get:function(){return this.source.chunkManager}},{key:"queueManager",get:function(){return this.source.chunkManager.queueManager}}],
[{key:"priorityLess",value:function(a,b){return a.priority<b.priority}},{key:"priorityGreater",value:function(a,b){return a.priority>b.priority}}]);return a}(),B=function(a){function b(a){c(this,b);var d=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));d.chunkManager=a;d.chunks=new Map;d.freeChunks=[];return d}m(b,a);D(b,[{key:"getNewChunk_",value:function(a){var b=this.freeChunks,d=b.length;if(0<d)return a=b[d-1],b.length=d-1,a.source=this,a;b=new a;b.source=this;return b}},{key:"addChunk",
value:function(a){var b=this.chunks;0===b.size&&this.addRef();b.set(a.key,a)}},{key:"removeChunk",value:function(a){var b=this.chunks,d=this.freeChunks;b.delete(a.key);a.dispose();d[d.length]=a;0===b.size&&this.dispose()}}]);return b}(z.e),y=function(a){function b(a,d){c(this,b);var f=a.get(d.chunkManager),f=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,f));e.i(z.f)(f,a,d);return f}m(b,a);return b}(B),I=function(){function a(b,d){c(this,a);this.heapOperations=b;this.linkedListOperations=
d;this.heapRoots=[null,null];this.recentHead=new t;d.initializeHead(this.recentHead)}D(a,[{key:"add",value:function(a){var b=a.priorityTier;if(b===q.b.RECENT)this.linkedListOperations.insertAfter(this.recentHead,a);else{var d=this.heapRoots;d[b]=this.heapOperations.meld(d[b],a)}}},{key:"candidates",value:function(){function a(a,x){for(;;)switch(b){case 0:if(g.heapOperations.compare!==t.priorityLess){b=1;break}D=g;z=D.linkedListOperations;h=D.recentHead;case 3:m=z.back(h);if(null!=m){b=5;break}b=4;
break;case 5:return b=7,{value:m,done:!1};case 7:if(void 0===x){b=8;break}b=-1;throw x;case 8:case 6:b=3;break;case 4:e=g,E=e.heapRoots,v=q.b.LAST_ORDERED_TIER;case 9:if(!(v>=q.b.FIRST_ORDERED_TIER)){b=11;break}case 12:r=E[v];if(null!=r){b=14;break}b=13;break;case 14:return b=16,{value:r,done:!1};case 16:if(void 0===x){b=17;break}b=-1;throw x;case 17:case 15:b=12;break;case 13:case 10:--v;b=9;break;case 11:b=2;break;case 1:p=g.heapRoots,k=q.b.FIRST_ORDERED_TIER;case 18:if(!(k<=q.b.LAST_ORDERED_TIER)){b=
20;break}case 21:l=p[k];if(null!=l){b=23;break}b=22;break;case 23:return b=25,{value:l,done:!1};case 25:if(void 0===x){b=26;break}b=-1;throw x;case 26:case 24:b=21;break;case 22:case 19:++k;b=18;break;case 20:u=g,f=u.linkedListOperations,c=u.recentHead;case 27:d=f.front(c);if(null!=d){b=29;break}b=28;break;case 29:return b=31,{value:d,done:!1};case 31:if(void 0===x){b=32;break}b=-1;throw x;case 32:case 30:b=27;break;case 28:case 2:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,c,f,u,l,k,p,r,
v,E,e,m,h,z,D,g=this,I={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();I[Symbol.iterator]=function(){return this};return I}},{key:"delete",value:function(a){var b=a.priorityTier;if(b===q.b.RECENT)this.linkedListOperations.pop(a);else{var d=this.heapRoots;d[b]=this.heapOperations.remove(d[b],a)}}}]);return a}(),F=function(u){function l(a,d){c(this,l);a=h(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,
a,d));a.queuedPromotionQueue=b(t.priorityGreater);a.downloadEvictionQueue=b(t.priorityLess);a.systemMemoryEvictionQueue=new I(new E.a(t.priorityLess),f.a);a.gpuMemoryPromotionQueue=b(t.priorityGreater);a.gpuMemoryEvictionQueue=b(t.priorityLess);a.updatePending=null;a.numQueued=0;a.numFailed=0;a.gpuMemoryCapacity=q.d.fromObject(d.gpuMemoryCapacity);a.systemMemoryCapacity=q.d.fromObject(d.systemMemoryCapacity);a.downloadCapacity=q.d.fromObject(d.downloadCapacity);return a}m(l,u);D(l,[{key:"scheduleUpdate",
value:function(){null===this.updatePending&&(this.updatePending=setTimeout(this.process.bind(this),0))}},{key:"chunkQueuesForChunk",value:function(a){function b(b,l){for(;;)switch(d){case 0:f=!1;c=a.state;if(!f&&c!==q.a.QUEUED){d=2;break}f=!0;d=3;return{value:u.queuedPromotionQueue,done:!1};case 3:if(void 0===l){d=4;break}d=-1;throw l;case 4:d=1;break;case 2:if(!f&&c!==q.a.DOWNLOADING){d=5;break}f=!0;d=6;return{value:u.downloadEvictionQueue,done:!1};case 6:if(void 0===l){d=7;break}d=-1;throw l;case 7:return d=
8,{value:u.systemMemoryEvictionQueue,done:!1};case 8:if(void 0===l){d=9;break}d=-1;throw l;case 9:d=1;break;case 5:if(f||c===q.a.SYSTEM_MEMORY_WORKER)f=!0;if(!f&&c!==q.a.SYSTEM_MEMORY){d=10;break}f=!0;d=11;return{value:u.systemMemoryEvictionQueue,done:!1};case 11:if(void 0===l){d=12;break}d=-1;throw l;case 12:if(a.priorityTier===q.b.RECENT||a.backendOnly){d=13;break}d=14;return{value:u.gpuMemoryPromotionQueue,done:!1};case 14:if(void 0===l){d=15;break}d=-1;throw l;case 15:case 13:d=1;break;case 10:if(!f&&
c!==q.a.GPU_MEMORY){d=16;break}f=!0;d=17;return{value:u.systemMemoryEvictionQueue,done:!1};case 17:if(void 0===l){d=18;break}d=-1;throw l;case 18:return d=19,{value:u.gpuMemoryEvictionQueue,done:!1};case 19:if(void 0===l){d=20;break}d=-1;throw l;case 20:d=1;break;case 16:case 1:d=-1;default:return{value:void 0,done:!0}}}var d=0,c,f,u=this,l={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();
l[Symbol.iterator]=function(){return this};return l}},{key:"adjustCapacitiesForChunk",value:function(a,b){b=b?-1:1;switch(a.state){case q.a.FAILED:this.numFailed-=b;break;case q.a.QUEUED:this.numQueued-=b;break;case q.a.DOWNLOADING:this.downloadCapacity.adjust(b,0);this.systemMemoryCapacity.adjust(b,0);break;case q.a.SYSTEM_MEMORY:case q.a.SYSTEM_MEMORY_WORKER:this.systemMemoryCapacity.adjust(b,b*a.systemMemoryBytes);break;case q.a.GPU_MEMORY:this.systemMemoryCapacity.adjust(b,b*a.systemMemoryBytes),
this.gpuMemoryCapacity.adjust(b,b*a.gpuMemoryBytes)}}},{key:"removeChunkFromQueues_",value:function(a){for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),d=b.next();!d.done;d=b.next())d.value.delete(a)}},{key:"addChunkToQueues_",value:function(a){if(a.state===q.a.QUEUED&&a.priorityTier===q.b.RECENT)return a.source.removeChunk(a),this.adjustCapacitiesForChunk(a,!1),!1;for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),d=b.next();!d.done;d=b.next())d.value.add(a);return!0}},{key:"performChunkPriorityUpdate",
value:function(a){a.priorityTier===a.newPriorityTier&&a.priority===a.newPriority?(a.newPriorityTier=q.b.RECENT,a.newPriority=Number.NEGATIVE_INFINITY):(this.removeChunkFromQueues_(a),a.updatePriorityProperties(),a.state===q.a.NEW&&(a.state=q.a.QUEUED,this.adjustCapacitiesForChunk(a,!0)),this.addChunkToQueues_(a))}},{key:"updateChunkState",value:function(a,b){b!==a.state&&(this.adjustCapacitiesForChunk(a,!1),this.removeChunkFromQueues_(a),a.state=b,this.adjustCapacitiesForChunk(a,!0),this.addChunkToQueues_(a),
this.scheduleUpdate())}},{key:"processGPUPromotions_",value:function(){function a(a){b.freeChunkGPUMemory(a);a.source.chunkManager.queueManager.updateChunkState(a,q.a.SYSTEM_MEMORY)}for(var b=this,c=this.gpuMemoryPromotionQueue.candidates(),f=this.gpuMemoryEvictionQueue.candidates(),u=this.gpuMemoryCapacity;;){var l=c.next().value;if(void 0===l)break;else{if(!d(l.gpuMemoryBytes,u,l.priorityTier,l.priority,f,a))break;this.copyChunkToGPU(l);this.updateChunkState(l,q.a.GPU_MEMORY)}}}},{key:"freeChunkGPUMemory",
value:function(a){this.rpc.invoke("Chunk.update",{id:a.key,state:q.a.SYSTEM_MEMORY,source:a.source.rpcId})}},{key:"freeChunkSystemMemory",value:function(a){a.state===q.a.SYSTEM_MEMORY_WORKER?a.freeSystemMemory():this.rpc.invoke("Chunk.update",{id:a.key,state:q.a.EXPIRED,source:a.source.rpcId})}},{key:"copyChunkToGPU",value:function(a){var b=this.rpc;if(a.state===q.a.SYSTEM_MEMORY)b.invoke("Chunk.update",{id:a.key,source:a.source.rpcId,state:q.a.GPU_MEMORY});else{var d={},c=[];a.serialize(d,c);d.state=
q.a.GPU_MEMORY;b.invoke("Chunk.update",d,c)}}},{key:"processQueuePromotions_",value:function(){function b(a){switch(a.state){case q.a.DOWNLOADING:var b=a.downloadCancellationToken;a.downloadCancellationToken=void 0;b.cancel();break;case q.a.GPU_MEMORY:c.freeChunkGPUMemory(a);case q.a.SYSTEM_MEMORY_WORKER:case q.a.SYSTEM_MEMORY:c.freeChunkSystemMemory(a)}a.source.chunkManager.queueManager.updateChunkState(a,q.a.QUEUED)}for(var c=this,f=this.queuedPromotionQueue.candidates(),u=this.downloadEvictionQueue.candidates(),
l=this.systemMemoryEvictionQueue.candidates(),k=this.downloadCapacity,p=this.systemMemoryCapacity;;){var r=f.next();if(r.done)break;var r=r.value,v=r.priorityTier,E=r.priority;if(!d(0,k,v,E,u,b))break;if(!d(0,p,v,E,l,b))break;this.updateChunkState(r,q.a.DOWNLOADING);a(r)}}},{key:"process",value:function(){this.updatePending&&(this.updatePending=null,this.processGPUPromotions_(),this.processQueuePromotions_(),this.logStatistics())}},{key:"logStatistics",value:function(){}}]);return l}(z.b),F=w([e.i(z.a)(q.e)],
F),H=function(a){function b(a,d){c(this,b);var f=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));f.existingTierChunks=[];f.newTierChunks=[];f.updatePending=null;f.recomputeChunkPriorities=new v.a;f.recomputeChunkPrioritiesLate=new v.a;f.memoize=new r.a;f.queueManager=a.get(d.chunkQueueManager).addRef();for(a=q.b.FIRST_TIER;a<=q.b.LAST_TIER;++a)a!==q.b.RECENT&&(f.existingTierChunks[a]=[]);return f}m(b,a);D(b,[{key:"scheduleUpdateChunkPriorities",value:function(){null===this.updatePending&&
(this.updatePending=setTimeout(this.recomputeChunkPriorities_.bind(this),0))}},{key:"recomputeChunkPriorities_",value:function(){this.updatePending=null;this.recomputeChunkPriorities.dispatch();this.recomputeChunkPrioritiesLate.dispatch();this.updateQueueState([q.b.VISIBLE])}},{key:"requestChunk",value:function(a,b,d){a.newPriorityTier===q.b.RECENT&&this.newTierChunks.push(a);a.newPriorityTier=b;a.newPriority=d}},{key:"updateQueueState",value:function(a){var b=this.existingTierChunks,d=this.queueManager;
a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){for(var f=b[c.value],u=$jscomp.makeIterator(f),c=u.next();!c.done;c=u.next())c=c.value,c.newPriorityTier===q.b.RECENT&&d.performChunkPriorityUpdate(c);f.length=0}a=this.newTierChunks;f=$jscomp.makeIterator(a);for(c=f.next();!c.done;c=f.next())c=c.value,d.performChunkPriorityUpdate(c),b[c.priorityTier].push(c);a.length=0;this.queueManager.scheduleUpdate()}}]);return b}(z.b),H=w([e.i(z.a)(q.f)],H)},function(n,g,e){e.d(g,"a",function(){return h});
g.c=1E-6;var h="undefined"!==typeof Float32Array?Float32Array:Array;g.b=Math.random},function(n,g,e){n="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;g.assign=function(c){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var b=a.shift();if(b){if("object"!==typeof b)throw new TypeError(b+"must be non-object");for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d])}}return c};g.shrinkBuf=function(c,a){if(c.length===a)return c;if(c.subarray)return c.subarray(0,
a);c.length=a;return c};var h={arraySet:function(c,a,b,d,q){if(a.subarray&&c.subarray)c.set(a.subarray(b,b+d),q);else for(var k=0;k<d;k++)c[q+k]=a[b+k]},flattenChunks:function(c){var a,b,d,q,k;a=d=0;for(b=c.length;a<b;a++)d+=c[a].length;k=new Uint8Array(d);a=d=0;for(b=c.length;a<b;a++)q=c[a],k.set(q,d),d+=q.length;return k}},m={arraySet:function(c,a,b,d,q){for(var k=0;k<d;k++)c[q+k]=a[b+k]},flattenChunks:function(c){return[].concat.apply([],c)}};g.setTyped=function(c){c?(g.Buf8=Uint8Array,g.Buf16=
Uint16Array,g.Buf32=Int32Array,g.assign(g,h)):(g.Buf8=Array,g.Buf16=Array,g.Buf32=Array,g.assign(g,m))};g.setTyped(n)},function(n,g,e){function h(a){if("object"===typeof a){if(null===a)return"null";if(Array.isArray(a)){var b="[",d=a.length,c=0;if(c<d)for(b+=h(a[c]);++c<d;)b+=",",b+=h(a[c]);return b+"]"}var b="{",d=Object.keys(a).sort(),c=0,p=d.length;if(c<p)for(var r=d[c],b=b+JSON.stringify(r),b=b+":"+h(a[r]);++c<p;)b+=",",r=d[c],b+=JSON.stringify(r),b+=":",b+=h(a[r]);return b+"}"}return JSON.stringify(a)}
function m(d){for(var c="";0<d.length;){var k=d.match(a),f;if(null===k)f=d,k=d="";else{f=d.substr(0,k.index);d=d.substr(k.index+k[0].length);var p=k[1];if(void 0!==p){if(k=p,2<=k.length&&"'"===k.charAt(0)&&"'"===k.charAt(k.length-1)){k=k.substr(1,k.length-2);for(p='"';0<k.length;){var r=k.match(b);if(null===r){p+=k;break}p+=r[1];p+="\\";p+='"';k=k.substr(r.index+r[0].length)}k=p+'"'}}else k=k[2]}c+=f.replace(/\(/g,"[").replace(/\)/g,"]").replace("True","true").replace("False","false").replace(/,\s*([\}\]])/g,
"$1");c+=k}return c}g.a=h;g.h=function(a){return JSON.parse(m(a))};g.e=function(a,b){if(!Array.isArray(a))throw Error("Expected array, but received: "+JSON.stringify(a)+".");return a.map(b)};g.b=function(a){if("object"!==typeof a||null==a||Array.isArray(a))throw Error("Expected JSON object, but received: "+JSON.stringify(a)+".");return a};g.f=function(a){if("string"!==typeof a)throw Error("Expected string, but received: "+JSON.stringify(a)+".");return a};g.c=function(a,b,c){a=a.hasOwnProperty(b)?
a[b]:void 0;try{return c(a)}catch(f){throw Error("Error parsing "+JSON.stringify(b)+" property: "+f.message);}};g.g=function(a){var b=c.a.create(),d=b.length;if(!Array.isArray(a)||a.length!==d)throw Error("Expected length "+d+" array, but received: "+JSON.stringify(a)+".");for(var f=0;f<d;++f){var p=b,r=f,E;E=a[f];b:{var l=typeof E;if("number"===l||"string"===l)if(l=parseFloat(""+E),!Number.isNaN(l)){E=l;break b}throw Error("Expected floating-point number, but received: "+JSON.stringify(E)+".");}if(!Number.isFinite(E))throw Error("Expected finite floating-point number, but received: "+
E+".");p[r]=E}return b};g.d=function(a){if(!Array.isArray(a))throw Error("Expected array, received: "+JSON.stringify(a)+".");for(var b=$jscomp.makeIterator(a),d=b.next();!d.done;d=b.next())if(d=d.value,"string"!==typeof d)throw Error("Expected string, received: "+JSON.stringify(d)+".");return a};var c=e(1),a=new RegExp(/('(?:[^'\\]|(?:\\.))*')/.source+"|"+/("(?:[^'\\]|(?:\\.))*")/.source),b=/^((?:[^"'\\]|(?:\\.))*)"/},function(n,g,e){e.d(g,"a",function(){return q});var h=function(){function a(a,b){for(var d=
0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),m=new Uint32Array(2),c=[];for(n=2;36>=n;++n){g=Math.floor(32/Math.log2(n));e=Math.pow(n,g);var a=Math.floor(g/2),b=Math.pow(n,a),a=Math.pow(n,g-a),d="^[0-"+String.fromCharCode(48+Math.min(9,n-1));10<n&&(d+="a-"+String.fromCharCode(97+n-11),d+="A-"+String.fromCharCode(65+n-11));d+="]{1,"+Math.ceil(64/
Math.log2(n))+"}$";c[n]={lowDigits:g,lowBase:e,lowBase1:b,lowBase2:a,pattern:new RegExp(d)}}var q=function(){function a(b,d){b=void 0===b?0:b;d=void 0===d?0:d;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.low=b;this.high=d}h(a,[{key:"clone",value:function(){return new a(this.low,this.high)}},{key:"assign",value:function(a){this.low=a.low;this.high=a.high}},{key:"toString",value:function(a){a=void 0===a?10:a;var b=this.low,d=this.high;if(0===d)return b.toString(a);
var d=4294967296*d,f=c[a],l=f.lowBase,f=f.lowDigits,k=d%l,d=Math.floor(d/l),b=b+k,d=d+Math.floor(b/l),b=(b%l).toString(a);return d.toString(a)+"0".repeat(f-b.length)+b}},{key:"tryParseString",value:function(a,b){b=void 0===b?10:b;var d=c[b],f=d.lowDigits,l=d.lowBase,k=d.lowBase1,p=d.lowBase2;if(!d.pattern.test(a))return!1;if(a.length<=f)return this.low=parseInt(a,b),this.high=0,!0;f=a.length-f;d=parseInt(a.substr(f),b);a=parseInt(a.substr(0,f),b);l=Math.floor(a*l/4294967296);k=d+a%4294967296*k%4294967296*
p%4294967296;4294967296<k&&(++l,k-=4294967296);if(k>>>0!==k||l>>>0!==l)return!1;this.low=k;this.high=l;return!0}},{key:"parseString",value:function(a,b){if(!this.tryParseString(a,void 0===b?10:b))throw Error("Failed to parse string as uint64 value: "+JSON.stringify(a)+".");return this}},{key:"valid",value:function(){var a=this.low,b=this.high;return a>>>0===a&&b>>>0===b}},{key:"toJSON",value:function(){return this.toString()}},{key:"lshift",value:function(b){b&=63;if(0==b)return this.clone();var d=
this.low,c=this.high;return 32>b?new a(d<<b,c<<b|d>>>32-b):new a(0,d<<b-32)}},{key:"rshift",value:function(b){b&=63;if(0==b)return this.clone();var d=this.low,c=this.high;return 32>b?new a(d>>>b|c<<32-b,c>>b):new a(c>>b-32,0<=c?0:-1)}},{key:"or",value:function(b){return new a(this.low|b.low,this.high|b.high)}},{key:"xor",value:function(b){return new a(this.low^b.low,this.high^b.high)}},{key:"and",value:function(b){return new a(this.low&b.low,this.high&b.high)}}],[{key:"less",value:function(a,b){return a.high<
b.high||a.high===b.high&&a.low<b.low}},{key:"compare",value:function(a,b){return a.high-b.high||a.low-b.low}},{key:"equal",value:function(a,b){return a.low===b.low&&a.high===b.high}},{key:"min",value:function(b,d){return a.less(b,d)?b:d}},{key:"random",value:function(){crypto.getRandomValues(m);return new a(m[0],m[1])}},{key:"parseString",value:function(b,d){d=void 0===d?10:d;return(new a).parseString(b,d)}},{key:"encodeUint32Array",value:function(a){for(var b=new Uint32Array(2*a.length),d=0;d<a.length;d++){var c=
a[d];b[2*d]=c.low;b[2*d+1]=c.high}return b}},{key:"decodeUint32Array",value:function(b){b instanceof ArrayBuffer&&(b=new Uint32Array(b));if(1===b.length%2)throw Error("Decode error. Length of input array was not even: "+b.length);for(var d=Array(b.length/2),c=0;c<d.length;c++)d[c]=new a(b[2*c],b[2*c+1]);return d}}]);return a}();q.ZERO=new q(0,0)},function(n,g,e){e.d(g,"a",function(){return m});e.d(g,"b",function(){return c});e.d(g,"d",function(){return a});var h=function(){function a(a,b){for(var d=
0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,c,k){c&&a(b.prototype,c);k&&a(b,k);return b}}(),m;(function(a){a[a.GPU_MEMORY=0]="GPU_MEMORY";a[a.SYSTEM_MEMORY=1]="SYSTEM_MEMORY";a[a.SYSTEM_MEMORY_WORKER=2]="SYSTEM_MEMORY_WORKER";a[a.DOWNLOADING=3]="DOWNLOADING";a[a.QUEUED=4]="QUEUED";a[a.NEW=5]="NEW";a[a.FAILED=6]="FAILED";a[a.EXPIRED=7]="EXPIRED"})(m||(m={}));var c;(function(a){a[a.FIRST_TIER=
0]="FIRST_TIER";a[a.FIRST_ORDERED_TIER=0]="FIRST_ORDERED_TIER";a[a.VISIBLE=0]="VISIBLE";a[a.PREFETCH=1]="PREFETCH";a[a.LAST_ORDERED_TIER=1]="LAST_ORDERED_TIER";a[a.RECENT=2]="RECENT";a[a.LAST_TIER=2]="LAST_TIER"})(c||(c={}));g.c=1E13;var a=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.itemCapacity=this.availableItems=b;this.sizeCapacity=this.availableSize=c}h(a,[{key:"adjust",value:function(a,b){this.availableItems+=a;this.availableSize+=
b}},{key:"toString",value:function(){return this.availableItems+"/"+this.itemCapacity+" items, "+(this.availableSize+"/"+this.sizeCapacity+" size")}},{key:"toObject",value:function(){return{itemCapacity:this.itemCapacity,sizeCapacity:this.sizeCapacity}}}],[{key:"fromObject",value:function(b){return new a(b.itemCapacity,b.sizeCapacity)}}]);return a}();a.INFINITE=new a(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);g.e="ChunkQueueManager";g.f="ChunkManager"},function(n,g,e){function h(a,b){if(!(a instanceof
b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b,d){for(var c=0;3>c;++c)a[c]=Number.POSITIVE_INFINITY,b[c]=Number.NEGATIVE_INFINITY;d=$jscomp.makeIterator(d);
for(c=d.next();!c.done;c=d.next())for(var f=c.value.spec,c=f.lowerChunkBound,f=f.upperChunkBound,u=0;3>u;++u)a[u]=Math.min(a[u],c[u]),b[u]=Math.max(b[u],f[u])}function a(a,b,d,c){for(var f=v.FULLY_INSIDE,u=0;3>u;++u){var l;l=a[u];var k=b[u],p=d[u],r=c[u];l=l>=r||k<=p?v.FULLY_OUTSIDE:l>=p&&k<=r?v.FULLY_INSIDE:v.PARTIALLY_INSIDE;switch(l){case v.FULLY_OUTSIDE:return l;case v.PARTIALLY_INSIDE:f=l}}return f}function b(a,b){var d=b.length,c=0;if(1<d)for(var f=0,u=0;u<d;++u){var k=b[u].spec.chunkLayout,
p;p=k.size;for(var k=k.globalToLocalSpatialVector(l,a),r=0,v=0,E=1,q=0;3>q;++q)var e=p[q],E=E*e,e=e*k[q],r=Math.min(r,e),v=Math.max(v,e);p=E/(v-r);p>f&&(f=p,c=u)}return b[c]}function d(a){var b=a.voxelSize,d=void 0===a.lowerVoxelBound?r.g:a.lowerVoxelBound,c=a.upperVoxelBound,f=void 0===a.maxVoxelsPerChunkLog2?18:a.maxVoxelsPerChunkLog2;a=void 0===a.transform?r.j:a.transform;a=e.i(r.k)(r.a.create(),a);b=r.a.multiply(a,a,b);a=r.a.fromValues(1,1,1);var u;if(void 0===c)u=r.l;else{u=r.a.create();for(var l=
0;3>l;++l)u[l]=Math.pow(2,Math.floor(Math.log2(c[l]-d[l])))}for(d=0;d<f;++d){for(var c=Infinity,l=-1,k=0;3>k;++k)if(!(a[k]>=u[k])){var p=a[k]*b[k];p<c&&(c=p,l=k)}c=l;if(-1===c)break;a[c]*=2}return a}e.d(g,"f",function(){return D});g.b=d;g.a=function(a,b){b=b.transform;return void 0===b?void 0===a?r.j:a:void 0===a?b:r.b.multiply(r.b.create(),b,a)};g.c=function(a){if(void 0!==a.chunkDataSizes)return a.chunkDataSizes;var b=void 0===a.chunkLayoutPreference?w.ISOTROPIC:a.chunkLayoutPreference;switch(b){case w.ISOTROPIC:return[d(a)];
case w.FLAT:for(var b=[],c=0;3>c;++c){var f=c,k;k=a.lowerVoxelBound;var u=a.upperVoxelBound,p=c,v=a.voxelSize,E=a.maxVoxelsPerChunkLog2,q=a.transform;r.a.subtract(l,void 0===u?r.l:u,void 0===k?r.g:k);l[p]=1;k=d({voxelSize:v,upperVoxelBound:l,maxVoxelsPerChunkLog2:E,transform:q});b[f]=k}b.push(d(a));return b}throw Error("Invalid chunk layout preference: "+b+".");};e.d(g,"d",function(){return t});var q=e(75),k=e(20),f=e(83),p=e(11),r=e(1);n=e(0);e.d(g,"e",function(){return p.a});var E=function(){function a(a,
b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),l=r.a.create(),v;(function(a){a[a.FULLY_OUTSIDE=0]="FULLY_OUTSIDE";a[a.FULLY_INSIDE=1]="FULLY_INSIDE";a[a.PARTIALLY_INSIDE=2]="PARTIALLY_INSIDE"})(v||(v={}));var z=[r.a.create(),r.a.create(),r.a.create(),r.a.create()],D=function(d){function p(){h(this,p);var a;a=(p.__proto__||Object.getPrototypeOf(p)).call(this);
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.width=-1;a.height=-1;a.hasViewportToData=!1;a.hasValidViewport=!1;a.viewportToData=r.b.create();a.viewportAxes=[r.a.create(),r.a.create(),r.a.create()];a.previousViewportAxes=[r.a.create(),r.a.create()];a.centerDataPosition=r.a.create();a.viewportPlaneDistanceToOrigin=0;a.visibleChunkLayouts=new Map;a.visibleLayers=new Map;a.visibleSourcesStale=!0;
a.pixelSize=0;r.b.identity(a.viewportToData);return a}m(p,d);E(p,[{key:"onViewportChanged",value:function(){}},{key:"maybeSetHasValidViewport",value:function(){!this.hasValidViewport&&-1!==this.width&&-1!==this.height&&this.hasViewportToData&&(this.hasValidViewport=!0,this.onHasValidViewport());if(this.hasValidViewport)this.onViewportChanged()}},{key:"onHasValidViewport",value:function(){}},{key:"setViewportSize",value:function(a,b){return a!==this.width||b!==this.height?(this.width=a,this.height=
b,this.maybeSetHasValidViewport(),!0):!1}},{key:"setViewportToDataMatrix",value:function(a){if(this.hasViewportToData&&r.b.equals(this.viewportToData,a))return!1;this.hasViewportToData=!0;var b=this.viewportToData;r.b.copy(b,a);e.i(r.f)(b);r.a.transformMat4(this.centerDataPosition,r.g,a);a=0;for(var d=this.viewportAxes,c=this.previousViewportAxes,l=0;3>l;++l){var k=d[l];e.i(r.h)(k,r.i[l],b);0===l&&(a=r.a.length(k));r.a.normalize(k,k)}this.viewportAxes=d;this.previousViewportAxes=c;if(!e.i(f.a)(a,
this.pixelSize)||.95>r.a.dot(d[0],c[0])||.95>r.a.dot(d[1],c[1]))r.a.copy(c[0],d[0]),r.a.copy(c[1],d[1]),this.visibleSourcesStale=!0,this.pixelSize=a;this.viewportPlaneDistanceToOrigin=r.a.dot(this.centerDataPosition,this.viewportAxes[2]);this.onViewportToDataMatrixChanged();this.maybeSetHasValidViewport();return!0}},{key:"onViewportToDataMatrixChanged",value:function(){}},{key:"updateVisibleSources",value:function(){if(this.visibleSourcesStale){this.visibleSourcesStale=!1;var a=1.1*this.pixelSize,
d=this.visibleChunkLayouts,c=this.viewportAxes[2],f=this.visibleLayers;d.clear();for(var l={},f=$jscomp.makeIterator(f),k=f.next();!k.done;l={smallestVoxelSize:l.smallestVoxelSize,visibleSources:l.visibleSources},k=f.next()){var k=$jscomp.makeIterator(k.value),p=k.next().value;l.visibleSources=k.next().value;l.visibleSources.length=0;var k=p.sources,r=k.length,p=void 0;l.smallestVoxelSize=k[0][0].spec.voxelSize;for(var v=function(b){return function(d){for(var c=0;3>c;++c){var f=d[c];if(f>a&&f>b.smallestVoxelSize[c])return!0}return!1}}(l),
E=function(a){return function(b,c){a.visibleSources[a.visibleSources.length++]=b;var f=b.spec.chunkLayout,l=d.get(f);void 0===l&&(l=new Map,d.set(f,l));l.set(b,c)}}(l),p=r-1;;){r=b(c,k[p]);E(r,p);if(0===p||!v(r.spec.voxelSize))break;--p}l.visibleSources.reverse()}}}},{key:"computeVisibleChunks",value:function(b,d){var f=this;this.updateVisibleSources();for(var u=this.width,p=this.height,E=this.viewportToData,q=0;3>q;++q)z[0][q]=-r.i[0][q]*u/2-r.i[1][q]*p/2,z[1][q]=-r.i[0][q]*u/2+r.i[1][q]*p/2,z[2][q]=
r.i[0][q]*u/2-r.i[1][q]*p/2,z[3][q]=r.i[0][q]*u/2+r.i[1][q]*p/2;for(u=0;4>u;++u)r.a.transformMat4(z[u],z[u],E);var m=r.a.create(),t=r.a.create(),h=r.a.create(),D=r.a.create(),g=r.a.create(),I=r.a.create(),G=[],y=[];this.visibleChunkLayouts.forEach(function(u,p){function q(){for(var a=0,b=0,d=0;3>d;++d)var c=I[d],f=m[d],l=t[d]-f,u=g[d]*l,a=a+c*(f+u),b=b+c*(f+l-u);return a<S?!1:b<=S}function E(b){function c(){w=e.i(k.a)(G,0,z,function(b){var d=b.spec;switch(a(m,t,d.lowerChunkBound,d.upperChunkBound)){case v.PARTIALLY_INSIDE:return!0;
case v.FULLY_INSIDE:y.push(b);default:return!1}})}if(0!==y.length||0!==w){for(var f=1,l=0;3>l;++l)f*=Math.max(0,t[l]-m[l]);if(0!==f&&q())if(1===f)d(p,x,m,y);else{for(var u;;)if(f=m[b],l=t[b],u=l-f,1===u)b=(b+1)%3;else break;u=f+Math.floor(.5*u);var r=(b+1)%3,h=y.length;t[b]=u;var z=w;c();E(r);y.length=h;w=z;t[b]=l;m[b]=u;c();E(r);m[b]=f;y.length=h;w=z}}}var x=b(p);c(h,D,u.keys());r.a.set(m,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);r.a.set(t,Number.NEGATIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);p.globalToLocalSpatialVector(I,f.viewportAxes[2]);for(var H=0;3>H;++H)g[H]=0<I[H]?1:0;for(var S=r.a.dot(p.globalToLocalGrid(l,f.centerDataPosition),I),H=0;4>H;++H)for(var B=p.globalToLocalGrid(l,z[H]),F=0;3>F;++F)m[F]=Math.min(m[F],Math.floor(B[F])),t[F]=Math.max(t[F],Math.floor(B[F])+1);r.a.max(m,m,h);r.a.min(t,t,D);y.length=0;G.length=0;u=$jscomp.makeIterator(u.keys());for(H=u.next();!H.done;H=u.next())switch(H=H.value,B=H.spec,a(m,t,B.lowerChunkBound,
B.upperChunkBound)){case v.FULLY_INSIDE:y.push(H);break;case v.PARTIALLY_INSIDE:G.push(H)}var w=G.length;E(0)})}}]);return p}(n.e),w;(function(a){a[a.ISOTROPIC=0]="ISOTROPIC";a[a.FLAT=1]="FLAT"})(w||(w={}));var t=function y(a){h(this,y);var b=void 0===a.lowerVoxelBound?r.g:a.lowerVoxelBound,d=a.upperVoxelBound,c=a.chunkDataSize,f=a.voxelSize,l=a.transform,k=void 0===a.baseVoxelOffset?r.g:a.baseVoxelOffset,p=void 0===a.lowerClipBound?r.a.multiply(r.a.create(),f,b):a.lowerClipBound,v=void 0===a.upperClipBound?
r.a.multiply(r.a.create(),f,d):a.upperClipBound;this.voxelSize=f;this.chunkDataSize=c;this.chunkLayout=q.a.get(r.a.multiply(r.a.create(),a.chunkDataSize,f),l);this.lowerClipBound=p;this.upperClipBound=v;this.lowerVoxelBound=b;this.upperVoxelBound=d;this.baseVoxelOffset=k;a=this.lowerChunkBound=r.a.create();f=this.upperChunkBound=r.a.create();for(l=0;3>l;++l)a[l]=Math.floor(b[l]/c[l]),f[l]=Math.floor((d[l]-1)/c[l]+1)};g.g="SliceView"},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.d(g,"a",function(){return p});
var a=e(21),b=e(33),d=e(1);n=e(0);var q=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),k=function E(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return E(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===
b?void 0:b.call(d)}};g=this&&this.__decorate||function(a,b,d,c){var f=arguments.length,l=3>f?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(a,b,d,c);else for(var p=a.length-1;0<=p;p--)if(k=a[p])l=(3>f?k(l):3<f?k(b,d,l):k(b,d))||l;return 3<f&&l&&Object.defineProperty(b,d,l),l};var f=function(a){function b(){h(this,b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.source=null;return a}c(b,
a);q(b,[{key:"initializeVolumeChunk",value:function(a,d){k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initializeVolumeChunk",this).call(this,a,d);a=this.source;this.gpuMemoryBytes=this.systemMemoryBytes=a.spec.chunkBytes;this.data=null}},{key:"serialize",value:function(a,d){k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,d);a=a.data=this.data;d.push(a.buffer);this.data=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=
this.gpuMemoryBytes=this.data.byteLength;k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){this.data=null}}]);return b}(a.SliceViewChunk),p=function(a){function l(a,d){h(this,l);a=m(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,a,d));a.spec=b.c.fromObject(d.spec);return a}c(l,a);q(l,[{key:"getChunk",value:function(a){var b=e.i(d.d)(a),c=this.chunks.get(b);void 0===c&&(c=this.getNewChunk_(f),c.initializeVolumeChunk(b,
a),this.addChunk(c));return c}}]);return l}(a.SliceViewChunkSource),a=function(a){function b(){h(this,b);return m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);return b}(a.RenderLayer),a=g([e.i(n.a)(b.d)],a)},function(n,g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}e.d(g,"d",function(){return d});e.d(g,"e",function(){return q});g.a=function(a,c){return new Promise(function(f,k){if(a===b)c(f,k,b);else{var p=new d,l=a.add(function(){p.cancel()});c(function(a){l();f(a)},function(a){l();k(a)},p)}})};var c=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=
!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();n=new (function(){function a(){m(this,a);this.name="CancellationError";this.message="CANCELED"}c(a,[{key:"toString",value:function(){return"CANCELED"}}]);return a}());g.b=n;var a=function(){},b={isCanceled:!1,add:function(){return a},remove:a};g.c=b;var d=function(){function b(){m(this,b)}c(b,[{key:"cancel",value:function(){var a=this.handlers;if(null!==a&&(this.handlers=
null,void 0!==a))for(var a=$jscomp.makeIterator(a),b=a.next();!b.done;b=a.next())b=b.value,b()}},{key:"add",value:function(b){var d=this,c=this.handlers;if(null===c)return b(),a;void 0===c&&(c=this.handlers=new Set);c.add(b);return function(){d.remove(b)}}},{key:"remove",value:function(a){var b=this.handlers;null!=b&&b.delete(a)}},{key:"isCanceled",get:function(){return null===this.handlers}}]);return b}(),q=function(a){function d(){m(this,d);var a;a=(d.__proto__||Object.getPrototypeOf(d)).apply(this,
arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.consumers=new Set;return a}h(d,a);c(d,[{key:"addConsumer",value:function(a){a=void 0===a?b:a;var d=this,c=this.consumers;c.has(a)||a.isCanceled||(c.add(a),a.add(function(){c.delete(a);0===c.size&&d.cancel()}))}}]);return d}(d)},function(n,g,e){e.d(g,"a",function(){return h});var h;(function(e){e[e.UINT8=0]="UINT8";e[e.UINT16=1]="UINT16";
e[e.UINT32=2]="UINT32";e[e.UINT64=3]="UINT64";e[e.FLOAT32=4]="FLOAT32"})(h||(h={}));n=[];g.b=n;n[h.UINT8]=1;n[h.UINT16]=2;n[h.UINT32]=4;n[h.UINT64]=8;n[h.FLOAT32]=4},function(n,g,e){e.d(g,"b",function(){return h});g.d=function(c,a,b){b=void 0===b?m:b;if(a!==b)for(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength),a=0,b=c.length;a<b;a+=2){var d=c[a];c[a]=c[a+1];c[a+1]=d}};g.a=function(c,a,b){b=void 0===b?m:b;if(a!==b)for(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength),a=0,b=c.length;a<b;a+=
4){var d=c[a];c[a]=c[a+3];c[a+3]=d;d=c[a+1];c[a+1]=c[a+2];c[a+2]=d}};var h;(function(c){c[c.LITTLE=0]="LITTLE";c[c.BIG=1]="BIG"})(h||(h={}));var m=function(){var c=Uint16Array.of(4386);return 17===(new Uint8Array(c.buffer))[0]?h.BIG:h.LITTLE}();g.c=m},function(n,g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.d(g,"e",function(){return q});g.b=function(a,c){c=void 0===c?"GET":c;var f=new XMLHttpRequest;f[d]=c;f[b]=a;f.open(c,a);return f};g.c=function(a,f,p){p=void 0===p?"GET":p;var k=new XMLHttpRequest;if(Array.isArray(a)){var q=a.length,q=1===q?0:Math.abs(e.i(c.a)(f))%q;a=a[q]+f}else a+=f;k[d]=p;k[b]=a;k.open(p,a);return k};g.a=function(a,b,c){c=void 0===c?m.c:c;a.responseType=b;return new Promise(function(b,d){var f=function(){a.abort()};
c.add(f);a.onloadend=function(){var l=this.status;c.remove(f);200<=l&&300>l?b(this.response):d(q.fromXhr(a))};a.send()})};g.d=function(a,b,c,d){d=void 0===d?m.c:d;a.responseType=c;a.setRequestHeader("Content-Type","application/json");return new Promise(function(c,f){var l=function(){a.abort()};d.add(l);a.onloadend=function(){var b=this.status;d.remove(l);200<=b&&300>b?c(this.response):f(q.fromXhr(a))};a.send(JSON.stringify(b))})};var m=e(10),c=e(86),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();$jscomp.initSymbol();var b=Symbol("url");$jscomp.initSymbol();var d=Symbol("method"),q=function(c){function f(a,b,c,d){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var l=a+" "+JSON.stringify(b)+" resulted in HTTP error "+c;d&&(l+=": "+d);var l=l+".",k;k=(f.__proto__||Object.getPrototypeOf(f)).call(this,
l);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");k=!k||"object"!==typeof k&&"function"!==typeof k?this:k;k.name="HttpError";k.message=l;k.method=a;k.url=b;k.code=c;k.statusMessage=d;return k}h(f,c);a(f,null,[{key:"fromXhr",value:function(a){return new f(a[d],a[b],a.status,a.statusText)}}]);return f}(Error)},function(n,g,e){g.a=function(c,a){e.i(h.a)(c,e.i(m.a)(new Uint8Array(a),c.chunkDataSize,c.source.spec.numChannels))};var h=e(25),m=e(78)},function(n,
g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}e.d(g,"b",function(){return a});e.d(g,"a",function(){return b});var c=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),a=function(){function a(){m(this,a);this.handlers=new Set;this.count=0;var b=this;this.dispatch=function(){var a=this,c=arguments;++b.count;b.handlers.forEach(function(b){b.apply(a,c)})}}c(a,[{key:"add",value:function(a){var b=this;this.handlers.add(a);return function(){return b.remove(a)}}},
{key:"remove",value:function(a){return this.handlers.delete(a)}},{key:"dispose",value:function(){this.handlers=void 0}}]);return a}(),b=function(a){function b(){m(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}h(b,a);return b}(a)},function(n,g,e){function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}g.a=function(a){return function(a){function b(a){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];if(!(this instanceof
b))throw new TypeError("Cannot call a class as a function");var p,r=h(this,(p=b.__proto__||Object.getPrototypeOf(b)).call.apply(p,[].concat([this],$jscomp.arrayFromIterable(c))));r.visibility=c[0].get(c[1].visibility);r.registerDisposer(r.visibility.changed.add(function(){return r.chunkManager.scheduleUpdateChunkPriorities()}));return r}m(b,a);return b}(a)};g.b=function(a){return a===Number.POSITIVE_INFINITY?c.b.VISIBLE:c.b.PREFETCH};g.c=function(a){return a===Number.POSITIVE_INFINITY?0:a*c.c};e(70);
var c=e(7)},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){for(var c=r.a.create(),d=r.a.create(),l=r.a.create(),f=new Float32Array(a.length),k=new Float32Array(a.length/3),p=b.length,v=0;v<p;v+=3)for(var e=0;3>e;++e)k[b[v+e]]+=1;for(v=0;v<p;v+=3){for(var e=3*b[v],q=3*b[v+1],m=3*b[v+2],t=0;3>t;++t)d[t]=a[q+t]-a[e+t],l[t]=a[m+t]-a[q+t];r.a.cross(c,d,l);r.a.normalize(c,c);for(e=0;3>e;++e)for(m=b[v+e],q=1/k[m],m*=3,t=0;3>t;++t)f[m+t]+=q*c[t]}a=f.length;
for(b=0;b<a;b+=3)c=f.subarray(b,3),r.a.normalize(c,c);return f}function b(a,b,c,d,l,f,k,v){var u=new Float32Array(c,l,3*f);e.i(p.a)(u,d);void 0===k&&(k=l+12*f);var r;void 0!==v&&(r=v*b);c=void 0===r?new Uint32Array(c,k):new Uint32Array(c,k,r);if(0!==c.length%b)throw Error("Number of indices is not a multiple of "+b+": "+c.length+".");e.i(p.a)(c,d);a.vertexPositions=u;a.indices=c}g.b=function(a,b,c){e.i(E.b)(b);a.fragmentIds=e.i(E.c)(b,c,E.d)};g.a=a;g.e=b;g.c=function(c,d,l,f,k,p,v){b(c,3,d,l,f,k,
p,v);c.vertexNormals=a(c.vertexPositions,c.indices)};e.d(g,"d",function(){return y});var d=e(2),q=e(7);n=e(68);var k=e(31),f=e(23),p=e(12),r=e(1),E=e(5),l=e(6),v=e(16);g=e(0);var z=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),D=function F(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,
b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return F(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},w=this&&this.__decorate||function(a,b,c,d){var l=arguments.length,f=3>l?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,u;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var k=a.length-1;0<=k;k--)if(u=a[k])f=(3>l?u(f):3<l?u(b,c,f):u(b,c))||f;return 3<l&&f&&Object.defineProperty(b,c,f),f},
t=function(a){function b(){h(this,b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.backendOnly=!0;a.objectId=new l.a;return a}c(b,a);z(b,[{key:"initializeManifestChunk",value:function(a,c,d){D(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.objectId.assign(c);d&&(this.clipBounds=d)}},{key:"freeSystemMemory",value:function(){this.fragmentIds=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=100;D(b.prototype.__proto__||
Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this);this.priorityTier<q.b.RECENT&&this.source.chunkManager.scheduleUpdateChunkPriorities()}},{key:"toString",value:function(){return this.objectId.toString()}}]);return b}(d.Chunk),B=function(a){function b(){h(this,b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.manifestChunk=null;a.fragmentId=null;a.vertexPositions=null;a.indices=null;a.vertexNormals=null;return a}c(b,a);z(b,[{key:"initializeFragmentChunk",
value:function(a,c,d){D(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.manifestChunk=c;this.fragmentId=d}},{key:"freeSystemMemory",value:function(){this.fragmentId=this.vertexPositions=this.indices=this.vertexNormals=this.manifestChunk=null}},{key:"serialize",value:function(a,c){D(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);a.objectKey=this.manifestChunk.key;var d=this.vertexPositions,l=this.indices,f=this.vertexNormals;
a.vertexPositions=d;a.indices=l;a.vertexNormals=f;a=d.buffer;c.push(a);l=l.buffer;l!==a&&c.push(l);f=f.buffer;f!==a&&f!==l&&c.push(f);this.vertexPositions=this.indices=this.vertexNormals=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.vertexPositions.byteLength+this.indices.byteLength+this.vertexNormals.byteLength;D(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(d.Chunk),y=function(a){function b(a,
c){h(this,b);var d=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));return(d.fragmentSource=d.registerDisposer(a.getRef(c.fragmentSource))).meshSource=d}c(b,a);z(b,[{key:"getChunk",value:function(a,b){var c=e.i(f.a)(a,b),d=this.chunks.get(c);void 0===d&&(d=this.getNewChunk_(t),d.initializeManifestChunk(c,a,b),this.addChunk(d));return d}},{key:"getFragmentChunk",value:function(a,b){var c=a.key+"/"+b,d=this.fragmentSource,l=d.chunks.get(c);void 0===l&&(l=d.getNewChunk_(B),l.initializeFragmentChunk(c,
a,b),d.addChunk(l));return l}}]);return b}(d.ChunkSource),d=function(a){function b(){h(this,b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.meshSource=null;return a}c(b,a);z(b,[{key:"download",value:function(a,b){return this.meshSource.downloadFragment(a,b)}}]);return b}(d.ChunkSource),d=w([e.i(g.a)(n.a)],d),k=function(a){function b(a,c){h(this,b);var d=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.source=d.registerDisposer(a.getRef(c.source));d.registerDisposer(d.chunkManager.recomputeChunkPriorities.add(function(){d.updateChunkPriorities()}));
return d}c(b,a);z(b,[{key:"updateChunkPriorities",value:function(){var a=this,b=this.visibility.value;if(b!==Number.NEGATIVE_INFINITY){var c=e.i(v.b)(b),d=e.i(v.c)(b),l=this.source,k=this.chunkManager;e.i(f.b)(this,function(b){b=l.getChunk(b,a.clipBounds.value);k.requestChunk(b,c,d+100);if(b.state===q.a.SYSTEM_MEMORY_WORKER)for(var f=$jscomp.makeIterator(b.fragmentIds),u=f.next();!u.done;u=f.next())u=l.getFragmentChunk(b,u.value),k.requestChunk(u,c,d+50)})}}}]);return b}(k.a),k=w([e.i(g.a)(n.b)],
k)},function(n,g,e){g.a=function(b,d,q){q=void 0===q?c.c:q;var k=b.source.spec,f=k.dataType,p=e.i(a.e)(b.chunkDataSize),r=m.b[f],k=p*r*k.numChannels;if(k!==d.byteLength)throw Error("Raw-format chunk is "+d.byteLength+" bytes, "+("but "+p+" * "+r+" = "+k+" bytes are expected."));switch(f){case m.a.UINT8:d=new Uint8Array(d);break;case m.a.UINT16:d=new Uint16Array(d);e.i(c.d)(d,q);break;case m.a.UINT32:case m.a.UINT64:d=new Uint32Array(d);e.i(c.a)(d,q);break;case m.a.FLOAT32:d=new Float32Array(d);e.i(c.a)(d,
q);break;default:throw Error("Unexpected data type: "+f+".");}e.i(h.a)(b,d)};var h=e(25),m=e(11),c=e(12),a=e(1)},function(n,g,e){function h(e,c,a,b,d,q,k){for(var f=new Map,p=Array(3),r=2,m=0;3>m;++m)var l=p[m]=Math.ceil(b[m]/c[m]),r=r*l;var m=p[0],l=p[1],p=p[2],v=b[0],h=b[1];b=b[2];var g=c[0],w=c[1],t=c[2],B=e.length,y=B,I=[0,0,0];e.resize(B+r);for(var r=q[0],F=q[1],H=q[2],u=0;u<p;++u){I[2]=Math.min(t,b-u*t);for(var x=0;x<l;++x){I[1]=Math.min(w,h-x*w);for(var A=0;A<m;++A){I[0]=Math.min(g,v-A*g);
var S=e.length-B,n=$jscomp.makeIterator(k(a,d+(u*t*H+x*w*F+A*g*r),q,c,I,B,f,e)),C=n.next().value,n=n.next().value,K=e.data;K[y++]=n|C<<24;K[y++]=S}}}}g.a=function(e,c,a,b,d,q,k,f,p){var r;if(1===d)r=0;else for(r=1;1<<r<d;)r*=2;var m=Math.ceil(r*b/32),l=e.length,v=m,h=!1,g=Array.prototype.join.call(q.subarray(0,d*p),",");b=a.get(g);void 0===b&&(h=!0,v+=d*p,b=l+m-c,a.set(g,b));e.resize(l+v);e=e.data;if(0<r)switch(r){case 1:for(c=a=0;a<m;++a)v=0,v|=f[k[c+0]]<<0,v|=f[k[c+1]]<<1,v|=f[k[c+2]]<<2,v|=f[k[c+
3]]<<3,v|=f[k[c+4]]<<4,v|=f[k[c+5]]<<5,v|=f[k[c+6]]<<6,v|=f[k[c+7]]<<7,v|=f[k[c+8]]<<8,v|=f[k[c+9]]<<9,v|=f[k[c+10]]<<10,v|=f[k[c+11]]<<11,v|=f[k[c+12]]<<12,v|=f[k[c+13]]<<13,v|=f[k[c+14]]<<14,v|=f[k[c+15]]<<15,v|=f[k[c+16]]<<16,v|=f[k[c+17]]<<17,v|=f[k[c+18]]<<18,v|=f[k[c+19]]<<19,v|=f[k[c+20]]<<20,v|=f[k[c+21]]<<21,v|=f[k[c+22]]<<22,v|=f[k[c+23]]<<23,v|=f[k[c+24]]<<24,v|=f[k[c+25]]<<25,v|=f[k[c+26]]<<26,v|=f[k[c+27]]<<27,v|=f[k[c+28]]<<28,v|=f[k[c+29]]<<29,v|=f[k[c+30]]<<30,v|=f[k[c+31]]<<31,e[l+
a]=v,c+=32;break;case 2:for(c=a=0;a<m;++a)v=0,v|=f[k[c+0]]<<0,v|=f[k[c+1]]<<2,v|=f[k[c+2]]<<4,v|=f[k[c+3]]<<6,v|=f[k[c+4]]<<8,v|=f[k[c+5]]<<10,v|=f[k[c+6]]<<12,v|=f[k[c+7]]<<14,v|=f[k[c+8]]<<16,v|=f[k[c+9]]<<18,v|=f[k[c+10]]<<20,v|=f[k[c+11]]<<22,v|=f[k[c+12]]<<24,v|=f[k[c+13]]<<26,v|=f[k[c+14]]<<28,v|=f[k[c+15]]<<30,e[l+a]=v,c+=16;break;case 4:for(c=a=0;a<m;++a)v=0,v|=f[k[c+0]]<<0,v|=f[k[c+1]]<<4,v|=f[k[c+2]]<<8,v|=f[k[c+3]]<<12,v|=f[k[c+4]]<<16,v|=f[k[c+5]]<<20,v|=f[k[c+6]]<<24,v|=f[k[c+7]]<<28,
e[l+a]=v,c+=8;break;case 8:for(c=a=0;a<m;++a)v=0,v|=f[k[c+0]]<<0,v|=f[k[c+1]]<<8,v|=f[k[c+2]]<<16,v|=f[k[c+3]]<<24,e[l+a]=v,c+=4;break;case 16:for(c=a=0;a<m;++a)v=0,v|=f[k[c+0]]<<0,v|=f[k[c+1]]<<16,e[l+a]=v,c+=2;break;case 32:for(c=a=0;a<m;++a)v=0,v|=f[k[c+0]]<<0,e[l+a]=v,c+=1}if(h)for(k=l+m,f=0,d*=p;f<d;++f)e[k++]=q[f];return[r,b]};g.b=h;g.c=function(e,c,a,b,d,q,k){var f=e.length,p=b[3];e.resize(f+p);for(var r=0;r<p;++r)e.data[f+r]=e.length,h(e,c,a,b,d+q[3]*r,q,k)}},function(n,g,e){g.a=function(e,
m,c,a){for(;m<c;){var b=e[m];a(b)?++m:(--c,e[m]=e[c],e[c]=b)}return c};g.b=function(e,m){var c=e.length,a=Array(c);m=a[0]=void 0===m?1:m;for(var b=1;b<c;++b)m*=e[b-1],a[b]=m;return a};g.c=function(e,m,c){for(var a=new e.constructor(e.length),b=0;b<m*c;b+=c)for(var d=0;d<c;d++)a[d*m+b/c]=e[b+d];return a}},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});e.d(g,"SliceView",function(){return z});e.d(g,"SliceViewChunk",function(){return D});
e.d(g,"SliceViewChunkSource",function(){return w});e.d(g,"RenderLayer",function(){return t});n=e(2);g=e(8);var a=e(1),b=e(15),d=e(16),q=e(0),k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),f=function y(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=
Object.getPrototypeOf(a),null!==a)return y(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},p=this&&this.__decorate||function(a,b,c,d){var l=arguments.length,f=3>l?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var p=a.length-1;0<=p;p--)if(k=a[p])f=(3>l?k(f):3<l?k(b,c,f):k(b,c))||f;return 3<l&&f&&Object.defineProperty(b,c,f),f},r=a.a.create(),E=a.a.create(),
l=a.a.create(),v=function(a){function b(a,c){h(this,b);var d=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));d.initializeSharedObject(a,c.id);return d}c(b,a);return b}(g.f),z=function(b){function p(a,b){h(this,p);var c=m(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,a,b));c.handleLayerChanged=function(){c.hasValidViewport&&c.chunkManager.scheduleUpdateChunkPriorities()};c.registerDisposer(c.chunkManager.recomputeChunkPriorities.add(function(){c.updateVisibleChunks()}));return c}
c(p,b);k(p,[{key:"onViewportChanged",value:function(){this.chunkManager.scheduleUpdateChunkPriorities()}},{key:"updateVisibleChunks",value:function(){var b=this,c=this.centerDataPosition,f=this.chunkManager,k=this.visibility.value;if(k!==Number.NEGATIVE_INFINITY){var p=e.i(d.b)(k),v=e.i(d.c)(k),v=v+-1E12;this.computeVisibleChunks(function(a){a.globalToLocalSpatial(l,c);return b.visibleChunkLayouts.get(a)},function(b,c,d,k){a.a.multiply(r,d,b.size);b=-a.a.distance(l,r);k=$jscomp.makeIterator(k);for(var u=
k.next();!u.done;u=k.next()){var e=u.value,u=c.get(e),e=e.getChunk(d);f.requestChunk(e,p,v+b+1E9*u)}})}}},{key:"removeVisibleLayer",value:function(a){this.visibleLayers.delete(a);a.layerChanged.remove(this.handleLayerChanged);this.visibleSourcesStale=!0;this.hasValidViewport&&this.chunkManager.scheduleUpdateChunkPriorities()}},{key:"disposed",value:function(){for(var a=$jscomp.makeIterator(this.visibleLayers.keys()),b=a.next();!b.done;b=a.next())this.removeVisibleLayer(b.value);f(p.prototype.__proto__||
Object.getPrototypeOf(p.prototype),"disposed",this).call(this)}}]);return p}(e.i(d.a)(e.i(n.withChunkManager)(v))),z=p([e.i(q.a)(g.g)],z);e.i(q.d)("SliceView.updateView",function(a){var b=this.get(a.id);a.width&&b.setViewportSize(a.width,a.height);a.viewportToData&&b.setViewportToDataMatrix(a.viewportToData)});e.i(q.d)("SliceView.addVisibleLayer",function(a){var b=this.get(a.id);a=this.get(a.layerId);b.visibleLayers.set(a,[]);a.layerChanged.add(b.handleLayerChanged);b.visibleSourcesStale=!0;b.hasValidViewport&&
b.chunkManager.scheduleUpdateChunkPriorities()});e.i(q.d)("SliceView.removeVisibleLayer",function(a){var b=this.get(a.id);a=this.get(a.layerId);b.removeVisibleLayer(a)});var D=function(b){function d(){h(this,d);var b=m(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));b.source=null;b.chunkGridPosition=a.a.create();return b}c(d,b);k(d,[{key:"initializeVolumeChunk",value:function(b,c){f(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"initialize",this).call(this,b);a.a.copy(this.chunkGridPosition,
c);this.chunkDataSize=null}},{key:"serialize",value:function(a,b){f(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"serialize",this).call(this,a,b);b=this.chunkDataSize;b!==this.source.spec.chunkDataSize&&(a.chunkDataSize=b);a.chunkGridPosition=this.chunkGridPosition}},{key:"downloadSucceeded",value:function(){f(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){}},{key:"toString",value:function(){return this.source.toString()+
":"+e.i(a.d)(this.chunkGridPosition)}}]);return d}(n.Chunk),w=function(b){function d(a,b){h(this,d);return m(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b))}c(d,b);k(d,[{key:"computeChunkBounds",value:function(b){for(var c=this.spec,d=c.upperVoxelBound,c=c.chunkDataSize,l=a.a.multiply(r,b.chunkGridPosition,c),f=!1,k=0;3>k;++k)(E[k]=Math.min(d[k],l[k]+c[k])-l[k])!==c[k]&&(f=!0);a.a.add(l,l,this.spec.baseVoxelOffset);b.chunkDataSize=f?a.a.clone(E):c;return l}}]);return d}(n.ChunkSource),
t=function(a){function d(a,c){h(this,d);var l=m(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,c));l.layerChanged=new b.a;var f=l.sources=[];c=$jscomp.makeIterator(c.sources);for(var k=c.next();!k.done;k=c.next()){var p=k.value,k=[];f.push(k);for(var p=$jscomp.makeIterator(p),e=p.next();!e.done;e=p.next())e=a.get(e.value),l.registerDisposer(e.addRef()),k.push(e)}return l}c(d,a);return d}(q.b)},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.d(g,"a",function(){return r});
n=e(2);var a=e(7),b=e(10),d=e(13),q=e(90),k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),f=function l(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return l(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===
b?void 0:b.call(c)}},p=function(a){function b(){h(this,b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.backendOnly=!0;return a}c(b,a);k(b,[{key:"initialize",value:function(a){f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.requesters=new Set}},{key:"downloadSucceeded",value:function(){f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this);var a=this.requesters,c=this.data;this.requesters=
void 0;for(var a=$jscomp.makeIterator(a),d=a.next();!d.done;d=a.next())d.value.resolve(c)}},{key:"downloadFailed",value:function(a){f(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadFailed",this).call(this,a);var c=this.requesters;this.requesters=void 0;for(var c=$jscomp.makeIterator(c),d=c.next();!d.done;d=c.next())d.value.reject(a)}},{key:"freeSystemMemory",value:function(){this.data=void 0}}]);return b}(n.Chunk),r=function(f){function l(a,b){h(this,l);var c=m(this,(l.__proto__||
Object.getPrototypeOf(l)).call(this,a));c.decodeFile=b;c.registerDisposer(a);c.registerDisposer(c.chunkManager.recomputeChunkPrioritiesLate.add(function(){c.updateChunkPriorities()}));return c}c(l,f);k(l,[{key:"updateChunkPriorities",value:function(){for(var a=this.chunkManager,b=$jscomp.makeIterator(this.chunks.values()),c=b.next();!c.done;c=b.next()){var c=c.value,d=c.requesters;if(void 0!==d)for(var d=$jscomp.makeIterator(d),f=d.next();!f.done;f=d.next())f=f.value.getPriority(),a.requestChunk(c,
f.priorityTier,f.priority)}}},{key:"download",value:function(a,b){var c=this;return e.i(d.a)(e.i(d.b)(a.key),"arraybuffer",b).then(function(b){a.data=c.decodeFile(b)})}},{key:"getData",value:function(c,d,f){var l=this,k=this.chunks.get(c);void 0===k&&(k=this.getNewChunk_(p),k.initialize(c),this.addChunk(k));return e.i(b.a)(f,function(c,f,p){switch(k.state){case a.a.FAILED:f(k.error);return;case a.a.SYSTEM_MEMORY_WORKER:c(k.data);return}var e={resolve:c,reject:f,getPriority:d};k.requesters.add(e);
p.add(function(){var a=k.requesters;void 0!==a&&(a.delete(e),l.chunkManager.scheduleUpdateChunkPriorities());f(b.b)});l.chunkManager.scheduleUpdateChunkPriorities()})}}],[{key:"get",value:function(a,b){return a.memoize.get("getFileSource:"+e.i(q.a)(b),function(){return new l(a,b)})}},{key:"getData",value:function(a,b,c,d,f){a=l.get(a,b);c=a.getData(c,d,f);a.dispose();return c}}]);return l}(n.ChunkSourceBase)},function(n,g,e){g.a=function(e,m){return e.low+","+e.high+(m?"_"+m.center.toString()+"_"+
m.size.toString():"")};g.b=function(e,m){var c=e.segmentEquivalences;e=$jscomp.makeIterator(e.visibleSegments);for(var a=e.next();!a.done;a=e.next())if(a=a.value,c.disjointSets.isMinElement(a))for(var b=$jscomp.makeIterator(c.setElements(a)),d=b.next();!d.done;d=b.next())m(d.value,a)}},function(n,g,e){g.a=function(e,m){e.data=new Uint32Array(m)}},function(n,g,e){g.a=function(d,q){var k=d.source.spec;if(k.compressedSegmentationBlockSize){var f=k.dataType;a.clear();var p=d.chunkDataSize;b[0]=p[0];b[1]=
p[1];b[2]=p[2];b[3]=k.numChannels;switch(f){case h.e.UINT32:e.i(m.a)(a,k.compressedSegmentationBlockSize,q,b);break;case h.e.UINT64:e.i(c.a)(a,k.compressedSegmentationBlockSize,q,b);break;default:throw Error("Unsupported data type for compressed segmentation: "+h.e[f]);}d.data=new Uint32Array(a.view)}else d.data=q};var h=e(8),m=e(76),c=e(77),a=new (e(93).a)(2E4),b=Array(4)},function(n,g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b,c,d){a.addEventListener(b,c,d);return function(){return a.removeEventListener(b,c,d)}}e.d(g,"a",function(){return b});e.d(g,"b",function(){return d});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=function(){function b(){m(this,b);this.refCount=1}a(b,[{key:"addRef",value:function(){++this.refCount;return this}},{key:"dispose",value:function(){0===--this.refCount&&this.refCountReachedZero()}},{key:"refCountReachedZero",value:function(){this.disposed();var a=this.disposers;if(null!=a){for(var b=a.length;0<b;--b){var c=
a[b-1];"object"===typeof c?c.dispose():c.call(this)}this.disposers=void 0}this.wasDisposed=!0}},{key:"disposed",value:function(){}},{key:"registerDisposer",value:function(a){var b=this.disposers;null==b?this.disposers=[a]:b.push(a);return a}},{key:"unregisterDisposer",value:function(a){var b=this.disposers;if(null!=b){var c=b.indexOf(a);-1!==c&&b.splice(c,1)}return a}},{key:"registerEventListener",value:function(a,b,d,e){this.registerDisposer(c(a,b,d,e))}},{key:"registerCancellable",value:function(a){this.registerDisposer(function(){a.cancel()});
return a}}]);return b}(),d=function(a){function b(a){m(this,b);var c;c=(b.__proto__||Object.getPrototypeOf(b)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.value=a;return c}h(b,a);return b}(b)},function(n,g,e){var h=h||{};h.Utils=h.Utils||{};h.Utils.crcTable=null;h.Utils.GUNZIP_MAGIC_COOKIE1=31;h.Utils.GUNZIP_MAGIC_COOKIE2=139;h.Utils.getStringAt=function(e,c,a){for(var b="",d;c<
a;c+=1)d=e.getUint8(c),0!==d&&(b+=String.fromCharCode(d));return b};h.Utils.getByteAt=function(e,c){return e.getInt8(c)};h.Utils.getShortAt=function(e,c,a){return e.getInt16(c,a)};h.Utils.getIntAt=function(e,c,a){return e.getInt32(c,a)};h.Utils.getFloatAt=function(e,c,a){return e.getFloat32(c,a)};h.Utils.getDoubleAt=function(e,c,a){return e.getFloat64(c,a)};h.Utils.getLongAt=function(e,c,a){var b,d=[],q=0;for(b=0;8>b;b+=1)d[b]=h.Utils.getByteAt(e,c+b,a);for(b=d.length-1;0<=b;b--)q=256*q+d[b];return q};
h.Utils.toArrayBuffer=function(e){var c,a,b;c=new ArrayBuffer(e.length);a=new Uint8Array(c);for(b=0;b<e.length;b+=1)a[b]=e[b];return c};h.Utils.isString=function(e){return"string"===typeof e||e instanceof String};h.Utils.formatNumber=function(e,c){e=h.Utils.isString(e)?Number(e):e;e=c?e.toPrecision(5):e.toPrecision(7);return parseFloat(e)};h.Utils.makeCRCTable=function(){for(var e,c=[],a=0;256>a;a++){e=a;for(var b=0;8>b;b++)e=e&1?3988292384^e>>>1:e>>>1;c[a]=e}return c};h.Utils.crc32=function(e){for(var c=
h.Utils.crcTable||(h.Utils.crcTable=h.Utils.makeCRCTable()),a=-1,b=0;b<e.byteLength;b++)a=a>>>8^c[(a^e.getUint8(b))&255];return(a^-1)>>>0};"undefined"!==typeof n&&n.exports&&(n.exports=h.Utils)},function(n,g,e){g=e(4).assign;var h=e(101),m=e(102);e=e(43);var c={};g(c,h,m,e);n.exports=c},function(n,g,e){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(n,g,
e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});e.d(g,"NDStoreVolumeChunkSource",function(){return r});n=e(2);g=e(61);var m=e(14),c=e(74),a=e(18),b=e(9),d=e(13),q=e(0),k=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),f=this&&this.__decorate||function(a,b,c,d){var f=arguments.length,l=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(a,b,c,d);else for(var e=a.length-1;0<=e;e--)if(k=a[e])l=(3>f?k(l):3<f?
k(b,c,l):k(b,c))||l;return 3<f&&l&&Object.defineProperty(b,c,l),l},p=new Map;p.set("npz",c.a);p.set("jpeg",m.a);p.set("raw",a.a);var r=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a;a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.chunkDecoder=p.get(a.parameters.encoding);
return a}h(b,a);k(b,[{key:"download",value:function(a,b){for(var c=this,f=this.parameters,l=f.urlPrefix+"/"+f.key+"/"+f.channel+"/"+(f.encoding+"/"+f.resolution),k=this.computeChunkBounds(a),p=a.chunkDataSize,r=0;3>r;++r)l+="/"+k[r]+","+(k[r]+p[r]);f.neariso&&(l+="/neariso/");return e.i(d.a)(e.i(d.c)(f.baseUrls,l),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(e.i(n.WithParameters)(b.a,g.a)),r=f([e.i(q.a)()],r)},function(n,g,e){function h(a,c){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!c||"object"!==typeof c&&"function"!==typeof c?a:c}function m(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}e.d(g,"a",function(){return a});e(69);e(82);n=e(2);g=e(16);var c=e(0),a=function(a){function b(a,c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");
var d=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.visibleSegments=a.get(c.visibleSegments);d.clipBounds=a.get(c.clipBounds);d.segmentEquivalences=a.get(c.segmentEquivalences);a=function(){d.chunkManager.scheduleUpdateChunkPriorities()};d.registerDisposer(d.visibleSegments.changed.add(a));d.registerDisposer(d.segmentEquivalences.changed.add(a));d.registerDisposer(d.clipBounds.changed.add(a));return d}m(b,a);return b}(e.i(g.a)(e.i(n.withChunkManager)(c.b)))},function(n,g,e){function h(a,
b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){b=b.match(y);if(null===b||void 0===b[1])throw Error('Data source URL must have the form "<protocol>://<path>".');var c=b[1];a=a.get(c);if(void 0===a)throw Error("Unsupported data source: "+JSON.stringify(c)+".");return[a,b[2],c]}function b(b,c,d,f){var l=$jscomp.makeIterator(a(t,c));c=l.next().value;l=l.next().value;return c.getMesh(b,l,d,f)}function d(b,c,d,f){var l=$jscomp.makeIterator(a(B,c));c=l.next().value;l=l.next().value;return c.getMeshVertexAttributes(b,
l,d,f)}function q(a){var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next())d=d.value,b=Math.min(b,d),c=Math.max(c,d);return[b,c]}function k(a,c,f,l){for(var k=[b(a,c.meshSourceUrl,f,l)],u=$jscomp.makeIterator(c.attributeSourceUrls),e=u.next();!e.done;e=u.next())k.push(d(a,e.value,f,l));return Promise.all(k).then(function(a){function b(a,b,c){for(var d=a.length,l=0;l<d;++l){var k=a[l],u=b[l],e=c,p=$jscomp.makeIterator(q(u)),r=p.next().value,
p=p.next().value;f.info.vertexAttributes.push({name:k.name,source:e,numComponents:k.numComponents,dataType:k.dataType,min:r,max:p});f.vertexAttributes.push(u)}}var d=a[0],f={info:{numVertices:d.info.numVertices,numTriangles:d.info.numTriangles,vertexAttributes:[]},vertexPositions:d.vertexPositions,indices:d.indices,vertexNormals:d.vertexNormals,vertexAttributes:[]};b(d.info.vertexAttributes,d.vertexAttributes);c.attributeSourceUrls.forEach(function(c,f){f=a[f+1];if(f.numVertices!==d.info.numVertices)throw Error("Vertex attribute source "+
JSON.stringify(c)+" specifies attributes for "+(f.numVertices+" vertices, but mesh has "+d.info.numVertices+" vertices."));b(f.attributeInfo,f.attributes,c)});return f})}g.b=function(a,b){t.set(a,b)};g.a=function(a,b){B.set(a,b)};var f=e(2),p=e(7),r=e(17),E=e(71),l=e(5),v=e(16);n=e(0);var z=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}(),D=function H(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return H(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};g=this&&this.__decorate||function(a,b,c,d){var f=arguments.length,l=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(a,b,c,d);else for(var u=
a.length-1;0<=u;u--)if(k=a[u])l=(3>f?k(l):3<f?k(b,c,l):k(b,c))||l;return 3<f&&l&&Object.defineProperty(b,c,l),l};var w=function(a){function b(){h(this,b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.data=null;return a}c(b,a);z(b,[{key:"freeSystemMemory",value:function(){this.data=null}},{key:"serialize",value:function(a,c){D(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);var d=this.data,f=d.vertexPositions,l=d.indices,k=d.vertexNormals,
d=d.vertexAttributes;a.vertexPositions=f;a.indices=l;a.vertexNormals=k;a.vertexAttributes=d;a=new Set;a.add(f.buffer);a.add(l.buffer);a.add(k.buffer);f=$jscomp.makeIterator(d);for(l=f.next();!l.done;l=f.next())a.add(l.value.buffer);c.push.apply(c,[].concat($jscomp.arrayFromIterable(a)));this.data=null}},{key:"downloadSucceeded",value:function(){for(var a=this.data,c=a.vertexAttributes,a=this.gpuMemoryBytes=a.vertexPositions.byteLength+a.indices.byteLength+a.vertexNormals.byteLength,c=$jscomp.makeIterator(c),
d=c.next();!d.done;d=c.next())a+=d.value.byteLength;this.systemMemoryBytes=this.gpuMemoryBytes=a;D(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(f.Chunk),t=new Map,B=new Map,y=/^(?:([a-zA-Z-+_]+):\/\/)?(.*)$/,I=function(a){function b(){h(this,b);return m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);z(b,[{key:"getChunk",value:function(){var a=E.a,b=this.chunks.get(a);void 0===b&&(b=this.getNewChunk_(w),b.initialize(a),
this.addChunk(b));return b}},{key:"download",value:function(a,b){var c=this;return k(this.chunkManager,this.parameters,function(){return{priorityTier:a.priorityTier,priority:a.priority}},b).then(function(b){if(e.i(l.a)(b.info)!==e.i(l.a)(c.parameters.info))throw Error("Mesh info has changed.");void 0===b.vertexNormals&&(b.vertexNormals=e.i(r.a)(b.vertexPositions,b.indices));a.data=b})}}]);return b}(e.i(f.WithParameters)(f.ChunkSource,E.b)),I=g([e.i(n.a)()],I),f=function(a){function b(a,c){h(this,
b);var d=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.source=d.registerDisposer(a.getRef(c.source));d.registerDisposer(d.chunkManager.recomputeChunkPriorities.add(function(){d.updateChunkPriorities()}));return d}c(b,a);z(b,[{key:"updateChunkPriorities",value:function(){var a=this.visibility.value;if(a!==Number.NEGATIVE_INFINITY){var b=e.i(v.b)(a),a=e.i(v.c)(a),c=this.chunkManager,d=this.source.getChunk();c.requestChunk(d,b,a+50)}}}]);return b}(e.i(v.a)(e.i(f.withChunkManager)(n.b))),
f=g([e.i(n.a)(E.c)],f);e.i(n.c)(E.d,function(a,b){var c=this.getRef(a.chunkManager);try{return k(c,a.parameters,function(){return{priorityTier:p.b.VISIBLE,priority:1E3}},b).then(function(a){return{value:a.info}})}finally{c.dispose()}})},function(n,g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.d(g,"b",function(){return d});e.d(g,"c",function(){return q});var m=e(8),c=e(11),a=e(1);e.d(g,"a",function(){return c.a});var b=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),d;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.IMAGE=1]="IMAGE";
a[a.SEGMENTATION=2]="SEGMENTATION"})(d||(d={}));var q=function(k){function f(b){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var d;d=(f.__proto__||Object.getPrototypeOf(f)).call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;var k=d.dataType=b.dataType,l=d.numChannels=b.numChannels;d.chunkBytes=e.i(a.e)(b.chunkDataSize)*c.b[k]*l;d.compressedSegmentationBlockSize=
b.compressedSegmentationBlockSize;return d}h(f,k);b(f,[{key:"toObject",value:function(){return{transform:this.chunkLayout.transform,numChannels:this.numChannels,chunkDataSize:this.chunkDataSize,voxelSize:this.voxelSize,dataType:this.dataType,lowerVoxelBound:this.lowerVoxelBound,upperVoxelBound:this.upperVoxelBound,lowerClipBound:this.lowerClipBound,upperClipBound:this.upperClipBound,baseVoxelOffset:this.baseVoxelOffset,compressedSegmentationBlockSize:this.compressedSegmentationBlockSize}}}],[{key:"make",
value:function(a){return new f(Object.assign({},a,{transform:e.i(m.a)(a.transform,a.volumeSourceOptions)}))}},{key:"fromObject",value:function(a){return new f(a)}},{key:"withDefaultCompression",value:function(a){var b=a.compressedSegmentationBlockSize,k=a.dataType,l=a.voxelSize,p=a.transform,q=a.lowerVoxelBound,h=a.upperVoxelBound,p=e.i(m.a)(p,a.volumeSourceOptions);void 0!==b||a.volumeType!==d.SEGMENTATION||k!==c.a.UINT32&&k!==c.a.UINT64||(b=e.i(m.b)({voxelSize:l,transform:p,lowerVoxelBound:q,upperVoxelBound:h,
maxVoxelsPerChunkLog2:9}));return new f(Object.assign({},a,{compressedSegmentationBlockSize:b,transform:p}))}},{key:"getDefaults",value:function(a){var b=Object.assign({},a,{transform:e.i(m.a)(a.transform,a.volumeSourceOptions)});return(void 0===a.chunkDataSizes?e.i(m.c)(b):a.chunkDataSizes).map(function(b){return f.withDefaultCompression(Object.assign({},a,{chunkDataSize:b}))})}}]);return f}(m.d);g.d="volume/RenderLayer"},function(n,g,e){g.a=function(m){m=m instanceof ArrayBuffer?new Uint8Array(m):
new Uint8Array(m.buffer,m.byteOffset,m.byteLength);var c=new Uint8Array(m.buffer,m.byteOffset,m.byteLength);return 2<c.length&&31===c[0]&&139===c[1]?e.i(h.inflate)(m):m};var h=e(28);e.n(h)},function(n,g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}e.d(g,"a",function(){return q});var c=e(26),a=e(5),b=function f(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return f(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),q=function(f){function p(){m(this,p);var a=(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}h(p,f);d(p,[{key:"get",value:function(c,d){"string"!==typeof c&&(c=e.i(a.a)(c));return b(p.prototype.__proto__||
Object.getPrototypeOf(p.prototype),"get",this).call(this,c,d)}},{key:"getUncounted",value:function(a,b){return this.get(a,function(){return new c.b(b())}).value}}]);return p}(function(){function a(){m(this,a);this.map=new Map}d(a,[{key:"get",value:function(a,b){var c=this.map,d=c.get(a);void 0===d?(d=b(),d.registerDisposer(function(){c.delete(a)}),c.set(a,d)):d.addRef();return d}}]);return a}())},function(n,g,e){e(3);e(94);e(95);e(37);var h=e(96),m=e(97);e(98);var c=e(38);e(39);e.d(g,"b",function(){return h});
e.d(g,"c",function(){return m});e.d(g,"a",function(){return c})},function(n,g,e){g.a=function(){var e=new h.a(9);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=1;e[5]=0;e[6]=0;e[7]=0;e[8]=1;return e};var h=e(3)},function(n,g,e){function h(){var a=new E.a(3);a[0]=0;a[1]=0;a[2]=0;return a}function m(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function c(a,b,c){var d=new E.a(3);d[0]=a;d[1]=b;d[2]=c;return d}function a(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}function b(a,b,c){a[0]=
b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a}function d(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a}function q(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+d*d+a*a)}function k(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return c*c+d*d+a*a}function f(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a}function p(a,b){var c=b[0],d=b[1],f=b[2],c=c*c+d*d+f*f;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a}function r(a,b){return a[0]*b[0]+a[1]*
b[1]+a[2]*b[2]}Object.defineProperty(g,"__esModule",{value:!0});g.create=h;g.clone=function(a){var b=new E.a(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};g.length=m;g.fromValues=c;g.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a};g.set=function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a};g.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a};g.subtract=a;g.multiply=b;g.divide=d;g.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};
g.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};g.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};g.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};g.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};g.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};g.scaleAndAdd=function(a,
b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;return a};g.distance=q;g.squaredDistance=k;g.squaredLength=f;g.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};g.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};g.normalize=p;g.dot=r;g.cross=function(a,b,c){var d=b[0],f=b[1];b=b[2];var l=c[0],k=c[1];c=c[2];a[0]=f*c-b*k;a[1]=b*l-d*c;a[2]=d*k-f*l;return a};g.lerp=function(a,b,c,d){var f=b[0],l=b[1];b=b[2];a[0]=f+d*(c[0]-f);a[1]=l+d*(c[1]-l);a[2]=b+d*(c[2]-
b);return a};g.hermite=function(a,b,c,d,f,k){var l=k*k,e=l*(2*k-3)+1,p=l*(k-2)+k,r=l*(k-1);k=l*(3-2*k);a[0]=b[0]*e+c[0]*p+d[0]*r+f[0]*k;a[1]=b[1]*e+c[1]*p+d[1]*r+f[1]*k;a[2]=b[2]*e+c[2]*p+d[2]*r+f[2]*k;return a};g.bezier=function(a,b,c,d,f,k){var l=1-k,e=l*l,p=k*k,r=e*l,e=3*k*e,l=3*p*l;k*=p;a[0]=b[0]*r+c[0]*e+d[0]*l+f[0]*k;a[1]=b[1]*r+c[1]*e+d[1]*l+f[1]*k;a[2]=b[2]*r+c[2]*e+d[2]*l+f[2]*k;return a};g.random=function(a,b){b=b||1;var c=2*E.b()*Math.PI,d=2*E.b()-1,f=Math.sqrt(1-d*d)*b;a[0]=Math.cos(c)*
f;a[1]=Math.sin(c)*f;a[2]=d*b;return a};g.transformMat4=function(a,b,c){var d=b[0],f=b[1];b=b[2];var k=c[3]*d+c[7]*f+c[11]*b+c[15],k=k||1;a[0]=(c[0]*d+c[4]*f+c[8]*b+c[12])/k;a[1]=(c[1]*d+c[5]*f+c[9]*b+c[13])/k;a[2]=(c[2]*d+c[6]*f+c[10]*b+c[14])/k;return a};g.transformMat3=function(a,b,c){var d=b[0],f=b[1];b=b[2];a[0]=d*c[0]+f*c[3]+b*c[6];a[1]=d*c[1]+f*c[4]+b*c[7];a[2]=d*c[2]+f*c[5]+b*c[8];return a};g.transformQuat=function(a,b,c){var d=b[0],f=b[1],k=b[2];b=c[0];var l=c[1],e=c[2];c=c[3];var p=c*d+
l*k-e*f,r=c*f+e*d-b*k,q=c*k+b*f-l*d,d=-b*d-l*f-e*k;a[0]=p*c+d*-b+r*-e-q*-l;a[1]=r*c+d*-l+q*-b-p*-e;a[2]=q*c+d*-e+p*-l-r*-b;return a};g.rotateX=function(a,b,c,d){var f=[],k=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];k[0]=f[0];k[1]=f[1]*Math.cos(d)-f[2]*Math.sin(d);k[2]=f[1]*Math.sin(d)+f[2]*Math.cos(d);a[0]=k[0]+c[0];a[1]=k[1]+c[1];a[2]=k[2]+c[2];return a};g.rotateY=function(a,b,c,d){var f=[],k=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];k[0]=f[2]*Math.sin(d)+f[0]*Math.cos(d);k[1]=f[1];k[2]=
f[2]*Math.cos(d)-f[0]*Math.sin(d);a[0]=k[0]+c[0];a[1]=k[1]+c[1];a[2]=k[2]+c[2];return a};g.rotateZ=function(a,b,c,d){var f=[],k=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];k[0]=f[0]*Math.cos(d)-f[1]*Math.sin(d);k[1]=f[0]*Math.sin(d)+f[1]*Math.cos(d);k[2]=f[2];a[0]=k[0]+c[0];a[1]=k[1]+c[1];a[2]=k[2]+c[2];return a};g.angle=function(a,b){a=c(a[0],a[1],a[2]);b=c(b[0],b[1],b[2]);p(a,a);p(b,b);b=r(a,b);return 1<b?0:-1>b?Math.PI:Math.acos(b)};g.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+
")"};g.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};g.equals=function(a,b){var c=a[0],d=a[1];a=a[2];var f=b[0],k=b[1];b=b[2];return Math.abs(c-f)<=E.c*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(d-k)<=E.c*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(a-b)<=E.c*Math.max(1,Math.abs(a),Math.abs(b))};var E=e(3);g.sub=a;g.mul=b;g.div=d;g.dist=q;g.sqrDist=k;g.len=m;g.sqrLen=f;n=function(){var a=h();return function(b,c,d,f,k,e){c||(c=3);d||(d=0);for(f=f?Math.min(f*c+d,b.length):
b.length;d<f;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],k(a,a,e),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2];return b}}();g.forEach=n},function(n,g,e){function h(){var c=new m.a(4);c[0]=0;c[1]=0;c[2]=0;c[3]=0;return c}g.a=function(c){var a=new m.a(4);a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a};g.b=function(c,a,b,d){var e=new m.a(4);e[0]=c;e[1]=a;e[2]=b;e[3]=d;return e};g.c=function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c};g.d=function(c,a,b,d,e){c[0]=a;c[1]=b;c[2]=d;c[3]=e;return c};g.e=function(c,
a,b){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};g.f=function(c,a,b){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};g.i=function(c){var a=c[0],b=c[1],d=c[2];c=c[3];return Math.sqrt(a*a+b*b+d*d+c*c)};g.j=function(c){var a=c[0],b=c[1],d=c[2];c=c[3];return a*a+b*b+d*d+c*c};g.k=function(c,a){var b=a[0],d=a[1],e=a[2];a=a[3];var k=b*b+d*d+e*e+a*a;0<k&&(k=1/Math.sqrt(k),c[0]=b*k,c[1]=d*k,c[2]=e*k,c[3]=a*k);return c};g.g=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+
c[3]*a[3]};g.h=function(c,a,b,d){var e=a[0],k=a[1],f=a[2];a=a[3];c[0]=e+d*(b[0]-e);c[1]=k+d*(b[1]-k);c[2]=f+d*(b[2]-f);c[3]=a+d*(b[3]-a);return c};g.l=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]};g.m=function(c,a){var b=c[0],d=c[1],e=c[2];c=c[3];var k=a[0],f=a[1],p=a[2];a=a[3];return Math.abs(b-k)<=m.c*Math.max(1,Math.abs(b),Math.abs(k))&&Math.abs(d-f)<=m.c*Math.max(1,Math.abs(d),Math.abs(f))&&Math.abs(e-p)<=m.c*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(c-a)<=m.c*Math.max(1,
Math.abs(c),Math.abs(a))};var m=e(3);(function(){var c=h();return function(a,b,d,e,k,f){b||(b=4);d||(d=0);for(e=e?Math.min(e*b+d,a.length):a.length;d<e;d+=b)c[0]=a[d],c[1]=a[d+1],c[2]=a[d+2],c[3]=a[d+3],k(c,c,f),a[d]=c[0],a[d+1]=c[1],a[d+2]=c[2],a[d+3]=c[3];return a}})()},function(n,g,e){var h=h||{};h.Utils=h.Utils||e(27);h.NIFTI1=h.NIFTI1||function(){this.littleEndian=!1;this.dim_info=0;this.dims=[];this.slice_code=this.slice_end=this.slice_start=this.numBitsPerVoxel=this.datatypeCode=this.intent_code=
this.intent_p3=this.intent_p2=this.intent_p1=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.toffset=this.slice_duration=this.cal_min=this.cal_max=this.xyzt_units=this.scl_inter=0;this.intent_name=this.aux_file=this.description="";this.qoffset_z=this.qoffset_y=this.qoffset_x=this.quatern_d=this.quatern_c=this.quatern_b=this.sform_code=this.qform_code=0;this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.isHDR=!1;this.extensionFlag=[0,0,0,0];this.extensionCode=this.extensionSize=
0};h.NIFTI1.TYPE_NONE=0;h.NIFTI1.TYPE_BINARY=1;h.NIFTI1.TYPE_UINT8=2;h.NIFTI1.TYPE_INT16=4;h.NIFTI1.TYPE_INT32=8;h.NIFTI1.TYPE_FLOAT32=16;h.NIFTI1.TYPE_COMPLEX64=32;h.NIFTI1.TYPE_FLOAT64=64;h.NIFTI1.TYPE_RGB24=128;h.NIFTI1.TYPE_INT8=256;h.NIFTI1.TYPE_UINT16=512;h.NIFTI1.TYPE_UINT32=768;h.NIFTI1.TYPE_INT64=1024;h.NIFTI1.TYPE_UINT64=1280;h.NIFTI1.TYPE_FLOAT128=1536;h.NIFTI1.TYPE_COMPLEX128=1792;h.NIFTI1.TYPE_COMPLEX256=2048;h.NIFTI1.XFORM_UNKNOWN=0;h.NIFTI1.XFORM_SCANNER_ANAT=1;h.NIFTI1.XFORM_ALIGNED_ANAT=
2;h.NIFTI1.XFORM_TALAIRACH=3;h.NIFTI1.XFORM_MNI_152=4;h.NIFTI1.SPATIAL_UNITS_MASK=7;h.NIFTI1.TEMPORAL_UNITS_MASK=56;h.NIFTI1.UNITS_UNKNOWN=0;h.NIFTI1.UNITS_METER=1;h.NIFTI1.UNITS_MM=2;h.NIFTI1.UNITS_MICRON=3;h.NIFTI1.UNITS_SEC=8;h.NIFTI1.UNITS_MSEC=16;h.NIFTI1.UNITS_USEC=24;h.NIFTI1.UNITS_HZ=32;h.NIFTI1.UNITS_PPM=40;h.NIFTI1.UNITS_RADS=48;h.NIFTI1.MAGIC_COOKIE=348;h.NIFTI1.STANDARD_HEADER_SIZE=348;h.NIFTI1.MAGIC_NUMBER_LOCATION=344;h.NIFTI1.MAGIC_NUMBER=[110,43,49];h.NIFTI1.MAGIC_NUMBER2=[110,105,
49];h.NIFTI1.EXTENSION_HEADER_SIZE=8;h.NIFTI1.prototype.readHeader=function(e){e=new DataView(e);var c=h.Utils.getIntAt(e,0,this.littleEndian),a,b;c!==h.NIFTI1.MAGIC_COOKIE&&(this.littleEndian=!0,c=h.Utils.getIntAt(e,0,this.littleEndian));if(c!==h.NIFTI1.MAGIC_COOKIE)throw Error("This does not appear to be a NIFTI file!");this.dim_info=h.Utils.getByteAt(e,39);for(a=0;8>a;a+=1)c=40+2*a,this.dims[a]=h.Utils.getShortAt(e,c,this.littleEndian);this.intent_p1=h.Utils.getFloatAt(e,56,this.littleEndian);
this.intent_p2=h.Utils.getFloatAt(e,60,this.littleEndian);this.intent_p3=h.Utils.getFloatAt(e,64,this.littleEndian);this.intent_code=h.Utils.getShortAt(e,68,this.littleEndian);this.datatypeCode=h.Utils.getShortAt(e,70,this.littleEndian);this.numBitsPerVoxel=h.Utils.getShortAt(e,72,this.littleEndian);this.slice_start=h.Utils.getShortAt(e,74,this.littleEndian);for(a=0;8>a;a+=1)c=76+4*a,this.pixDims[a]=h.Utils.getFloatAt(e,c,this.littleEndian);this.vox_offset=h.Utils.getFloatAt(e,108,this.littleEndian);
this.scl_slope=h.Utils.getFloatAt(e,112,this.littleEndian);this.scl_inter=h.Utils.getFloatAt(e,116,this.littleEndian);this.slice_end=h.Utils.getShortAt(e,120,this.littleEndian);this.slice_code=h.Utils.getByteAt(e,122);this.xyzt_units=h.Utils.getByteAt(e,123);this.cal_max=h.Utils.getFloatAt(e,124,this.littleEndian);this.cal_min=h.Utils.getFloatAt(e,128,this.littleEndian);this.slice_duration=h.Utils.getFloatAt(e,132,this.littleEndian);this.toffset=h.Utils.getFloatAt(e,136,this.littleEndian);this.description=
h.Utils.getStringAt(e,148,228);this.aux_file=h.Utils.getStringAt(e,228,252);this.qform_code=h.Utils.getShortAt(e,252,this.littleEndian);this.sform_code=h.Utils.getShortAt(e,254,this.littleEndian);this.quatern_b=h.Utils.getFloatAt(e,256,this.littleEndian);this.quatern_c=h.Utils.getFloatAt(e,260,this.littleEndian);this.quatern_d=h.Utils.getFloatAt(e,264,this.littleEndian);this.qoffset_x=h.Utils.getFloatAt(e,268,this.littleEndian);this.qoffset_y=h.Utils.getFloatAt(e,272,this.littleEndian);this.qoffset_z=
h.Utils.getFloatAt(e,276,this.littleEndian);for(a=0;3>a;a+=1)for(b=0;4>b;b+=1)c=280+4*(4*a+b),this.affine[a][b]=h.Utils.getFloatAt(e,c,this.littleEndian);this.affine[3][0]=0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.intent_name=h.Utils.getStringAt(e,328,344);this.magic=h.Utils.getStringAt(e,344,348);this.isHDR=this.magic===h.NIFTI1.MAGIC_NUMBER2;e.byteLength>h.NIFTI1.MAGIC_COOKIE&&(this.extensionFlag[0]=h.Utils.getByteAt(e,348),this.extensionFlag[1]=h.Utils.getByteAt(e,349),
this.extensionFlag[2]=h.Utils.getByteAt(e,350),this.extensionFlag[3]=h.Utils.getByteAt(e,351),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(e),this.extensionCode=this.getExtensionCode(e)))};h.NIFTI1.prototype.toFormattedString=function(){var e=h.Utils.formatNumber,c;c=""+("Dim Info = "+this.dim_info+"\n");c+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n";c+=
"Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n";c+="Intent Code = "+this.intent_code+"\n";c+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n";c+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n";c+="Slice Start = "+this.slice_start+"\n";c+="Voxel Dimensions (1-8): "+e(this.pixDims[0])+", "+e(this.pixDims[1])+", "+e(this.pixDims[2])+", "+e(this.pixDims[3])+", "+e(this.pixDims[4])+", "+e(this.pixDims[5])+", "+e(this.pixDims[6])+
", "+e(this.pixDims[7])+"\n";c+="Image Offset = "+this.vox_offset+"\n";c+="Data Scale:  Slope = "+e(this.scl_slope)+"  Intercept = "+e(this.scl_inter)+"\n";c+="Slice End = "+this.slice_end+"\n";c+="Slice Code = "+this.slice_code+"\n";c+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(h.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(h.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n";c+="Display Range:  Max = "+e(this.cal_max)+"  Min = "+e(this.cal_min)+"\n";c+=
"Slice Duration = "+this.slice_duration+"\n";c+="Time Axis Shift = "+this.toffset+"\n";c+='Description: "'+this.description+'"\n';c+='Auxiliary File: "'+this.aux_file+'"\n';c+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n";c+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n";c+="Quaternion Parameters:  b = "+e(this.quatern_b)+"  c = "+e(this.quatern_c)+"  d = "+e(this.quatern_d)+"\n";c+="Quaternion Offsets:  x = "+this.qoffset_x+
"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n";c+="S-Form Parameters X: "+e(this.affine[0][0])+", "+e(this.affine[0][1])+", "+e(this.affine[0][2])+", "+e(this.affine[0][3])+"\n";c+="S-Form Parameters Y: "+e(this.affine[1][0])+", "+e(this.affine[1][1])+", "+e(this.affine[1][2])+", "+e(this.affine[1][3])+"\n";c+="S-Form Parameters Z: "+e(this.affine[2][0])+", "+e(this.affine[2][1])+", "+e(this.affine[2][2])+", "+e(this.affine[2][3])+"\n";c+='Intent Name: "'+this.intent_name+'"\n';this.extensionFlag[0]&&
(c+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n");return c};h.NIFTI1.prototype.getDatatypeCodeString=function(e){return e===h.NIFTI1.TYPE_UINT8?"1-Byte Unsigned Integer":e===h.NIFTI1.TYPE_INT16?"2-Byte Signed Integer":e===h.NIFTI1.TYPE_INT32?"4-Byte Signed Integer":e===h.NIFTI1.TYPE_FLOAT32?"4-Byte Float":e===h.NIFTI1.TYPE_FLOAT64?"8-Byte Float":e===h.NIFTI1.TYPE_RGB24?"RGB":e===h.NIFTI1.TYPE_INT8?"1-Byte Signed Integer":e===h.NIFTI1.TYPE_UINT16?"2-Byte Unsigned Integer":
e===h.NIFTI1.TYPE_UINT32?"4-Byte Unsigned Integer":e===h.NIFTI1.TYPE_INT64?"8-Byte Signed Integer":e===h.NIFTI1.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"};h.NIFTI1.prototype.getTransformCodeString=function(e){return e===h.NIFTI1.XFORM_SCANNER_ANAT?"Scanner":e===h.NIFTI1.XFORM_ALIGNED_ANAT?"Aligned":e===h.NIFTI1.XFORM_TALAIRACH?"Talairach":e===h.NIFTI1.XFORM_MNI_152?"MNI":"Unknown"};h.NIFTI1.prototype.getUnitsCodeString=function(e){return e===h.NIFTI1.UNITS_METER?"Meters":e===h.NIFTI1.UNITS_MM?
"Millimeters":e===h.NIFTI1.UNITS_MICRON?"Microns":e===h.NIFTI1.UNITS_SEC?"Seconds":e===h.NIFTI1.UNITS_MSEC?"Milliseconds":e===h.NIFTI1.UNITS_USEC?"Microseconds":e===h.NIFTI1.UNITS_HZ?"Hz":e===h.NIFTI1.UNITS_PPM?"PPM":e===h.NIFTI1.UNITS_RADS?"Rads":"Unknown"};h.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])};h.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=
function(e,c,a,b,d,q,k,f,p,r){var h=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],l=a;h[3][0]=h[3][1]=h[3][2]=0;h[3][3]=1;a=1-(e*e+c*c+l*l);1E-7>a?(a=1/Math.sqrt(e*e+c*c+l*l),e*=a,c*=a,l*=a,a=0):a=Math.sqrt(a);k=0<k?k:1;f=0<f?f:1;p=0<p?p:1;0>r&&(p=-p);h[0][0]=(a*a+e*e-c*c-l*l)*k;h[0][1]=2*(e*c-a*l)*f;h[0][2]=2*(e*l+a*c)*p;h[1][0]=2*(e*c+a*l)*k;h[1][1]=(a*a+c*c-e*e-l*l)*f;h[1][2]=2*(c*l-a*e)*p;h[2][0]=2*(e*l-a*c)*k;h[2][1]=2*(c*l+a*e)*f;h[2][2]=(a*a+l*l-c*c-e*e)*p;h[0][3]=b;h[1][3]=d;h[2][3]=q;return h};
h.NIFTI1.prototype.convertNiftiSFormToNEMA=function(e){var c,a,b,d,q,k,f,p,r,h,l,g,m,D,w,t;w=[[0,0,0],[0,0,0],[0,0,0]];t=[[0,0,0],[0,0,0],[0,0,0]];c=e[0][0];a=e[0][1];b=e[0][2];d=e[1][0];q=e[1][1];k=e[1][2];f=e[2][0];p=e[2][1];r=e[2][2];e=Math.sqrt(c*c+d*d+f*f);if(0===e)return null;c/=e;d/=e;f/=e;e=Math.sqrt(a*a+q*q+p*p);if(0===e)return null;a/=e;q/=e;p/=e;e=c*a+d*q+f*p;if(1E-4<Math.abs(e)){a-=e*c;q-=e*d;p-=e*f;e=Math.sqrt(a*a+q*q+p*p);if(0===e)return null;a/=e;q/=e;p/=e}e=Math.sqrt(b*b+k*k+r*r);
0===e?(b=d*p-f*q,k=f*a-p*c,r=c*q-d*a):(b/=e,k/=e,r/=e);e=c*b+d*k+f*r;if(1E-4<Math.abs(e)){b-=e*c;k-=e*d;r-=e*f;e=Math.sqrt(b*b+k*k+r*r);if(0===e)return null;b/=e;k/=e;r/=e}e=a*b+q*k+p*r;if(1E-4<Math.abs(e)){b-=e*a;k-=e*q;r-=e*p;e=Math.sqrt(b*b+k*k+r*r);if(0===e)return null;b/=e;k/=e;r/=e}w[0][0]=c;w[0][1]=a;w[0][2]=b;w[1][0]=d;w[1][1]=q;w[1][2]=k;w[2][0]=f;w[2][1]=p;w[2][2]=r;f=this.nifti_mat33_determ(w);if(0===f)return null;D=-666;c=d=q=k=1;a=2;b=3;for(p=1;3>=p;p+=1)for(r=1;3>=r;r+=1)if(p!==r)for(h=
1;3>=h;h+=1)if(p!==h&&r!==h)for(t[0][0]=t[0][1]=t[0][2]=t[1][0]=t[1][1]=t[1][2]=t[2][0]=t[2][1]=t[2][2]=0,l=-1;1>=l;l+=2)for(g=-1;1>=g;g+=2)for(m=-1;1>=m;m+=2)t[0][p-1]=l,t[1][r-1]=g,t[2][h-1]=m,e=this.nifti_mat33_determ(t),0<e*f&&(e=this.nifti_mat33_mul(t,w),e=e[0][0]+e[1][1]+e[2][2],e>D&&(D=e,c=p,a=r,b=h,d=l,q=g,k=m));w=t=e=f=p=r=0;switch(c*d){case 1:w="X";f="+";break;case -1:w="X";f="-";break;case 2:w="Y";f="+";break;case -2:w="Y";f="-";break;case 3:w="Z";f="+";break;case -3:w="Z",f="-"}switch(a*
q){case 1:t="X";p="+";break;case -1:t="X";p="-";break;case 2:t="Y";p="+";break;case -2:t="Y";p="-";break;case 3:t="Z";p="+";break;case -3:t="Z",p="-"}switch(b*k){case 1:e="X";r="+";break;case -1:e="X";r="-";break;case 2:e="Y";r="+";break;case -2:e="Y";r="-";break;case 3:e="Z";r="+";break;case -3:e="Z",r="-"}return w+t+e+f+p+r};h.NIFTI1.prototype.nifti_mat33_mul=function(e,c){var a=[[0,0,0],[0,0,0],[0,0,0]],b,d;for(b=0;3>b;b+=1)for(d=0;3>d;d+=1)a[b][d]=e[b][0]*c[0][d]+e[b][1]*c[1][d]+e[b][2]*c[2][d];
return a};h.NIFTI1.prototype.nifti_mat33_determ=function(e){var c,a,b,d,q,k,f,p;c=e[0][0];a=e[0][1];b=e[0][2];d=e[1][0];q=e[1][1];k=e[1][2];f=e[2][0];p=e[2][1];e=e[2][2];return c*q*e-c*p*k-d*a*e+d*p*b+f*a*k-f*q*b};h.NIFTI1.prototype.getExtensionLocation=function(){return h.NIFTI1.MAGIC_COOKIE+4};h.NIFTI1.prototype.getExtensionSize=function(e){return h.Utils.getIntAt(e,this.getExtensionLocation(),this.littleEndian)};h.NIFTI1.prototype.getExtensionCode=function(e){return h.Utils.getIntAt(e,this.getExtensionLocation()+
4,this.littleEndian)};"undefined"!==typeof n&&n.exports&&(n.exports=h.NIFTI1)},function(n,g,e){function h(b,e){if(65537>e&&(b.subarray&&a||!b.subarray&&c))return String.fromCharCode.apply(null,m.shrinkBuf(b,e));for(var d="",f=0;f<e;f++)d+=String.fromCharCode(b[f]);return d}var m=e(4),c=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(d){c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(d){a=!1}var b=new m.Buf8(256);for(n=0;256>n;n++)b[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=
n?2:1;b[254]=b[254]=1;g.string2buf=function(a){var b,c,d,e,r,h=a.length,l=0;for(e=0;e<h;e++)c=a.charCodeAt(e),55296===(c&64512)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(d&64512)&&(c=65536+(c-55296<<10)+(d-56320),e++)),l+=128>c?1:2048>c?2:65536>c?3:4;b=new m.Buf8(l);for(e=r=0;r<l;e++)c=a.charCodeAt(e),55296===(c&64512)&&e+1<h&&(d=a.charCodeAt(e+1),56320===(d&64512)&&(c=65536+(c-55296<<10)+(d-56320),e++)),128>c?b[r++]=c:(2048>c?b[r++]=192|c>>>6:(65536>c?b[r++]=224|c>>>12:(b[r++]=240|c>>>18,b[r++]=128|
c>>>12&63),b[r++]=128|c>>>6&63),b[r++]=128|c&63);return b};g.buf2binstring=function(a){return h(a,a.length)};g.binstring2buf=function(a){for(var b=new m.Buf8(a.length),c=0,d=b.length;c<d;c++)b[c]=a.charCodeAt(c);return b};g.buf2string=function(a,c){var d,e,p,r=c||a.length,q=Array(2*r);for(c=d=0;c<r;)if(e=a[c++],128>e)q[d++]=e;else if(p=b[e],4<p)q[d++]=65533,c+=p-1;else{for(e&=2===p?31:3===p?15:7;1<p&&c<r;)e=e<<6|a[c++]&63,p--;1<p?q[d++]=65533:65536>e?q[d++]=e:(e-=65536,q[d++]=55296|e>>10&1023,q[d++]=
56320|e&1023)}return h(q,d)};g.utf8border=function(a,c){var d;c=c||a.length;c>a.length&&(c=a.length);for(d=c-1;0<=d&&128===(a[d]&192);)d--;return 0>d||0===d?c:d+b[a[d]]>c?d:c}},function(n,g,e){n.exports=function(e,g,c,a){var b=e&65535|0;e=e>>>16&65535|0;for(var d;0!==c;){d=2E3<c?2E3:c;c-=d;do b=b+g[a++]|0,e=e+b|0;while(--d);b%=65521;e%=65521}return b|e<<16|0}},function(n,g,e){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,
Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(n,g,e){var h=function(){for(var e,c=[],a=0;256>a;a++){e=a;for(var b=0;8>b;b++)e=e&1?3988292384^e>>>1:e>>>1;c[a]=e}return c}();n.exports=function(e,c,a,b){a=b+a;for(e^=-1;b<a;b++)e=e>>>8^h[(e^c[b])&255];return e^-1}},function(n,
g,e){n.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){a&&(b.change_spec={change_stack_id:a.changeStackId},a.timeStamp&&(b.change_spec.time_stamp=a.timeStamp),a.skipEquivalences&&(b.change_spec.skip_equivalences=a.skipEquivalences))}function b(a,b){return e.i(p.WithParameters)(e.i(r.a)()(a),
b)}function d(a,b){e.i(v.b)(a,b,"fragmentKey");a.clipBounds&&(a.fragmentIds=q(a.fragmentIds,a.clipBounds));return a}function q(a,b){b;if(!a)return a;var c=[];a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next()){var d=d.value,f=B.a.clone([500,500,500]),l,u=d;l=f;var p=new I.a;if(!p.tryParseString(u,16))throw Error("Couldn't parse fragmentId "+u+" as hex-encoded Uint64");if(p.high)throw Error("Fragment ids > 2^32 not supported yet");u=e.i(B.m)(p);p=B.a.create();l=B.a.mul(p,u,l);u=B.a.create();
B.a.scale(u,f,.5);p=B.a.create();B.a.add(p,l,u);k({center:p,size:f},b)&&c.push(d)}return c}function k(a,b){function c(a,b,c){return[].concat($jscomp.arrayFromIterable(a.map(function(a,d){return a+c*b[d]/2}).values()))}function d(a){return{min:B.a.clone(c(a.center,a.size,-1)),max:B.a.clone(c(a.center,a.size,1))}}a=d(a);b=d(b);return a.min[0]<=b.max[0]&&a.max[0]>=b.min[0]&&a.min[1]<=b.max[1]&&a.max[1]>=b.min[1]&&a.min[2]<=b.max[2]&&a.max[2]>=b.min[2]}function f(a,b){e.i(y.b)(b);var c=e.i(y.c)(b,"fragmentKey",
y.d);b=e.i(y.c)(b,"supervoxelId",y.d);if(c.length!==b.length)throw Error("Expected fragmentKey and supervoxelId arrays to have the same length.");a.fragmentIds=b.map(function(a,b){return a+"\x00"+c[b]});a.clipBounds&&(a.fragmentIds=q(a.fragmentIds,a.clipBounds))}Object.defineProperty(g,"__esModule",{value:!0});e.d(g,"BrainmapsVolumeChunkSource",function(){return A});e.d(g,"BrainmapsMeshSource",function(){return S});e.d(g,"BrainmapsSkeletonSource",function(){return P});var p=e(2),r=e(57),E=e(58),l=
e(59),v=e(17),z=e(72);n=e(24);g=e(14);var D=e(18),w=e(9),t=e(12),B=e(1),y=e(5),I=e(6),F=e(0),H=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),u=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===
typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var u=a.length-1;0<=u;u--)if(k=a[u])f=(3>e?k(f):3<e?k(b,c,f):k(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},x=new Map([[l.a.RAW,D.a],[l.a.JPEG,g.a],[l.a.COMPRESSED_SEGMENTATION,n.a]]),A=function(b){function d(){h(this,d);var a=m(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments));a.chunkDecoder=x.get(a.parameters.encoding);return a}c(d,b);H(d,[{key:"applyEncodingParams",value:function(a){var b=this.parameters.encoding;
switch(b){case l.a.RAW:a.subvolume_format="RAW";break;case l.a.JPEG:a.subvolume_format="SINGLE_IMAGE";a.image_format_options={image_format:"JPEG",jpeg_quality:70};break;case l.a.COMPRESSED_SEGMENTATION:a.subvolume_format="RAW";a.image_format_options={compressed_segmentation_block_size:e.i(B.d)(this.spec.compressedSegmentationBlockSize)};break;default:throw Error("Invalid encoding: "+b);}}},{key:"download",value:function(b,c){var d=this,f=this.parameters,k,u=this.computeChunkBounds(b),l=b.chunkDataSize;
k="/v1/volumes/"+f.volumeId+"/subvolume:binary";u={geometry:{corner:e.i(B.d)(u),size:e.i(B.d)(l),scale:f.scaleIndex}};this.applyEncodingParams(u);a(f.changeSpec,u);k={method:"POST",payload:JSON.stringify(u),path:k,responseType:"arraybuffer"};return e.i(E.a)(f.instance,this.credentialsProvider,k,c).then(function(a){return d.chunkDecoder(b,a)})}}]);return d}(b(w.a,l.b)),A=u([e.i(F.a)()],A),S=function(b){function k(){h(this,k);var a=m(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments));
a.manifestDecoder=void 0!==a.parameters.changeSpec?f:d;var b;b=a.parameters.changeSpec;b=void 0!==b?"&header.changeStackId="+b.changeStackId+"&return_supervoxel_ids=true":"";a.listFragmentsParams=b;return a}c(k,b);H(k,[{key:"download",value:function(a,b){var c=this,d=this.parameters,f={method:"GET",path:"/v1/objects/"+d.volumeId+"/meshes/"+(d.meshName+":listfragments?object_id="+a.objectId)+this.listFragmentsParams,responseType:"json"};return e.i(E.a)(d.instance,this.credentialsProvider,f,b).then(function(b){return c.manifestDecoder(a,
b)})}},{key:"downloadFragment",value:function(b,c){var d=this.parameters,f,k=b.fragmentId;if(void 0!==d.changeSpec){var u=k.indexOf("\x00");f=k.substring(0,u);k=k.substring(u+1)}else f=b.manifestChunk.objectId.toString();u="/v1/objects/"+d.volumeId+("/meshes/"+d.meshName)+"/fragment:binary";f={fragment_key:k,object_id:f};a(d.changeSpec,f);f={method:"POST",path:u,payload:JSON.stringify(f),responseType:"arraybuffer"};return e.i(E.a)(d.instance,this.credentialsProvider,f,c).then(function(a){var c=new DataView(a),
d=c.getUint32(0,!0);if(0!==c.getUint32(4,!0))throw Error("The number of vertices should not exceed 2^32-1.");e.i(v.c)(b,a,t.b.LITTLE,8,d)})}}]);return k}(b(v.d,l.c)),S=u([e.i(F.a)()],S),P=function(b){function d(){h(this,d);return m(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}c(d,b);H(d,[{key:"download",value:function(b,c){var d=this.parameters,f={object_id:""+b.objectId},k="/v1/objects/"+d.volumeId+("/meshes/"+d.meshName)+"/skeleton:binary";a(d.changeSpec,f);f={method:"POST",
path:k,payload:JSON.stringify(f),responseType:"arraybuffer"};return e.i(E.a)(d.instance,this.credentialsProvider,f,c).then(function(a){var c=new DataView(a),d=c.getUint32(0,!0);if(0!==c.getUint32(4,!0))throw Error("The number of vertices should not exceed 2^32-1.");var f=c.getUint32(8,!0);if(0!==c.getUint32(12,!0))throw Error("The number of edges should not exceed 2^32-1.");e.i(z.a)(b,a,t.b.LITTLE,16,d,void 0,f)})}}]);return d}(b(z.b,l.d)),P=u([e.i(F.a)()],P)},function(n,g,e){function h(b){b=(new TextDecoder).decode(e.i(a.a)(b)).trim().split(/\n+/);
if(!b)throw Error("CSV file is empty.");for(var d=b[0].split(","),h=d.map(function(a){return{name:a.trim(),dataType:c.a.FLOAT32,numComponents:1}}),k=b.length-1,f=d.length,d=d.map(function(){return new Float32Array(k)}),p=0;p<k;++p)for(var r=b[p+1].split(","),g=0;g<f;++g)d[g][p]=parseFloat(r[g]);return{numVertices:k,attributeInfo:h,attributes:d}}Object.defineProperty(g,"__esModule",{value:!0});var m=e(22);n=e(32);var c=e(11),a=e(34);e.i(n.a)("csv",{description:"Comma separated value text file",getMeshVertexAttributes:function(a,
c,e,k){return m.a.getData(a.addRef(),h,c,e,k)}})},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(g,"__esModule",{value:!0});e.d(g,"DVIDVolumeChunkSource",function(){return E});e.d(g,"TileChunkSource",function(){return l});n=e(2);var a=e(60),b=e(24),d=e(14);g=e(9);var q=e(13),k=e(0),f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),p=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var l=a.length-1;0<=l;l--)if(k=a[l])f=(3>e?k(f):3<e?k(b,c,f):k(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},r=new Map([[a.a.JPEG,d.a]]),E=function(k){function l(){h(this,l);return m(this,
(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}c(l,k);f(l,[{key:"download",value:function(a,b){var c=this.parameters,d;d=this.computeChunkBounds(a);d=this.getPath(d,a.chunkDataSize);var f=this.getDecoder(c);return e.i(q.a)(e.i(q.c)(c.baseUrls,d),"arraybuffer",b).then(function(b){return f(a,b)})}},{key:"getPath",value:function(b,c){var d=this.parameters;return d.encoding===a.b.JPEG?"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/raw/0_1_2/"+(c[0]+"_"+c[1]+"_"+c[2]+"/")+(b[0]+"_"+b[1]+
"_"+b[2]+"/jpeg"):"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/raw/0_1_2/"+(c[0]+"_"+c[1]+"_"+c[2]+"/")+(b[0]+"_"+b[1]+"_"+b[2]+"?compression=googlegzip")}},{key:"getDecoder",value:function(c){return c.encoding===a.b.JPEG?d.a:b.a}}]);return l}(e.i(n.WithParameters)(g.a,a.c)),E=p([e.i(k.a)()],E),l=function(a){function b(){h(this,b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.chunkDecoder=r.get(a.parameters.encoding);return a}c(b,a);f(b,[{key:"download",value:function(a,
b){var c=this,d=this.parameters,f=a.chunkGridPosition;a.chunkDataSize=this.spec.chunkDataSize;f="/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/tile/"+(d.dims+"/"+d.level+"/")+(f[0]+"_"+f[1]+"_"+f[2]);return e.i(q.a)(e.i(q.c)(d.baseUrls,f),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(e.i(n.WithParameters)(g.a,a.d)),l=p([e.i(k.a)()],l)},function(n,g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a){e.i(v.isCompressed)(a)&&(a=e.i(v.decompress)(a));var b=new w;b.uncompressedData=a;a=e.i(v.readHeader)(a);if(null===a)throw Error("Failed to parse NIFTI header.");b.header=a;return b}function a(a,b,d,e){return q.a.getData(a,
c,b,d,e)}function b(b,c,e){return a(b,c,function(){return{priorityTier:d.b.VISIBLE,priority:1E3}},e).then(function(a){return a.header})}Object.defineProperty(g,"__esModule",{value:!0});e.d(g,"NiftiFileData",function(){return w});e.d(g,"NiftiVolumeChunkSource",function(){return B});n=e(2);var d=e(7),q=e(22),k=e(62),f=e(18);g=e(9);var p=e(33),r=e(12),E=e(1),l=e(0),v=e(99);e.n(v);var z=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in
d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),D=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var l=a.length-1;0<=l;l--)if(k=a[l])f=(3>e?k(f):3<e?k(b,c,f):k(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},w=function I(){m(this,I)},t=new Map([[k.a.INT8,
{dataType:p.a.UINT8,volumeType:p.b.IMAGE}],[k.a.UINT8,{dataType:p.a.UINT8,volumeType:p.b.IMAGE}],[k.a.INT16,{dataType:p.a.UINT16,volumeType:p.b.IMAGE}],[k.a.UINT16,{dataType:p.a.UINT16,volumeType:p.b.IMAGE}],[k.a.INT32,{dataType:p.a.UINT32,volumeType:p.b.SEGMENTATION}],[k.a.UINT32,{dataType:p.a.UINT32,volumeType:p.b.SEGMENTATION}],[k.a.INT64,{dataType:p.a.UINT64,volumeType:p.b.SEGMENTATION}],[k.a.UINT64,{dataType:p.a.UINT64,volumeType:p.b.SEGMENTATION}],[k.a.FLOAT32,{dataType:p.a.FLOAT32,volumeType:p.b.IMAGE}]]);
e.i(l.c)(k.b,function(a,c){return b(this.getRef(a.chunkManager),a.url,c).then(function(a){var b=t.get(a.datatypeCode);if(void 0===b)throw Error("Unsupported data type: "+((k.a[a.datatypeCode]||a.datatypeCode)+"."));if(1!==a.dims[4])throw Error("Time series data not supported.");var c=1;switch(a.xyzt_units&v.NIFTI1.SPATIAL_UNITS_MASK){case v.NIFTI1.UNITS_METER:c=1E9;break;case v.NIFTI1.UNITS_MM:c=1E6;break;case v.NIFTI1.UNITS_MICRON:c=1E3}var d=a.quatern_b,e=a.quatern_c,f=a.quatern_d,l=Math.sqrt(1-
d*d-e*e-f*f),p=-1===a.pixDims[0]?-1:1,r=a.description,h;h=a.affine;h=E.b.fromValues(h[0][0],h[1][0],h[2][0],h[3][0],h[0][1],h[1][1],h[2][1],h[3][1],h[0][2],h[1][2],h[2][2],h[3][2],h[0][3],h[1][3],h[2][3],h[3][3]);return{value:{description:r,affine:h,dataType:b.dataType,numChannels:a.dims[5],volumeType:b.volumeType,voxelSize:E.a.fromValues(c*a.pixDims[1],c*a.pixDims[2],c*a.pixDims[3]),volumeSize:E.a.fromValues(a.dims[1],a.dims[2],a.dims[3]),qoffset:E.a.fromValues(c*a.qoffset_x,c*a.qoffset_y,c*a.qoffset_z),
qform_code:a.qform_code,sform_code:a.sform_code,qfac:p,quatern:E.c.fromValues(d,e,f,l)}}})});var B=function(b){function c(){m(this,c);var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}h(c,b);z(c,[{key:"download",value:function(b,c){b.chunkDataSize=this.spec.chunkDataSize;return a(this.chunkManager.addRef(),this.parameters.url,
function(){return{priorityTier:b.priorityTier,priority:b.priority}},c).then(function(a){var c=e.i(v.readImage)(a.header,a.uncompressedData);e.i(f.a)(b,c,a.header.littleEndian?r.b.LITTLE:r.b.BIG)})}}]);return c}(e.i(n.WithParameters)(g.a,k.c)),B=D([e.i(l.a)()],B)},function(n,g,e){Object.defineProperty(g,"__esModule",{value:!0});e(30)},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){return e.i(d.b)(a,b,"fragments")}function b(a,b){var c=(new DataView(b)).getUint32(0,!0);e.i(d.c)(a,b,r.b.LITTLE,
4,c)}Object.defineProperty(g,"__esModule",{value:!0});e.d(g,"PrecomputedVolumeChunkSource",function(){return w});g.decodeManifestChunk=a;g.decodeFragmentChunk=b;e.d(g,"PrecomputedMeshSource",function(){return t});n=e(2);g=e(63);var d=e(17),q=e(24),k=e(14),f=e(18),p=e(9),r=e(12),E=e(13),l=e(0),v=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}(),z=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var l=a.length-1;0<=l;l--)if(k=a[l])f=(3>e?k(f):3<e?k(b,c,f):k(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},D=new Map;D.set(g.a.RAW,f.a);D.set(g.a.JPEG,k.a);D.set(g.a.COMPRESSED_SEGMENTATION,q.a);var w=function(a){function b(){h(this,
b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.chunkDecoder=D.get(a.parameters.encoding);return a}c(b,a);v(b,[{key:"download",value:function(a,b){var c=this,d=this.parameters,f;f=this.computeChunkBounds(a);var k=a.chunkDataSize;f=d.path+"/"+f[0]+"-"+(f[0]+k[0])+"_"+(f[1]+"-"+(f[1]+k[1])+"_")+(f[2]+"-"+(f[2]+k[2]));return e.i(E.a)(e.i(E.c)(d.baseUrls,f),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(e.i(n.WithParameters)(p.a,g.b)),w=z([e.i(l.a)()],
w),t=function(d){function f(){h(this,f);return m(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}c(f,d);v(f,[{key:"download",value:function(b,c){var d=this.parameters,f=d.path+"/"+b.objectId+":"+d.lod;return e.i(E.a)(e.i(E.c)(d.baseUrls,f),"json",c).then(function(c){return a(b,c)})}},{key:"downloadFragment",value:function(a,c){var d=this.parameters,f=d.path+"/"+a.fragmentId;return e.i(E.a)(e.i(E.c)(d.baseUrls,f),"arraybuffer",c).then(function(c){return b(a,c)})}}]);return f}(e.i(n.WithParameters)(d.d,
g.c)),t=z([e.i(l.a)()],t)},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a){var b=[];e.i(z.e)(a,function(a){e.i(z.b)(a);b.push(e.i(z.f)(a.sectionId))});return b}function b(a,b,c){var d="/render-ws/v1/owner/"+b.owner+"/project/"+b.project+"/"+("stack/"+b.stack+"/local-to-world-coordinates");return e.i(v.d)(e.i(v.c)(b.baseUrls,d,"PUT"),a,"json",c)}function d(a,c,d,f){var k=[];e.i(z.e)(c,function(a){var b=e.i(z.f)(a.pId),c=e.i(z.f)(a.qId),d=e.i(z.b)(a.matches);
a=d.p;for(var d=d.q,f=0;f<a[0].length;f++)k.push({tileId:b,local:[a[0][f],a[1][f]]}),k.push({tileId:c,local:[d[0][f],d[1][f]]})});return b(k,d,f).then(function(b){for(var c=new E.a,d=0;d<b.length;d++){var f=e.i(z.b)(b[d]),f=e.i(z.g)(f.world);c.appendArray(f)}a.vertexPositions=c.view})}function q(a,b,c,f){if(1===b.length)b="/render-ws/v1/owner/"+c.owner+"/matchCollection/"+(c.matchCollection+"/group/"+b[0]+"/matchesWith/"+b[0]);else if(2===b.length)b="/render-ws/v1/owner/"+c.owner+"/matchCollection/"+
(c.matchCollection+"/group/"+b[0]+"/matchesWith/"+b[1]);else throw Error("Invalid section Id vector of length: "+JSON.stringify(b.length));return e.i(v.a)(e.i(v.c)(c.baseUrls,b),"json",f).then(function(b){return d(a,b,c,f)})}function k(b,c,d,f){return e.i(v.a)(e.i(v.c)(d.baseUrls,c),"json",f).then(function(c){return q(b,a(c),d,f)})}Object.defineProperty(g,"__esModule",{value:!0});e.d(g,"TileChunkSource",function(){return y});e.d(g,"PointMatchSource",function(){return I});n=e(2);g=e(64);var f=e(14),
p=e(79),r=e(9),E=e(85),l=e(1),v=e(13),z=e(5),D=e(0),w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),t=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,
b,c,d);else for(var l=a.length-1;0<=l;l--)if(k=a[l])f=(3>e?k(f):3<e?k(b,c,f):k(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},B=new Map;B.set("jpg",f.a);var y=function(a){function b(){h(this,b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.chunkDecoder=B.get(a.parameters.encoding);var c;c=a.parameters;var d=[];void 0!==c.channel&&d.push("channels="+c.channel);void 0!==c.minIntensity&&d.push("minIntensity="+JSON.stringify(c.minIntensity));void 0!==c.maxIntensity&&
d.push("maxIntensity="+JSON.stringify(c.maxIntensity));void 0!==c.maxTileSpecsToRender&&d.push("maxTileSpecsToRender="+JSON.stringify(c.maxTileSpecsToRender));void 0!==c.filter&&d.push("filter="+JSON.stringify(c.filter));c=d.join("&");a.queryString=c;return a}c(b,a);w(b,[{key:"download",value:function(a,b){var c=this,d=this.parameters,f=a.chunkGridPosition,k=1/Math.pow(2,d.level);a.chunkDataSize=this.spec.chunkDataSize;var u=a.chunkDataSize[0]*Math.pow(2,d.level),p=a.chunkDataSize[1]*Math.pow(2,d.level),
r=l.a.create();r[0]=f[0]*u;r[1]=f[1]*p;r[2]=f[2];f="/render-ws/v1/owner/"+d.owner+"/project/"+d.project+"/stack/"+d.stack+"/z/"+r[2]+"/box/"+r[0]+","+r[1]+","+u+","+p+","+k+"/jpeg-image";return e.i(v.a)(e.i(v.c)(d.baseUrls,f+"?"+this.queryString),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(e.i(n.WithParameters)(r.a,g.a)),y=t([e.i(D.a)()],y),I=function(a){function b(){h(this,b);return m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);w(b,
[{key:"download",value:function(a,b){var c=this.parameters,d=a.chunkGridPosition,e=l.a.create();e[2]=d[2];return k(a,"/render-ws/v1/owner/"+c.owner+"/project/"+c.project+"/"+("stack/"+c.stack+"/sectionData?minZ="+e[2]+"&")+("maxZ="+(e[2]+c.zoffset)),c,b)}}]);return b}(e.i(n.WithParameters)(p.a,g.b)),I=t([e.i(D.a)()],I)},function(n,g,e){function h(a){return e.i(c.a)(e.i(b.a)(a))}Object.defineProperty(g,"__esModule",{value:!0});var m=e(22),c=e(65);n=e(32);var a=e(11),b=e(34);e.i(n.b)("vtk",{description:"VTK",
getMesh:function(b,c,e,f){return m.a.getData(b.addRef(),h,c,e,f).then(function(b){var c={info:{numTriangles:b.numTriangles,numVertices:b.numVertices,vertexAttributes:[]},indices:b.indices,vertexPositions:b.vertexPositions,vertexAttributes:[]};b=$jscomp.makeIterator(b.vertexAttributes);for(var d=b.next();!d.done;d=b.next())d=d.value,c.info.vertexAttributes.push({name:d.name,dataType:a.a.FLOAT32,numComponents:d.numComponents}),c.vertexAttributes.push(d.data);return c})}})},function(n,g,e){Object.defineProperty(g,
"__esModule",{value:!0});e.d(g,"rpc",function(){return h});var h=new (e(0).h)(self)},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);
a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}g.a=function(b){var c,d,e;return function(f,k){if(void 0!==d&&(void 0===c||void 0===f||c.generation!==f.generation))return void 0===c&&e.addConsumer(k),d;c=void 0;e=new a.e;return d=b(f,e).then(function(a){c=a;e=void 0;return a},function(a){e.isCanceled&&(d=e=void 0);throw a;})}};var a=e(10);n=e(26);var b=e(35),d=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();(function(a){function b(){h(this,b);return m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);return b})(n.a);var q=function(){function a(){h(this,a);this.providers=new Map}d(a,[{key:"register",value:function(a,b){this.providers.set(a,b)}},{key:"getCredentialsProvider",
value:function(a,b){var c=this.providers.get(a);if(void 0===c)throw Error("No registered credentials provider: "+JSON.stringify(a));return c(b)}}]);return a}();(function(a){function b(){h(this,b);return m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,new q))}c(b,a);d(b,[{key:"register",value:function(a,b){this.base.register(a,b)}}]);return b})(function(a){function e(a){h(this,e);var c=m(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));c.base=a;c.memoize=new b.a;return c}c(e,a);d(e,
[{key:"getCredentialsProvider",value:function(a,b){var c=this;return this.memoize.get({key:a,parameters:b},function(){return c.registerDisposer(c.base.getCredentialsProvider(a,b).addRef())})}}]);return e}(n.a))},function(n,g,e){g.b="CredentialsProvider";g.a="CredentialsProvider.get"},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}g.a=function(){return function(a){return function(a){function b(a){for(var c=[],d=0;d<arguments.length;++d)c[d-0]=arguments[d];h(this,
b);var e,d=m(this,(e=b.__proto__||Object.getPrototypeOf(b)).call.apply(e,[].concat([this],$jscomp.arrayFromIterable(c))));d.credentialsProvider=d.rpc.getRef(c[1].credentialsProvider);return d}c(b,a);return b}(a)}};var a=e(55),b=e(56);n=e(0);g=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var p=a.length-1;0<=p;p--)if(k=
a[p])f=(3>e?k(f):3<e?k(b,c,f):k(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var d=function(d){function k(){h(this,k);var c=m(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments));c.get=e.i(a.a)(function(a,d){return c.rpc.promiseInvoke(b.a,{providerId:c.rpcId,invalidCredentials:a},d)});return c}c(k,d);return k}(n.b),d=g([e.i(n.a)(b.b)],d)},function(n,g,e){g.a=function(c,a,b,d){d=void 0===d?h.c:d;var q=void 0;return new Promise(function(k,f){function p(h){null!==q&&(q=e.i(m.c)(c.serverUrls,
b.path,b.method),q.responseType=b.responseType,q.setRequestHeader("Authorization",h.credentials.tokenType+" "+h.credentials.accessToken),q.onloadend=function(){if(null!==q){var b=this.status;200<=b&&300>b?(d.remove(r),k(this.response)):401===b||504===b?a.get(h,d).then(p):(d.remove(r),f(m.e.fromXhr(this)))}},q.send(b.payload))}var r=function(){var a=q;q=null;null!=a&&a.abort();f(h.b)};d.add(r);a.get(void 0,d).then(p)})};var h=e(10),m=e(13)},function(n,g,e){function h(a,b){if("function"!==typeof b&&
null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}e.d(g,"a",function(){return c});e.d(g,"b",function(){return a});e.d(g,"c",function(){return b});e.d(g,"d",function(){return d});var c;
(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION"})(c||(c={}));var a=function k(){m(this,k)};a.RPC_ID="brainmaps/VolumeChunkSource";var b=function f(){m(this,f)};b.RPC_ID="brainmaps/MeshSource";var d=function(a){function b(){m(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?
this:a}h(b,a);return b}(b);d.RPC_ID="brainmaps/SkeletonSource"},function(n,g,e){function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}e.d(g,"b",function(){return a});e.d(g,"c",function(){return b});e.d(g,"a",function(){return d});e.d(g,"d",function(){return q});var a;(function(a){a[a.JPEG=0]="JPEG";a[a.COMPRESSED_SEGMENTATION=1]="COMPRESSED_SEGMENTATION"})(a||(a={}));n=function f(){c(this,f)};var b=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments))}m(b,a);return b}(n);b.RPC_ID="dvid/VolumeChunkSource";var d;(function(a){a[a.JPEG=0]="JPEG"})(d||(d={}));var q=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}m(b,a);return b}(n);q.RPC_ID="dvid/TileChunkSource"},function(n,g,e){e.d(g,"a",function(){return h});var h=function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");};h.RPC_ID="ndstore/VolumeChunkSource"},function(n,g,e){e.d(g,"a",
function(){return h});e.d(g,"c",function(){return m});g.b="nifti/getNiftiVolumeInfo";var h;(function(c){c[c.NONE=0]="NONE";c[c.BINARY=1]="BINARY";c[c.UINT8=2]="UINT8";c[c.INT16=4]="INT16";c[c.INT32=8]="INT32";c[c.FLOAT32=16]="FLOAT32";c[c.COMPLEX64=32]="COMPLEX64";c[c.FLOAT64=64]="FLOAT64";c[c.RGB24=128]="RGB24";c[c.INT8=256]="INT8";c[c.UINT16=512]="UINT16";c[c.UINT32=768]="UINT32";c[c.INT64=1024]="INT64";c[c.UINT64=1280]="UINT64";c[c.FLOAT128=1536]="FLOAT128";c[c.COMPLEX128=1792]="COMPLEX128";c[c.COMPLEX256=
2048]="COMPLEX256"})(h||(h={}));var m=function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");};m.RPC_ID="nifti/VolumeChunkSource"},function(n,g,e){function h(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");}e.d(g,"a",function(){return m});e.d(g,"b",function(){return c});e.d(g,"c",function(){return a});var m;(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION"})(m||(m={}));
var c=function d(){h(this,d)};c.RPC_ID="precomputed/VolumeChunkSource";var a=function q(){h(this,q)};a.RPC_ID="precomputed/MeshSource"},function(n,g,e){function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}e.d(g,"a",function(){return a});e.d(g,"b",function(){return b});n=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}m(b,a);return b}(function q(){c(this,q)});var a=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments))}m(b,a);return b}(n);a.RPC_ID="render/TileChunkSource";var b=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}m(b,a);return b}(n);b.RPC_ID="render/PointMatchSource"},function(n,g,e){g.a=function(a){var b=(new TextDecoder).decode(new Uint8Array(a.buffer,a.byteOffset,Math.min(a.byteLength,1E3))).match(h);if(null===b)throw Error("Failed to parse VTK file header.");var c=b[0].length,d=b[4],e=b[3],b={version:b[1],comment:b[2],datasetType:d,
dataFormat:e};a=new Uint8Array(a.buffer,a.byteOffset+c,a.byteLength-c);if("ASCII"===e){e=p.get(d);if(void 0===e)throw Error("VTK dataset type "+JSON.stringify(d)+" is not supported.");return e(b,a)}throw Error("VTK data format "+JSON.stringify(e)+" is not supported.");};var h=/^[ \t]*#[ \t]+vtk[ \t]+DataFile[ \t]+Version[ \t]+([^\s]+)[ \t]*\n(.*)\n[ \t]*(ASCII|BINARY)[ \t]*\n[ \t]*DATASET[ \t]+([^ ]+)[ \t]*\n/,m=/^[ \t]*POINT_DATA[ \t]+([0-9]+)[ \t]*$/,c=/^[ \t]*POINTS[ \t]+([0-9]+)[ \t]+([^\s]+)[ \t]*$/,
a=/^[ \t]*SCALARS[ \t]+([^\s]+)[ \t]+([^\s]+)(?:[ \t]+([0-9]+))?[ \t]*$/,b=/^[ \t]*LOOKUP_TABLE[ \t]+([^\s]+)[ \t]*$/,d=/^[ \t]*POLYGONS[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,q=/^[ \t]*3[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,k=/^[ \t]*$/,f=function E(a,b,c,d,e,f){if(!(this instanceof E))throw new TypeError("Cannot call a class as a function");this.header=a;this.numVertices=b;this.vertexPositions=c;this.numTriangles=d;this.indices=e;this.vertexAttributes=f},p=new Map([["POLYDATA",function(e,
l){function p(a,b,c,d){d=RegExp("^[ \t]*"+"([^s]+)[ \t]+".repeat(c-1)+"([^s]+)[ \t]*$");if(B-y<b)throw Error("VTK data ended unexpectedly while parsing "+a+".");for(var e=new Float32Array(b*c),f=0,k=0;k<b;++k){var l=t[y++],u=l.match(d);if(null===u)throw Error("Failed to parse "+a+" line "+k+": "+JSON.stringify(l)+".");for(l=0;l<c;++l)e[f++]=parseFloat(u[l+1])}return e}function h(a,b){if(void 0!==u)throw Error("POINTS specified more than once.");n=a;F=p("POINTS",a,3,b)}function g(a,b){if(void 0!==
u)throw Error("VERTICES specified more than once.");if(B-y<a)throw Error("VTK data ended unexpectedly");if(b!==4*a)throw Error("Only triangular faces are supported.");H=a;u=new Uint32Array(3*a);for(var c=b=0;c<a;++c){var d=t[y++].match(q);if(null===d)throw Error("Failed to parse indices for face "+c);u[b++]=parseInt(d[1],10);u[b++]=parseInt(d[2],10);u[b++]=parseInt(d[3],10)}}function E(c){if(n!==c)throw Error("Number of vertices specified in POINT_DATA section ("+c+") "+("must match number of points ("+
n+")."));for(;y<B;)if(c=t[y],c.match(k))++y;else{var d;d=c.match(a);if(null!==d){var e;e=void 0===d[3]?1:parseInt(d[3],10);++y;c=d[1];d=d[2];if(y===B)throw Error("Expected LOOKUP_TABLE directive.");var f=t[y++],l=f.match(b);if(null===l)throw Error("Expected LOOKUP_TABLE directive in "+JSON.stringify(f)+".");f=l[1];l=p("SCALARS("+c+")",n,e,d);x.push({name:c,data:l,numComponents:e,dataType:d,tableName:f})}}}for(var t=(new TextDecoder).decode(l).split("\n"),B=t.length,y=0,n=-1,F=void 0,H=-1,u=void 0,
x=[];y<B;)if(l=t[y],l.match(k))++y;else{var A=void 0,A=l.match(c);if(null!==A)++y,h(parseInt(A[1],10),A[2]);else if(A=l.match(d),null!==A)++y,g(parseInt(A[1],10),parseInt(A[2],10));else{A=l.match(m);if(null!==A){++y;E(parseInt(A[1],10));break}throw Error("Failed to parse VTK line "+JSON.stringify(l)+".");}}if(void 0===F)throw Error("Vertex positions not specified.");if(void 0===u)throw Error("Indices not specified.");return new f(e,n,F,H,u,x)}]])},function(n,g,e){e.d(g,"a",function(){return m});var h=
function(){function c(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),m=function(){function c(a,b,d,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.a0=a;this.a1=b;this.b=d;this.c=e}h(c,[{key:"computeDotProduct",value:function(a,b){var c=this.a0,e=this.a1;return c[0]*(a&255)+c[1]*(a>>8&255)+
c[2]*(a>>16&255)+c[3]*(a>>24&255)+(e[0]*(b&255)+e[1]*(b>>8&255)+e[2]*(b>>16&255)+e[3]*(b>>24&255))}},{key:"compute",value:function(a,b){var c=this.b,e=this.c;a=this.computeDotProduct(a,b);return(a+a*a%4093*e+c)%4093}},{key:"toString",value:function(){return"new HashFunction(Float32Array.of("+this.a0+"), "+("Float32Array.of("+this.a1+"), "+this.b+", "+this.c+")")}}],[{key:"generate",value:function(){function a(){return Math.floor(4093*Math.random())}return new c(Float32Array.of(a(),a(),a(),a()),Float32Array.of(a(),
a(),a(),a()),a(),a())}}]);return c}()},function(n,g,e){function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}e.d(g,"a",function(){return E});var a=e(66),b=e(6),d=function t(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return t(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),k=0,f=0,p=0,r=0;n=function(){function d(a){a=void 0===a?d.generateHashFunctions(3):a;c(this,d);this.loadFactor=.9;this.size=0;this.growFactor=1.2;this.maxHeight=8192;this.emptyHigh=this.emptyLow=4294967295;this.maxAttempts=this.maxRehashAttempts=5;this.maxWidth=4096/this.entryStride;this.generation=0;this.mungedEmptyKey=-1;this.hashFunctions=a;this.allocate(4,
1)}q(d,[{key:"updateHashFunctions",value:function(a){this.hashFunctions=d.generateHashFunctions(a);this.mungedEmptyKey=-1}},{key:"tableWithMungedEmptyKey",value:function(a){for(var b=this.hashFunctions.length,c=Array(b),d=0;d<b;++d)c[d]=this.getHash(d,this.emptyLow,this.emptyHigh);d=this.mungedEmptyKey;if(-1===d)a:for(;;){for(var d=16777216*Math.random()>>>0,e=0;e<b;++e)for(var f=this.getHash(e,d,d),k=0;k<b;++k)if(c[k]===f)continue a;this.mungedEmptyKey=d;break}for(var e=this.table,f=this.emptyLow,
k=this.emptyHigh,l=0;l<b;++l){var p=c[l];e[p]===f&&e[p+1]===k&&(e[p]=d,e[p+1]=d)}try{a(e)}finally{for(a=0;a<b;++a)l=c[a],e[l]===d&&e[l+1]===d&&(e[l]=f,e[l+1]=k)}}},{key:"getHash",value:function(a,b,c){a=this.hashFunctions[a];var d=this.width,e=this.height,d=a[0].compute(b,c)%d;b=a[1].compute(b,c)%e;return this.entryStride*(b*this.width+d)}},{key:"keys",value:function(a){function c(c,u){for(;;)switch(d){case 0:a=void 0===a?new b.a:a,t=E,q=t.emptyLow,g=t.emptyHigh,r=t.entryStride,h=E,p=h.table,l=0,
k=p.length;case 1:if(!(l<k)){d=3;break}f=p[l];e=p[l+1];if(f===q&&e===g){d=4;break}a.low=f;a.high=e;d=5;return{value:a,done:!1};case 5:if(void 0===u){d=6;break}d=-1;throw u;case 6:case 4:case 2:l+=r;d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,e,f,k,l,p,h,r,g,q,t,E=this,v={next:function(a){return c(a,void 0)},throw:function(a){return c(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();v[Symbol.iterator]=function(){return this};return v}},
{key:"indexOfPair",value:function(a,b){var c=this.table,d=this.emptyHigh;if(a===this.emptyLow&&b===d)return-1;for(var d=0,e=this.hashFunctions.length;d<e;++d){var f=this.getHash(d,a,b);if(c[f]===a&&c[f+1]===b)return f}return-1}},{key:"indexOf",value:function(a){return this.indexOfPair(a.low,a.high)}},{key:"chooseAnotherEmptyKey",value:function(){for(var a=this.emptyLow,b=this.emptyHigh,c=this.table,d=this.entryStride,e,f;e=4294967296*Math.random()>>>0,f=4294967296*Math.random()>>>0,e===a&&f===b||
this.hasPair(e,f););this.emptyLow=e;this.emptyHigh=f;for(var k=0,l=c.length;k<l;k+=d)c[k]===a&&c[k+1]===b&&(c[k]=e,c[k+1]=f)}},{key:"has",value:function(a){return-1!==this.indexOf(a)}},{key:"hasPair",value:function(a,b){return-1!==this.indexOfPair(a,b)}},{key:"delete",value:function(a){a=this.indexOf(a);if(-1!==a){var b=this.table;b[a]=this.emptyLow;b[a+1]=this.emptyHigh;++this.generation;this.size--;return!0}return!1}},{key:"clearTable",value:function(){for(var a=this.table,b=this.entryStride,c=
this.emptyLow,d=this.emptyHigh,e=a.length,f=0;f<e;f+=b)a[f]=c,a[f+1]=d}},{key:"clear",value:function(){if(0===this.size)return!1;this.size=0;++this.generation;this.clearTable();return!0}},{key:"swapPending",value:function(a,b){var c=k,d=f;this.storePending(a,b);a[b]=c;a[b+1]=d}},{key:"storePending",value:function(a,b){k=a[b];f=a[b+1]}},{key:"backupPending",value:function(){p=k;r=f}},{key:"restorePending",value:function(){k=p;f=r}},{key:"tryToInsert",value:function(){for(var a=0,b=this.emptyLow,c=
this.emptyHigh,d=this.maxAttempts,e=this.table,l=this.hashFunctions.length,p=Math.floor(Math.random()*l);;){var h=this.getHash(p,k,f);this.swapPending(e,h);if(k===b&&f===c)return!0;if(++a===d)break;p=(p+Math.floor(Math.random()*(l-1))+1)%l}return!1}},{key:"allocate",value:function(a,b){var c=a*b;this.width=a;this.height=b;this.table=new Uint32Array(c*this.entryStride);this.maxAttempts=c;this.clearTable();this.capacity=c*this.loadFactor;this.mungedEmptyKey=-1}},{key:"rehash",value:function(a,b,c){this.allocate(b,
c);this.updateHashFunctions(this.hashFunctions.length);b=this.emptyLow;c=this.emptyHigh;for(var d=this.entryStride,e=0,f=a.length;e<f;e+=d){var k=a[e+1];if(a[e]!==b||k!==c)if(this.storePending(a,e),!this.tryToInsert())return!1}return!0}},{key:"grow",value:function(a){for(var b=this.table,c=this.width,d=this.height,e=this.maxWidth,f=this.maxHeight;;){var k=c*d,c=Math.min(e,Math.ceil(a/this.height));c*d<a&&(d=Math.min(f,Math.ceil(a/c)));var l=c*d;if(l<a&&l===k)throw Error("Maximum table size exceeded");
for(k=0;k<this.maxRehashAttempts;++k)if(this.rehash(b,c,d))return;a=Math.ceil(this.growFactor*a)}}},{key:"insertInternal",value:function(){++this.generation;k===this.emptyLow&&f===this.emptyHigh&&this.chooseAnotherEmptyKey();++this.size>this.capacity&&(this.backupPending(),this.grow(Math.ceil(this.growFactor*this.width*this.height)),this.restorePending());for(;!this.tryToInsert();)this.backupPending(),this.grow(this.width*this.height),this.restorePending()}}],[{key:"generateHashFunctions",value:function(b){b=
void 0===b?3:b;for(var c=[],d=0;d<b;++d){var e=[a.a.generate(),a.a.generate()];c.push(e)}return c}}]);return d}();var E=function(a){function b(){c(this,b);return h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}m(b,a);$jscomp.initSymbol();$jscomp.initSymbolIterator();q(b,[{key:"add",value:function(a){var b=a.low;a=a.high;if(this.hasPair(b,a))return!1;k=b;f=a;this.insertInternal();return!0}},{key:Symbol.iterator,value:function(){return this.keys()}}]);return b}(n);E.prototype.entryStride=
2;var l=0,v=0,z=0,D=0;(function(a){function e(){c(this,e);return h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}m(e,a);$jscomp.initSymbol();$jscomp.initSymbolIterator();q(e,[{key:"set",value:function(a,b){var c=a.low;a=a.high;if(this.hasPair(c,a))return!1;k=c;f=a;l=b.low;v=b.high;this.insertInternal();return!0}},{key:"get",value:function(a,b){a=this.indexOf(a);if(-1===a)return!1;var c=this.table;b.low=c[a+2];b.high=c[a+3];return!0}},{key:"swapPending",value:function(a,b){var c=
l,f=v;d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"swapPending",this).call(this,a,b);a[b+2]=c;a[b+3]=f}},{key:"storePending",value:function(a,b){d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"storePending",this).call(this,a,b);l=a[b+2];v=a[b+3]}},{key:"backupPending",value:function(){d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"backupPending",this).call(this);z=l;D=v}},{key:"restorePending",value:function(){d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),
"restorePending",this).call(this);l=z;v=D}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(a){function c(c,u){for(;;)switch(d){case 0:a=void 0===a?[new b.a,new b.a]:a,v=m,G=v.emptyLow,E=v.emptyHigh,t=v.entryStride,q=m,g=q.table,r=$jscomp.makeIterator(a),h=r.next().value,p=r.next().value,l=0,k=g.length;case 1:if(!(l<k)){d=3;break}f=g[l];e=g[l+1];if(f===G&&e===E){d=4;break}h.low=f;h.high=e;p.low=g[l+2];p.high=g[l+3];d=5;return{value:a,done:!1};case 5:if(void 0===
u){d=6;break}d=-1;throw u;case 6:case 4:case 2:l+=t;d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,e,f,k,l,p,h,r,g,q,t,E,G,v,m=this,D={next:function(a){return c(a,void 0)},throw:function(a){return c(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();D[Symbol.iterator]=function(){return this};return D}}]);return e})(n).prototype.entryStride=4},function(n,g,e){g.b="mesh/MeshLayer";g.a="mesh/FragmentSource"},function(n,g,e){function h(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var m=e(84),c=e(5),a=e(15),b=e(6);n=e(0);var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),q=function E(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return E(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};g=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=
Reflect.decorate(a,b,c,d);else for(var l=a.length-1;0<=l;l--)if(k=a[l])f=(3>e?k(f):3<e?k(b,c,f):k(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var k=function(f){function k(){if(!(this instanceof k))throw new TypeError("Cannot call a class as a function");var b;b=(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.disjointSets=
new m.a;b.changed=new a.a;return b}h(k,f);d(k,[{key:"disposed",value:function(){this.changed=this.disjointSets=void 0;q(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"disposed",this).call(this)}},{key:"link",value:function(a,b,c){this.disjointSets.link(a,b,void 0===c?!1:c)&&((c=this.rpc)&&c.invoke("DisjointUint64Sets.add",{id:this.rpcId,al:a.low,ah:a.high,bl:b.low,bh:b.high}),this.changed.dispatch())}},{key:"get",value:function(a){return this.disjointSets.get(a)}},{key:"clear",value:function(){if(this.disjointSets.clear()){var a=
this.rpc;a&&a.invoke("DisjointUint64Sets.clear",{id:this.rpcId});this.changed.dispatch()}}},{key:"setElements",value:function(a){return this.disjointSets.setElements(a)}},{key:"toJSON",value:function(){return this.disjointSets.toJSON()}},{key:"restoreState",value:function(a){var d=this;this.clear();if(void 0!==a){var f=[new b.a,new b.a];e.i(c.e)(a,function(a){e.i(c.e)(a,function(a,b){f[b%2].parseString(String(a),10);0!==b&&d.link(f[0],f[1])})})}this.changed.dispatch()}},{key:"restoreSaved",value:function(a){var d=
this;if(void 0!==a){var f=[new b.a,new b.a];e.i(c.e)(a,function(a){e.i(c.e)(a,function(a,b){f[b%2].parseString(String(a),10);0!==b&&d.link(f[0],f[1],!0)})})}this.changed.dispatch()}},{key:"size",get:function(){return this.disjointSets.size}}],[{key:"makeWithCounterpart",value:function(a){var b=new this;b.initializeCounterpart(a);return b}}]);return k}(n.b),k=g([e.i(n.a)("DisjointUint64Sets")],k),f=new b.a,p=new b.a;e.i(n.d)("DisjointUint64Sets.add",function(a){var b=this.get(a.id);f.low=a.al;f.high=
a.ah;p.low=a.bl;p.high=a.bh;b.disjointSets.link(f,p)&&b.changed.dispatch()});e.i(n.d)("DisjointUint64Sets.clear",function(a){a=this.get(a.id);a.disjointSets.clear()&&a.changed.dispatch()})},function(n,g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}var m=e(81);n=e(0);var c=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),a=function k(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return k(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===
b?void 0:b.call(c)}};g=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(k=a[h])f=(3>e?k(f):3<e?k(b,c,f):k(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var b=d=function(b){function e(a,b){b=void 0===b?{}:b;if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");
var c;c=(e.__proto__||Object.getPrototypeOf(e)).call(this,a,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.updatingValue_=!1;void 0!==a&&(c.base=new m.a(b.value),c.setupChangedHandler());return c}h(e,b);c(e,[{key:"initializeCounterpart",value:function(b,c){c=void 0===c?{}:c;c.value=this.value;a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"initializeCounterpart",this).call(this,
b,c)}},{key:"setupChangedHandler",value:function(){var a=this;this.registerDisposer(this.base.changed.add(function(){if(a.updatingValue_)a.updatingValue_=!1;else{var b=a.rpc;null!==b&&b.invoke("SharedWatchableValue.changed",{id:a.rpcId,value:a.value})}}))}},{key:"value",get:function(){return this.base.value},set:function(a){this.base.value=a}},{key:"changed",get:function(){return this.base.changed}}],[{key:"makeFromExisting",value:function(a,b){var c=new d;c.base=b;c.setupChangedHandler();c.initializeCounterpart(a);
return c}},{key:"make",value:function(a,b){return d.makeFromExisting(a,new m.a(b))}}]);return e}(n.b),b=d=g([e.i(n.a)("SharedWatchableValue")],b);e.i(n.d)("SharedWatchableValue.changed",function(a){var b=this.get(a.id);b.updatingValue_=!0;b.base.value=a.value;b.updatingValue_=!1});var d},function(n,g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}e.d(g,"b",function(){return c});g.c="single_mesh/SingleMeshLayer";g.d="single_mesh/getSingleMeshInfo";g.a="";var c=function(a){function b(){m(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!==typeof a&&"function"!==typeof a?this:a}h(b,a);return b}(function b(){m(this,b)});c.RPC_ID="single_mesh/SingleMeshSource"},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.d(g,"b",function(){return v});g.a=function(a,c,d,f,k,l,h){e.i(b.e)(a,2,c,d,f,k,l,h)};var a=e(2),b=e(17),d=e(31),q=e(23);n=e(73);var k=e(6),f=e(16);g=e(0);var p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),r=function D(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return D(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}},E=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=
Reflect.decorate(a,b,c,d);else for(var l=a.length-1;0<=l;l--)if(k=a[l])f=(3>e?k(f):3<e?k(b,c,f):k(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f},l=function(a){function b(){h(this,b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.objectId=new k.a;a.vertexPositions=null;a.vertexAttributes=null;a.indices=null;return a}c(b,a);p(b,[{key:"initializeSkeletonChunk",value:function(a,c){r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);
this.objectId.assign(c)}},{key:"freeSystemMemory",value:function(){this.vertexPositions=this.indices=null}},{key:"getVertexAttributeBytes",value:function(){var a=this.vertexPositions.byteLength,b=this.vertexAttributes;null!=b&&b.forEach(function(b){a+=b.byteLength});return a}},{key:"serialize",value:function(a,c){r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);var d=this.vertexPositions,e=this.indices;a.indices=e;c.push(e.buffer);e=this.vertexAttributes;
if(null!=e&&0<e.length){var f=new Uint8Array(this.getVertexAttributeBytes());f.set(new Uint8Array(d.buffer,d.byteOffset,d.byteLength));var k=a.vertexAttributeOffsets=new Uint32Array(e.length+1);k[0]=0;var l=d.byteLength;e.forEach(function(a,b){k[b+1]=l;f.set(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),l);l+=a.byteLength});c.push(f.buffer);a.vertexAttributes=f}else a.vertexAttributes=new Uint8Array(d.buffer,d.byteOffset,d.byteLength),a.vertexAttributeOffsets=Uint32Array.of(0),d.buffer!==c[0]&&
c.push(d.buffer);this.vertexPositions=this.indices=this.vertexAttributes=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.indices.byteLength+this.getVertexAttributeBytes();r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(a.Chunk),v=function(a){function b(){h(this,b);return m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);p(b,[{key:"getChunk",value:function(a){var b=
e.i(q.a)(a),c=this.chunks.get(b);void 0===c&&(c=this.getNewChunk_(l),c.initializeSkeletonChunk(b,a),this.addChunk(c));return c}}]);return b}(a.ChunkSource),a=function(a){function b(a,c){h(this,b);var d=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.source=d.registerDisposer(a.getRef(c.source));d.registerDisposer(d.chunkManager.recomputeChunkPriorities.add(function(){d.updateChunkPriorities()}));return d}c(b,a);p(b,[{key:"updateChunkPriorities",value:function(){var a=this.visibility.value;
if(a!==Number.NEGATIVE_INFINITY){var b=e.i(f.b)(a),c=e.i(f.c)(a),d=this.source,k=this.chunkManager;e.i(q.b)(this,function(a){a=d.getChunk(a);k.requestChunk(a,b,c+60)})}}}]);return b}(d.a),a=E([e.i(g.a)(n.a)],a)},function(n,g,e){g.a="skeleton/SkeletonLayer"},function(n,g,e){g.a=function(d,g){g=e.i(a.a)(e.i(b.inflate)(new Uint8Array(g)));var k=d.chunkDataSize,f=d.source,p=f.spec.numChannels,r=g.shape;if(4!==r.length||r[0]!==p||r[1]!==k[2]||r[2]!==k[1]||r[3]!==k[0])throw Error("Shape "+JSON.stringify(r)+
" does not match chunkDataSize "+e.i(c.d)(k));k=g.dataType.dataType;f=f.spec;if(k!==f.dataType)throw Error("Data type "+m.e[k]+" does not match "+("expected data type "+m.e[f.dataType]));e.i(h.a)(d,g.data)};var h=e(25),m=e(8),c=e(1),a=e(89),b=e(28);e.n(b)},function(n,g,e){e.d(g,"a",function(){return c});var h=e(1),m=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,
c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),c=function(){function a(b,c){c=void 0===c?h.j:c;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.size=h.a.clone(b);this.transform=h.b.clone(c);this.invTransform=h.b.invert(h.b.create(),c)}m(a,[{key:"toObject",value:function(a){a.size=this.size;a.transform=this.transform}},{key:"localSpatialToGlobal",value:function(a,c){return h.a.transformMat4(a,c,this.transform)}},{key:"globalToLocalSpatial",value:function(a,c){return h.a.transformMat4(a,
c,this.invTransform)}},{key:"globalToLocalGrid",value:function(a,c){this.globalToLocalSpatial(a,c);h.a.divide(a,a,this.size);return a}},{key:"localSpatialVectorToGlobal",value:function(a,c){return e.i(h.h)(a,c,this.transform)}},{key:"globalToLocalSpatialVector",value:function(a,c){return e.i(h.h)(a,c,this.invTransform)}},{key:"assignLocalSpatialToGlobalMat4",value:function(a){return h.b.copy(a,this.transform)}}],[{key:"get",value:function(b,c){c=void 0===c?h.j:c;var d=a.cache,e=JSON.stringify([Array.from(b),
Array.from(c)]),f=d.get(e);void 0===f&&(f=new a(b,c),d.set(e,f));return f}},{key:"fromObject",value:function(b){return a.get(b.size,b.transform)}}]);return a}();c.cache=new Map},function(n,g,e){function h(c,h,r,g,l,v,n,D){var f=l[0],p=l[1],E=l[2];l=g[0];var z=g[1];g=g[2];var I=r[0],F=r[1],H=r[2],H=H-F*p,F=F-I*f;if(0===f*p*E)return[0,0];r=l*z*g+31;if(void 0===a||a.length<r)a=new Uint32Array(r),b=new Uint32Array(1*r),d=new Uint32Array(1*r),q=new Uint32Array(r),k=new Uint32Array(r);r=a.subarray(0,r);
r.fill(0);for(var u=b,x=d,A=q,S=k,P=0,C=c[h]+1>>>0,K=0,N=l-f,R=l*z-l*p,J=0;J<E;++J,h+=H,K+=R)for(var G=0;G<p;++G,h+=F,K+=N)for(var T=0;T<f;++T,h+=I){var L=c[h];L!==C&&(C=u[1*P]=L,A[P]=P++);r[K++]=P}A.subarray(0,P).sort(function(a,b){return u[a]-u[b]});c=-1;f=u[1*A[0]]+1>>>0;for(p=0;p<P;++p)E=A[p],I=u[1*E],I!==f&&(++c,f=x[1*c]=I),S[E+1]=c;++c;return e.i(m.a)(D,v,n,l*z*g,c,x,r,S,1)}g.a=function(a,b,d,k,l,g){l=void 0===l?0:l;g=void 0===g?e.i(c.b)(k,1):g;return e.i(m.c)(a,b,d,k,l,g,h)};var m=e(19),c=
e(20),a,b,d,q,k},function(n,g,e){function h(c,h,g,E,l,v,n,D){var f=l[0],p=l[1],r=l[2];l=E[0];var z=E[1];E=E[2];var I=g[0],F=g[1],H=g[2],H=H-F*p,F=F-I*f;if(0===f*p*r)return[0,0];g=l*z*E+31;if(void 0===a||a.length<g)a=new Uint32Array(g),b=new Uint32Array(2*g),d=new Uint32Array(2*g),q=new Uint32Array(g),k=new Uint32Array(g);g=a.subarray(0,g);g.fill(0);for(var u=b,x=d,A=q,S=k,P=0,C=c[h]+1>>>0,K=0,N=0,R=l-f,J=l*z-l*p,G=0;G<r;++G,h+=H,N+=J)for(var T=0;T<p;++T,h+=F,N+=R)for(var L=0;L<f;++L,h+=I){var O=c[h],
Q=c[h+1];if(O!==C||Q!==K)C=u[2*P]=O,K=u[2*P+1]=Q,A[P]=P++;g[N++]=P}A.subarray(0,P).sort(function(a,b){var c=u[2*a],d=u[2*b];return u[2*a+1]-u[2*b+1]||c-d});c=-1;f=u[2*A[0]]+1>>>0;for(p=F=0;p<P;++p){r=A[p];H=2*r;I=u[H];H=u[H+1];if(I!==f||H!==F)++c,F=2*c,f=x[F]=I,F=x[F+1]=H;S[r+1]=c}++c;return e.i(m.a)(D,v,n,l*z*E,c,x,g,S,2)}g.a=function(a,b,d,k,l,g){l=void 0===l?0:l;g=void 0===g?e.i(c.b)(k,2):g;return e.i(m.c)(a,b,d,k,l,g,h)};var m=e(19),c=e(20),a,b,d,q,k},function(n,g,e){g.a=function(a,b,d){var g=
new h.JpegDecoder;g.parse(a);if(g.width*g.height!==b[0]*b[1]*b[2])throw Error("JPEG data does not have the expected dimensions: "+("width="+g.width+", height="+g.height+", ")+("chunkDataSize="+c.a.str(b)));if(g.numComponents!==d)throw Error("JPEG data does not have the expected number of components: "+("components="+g.numComponents+", expected="+d));if(1===g.numComponents)return g.getData(g.width,g.height,!1);if(3===g.numComponents)return a=g.getData(g.width,g.height,!1),e.i(m.c)(a,g.width*g.height,
3);throw Error("JPEG data has an unsupported number of components: components="+g.numComponents);};var h=e(109);e.n(h);var m=e(20),c=e(1)},function(n,g,e){function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.d(g,"a",function(){return p});var a=e(21),b=e(80),d=e(1);n=e(0);var q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),
k=function E(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return E(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};g=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var l=a.length-1;0<=l;l--)if(k=
a[l])f=(3>e?k(f):3<e?k(b,c,f):k(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var f=function(a){function b(){h(this,b);var a=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.source=null;a.vertexPositions=null;a.vertexNormals=null;return a}c(b,a);q(b,[{key:"initializeVolumeChunk",value:function(a,c){k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initializeVolumeChunk",this).call(this,a,c);a=0;this.vertexPositions&&(a+=this.vertexPositions.buffer.byteLength);this.vertexNormals&&
(a+=this.vertexNormals.buffer.byteLength);this.gpuMemoryBytes=this.systemMemoryBytes=a;this.vertexPositions=null}},{key:"serialize",value:function(a,c){k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,c);var d=this.vertexPositions,e=this.vertexNormals;a.vertexPositions=d;c.push(d.buffer);e&&(a.vertexNormals=e,c.push(e.buffer));this.vertexNormals=this.vertexPositions=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=
this.vertexPositions.byteLength;k(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){this.vertexNormals=this.vertexPositions=null}}]);return b}(a.SliceViewChunk),p=function(a){function k(a,c){h(this,k);a=m(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,a,c));a.spec=b.a.fromObject(c.spec);return a}c(k,a);q(k,[{key:"getChunk",value:function(a){var b=e.i(d.d)(a),c=this.chunks.get(b);void 0===c&&(c=this.getNewChunk_(f),
c.initializeVolumeChunk(b,a),this.addChunk(c));return c}}]);return k}(a.SliceViewChunkSource),a=function(a){function b(){h(this,b);return m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);return b}(a.RenderLayer),a=g([e.i(n.a)(b.b)],a)},function(n,g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}e.d(g,"a",function(){return d});var m=e(8),c=e(1),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b;(function(a){a[a.LINE=0]="LINE";a[a.POINT=1]="POINT"})(b||(b={}));var d=function(b){function d(a){if(!(this instanceof
d))throw new TypeError("Cannot call a class as a function");a=(d.__proto__||Object.getPrototypeOf(d)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}h(d,b);a(d,[{key:"toObject",value:function(){return{transform:this.chunkLayout.transform,chunkDataSize:this.chunkDataSize,voxelSize:this.voxelSize,lowerVoxelBound:this.lowerVoxelBound,upperVoxelBound:this.upperVoxelBound,lowerClipBound:this.lowerClipBound,
upperClipBound:this.upperClipBound,baseVoxelOffset:this.baseVoxelOffset}}}],[{key:"make",value:function(a){return new d(Object.assign({},a,{transform:e.i(m.a)(a.transform,a.vectorGraphicsSourceOptions)}))}},{key:"fromObject",value:function(a){return new d(a)}},{key:"withDefaults",value:function(a){var b=a.transform,f=a.lowerVoxelBound,k=a.upperVoxelBound,l=a.chunkDataSize,b=e.i(m.a)(b,a.vectorGraphicsSourceOptions);if(void 0===l&&(l=c.a.clone(k),void 0!==f))for(k=0;3>k;k++)l[k]+=Math.abs(f[k]);console.log(l);
console.log(a);return new d(Object.assign({},a,{transform:b,chunkDataSize:l}))}}]);return d}(m.d);g.b="vectorgraphics/RenderLayer"},function(n,g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}e.d(g,"a",function(){return b});var c=e(15),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=function(){function b(a){m(this,b);this.value_=a;this.changed=new c.a}a(b,[{key:"value",get:function(){return this.value_},set:function(a){a!==this.value_&&(this.value_=a,this.changed.dispatch())}}]);return b}();
(function(b){function c(a,b,d){d=void 0===d?a:d;m(this,c);a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.validator=b;a.defaultValue=d;return a}h(c,b);a(c,[{key:"toJSON",value:function(){if(this.value_!==this.defaultValue)return this.value_}},{key:"reset",value:function(){this.value=this.defaultValue}},{key:"restoreState",value:function(a){if(void 0!==
a){var b=this.validator;try{this.value=b(a);return}catch(p){}}this.value=this.defaultValue}}]);return c})(b)},function(n,g,e){function h(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var m=e(67),c=e(15);n=e(0);var a=function(){function a(a,b){for(var c=
0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=function f(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return f(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};g=this&&this.__decorate||function(a,b,c,d){var e=
arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var g=a.length-1;0<=g;g--)if(h=a[g])f=(3>e?h(f):3<e?h(b,c,f):h(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var d=q=function(d){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var a;a=(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.hashTable=new m.a;a.changed=new c.b;return a}h(e,d);$jscomp.initSymbol();$jscomp.initSymbolIterator();a(e,[{key:"disposed",value:function(){b(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disposed",this).call(this);this.changed=this.hashTable=void 0}},{key:"add_",value:function(a){return this.hashTable.add(a)}},{key:"add",value:function(a){if(this.add_(a)){var b=this.rpc;b&&b.invoke("Uint64Set.add",{id:this.rpcId,value:a});this.changed.dispatch(a,
!0)}}},{key:"has",value:function(a){return this.hashTable.has(a)}},{key:Symbol.iterator,value:function(){return this.hashTable.keys()}},{key:"delete_",value:function(a){return this.hashTable.delete(a)}},{key:"delete",value:function(a){if(this.delete_(a)){var b=this.rpc;b&&b.invoke("Uint64Set.delete",{id:this.rpcId,value:a});this.changed.dispatch(a,!1)}}},{key:"clear",value:function(){if(this.hashTable.clear()){var a=this.rpc;a&&a.invoke("Uint64Set.clear",{id:this.rpcId});this.changed.dispatch(null,
!1)}}},{key:"toJSON",value:function(){for(var a=[],b=$jscomp.makeIterator(this),c=b.next();!c.done;c=b.next())a.push(c.value.toString());return a}},{key:"size",get:function(){return this.hashTable.size}}],[{key:"makeWithCounterpart",value:function(a){var b=new q;b.initializeCounterpart(a);return b}}]);return e}(n.b),d=q=g([e.i(n.a)("Uint64Set")],d);e.i(n.d)("Uint64Set.add",function(a){var b=this.get(a.id);b.add_(a.value)&&b.changed.dispatch()});e.i(n.d)("Uint64Set.delete",function(a){var b=this.get(a.id);
b.delete_(a.value)&&b.changed.dispatch()});e.i(n.d)("Uint64Set.clear",function(a){a=this.get(a.id);a.hashTable.clear()&&a.changed.dispatch()});var q},function(n,g,e){g.a=function(e,g){return e===g?!0:1E-6>Math.abs(e-g)/Math.min(Math.abs(e),Math.abs(g))}},function(n,g,e){function h(a){for(var b=a,c=a[d];c!==a;)a=c,c=a[d];for(a=b[d];c!==a;)b[d]=c,b=a,a=b[d];return c}function m(a){function b(b,f){for(;;)switch(c){case 0:e=!0,d=a;case 1:if(!e&&d===a){c=3;break}c=4;return{value:d,done:!1};case 4:if(void 0===
f){c=5;break}c=-1;throw f;case 5:d=d[q];case 2:e=!1;c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,e,f={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();f[Symbol.iterator]=function(){return this};return f}e.d(g,"a",function(){return r});var c=e(6),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in
d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();$jscomp.initSymbol();var b=Symbol("disjoint_sets:rank");$jscomp.initSymbol();var d=Symbol("disjoint_sets:parent");$jscomp.initSymbol();var q=Symbol("disjoint_sets:next");$jscomp.initSymbol();var k=Symbol("disjoint_sets:prev");$jscomp.initSymbol();var f=Symbol("disjoint_sets:save");$jscomp.initSymbol();var p=Symbol("disjoint_sets:min"),r=function(){function e(){if(!(this instanceof
e))throw new TypeError("Cannot call a class as a function");this.map=new Map;this.generation=0}$jscomp.initSymbol();$jscomp.initSymbolIterator();a(e,[{key:"get",value:function(a){var b=this.map.get(a.toString());return void 0===b?a:h(b)[p]}},{key:"isMinElement",value:function(a){var b=this.get(a);return b===a||c.a.equal(b,a)}},{key:"makeSet",value:function(a,c){c=void 0===c?!1:c;var e=a.toString(),l=this.map.get(e);if(void 0===l)return a=l=a.clone(),a[d]=a,a[b]=0,a[f]=!1,a[q]=a[k]=a,this.saveNode(l,
c),l[p]=l,this.map.set(e,l),l;this.saveNode(l,c);return h(l)}},{key:"saveNode",value:function(a,b){a[f]=void 0===b?!1:b}},{key:"isSaved",value:function(a){return a[f]}},{key:"link",value:function(a,e,f){f=void 0===f?!1:f;a=this.makeSet(a,f);e=this.makeSet(e,f);if(a===e)return!1;this.generation++;f=a;var l=e,h=f[b],g=l[b];h>g?l[d]=f:(f[d]=l,h===g&&(l[b]=g+1),f=l);var l=a,h=e,g=l[k],r=h[k];h[k]=g;g[q]=h;l[k]=r;r[q]=l;f[p]=c.a.min(a[p],e[p]);return!0}},{key:"setElements",value:function(a){function b(b,
h){for(;;)switch(c){case 0:k=a.toString();f=l.map.get(k);if(void 0!==f){c=1;break}c=3;return{value:a,done:!1};case 3:if(void 0===h){c=4;break}c=-1;throw h;case 4:c=2;break;case 1:e=$jscomp.makeIterator(m(f));case 5:if((d=e.next(b)).done){c=6;break}c=7;return{value:d.value,done:!1};case 7:if(void 0===h){c=8;break}c=-1;throw h;case 8:c=5;break;case 6:case 2:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,e,f,k,l=this,h={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},
return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();h[Symbol.iterator]=function(){return this};return h}},{key:"clear",value:function(){var a=this.map;if(0===a.size)return!1;++this.generation;a.clear();return!0}},{key:"mappings",value:function(a){function b(b,l){for(;;)switch(c){case 0:a=void 0===a?Array(2):a,f=$jscomp.makeIterator(k.map.values()),e=f.next();case 1:if(e.done){c=3;break}d=e.value;a[0]=d;a[1]=h(d)[p];c=4;return{value:a,done:!1};case 4:if(void 0===l){c=
5;break}c=-1;throw l;case 5:case 2:e=f.next();c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,e,f,k=this,l={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();l[Symbol.iterator]=function(){return this};return l}},{key:Symbol.iterator,value:function(){return this.mappings()}},{key:"toJSON",value:function(){for(var a=[],b=$jscomp.makeIterator(this.map.values()),e=b.next();!e.done;e=
b.next())if(e=e.value,e[d]===e){for(var f=[],k=$jscomp.makeIterator(m(e)),h=k.next();!h.done;h=k.next())h=h.value,this.isSaved(e)&&this.isSaved(h)||f.push(h);f.length&&(-1===f.indexOf(e)&&f.unshift(e),f.sort(c.a.compare),a.push(f))}a.sort(function(a,b){return c.a.compare(a[0],b[0])});return a.map(function(a){return a.map(function(a){return a.toString()})})}},{key:"size",get:function(){return this.map.size}}]);return e}()},function(n,g,e){e.d(g,"a",function(){return m});var h=function(){function c(a,
b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),m=function(){function c(a){a=void 0===a?16:a;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.length=0;this.data=new Float32Array(a)}h(c,[{key:"resize",value:function(a){var b=this.data;if(a>b.length){var c=new Float32Array(Math.max(a,2*b.length));
c.set(b.subarray(0,this.length));this.data=c}this.length=a}},{key:"shrinkToFit",value:function(){this.data=new Float32Array(this.view)}},{key:"clear",value:function(){this.length=0}},{key:"appendArray",value:function(a){var b=this.length;this.resize(b+a.length);this.data.set(a,b)}},{key:"eraseRange",value:function(a,b){this.data.copyWithin(a,b,this.length);this.length-=b-a}},{key:"view",get:function(){var a=this.data;return new Float32Array(a.buffer,a.byteOffset,this.length)}}]);return c}()},function(n,
g,e){g.a=function(e){for(var h=0,c=e.length,a=0;a<c;++a)h=31*h+e.charCodeAt(a)|0;return h}},function(n,g,e){var h=function(){function e(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&e(c.prototype,a);b&&e(c,b);return c}}();n=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");}h(e,null,[{key:"insertAfter",value:function(c,
a){var b=c.next0;a.next0=b;a.prev0=c;c.next0=a;b.prev0=a}},{key:"insertBefore",value:function(c,a){var b=c.prev0;a.prev0=b;a.next0=c;c.prev0=a;b.next0=a}},{key:"front",value:function(c){var a=c.next0;return a===c?null:a}},{key:"back",value:function(c){var a=c.prev0;return a===c?null:a}},{key:"pop",value:function(c){var a=c.next0,b=c.prev0;a.prev0=b;b.next0=a;c.next0=null;c.prev0=null;return c}},{key:"iterator",value:function(c){function a(a,e){for(;;)switch(b){case 0:d=c.next0;case 1:if(d===c){b=
3;break}b=4;return{value:d,done:!1};case 4:if(void 0===e){b=5;break}b=-1;throw e;case 5:case 2:d=d.next0;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,e={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();e[Symbol.iterator]=function(){return this};return e}},{key:"reverseIterator",value:function(c){function a(a,e){for(;;)switch(b){case 0:d=c.prev0;case 1:if(d===c){b=
3;break}b=4;return{value:d,done:!1};case 4:if(void 0===e){b=5;break}b=-1;throw e;case 5:case 2:d=d.prev0;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,e={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();e[Symbol.iterator]=function(){return this};return e}},{key:"initializeHead",value:function(c){c.next0=c.prev0=c}}]);return e}();g.a=n},function(n,g,e){var h=function(){function e(c,
a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&e(c.prototype,a);b&&e(c,b);return c}}();n=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");}h(e,null,[{key:"insertAfter",value:function(c,a){var b=c.next1;a.next1=b;a.prev1=c;c.next1=a;b.prev1=a}},{key:"insertBefore",value:function(c,a){var b=c.prev1;a.prev1=b;a.next1=
c;c.prev1=a;b.next1=a}},{key:"front",value:function(c){var a=c.next1;return a===c?null:a}},{key:"back",value:function(c){var a=c.prev1;return a===c?null:a}},{key:"pop",value:function(c){var a=c.next1,b=c.prev1;a.prev1=b;b.next1=a;c.next1=null;c.prev1=null;return c}},{key:"iterator",value:function(c){function a(a,e){for(;;)switch(b){case 0:d=c.next1;case 1:if(d===c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===e){b=5;break}b=-1;throw e;case 5:case 2:d=d.next1;b=1;break;case 3:b=-1;default:return{value:void 0,
done:!0}}}var b=0,d,e={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();e[Symbol.iterator]=function(){return this};return e}},{key:"reverseIterator",value:function(c){function a(a,e){for(;;)switch(b){case 0:d=c.prev1;case 1:if(d===c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===e){b=5;break}b=-1;throw e;case 5:case 2:d=d.prev1;b=1;break;case 3:b=-1;default:return{value:void 0,
done:!0}}}var b=0,d,e={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();e[Symbol.iterator]=function(){return this};return e}},{key:"initializeHead",value:function(c){c.next1=c.prev1=c}}]);return e}();g.a=n},function(n,g,e){g.a=function(a){if(147!==a[0]||78!==a[1]||85!==a[2]||77!==a[3]||80!==a[4]||89!==a[5])throw Error("Data does not match npy format.");var b=a[6],d=a[7];if(1!==b||0!==d)throw Error("Unsupported npy version "+
b+"."+d);var b=(new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint16(8,!0),d=(new TextDecoder("utf-8")).decode(a.subarray(10,b+10)),f,b=b+10;try{f=e.i(m.h)(d)}catch(w){throw Error("Failed to parse npy header: "+w);}var l=f.descr,d=f.shape,h=1;if(!Array.isArray(d))throw Error("Invalid shape ${JSON.stringify(shape)}");for(var g=$jscomp.makeIterator(d),q=g.next();!q.done;q=g.next()){q=q.value;if("number"!==typeof q)throw Error("Invalid shape ${JSON.stringify(shape)}");h*=q}g=c.get(l);if(void 0===
g)throw Error("Unsupported numpy data type "+JSON.stringify(l));l=g.arrayConstructor;h*=g.javascriptElementsPerArrayElement;if(l.BYTES_PER_ELEMENT*h+b!==a.byteLength)throw Error("Expected length does not match length of data");a=new l(a.buffer,a.byteOffset+b,h);g.fixEndianness(a);return new k(a,d,g,!0===f.fortran_order)};n=e(11);var h=e(12),m=e(5),c=new Map;c.set("|u1",{arrayConstructor:Uint8Array,fixEndianness:function(){},javascriptElementsPerArrayElement:1,elementBytes:1,dataType:n.a.UINT8});c.set("|i1",
{arrayConstructor:Uint8Array,fixEndianness:function(){},javascriptElementsPerArrayElement:1,elementBytes:1,dataType:n.a.UINT8});g={};for(var a=$jscomp.makeIterator([["<",h.b.LITTLE],[">",h.b.BIG]]),b=a.next();!b.done;g={endianness:g.endianness},b=a.next()){var d=$jscomp.makeIterator(b.value),b=d.next().value;g.endianness=d.next().value;for(var d=$jscomp.makeIterator(["u","i"]),q=d.next();!q.done;q=d.next())q=q.value,c.set(""+b+q+"2",{arrayConstructor:Uint16Array,elementBytes:2,fixEndianness:function(a){return function(b){e.i(h.d)(b,
a.endianness)}}(g),javascriptElementsPerArrayElement:1,dataType:n.a.UINT16}),c.set(""+b+q+"4",{arrayConstructor:Uint32Array,elementBytes:4,fixEndianness:function(a){return function(b){e.i(h.a)(b,a.endianness)}}(g),javascriptElementsPerArrayElement:1,dataType:n.a.UINT32}),c.set(""+b+q+"8",{arrayConstructor:Uint32Array,elementBytes:8,fixEndianness:function(a){return function(b){e.i(h.a)(b,a.endianness)}}(g),javascriptElementsPerArrayElement:2,dataType:n.a.UINT64});c.set(b+"f4",{arrayConstructor:Float32Array,
elementBytes:4,fixEndianness:function(a){return function(b){e.i(h.a)(b,a.endianness)}}(g),javascriptElementsPerArrayElement:1,dataType:n.a.FLOAT32})}var k=function p(a,b,c,d){if(!(this instanceof p))throw new TypeError("Cannot call a class as a function");this.data=a;this.shape=b;this.dataType=c;this.fortranOrder=d}},function(n,g,e){g.a=function(c){if(c instanceof Object){var a=c[h];void 0===a&&(a=c[h]=m++);return"o"+a}return""+JSON.stringify(c)};$jscomp.initSymbol();var h=Symbol("objectId"),m=0},
function(n,g,e){var h=function(){function e(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&e(c.prototype,a);b&&e(c,b);return c}}();n=function(){function e(c){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.compare=c}h(e,[{key:"meld",value:function(c,a){if(null===a)return c;if(null===c)return a;var b=this.compare;b(a,c)&&(b=c,c=
a,a=b);b=c.child0;a.next0=b;a.prev0=c;null!==b&&(b.prev0=a);c.child0=a;return c}},{key:"combineChildren",value:function(c){var a=c.child0;if(null===a)return null;for(c=null;;){var b=a.next0,d;null===b?d=null:(d=b.next0,a=this.meld(a,b));a.next0=c;c=a;if(null===d)break;a=d}d=c;for(c=c.next0;null!==c;)a=c.next0,d=this.meld(d,c),c=a;d.prev0=null;d.next0=null;return d}},{key:"removeMin",value:function(c){var a=this.combineChildren(c);c.next0=null;c.prev0=null;c.child0=null;return a}},{key:"remove",value:function(c,
a){if(c===a)return this.removeMin(c);var b=a.prev0,d=a.next0;b.child0===a?b.child0=d:b.next0=d;null!==d&&(d.prev0=b);c=this.meld(c,this.combineChildren(a));a.next0=null;a.prev0=null;a.child0=null;return c}},{key:"entries",value:function(c){function a(a,l){for(;;)switch(b){case 0:if(null===c){b=1;break}f=c.child0;b=2;return{value:c,done:!1};case 2:if(void 0===l){b=3;break}b=-1;throw l;case 3:case 4:if(null===f){b=5;break}k=f.next0;e=$jscomp.makeIterator(h.entries(f));case 6:if((d=e.next(a)).done){b=
7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===l){b=9;break}b=-1;throw l;case 9:b=6;break;case 7:f=k;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,e,k,f,h=this,g={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();g[Symbol.iterator]=function(){return this};return g}},{key:"removedEntries",value:function(c){function a(a,l){for(;;)switch(b){case 0:if(null===
c){b=1;break}f=c.child0;c.child0=null;c.next0=null;c.prev0=null;b=2;return{value:c,done:!1};case 2:if(void 0===l){b=3;break}b=-1;throw l;case 3:case 4:if(null===f){b=5;break}k=f.next0;f.child0=null;f.next0=null;f.prev0=null;e=$jscomp.makeIterator(h.entries(f));case 6:if((d=e.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===l){b=9;break}b=-1;throw l;case 9:b=6;break;case 7:f=k;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,e,k,f,h=this,g={next:function(b){return a(b,
void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();g[Symbol.iterator]=function(){return this};return g}}]);return e}();g.a=n},function(n,g,e){var h=function(){function e(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&e(c.prototype,a);b&&e(c,b);return c}}();n=function(){function e(c){if(!(this instanceof
e))throw new TypeError("Cannot call a class as a function");this.compare=c}h(e,[{key:"meld",value:function(c,a){if(null===a)return c;if(null===c)return a;var b=this.compare;b(a,c)&&(b=c,c=a,a=b);b=c.child1;a.next1=b;a.prev1=c;null!==b&&(b.prev1=a);c.child1=a;return c}},{key:"combineChildren",value:function(c){var a=c.child1;if(null===a)return null;for(c=null;;){var b=a.next1,d;null===b?d=null:(d=b.next1,a=this.meld(a,b));a.next1=c;c=a;if(null===d)break;a=d}d=c;for(c=c.next1;null!==c;)a=c.next1,d=
this.meld(d,c),c=a;d.prev1=null;d.next1=null;return d}},{key:"removeMin",value:function(c){var a=this.combineChildren(c);c.next1=null;c.prev1=null;c.child1=null;return a}},{key:"remove",value:function(c,a){if(c===a)return this.removeMin(c);var b=a.prev1,d=a.next1;b.child1===a?b.child1=d:b.next1=d;null!==d&&(d.prev1=b);c=this.meld(c,this.combineChildren(a));a.next1=null;a.prev1=null;a.child1=null;return c}},{key:"entries",value:function(c){function a(a,l){for(;;)switch(b){case 0:if(null===c){b=1;break}f=
c.child1;b=2;return{value:c,done:!1};case 2:if(void 0===l){b=3;break}b=-1;throw l;case 3:case 4:if(null===f){b=5;break}k=f.next1;e=$jscomp.makeIterator(h.entries(f));case 6:if((d=e.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===l){b=9;break}b=-1;throw l;case 9:b=6;break;case 7:f=k;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,e,k,f,h=this,g={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");
}};$jscomp.initSymbolIterator();g[Symbol.iterator]=function(){return this};return g}},{key:"removedEntries",value:function(c){function a(a,l){for(;;)switch(b){case 0:if(null===c){b=1;break}f=c.child1;c.child1=null;c.next1=null;c.prev1=null;b=2;return{value:c,done:!1};case 2:if(void 0===l){b=3;break}b=-1;throw l;case 3:case 4:if(null===f){b=5;break}k=f.next1;f.child1=null;f.next1=null;f.prev1=null;e=$jscomp.makeIterator(h.entries(f));case 6:if((d=e.next(a)).done){b=7;break}b=8;return{value:d.value,
done:!1};case 8:if(void 0===l){b=9;break}b=-1;throw l;case 9:b=6;break;case 7:f=k;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,e,k,f,h=this,g={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();g[Symbol.iterator]=function(){return this};return g}}]);return e}();g.a=n},function(n,g,e){e.d(g,"a",function(){return m});var h=function(){function c(a,b){for(var c=
0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),m=function(){function c(a){a=void 0===a?16:a;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.length=0;this.data=new Uint32Array(a)}h(c,[{key:"resize",value:function(a){var b=this.data;if(a>b.length){var c=new Uint32Array(Math.max(a,2*b.length));c.set(b.subarray(0,
this.length));this.data=c}this.length=a}},{key:"shrinkToFit",value:function(){this.data=new Uint32Array(this.view)}},{key:"clear",value:function(){this.length=0}},{key:"appendArray",value:function(a){var b=this.length;this.resize(b+a.length);this.data.set(a,b)}},{key:"eraseRange",value:function(a,b){this.data.copyWithin(a,b,this.length);this.length-=b-a}},{key:"view",get:function(){var a=this.data;return new Uint32Array(a.buffer,a.byteOffset,this.length)}}]);return c}()},function(n,g,e){e(3)},function(n,
g,e){e(3)},function(n,g,e){function h(a,b,c){var d=b[0],e=b[1],f=b[2],h=b[3],g=b[4],m=b[5],l=b[6],n=b[7],z=b[8],D=b[9],w=b[10],t=b[11],B=b[12],y=b[13],I=b[14];b=b[15];var F=c[0],H=c[1],u=c[2],x=c[3];a[0]=F*d+H*g+u*z+x*B;a[1]=F*e+H*m+u*D+x*y;a[2]=F*f+H*l+u*w+x*I;a[3]=F*h+H*n+u*t+x*b;F=c[4];H=c[5];u=c[6];x=c[7];a[4]=F*d+H*g+u*z+x*B;a[5]=F*e+H*m+u*D+x*y;a[6]=F*f+H*l+u*w+x*I;a[7]=F*h+H*n+u*t+x*b;F=c[8];H=c[9];u=c[10];x=c[11];a[8]=F*d+H*g+u*z+x*B;a[9]=F*e+H*m+u*D+x*y;a[10]=F*f+H*l+u*w+x*I;a[11]=F*h+H*
n+u*t+x*b;F=c[12];H=c[13];u=c[14];x=c[15];a[12]=F*d+H*g+u*z+x*B;a[13]=F*e+H*m+u*D+x*y;a[14]=F*f+H*l+u*w+x*I;a[15]=F*h+H*n+u*t+x*b;return a}function m(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];a[5]=b[5]-c[5];a[6]=b[6]-c[6];a[7]=b[7]-c[7];a[8]=b[8]-c[8];a[9]=b[9]-c[9];a[10]=b[10]-c[10];a[11]=b[11]-c[11];a[12]=b[12]-c[12];a[13]=b[13]-c[13];a[14]=b[14]-c[14];a[15]=b[15]-c[15];return a}Object.defineProperty(g,"__esModule",{value:!0});g.create=function(){var a=new c.a(16);
a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.clone=function(a){var b=new c.a(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};g.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];
a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};g.fromValues=function(a,b,d,e,k,f,h,g,m,l,n,z,D,w,t,B){var p=new c.a(16);p[0]=a;p[1]=b;p[2]=d;p[3]=e;p[4]=k;p[5]=f;p[6]=h;p[7]=g;p[8]=m;p[9]=l;p[10]=n;p[11]=z;p[12]=D;p[13]=w;p[14]=t;p[15]=B;return p};g.set=function(a,b,c,e,k,f,h,g,m,l,n,z,D,w,t,B,y){a[0]=b;a[1]=c;a[2]=e;a[3]=k;a[4]=f;a[5]=h;a[6]=g;a[7]=m;a[8]=l;a[9]=n;a[10]=z;a[11]=D;a[12]=w;a[13]=t;a[14]=B;a[15]=y;return a};g.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=
0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.transpose=function(a,b){if(a===b){var c=b[1],e=b[2],k=b[3],f=b[6],h=b[7],g=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=e;a[9]=f;a[11]=b[14];a[12]=k;a[13]=h;a[14]=g}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};g.invert=function(a,b){var c=b[0],e=b[1],k=b[2],
f=b[3],h=b[4],g=b[5],m=b[6],l=b[7],n=b[8],z=b[9],D=b[10],w=b[11],t=b[12],B=b[13],y=b[14];b=b[15];var I=c*g-e*h,F=c*m-k*h,H=c*l-f*h,u=e*m-k*g,x=e*l-f*g,A=k*l-f*m,S=n*B-z*t,P=n*y-D*t,C=n*b-w*t,K=z*y-D*B,N=z*b-w*B,R=D*b-w*y,J=I*R-F*N+H*K+u*C-x*P+A*S;if(!J)return null;J=1/J;a[0]=(g*R-m*N+l*K)*J;a[1]=(k*N-e*R-f*K)*J;a[2]=(B*A-y*x+b*u)*J;a[3]=(D*x-z*A-w*u)*J;a[4]=(m*C-h*R-l*P)*J;a[5]=(c*R-k*C+f*P)*J;a[6]=(y*H-t*A-b*F)*J;a[7]=(n*A-D*H+w*F)*J;a[8]=(h*N-g*C+l*S)*J;a[9]=(e*C-c*N-f*S)*J;a[10]=(t*x-B*H+b*I)*
J;a[11]=(z*H-n*x-w*I)*J;a[12]=(g*P-h*K-m*S)*J;a[13]=(c*K-e*P+k*S)*J;a[14]=(B*F-t*u-y*I)*J;a[15]=(n*u-z*F+D*I)*J;return a};g.adjoint=function(a,b){var c=b[0],e=b[1],k=b[2],f=b[3],h=b[4],g=b[5],m=b[6],l=b[7],n=b[8],z=b[9],D=b[10],w=b[11],t=b[12],B=b[13],y=b[14];b=b[15];a[0]=g*(D*b-w*y)-z*(m*b-l*y)+B*(m*w-l*D);a[1]=-(e*(D*b-w*y)-z*(k*b-f*y)+B*(k*w-f*D));a[2]=e*(m*b-l*y)-g*(k*b-f*y)+B*(k*l-f*m);a[3]=-(e*(m*w-l*D)-g*(k*w-f*D)+z*(k*l-f*m));a[4]=-(h*(D*b-w*y)-n*(m*b-l*y)+t*(m*w-l*D));a[5]=c*(D*b-w*y)-n*
(k*b-f*y)+t*(k*w-f*D);a[6]=-(c*(m*b-l*y)-h*(k*b-f*y)+t*(k*l-f*m));a[7]=c*(m*w-l*D)-h*(k*w-f*D)+n*(k*l-f*m);a[8]=h*(z*b-w*B)-n*(g*b-l*B)+t*(g*w-l*z);a[9]=-(c*(z*b-w*B)-n*(e*b-f*B)+t*(e*w-f*z));a[10]=c*(g*b-l*B)-h*(e*b-f*B)+t*(e*l-f*g);a[11]=-(c*(g*w-l*z)-h*(e*w-f*z)+n*(e*l-f*g));a[12]=-(h*(z*y-D*B)-n*(g*y-m*B)+t*(g*D-m*z));a[13]=c*(z*y-D*B)-n*(e*y-k*B)+t*(e*D-k*z);a[14]=-(c*(g*y-m*B)-h*(e*y-k*B)+t*(e*m-k*g));a[15]=c*(g*D-m*z)-h*(e*D-k*z)+n*(e*m-k*g);return a};g.determinant=function(a){var b=a[0],c=
a[1],e=a[2],k=a[3],f=a[4],h=a[5],g=a[6],m=a[7],l=a[8],n=a[9],z=a[10],D=a[11],w=a[12],t=a[13],B=a[14];a=a[15];return(b*h-c*f)*(z*a-D*B)-(b*g-e*f)*(n*a-D*t)+(b*m-k*f)*(n*B-z*t)+(c*g-e*h)*(l*a-D*w)-(c*m-k*h)*(l*B-z*w)+(e*m-k*g)*(l*t-n*w)};g.multiply=h;g.translate=function(a,b,c){var d=c[0],e=c[1];c=c[2];var f,h,g,m,l,n,z,D,w,t,B,y;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(f=b[0],h=b[1],g=b[2],m=b[3],
l=b[4],n=b[5],z=b[6],D=b[7],w=b[8],t=b[9],B=b[10],y=b[11],a[0]=f,a[1]=h,a[2]=g,a[3]=m,a[4]=l,a[5]=n,a[6]=z,a[7]=D,a[8]=w,a[9]=t,a[10]=B,a[11]=y,a[12]=f*d+l*e+w*c+b[12],a[13]=h*d+n*e+t*c+b[13],a[14]=g*d+z*e+B*c+b[14],a[15]=m*d+D*e+y*c+b[15]);return a};g.scale=function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};
g.rotate=function(a,b,d,e){var k=e[0],f=e[1];e=e[2];var h=Math.sqrt(k*k+f*f+e*e),g,m,l,q,n,D,w,t,B,y,I,F,H,u,x,A,S,P,C,K;if(Math.abs(h)<c.c)return null;h=1/h;k*=h;f*=h;e*=h;g=Math.sin(d);m=Math.cos(d);l=1-m;d=b[0];h=b[1];q=b[2];n=b[3];D=b[4];w=b[5];t=b[6];B=b[7];y=b[8];I=b[9];F=b[10];H=b[11];u=k*k*l+m;x=f*k*l+e*g;A=e*k*l-f*g;S=k*f*l-e*g;P=f*f*l+m;C=e*f*l+k*g;K=k*e*l+f*g;k=f*e*l-k*g;f=e*e*l+m;a[0]=d*u+D*x+y*A;a[1]=h*u+w*x+I*A;a[2]=q*u+t*x+F*A;a[3]=n*u+B*x+H*A;a[4]=d*S+D*P+y*C;a[5]=h*S+w*P+I*C;a[6]=
q*S+t*P+F*C;a[7]=n*S+B*P+H*C;a[8]=d*K+D*k+y*f;a[9]=h*K+w*k+I*f;a[10]=q*K+t*k+F*f;a[11]=n*K+B*k+H*f;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};g.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],f=b[5],h=b[6],g=b[7],m=b[8],l=b[9],n=b[10],z=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+m*d;a[5]=f*c+l*d;a[6]=h*c+n*d;a[7]=g*c+z*d;a[8]=m*c-e*d;a[9]=l*c-f*d;a[10]=n*c-h*d;a[11]=z*c-g*d;return a};g.rotateY=
function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],h=b[2],g=b[3],m=b[8],l=b[9],n=b[10],z=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-m*d;a[1]=f*c-l*d;a[2]=h*c-n*d;a[3]=g*c-z*d;a[8]=e*d+m*c;a[9]=f*d+l*c;a[10]=h*d+n*c;a[11]=g*d+z*c;return a};g.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],f=b[1],h=b[2],g=b[3],m=b[4],l=b[5],n=b[6],z=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],
a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+m*d;a[1]=f*c+l*d;a[2]=h*c+n*d;a[3]=g*c+z*d;a[4]=m*c-e*d;a[5]=l*c-f*d;a[6]=n*c-h*d;a[7]=z*c-g*d;return a};g.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};g.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromRotation=function(a,
b,d){var e=d[0],h=d[1];d=d[2];var f=Math.sqrt(e*e+h*h+d*d),g;if(Math.abs(f)<c.c)return null;f=1/f;e*=f;h*=f;d*=f;f=Math.sin(b);b=Math.cos(b);g=1-b;a[0]=e*e*g+b;a[1]=h*e*g+d*f;a[2]=d*e*g-h*f;a[3]=0;a[4]=e*h*g-d*f;a[5]=h*h*g+b;a[6]=d*h*g+e*f;a[7]=0;a[8]=e*d*g+h*f;a[9]=h*d*g-e*f;a[10]=d*d*g+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromXRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=c;a[7]=0;a[8]=0;a[9]=-c;a[10]=b;a[11]=0;a[12]=0;a[13]=
0;a[14]=0;a[15]=1;return a};g.fromYRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-c;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=c;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromZRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=0;a[3]=0;a[4]=-c;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.fromRotationTranslation=function(a,b,c){var d=b[0],e=b[1],f=b[2],h=b[3],g=d+d,m=e+e,l=f+f;
b=d*g;var n=d*m,d=d*l,z=e*m,e=e*l,f=f*l,g=h*g,m=h*m,h=h*l;a[0]=1-(z+f);a[1]=n+h;a[2]=d-m;a[3]=0;a[4]=n-h;a[5]=1-(b+f);a[6]=e+g;a[7]=0;a[8]=d+m;a[9]=e-g;a[10]=1-(b+z);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};g.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};g.getScaling=function(a,b){var c=b[0],e=b[1],h=b[2],f=b[4],g=b[5],r=b[6],m=b[8],l=b[9];b=b[10];a[0]=Math.sqrt(c*c+e*e+h*h);a[1]=Math.sqrt(f*f+g*g+r*r);a[2]=Math.sqrt(m*m+l*l+b*b);return a};g.getRotation=
function(a,b){var c=b[0]+b[5]+b[10];0<c?(c=2*Math.sqrt(c+1),a[3]=.25*c,a[0]=(b[6]-b[9])/c,a[1]=(b[8]-b[2])/c,a[2]=(b[1]-b[4])/c):b[0]>b[5]&b[0]>b[10]?(c=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/c,a[0]=.25*c,a[1]=(b[1]+b[4])/c,a[2]=(b[8]+b[2])/c):b[5]>b[10]?(c=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/c,a[0]=(b[1]+b[4])/c,a[1]=.25*c,a[2]=(b[6]+b[9])/c):(c=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/c,a[0]=(b[8]+b[2])/c,a[1]=(b[6]+b[9])/c,a[2]=.25*c);return a};g.fromRotationTranslationScale=
function(a,b,c,e){var d=b[0],f=b[1],h=b[2],g=b[3],m=d+d,l=f+f,n=h+h;b=d*m;var q=d*l,d=d*n,D=f*l,f=f*n,h=h*n,m=g*m,l=g*l,g=g*n,n=e[0],w=e[1];e=e[2];a[0]=(1-(D+h))*n;a[1]=(q+g)*n;a[2]=(d-l)*n;a[3]=0;a[4]=(q-g)*w;a[5]=(1-(b+h))*w;a[6]=(f+m)*w;a[7]=0;a[8]=(d+l)*e;a[9]=(f-m)*e;a[10]=(1-(b+D))*e;a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};g.fromRotationTranslationScaleOrigin=function(a,b,c,e,h){var d=b[0],g=b[1],k=b[2],m=b[3],l=d+d,n=g+g,q=k+k;b=d*l;var D=d*n,d=d*q,w=g*n,g=g*q,k=k*q,l=m*
l,n=m*n,m=m*q,q=e[0],t=e[1];e=e[2];var B=h[0],y=h[1];h=h[2];a[0]=(1-(w+k))*q;a[1]=(D+m)*q;a[2]=(d-n)*q;a[3]=0;a[4]=(D-m)*t;a[5]=(1-(b+k))*t;a[6]=(g+l)*t;a[7]=0;a[8]=(d+n)*e;a[9]=(g-l)*e;a[10]=(1-(b+w))*e;a[11]=0;a[12]=c[0]+B-(a[0]*B+a[4]*y+a[8]*h);a[13]=c[1]+y-(a[1]*B+a[5]*y+a[9]*h);a[14]=c[2]+h-(a[2]*B+a[6]*y+a[10]*h);a[15]=1;return a};g.fromQuat=function(a,b){var c=b[0],e=b[1],h=b[2];b=b[3];var f=c+c,g=e+e,m=h+h,c=c*f,n=e*f,e=e*g,l=h*f,v=h*g,h=h*m,f=b*f,g=b*g;b*=m;a[0]=1-e-h;a[1]=n+b;a[2]=l-g;a[3]=
0;a[4]=n-b;a[5]=1-c-h;a[6]=v+f;a[7]=0;a[8]=l+g;a[9]=v-f;a[10]=1-c-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.frustum=function(a,b,c,e,h,f,g){var d=1/(c-b),k=1/(h-e),l=1/(f-g);a[0]=2*f*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f*k;a[6]=0;a[7]=0;a[8]=(c+b)*d;a[9]=(h+e)*k;a[10]=(g+f)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=g*f*2*l;a[15]=0;return a};g.perspective=function(a,b,c,e,h){b=1/Math.tan(b/2);var d=1/(e-h);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(h+e)*d;a[11]=
-1;a[12]=0;a[13]=0;a[14]=2*h*e*d;a[15]=0;return a};g.perspectiveFromFieldOfView=function(a,b,c,e){var d=Math.tan(b.upDegrees*Math.PI/180),f=Math.tan(b.downDegrees*Math.PI/180),h=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var g=2/(h+b),m=2/(d+f);a[0]=g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=m;a[6]=0;a[7]=0;a[8]=-((h-b)*g*.5);a[9]=(d-f)*m*.5;a[10]=e/(c-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*c/(c-e);a[15]=0;return a};g.ortho=function(a,b,c,e,h,f,g){var d=1/(b-c),k=1/(e-h),l=1/
(f-g);a[0]=-2*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*k;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+c)*d;a[13]=(h+e)*k;a[14]=(g+f)*l;a[15]=1;return a};g.lookAt=function(a,b,d,e){var h,f,g,m,n,l,q,z,D=b[0],w=b[1];b=b[2];g=e[0];m=e[1];f=e[2];q=d[0];e=d[1];h=d[2];if(Math.abs(D-q)<c.c&&Math.abs(w-e)<c.c&&Math.abs(b-h)<c.c)return mat4.identity(a);d=D-q;e=w-e;q=b-h;z=1/Math.sqrt(d*d+e*e+q*q);d*=z;e*=z;q*=z;h=m*q-f*e;f=f*d-g*q;g=g*e-m*d;(z=Math.sqrt(h*h+f*f+g*g))?(z=1/z,h*=z,f*=z,g*=z):g=f=h=0;
m=e*g-q*f;n=q*h-d*g;l=d*f-e*h;(z=Math.sqrt(m*m+n*n+l*l))?(z=1/z,m*=z,n*=z,l*=z):l=n=m=0;a[0]=h;a[1]=m;a[2]=d;a[3]=0;a[4]=f;a[5]=n;a[6]=e;a[7]=0;a[8]=g;a[9]=l;a[10]=q;a[11]=0;a[12]=-(h*D+f*w+g*b);a[13]=-(m*D+n*w+l*b);a[14]=-(d*D+e*w+q*b);a[15]=1;return a};g.targetTo=function(a,b,c,e){var d=b[0],f=b[1];b=b[2];var h=e[0],g=e[1],m=e[2];e=d-c[0];var l=f-c[1];c=b-c[2];var n=e*e+l*l+c*c;0<n&&(n=1/Math.sqrt(n),e*=n,l*=n,c*=n);n=g*c-m*l;m=m*e-h*c;h=h*l-g*e;a[0]=n;a[1]=m;a[2]=h;a[3]=0;a[4]=l*h-c*m;a[5]=c*n-
e*h;a[6]=e*m-l*n;a[7]=0;a[8]=e;a[9]=l;a[10]=c;a[11]=0;a[12]=d;a[13]=f;a[14]=b;a[15]=1;return a};g.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};g.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],
2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};g.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};g.subtract=m;g.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*
c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a};g.multiplyScalarAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;a[3]=b[3]+c[3]*e;a[4]=b[4]+c[4]*e;a[5]=b[5]+c[5]*e;a[6]=b[6]+c[6]*e;a[7]=b[7]+c[7]*e;a[8]=b[8]+c[8]*e;a[9]=b[9]+c[9]*e;a[10]=b[10]+c[10]*e;a[11]=b[11]+c[11]*e;a[12]=b[12]+c[12]*e;a[13]=b[13]+c[13]*e;a[14]=b[14]+c[14]*e;a[15]=b[15]+c[15]*e;return a};g.exactEquals=function(a,
b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};g.equals=function(a,b){var d=a[0],e=a[1],h=a[2],f=a[3],g=a[4],m=a[5],n=a[6],l=a[7],v=a[8],z=a[9],D=a[10],w=a[11],t=a[12],B=a[13],y=a[14];a=a[15];var I=b[0],F=b[1],H=b[2],u=b[3],x=b[4],A=b[5],S=b[6],P=b[7],C=b[8],K=b[9],N=b[10],R=b[11],J=b[12],G=b[13],T=b[14];b=b[15];return Math.abs(d-
I)<=c.c*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(e-F)<=c.c*Math.max(1,Math.abs(e),Math.abs(F))&&Math.abs(h-H)<=c.c*Math.max(1,Math.abs(h),Math.abs(H))&&Math.abs(f-u)<=c.c*Math.max(1,Math.abs(f),Math.abs(u))&&Math.abs(g-x)<=c.c*Math.max(1,Math.abs(g),Math.abs(x))&&Math.abs(m-A)<=c.c*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(n-S)<=c.c*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(l-P)<=c.c*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(v-C)<=c.c*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(z-
K)<=c.c*Math.max(1,Math.abs(z),Math.abs(K))&&Math.abs(D-N)<=c.c*Math.max(1,Math.abs(D),Math.abs(N))&&Math.abs(w-R)<=c.c*Math.max(1,Math.abs(w),Math.abs(R))&&Math.abs(t-J)<=c.c*Math.max(1,Math.abs(t),Math.abs(J))&&Math.abs(B-G)<=c.c*Math.max(1,Math.abs(B),Math.abs(G))&&Math.abs(y-T)<=c.c*Math.max(1,Math.abs(y),Math.abs(T))&&Math.abs(a-b)<=c.c*Math.max(1,Math.abs(a),Math.abs(b))};var c=e(3);g.mul=h;g.sub=m},function(n,g,e){function h(){var a=new d.a(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}function m(a,
b,c){c*=.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a}function c(a,b,c){var d=b[0],e=b[1],f=b[2];b=b[3];var h=c[0],g=c[1],k=c[2];c=c[3];a[0]=d*c+b*h+e*k-f*g;a[1]=e*c+b*g+f*h-d*k;a[2]=f*c+b*k+d*g-e*h;a[3]=b*c-d*h-e*g-f*k;return a}function a(a,b,c,d){var e=b[0],f=b[1],h=b[2];b=b[3];var g=c[0],k=c[1],l=c[2];c=c[3];var m,p,n;p=e*g+f*k+h*l+b*c;0>p&&(p=-p,g=-g,k=-k,l=-l,c=-c);1E-6<1-p?(m=Math.acos(p),n=Math.sin(m),p=Math.sin((1-d)*m)/n,d=Math.sin(d*m)/n):p=1-d;a[0]=
p*e+d*g;a[1]=p*f+d*k;a[2]=p*h+d*l;a[3]=p*b+d*c;return a}function b(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var e=(d+1)%3,f=(d+2)%3,c=Math.sqrt(b[3*d+d]-b[3*e+e]-b[3*f+f]+1);a[d]=.5*c;c=.5/c;a[3]=(b[3*e+f]-b[3*f+e])*c;a[e]=(b[3*e+d]+b[3*d+e])*c;a[f]=(b[3*f+d]+b[3*d+f])*c}return a}Object.defineProperty(g,"__esModule",{value:!0});g.create=h;g.identity=function(a){a[0]=
0;a[1]=0;a[2]=0;a[3]=1;return a};g.setAxisAngle=m;g.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);0!=d?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0);return c};g.multiply=c;g.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c+b*h;a[1]=e*c+f*h;a[2]=f*c-e*h;a[3]=b*c-d*h;return a};g.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c-f*h;a[1]=e*c+b*h;a[2]=f*c+d*h;
a[3]=b*c-e*h;return a};g.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],f=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c+e*h;a[1]=e*c-d*h;a[2]=f*c+b*h;a[3]=b*c-f*h;return a};g.calculateW=function(a,b){var c=b[0],d=b[1];b=b[2];a[0]=c;a[1]=d;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-b*b));return a};g.slerp=a;g.invert=function(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];var f=c*c+d*d+e*e+b*b,f=f?1/f:0;a[0]=-c*f;a[1]=-d*f;a[2]=-e*f;a[3]=b*f;return a};g.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=
-b[2];a[3]=b[3];return a};g.fromMat3=b;g.fromEuler=function(a,b,c,d){var e=.5*Math.PI/180;b*=e;c*=e;d*=e;e=Math.sin(b);b=Math.cos(b);var f=Math.sin(c);c=Math.cos(c);var h=Math.sin(d);d=Math.cos(d);a[0]=e*c*d-b*f*h;a[1]=b*f*d+e*c*h;a[2]=b*c*h-e*f*d;a[3]=b*c*d+e*f*h;return a};g.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};var d=e(3),q=e(37),k=e(38);n=e(39);g.clone=n.a;g.fromValues=n.b;g.copy=n.c;g.set=n.d;g.add=n.e;g.mul=c;g.scale=n.f;g.dot=n.g;g.lerp=n.h;e=n.i;g.length=e;g.len=
e;e=n.j;g.squaredLength=e;g.sqrLen=e;var f=n.k;g.normalize=f;g.exactEquals=n.l;g.equals=n.m;n=function(){var a=k.create(),b=k.fromValues(1,0,0),c=k.fromValues(0,1,0);return function(d,e,h){var g=k.dot(e,h);if(-.999999>g)return k.cross(a,b,e),1E-6>k.len(a)&&k.cross(a,c,e),k.normalize(a,a),m(d,a,Math.PI),d;if(.999999<g)return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d;k.cross(a,e,h);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=1+g;return f(d,d)}}();g.rotationTo=n;n=function(){var b=h(),c=h();return function(d,e,f,h,g,k){a(b,
e,g,k);a(c,f,h,k);a(d,b,c,2*k*(1-k));return d}}();g.sqlerp=n;n=function(){var a=q.a();return function(c,d,e,h){a[0]=e[0];a[3]=e[1];a[6]=e[2];a[1]=h[0];a[4]=h[1];a[7]=h[2];a[2]=-d[0];a[5]=-d[1];a[8]=-d[2];return f(c,b(c,a))}}();g.setAxes=n},function(n,g,e){function h(){var c=new m.a(2);c[0]=0;c[1]=0;return c}var m=e(3);(function(){var c=h();return function(a,b,d,e,h,f){b||(b=2);d||(d=0);for(e=e?Math.min(e*b+d,a.length):a.length;d<e;d+=b)c[0]=a[d],c[1]=a[d+1],h(c,c,f),a[d]=c[0],a[d+1]=c[1];return a}})()},
function(n,g,e){var h=h||{};h.NIFTI1=h.NIFTI1||e(40);h.NIFTI2=h.NIFTI2||e(100);h.Utils=h.Utils||e(27);var m=m||e(28);h.isNIFTI1=function(c){var a,b;if(c.byteLength<h.NIFTI1.STANDARD_HEADER_SIZE)return!1;a=new DataView(c);c=a.getUint8(h.NIFTI1.MAGIC_NUMBER_LOCATION);b=a.getUint8(h.NIFTI1.MAGIC_NUMBER_LOCATION+1);a=a.getUint8(h.NIFTI1.MAGIC_NUMBER_LOCATION+2);return!(c!==h.NIFTI1.MAGIC_NUMBER[0]||b!==h.NIFTI1.MAGIC_NUMBER[1]||a!==h.NIFTI1.MAGIC_NUMBER[2])};h.isNIFTI2=function(c){var a,b;if(c.byteLength<
h.NIFTI1.STANDARD_HEADER_SIZE)return!1;a=new DataView(c);c=a.getUint8(h.NIFTI2.MAGIC_NUMBER_LOCATION);b=a.getUint8(h.NIFTI2.MAGIC_NUMBER_LOCATION+1);a=a.getUint8(h.NIFTI2.MAGIC_NUMBER_LOCATION+2);return!(c!==h.NIFTI2.MAGIC_NUMBER[0]||b!==h.NIFTI2.MAGIC_NUMBER[1]||a!==h.NIFTI2.MAGIC_NUMBER[2])};h.isNIFTI=function(c){return h.isNIFTI1(c)||h.isNIFTI2(c)};h.isCompressed=function(c){var a;return c&&(a=new DataView(c),c=a.getUint8(0),a=a.getUint8(1),c===h.Utils.GUNZIP_MAGIC_COOKIE1||a===h.Utils.GUNZIP_MAGIC_COOKIE2)?
!0:!1};h.decompress=function(c){return m.inflate(c).buffer};h.readHeader=function(c){var a=null;h.isCompressed(c)&&(c=h.decompress(c));h.isNIFTI1(c)?a=new h.NIFTI1:h.isNIFTI2(c)&&(a=new h.NIFTI2);a?a.readHeader(c):console.error("That file does not appear to be NIFTI!");return a};h.hasExtension=function(c){return 0!=c.extensionFlag[0]};h.readImage=function(c,a){var b=c.vox_offset,d=1,e=1;c.dims[4]&&(d=c.dims[4]);c.dims[5]&&(e=c.dims[5]);return a.slice(b,b+c.numBitsPerVoxel/8*c.dims[2]*c.dims[3]*d*
e*c.dims[1])};h.readExtension=function(c,a){var b=c.getExtensionLocation();return a.slice(b,b+c.extensionSize)};h.readExtensionData=function(c,a){var b=c.getExtensionLocation();return a.slice(b+8,b+c.extensionSize-8)};"undefined"!==typeof n&&n.exports&&(n.exports=h)},function(n,g,e){var h=h||{};h.Utils=h.Utils||e(27);h.NIFTI1=h.NIFTI1||e(40);h.NIFTI2=h.NIFTI2||function(){this.littleEndian=!1;this.dim_info=0;this.dims=[];this.slice_code=this.slice_end=this.slice_start=this.numBitsPerVoxel=this.datatypeCode=
this.intent_code=this.intent_p3=this.intent_p2=this.intent_p1=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.toffset=this.slice_duration=this.cal_min=this.cal_max=this.xyzt_units=this.scl_inter=0;this.intent_name=this.aux_file=this.description="";this.qoffset_z=this.qoffset_y=this.qoffset_x=this.quatern_d=this.quatern_c=this.quatern_b=this.sform_code=this.qform_code=0;this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.extensionFlag=[0,0,0,0]};h.NIFTI2.MAGIC_COOKIE=
540;h.NIFTI2.MAGIC_NUMBER_LOCATION=4;h.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10];h.NIFTI2.prototype.readHeader=function(e){e=new DataView(e);var c=h.Utils.getIntAt(e,0,this.littleEndian),a,b;c!==h.NIFTI2.MAGIC_COOKIE&&(this.littleEndian=!0,c=h.Utils.getIntAt(e,0,this.littleEndian));if(c!==h.NIFTI2.MAGIC_COOKIE)throw Error("This does not appear to be a NIFTI file!");this.datatypeCode=h.Utils.getShortAt(e,12,this.littleEndian);this.numBitsPerVoxel=h.Utils.getShortAt(e,14,this.littleEndian);for(a=
0;8>a;a+=1)c=16+8*a,this.dims[a]=h.Utils.getLongAt(e,c,this.littleEndian);this.intent_p1=h.Utils.getDoubleAt(e,80,this.littleEndian);this.intent_p2=h.Utils.getDoubleAt(e,88,this.littleEndian);this.intent_p3=h.Utils.getDoubleAt(e,96,this.littleEndian);for(a=0;8>a;a+=1)c=104+8*a,this.pixDims[a]=h.Utils.getDoubleAt(e,c,this.littleEndian);this.vox_offset=h.Utils.getLongAt(e,168,this.littleEndian);this.scl_slope=h.Utils.getDoubleAt(e,176,this.littleEndian);this.scl_inter=h.Utils.getDoubleAt(e,184,this.littleEndian);
this.cal_max=h.Utils.getDoubleAt(e,192,this.littleEndian);this.cal_min=h.Utils.getDoubleAt(e,200,this.littleEndian);this.slice_duration=h.Utils.getDoubleAt(e,208,this.littleEndian);this.toffset=h.Utils.getDoubleAt(e,216,this.littleEndian);this.slice_start=h.Utils.getLongAt(e,224,this.littleEndian);this.slice_end=h.Utils.getLongAt(e,232,this.littleEndian);this.description=h.Utils.getStringAt(e,240,320);this.aux_file=h.Utils.getStringAt(e,320,344);this.qform_code=h.Utils.getIntAt(e,344,this.littleEndian);
this.sform_code=h.Utils.getIntAt(e,348,this.littleEndian);this.quatern_b=h.Utils.getDoubleAt(e,352,this.littleEndian);this.quatern_c=h.Utils.getDoubleAt(e,360,this.littleEndian);this.quatern_d=h.Utils.getDoubleAt(e,368,this.littleEndian);this.qoffset_x=h.Utils.getDoubleAt(e,376,this.littleEndian);this.qoffset_y=h.Utils.getDoubleAt(e,384,this.littleEndian);this.qoffset_z=h.Utils.getDoubleAt(e,392,this.littleEndian);for(a=0;3>a;a+=1)for(b=0;4>b;b+=1)c=400+8*(4*a+b),this.affine[a][b]=h.Utils.getDoubleAt(e,
c,this.littleEndian);this.affine[3][0]=0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.slice_code=h.Utils.getIntAt(e,496,this.littleEndian);this.xyzt_units=h.Utils.getIntAt(e,500,this.littleEndian);this.intent_code=h.Utils.getIntAt(e,504,this.littleEndian);this.intent_name=h.Utils.getStringAt(e,508,524);this.dim_info=h.Utils.getByteAt(e,524);e.byteLength>h.NIFTI2.MAGIC_COOKIE&&(this.extensionFlag[0]=h.Utils.getByteAt(e,540),this.extensionFlag[1]=h.Utils.getByteAt(e,541),this.extensionFlag[2]=
h.Utils.getByteAt(e,542),this.extensionFlag[3]=h.Utils.getByteAt(e,543),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(e),this.extensionCode=this.getExtensionCode(e)))};h.NIFTI2.prototype.toFormattedString=function(){var e=h.Utils.formatNumber,c;c=""+("Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n");c+="Bits Per Voxel =  = "+this.numBitsPerVoxel+"\n";c+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+
", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n";c+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n";c+="Voxel Dimensions (1-8): "+e(this.pixDims[0])+", "+e(this.pixDims[1])+", "+e(this.pixDims[2])+", "+e(this.pixDims[3])+", "+e(this.pixDims[4])+", "+e(this.pixDims[5])+", "+e(this.pixDims[6])+", "+e(this.pixDims[7])+"\n";c+="Image Offset = "+this.vox_offset+"\n";c+="Data Scale:  Slope = "+e(this.scl_slope)+"  Intercept = "+e(this.scl_inter)+
"\n";c+="Display Range:  Max = "+e(this.cal_max)+"  Min = "+e(this.cal_min)+"\n";c+="Slice Duration = "+this.slice_duration+"\n";c+="Time Axis Shift = "+this.toffset+"\n";c+="Slice Start = "+this.slice_start+"\n";c+="Slice End = "+this.slice_end+"\n";c+='Description: "'+this.description+'"\n';c+='Auxiliary File: "'+this.aux_file+'"\n';c+="Q-Form Code = "+this.qform_code+" ("+this.getTransformCodeString(this.qform_code)+")\n";c+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+
")\n";c+="Quaternion Parameters:  b = "+e(this.quatern_b)+"  c = "+e(this.quatern_c)+"  d = "+e(this.quatern_d)+"\n";c+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n";c+="S-Form Parameters X: "+e(this.affine[0][0])+", "+e(this.affine[0][1])+", "+e(this.affine[0][2])+", "+e(this.affine[0][3])+"\n";c+="S-Form Parameters Y: "+e(this.affine[1][0])+", "+e(this.affine[1][1])+", "+e(this.affine[1][2])+", "+e(this.affine[1][3])+"\n";c+="S-Form Parameters Z: "+
e(this.affine[2][0])+", "+e(this.affine[2][1])+", "+e(this.affine[2][2])+", "+e(this.affine[2][3])+"\n";c+="Slice Code = "+this.slice_code+"\n";c+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(h.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(h.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n";c+="Intent Code = "+this.intent_code+"\n";c+='Intent Name: "'+this.intent_name+'"\n';return c+="Dim Info = "+this.dim_info+"\n"};h.NIFTI2.prototype.getExtensionLocation=
function(){return h.NIFTI2.MAGIC_COOKIE+4};h.NIFTI2.prototype.getExtensionSize=h.NIFTI1.prototype.getExtensionSize;h.NIFTI2.prototype.getExtensionCode=h.NIFTI1.prototype.getExtensionCode;h.NIFTI2.prototype.getDatatypeCodeString=h.NIFTI1.prototype.getDatatypeCodeString;h.NIFTI2.prototype.getTransformCodeString=h.NIFTI1.prototype.getTransformCodeString;h.NIFTI2.prototype.getUnitsCodeString=h.NIFTI1.prototype.getUnitsCodeString;h.NIFTI2.prototype.getQformMat=h.NIFTI1.prototype.getQformMat;h.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=
h.NIFTI1.prototype.convertNiftiQFormToNiftiSForm;h.NIFTI2.prototype.convertNiftiSFormToNEMA=h.NIFTI1.prototype.convertNiftiSFormToNEMA;h.NIFTI2.prototype.nifti_mat33_mul=h.NIFTI1.prototype.nifti_mat33_mul;h.NIFTI2.prototype.nifti_mat33_determ=h.NIFTI1.prototype.nifti_mat33_determ;"undefined"!==typeof n&&n.exports&&(n.exports=h.NIFTI2)},function(n,g,e){function h(e){if(!(this instanceof h))return new h(e);e=this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,
to:""},e||{});e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&16>e.windowBits&&(e.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new q;this.strm.avail_out=0;var f=c.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==f)throw Error(d[f]);e.header&&c.deflateSetHeader(this.strm,e.header);if(e.dictionary){e="string"===typeof e.dictionary?b.string2buf(e.dictionary):"[object ArrayBuffer]"===k.call(e.dictionary)?new Uint8Array(e.dictionary):
e.dictionary;f=c.deflateSetDictionary(this.strm,e);if(0!==f)throw Error(d[f]);this._dict_set=!0}}function m(a,b){b=new h(b);b.push(a,!0);if(b.err)throw b.msg||d[b.err];return b.result}var c=e(103),a=e(4),b=e(41),d=e(29),q=e(45),k=Object.prototype.toString;h.prototype.push=function(d,e){var f=this.strm,h=this.options.chunkSize;if(this.ended)return!1;e=e===~~e?e:!0===e?4:0;"string"===typeof d?f.input=b.string2buf(d):"[object ArrayBuffer]"===k.call(d)?f.input=new Uint8Array(d):f.input=d;f.next_in=0;
f.avail_in=f.input.length;do{0===f.avail_out&&(f.output=new a.Buf8(h),f.next_out=0,f.avail_out=h);d=c.deflate(f,e);if(1!==d&&0!==d)return this.onEnd(d),this.ended=!0,!1;if(0===f.avail_out||0===f.avail_in&&(4===e||2===e))if("string"===this.options.to)this.onData(b.buf2binstring(a.shrinkBuf(f.output,f.next_out)));else this.onData(a.shrinkBuf(f.output,f.next_out))}while((0<f.avail_in||0===f.avail_out)&&1!==d);if(4===e)return d=c.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,0===d;2===e&&(this.onEnd(0),
f.avail_out=0);return!0};h.prototype.onData=function(a){this.chunks.push(a)};h.prototype.onEnd=function(b){0===b&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};g.Deflate=h;g.deflate=m;g.deflateRaw=function(a,b){b=b||{};b.raw=!0;return m(a,b)};g.gzip=function(a,b){b=b||{};b.gzip=!0;return m(a,b)}},function(n,g,e){function h(b){if(!(this instanceof h))return new h(b);var e=this.options=a.assign({chunkSize:16384,
windowBits:0,to:""},b||{});e.raw&&0<=e.windowBits&&16>e.windowBits&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15));!(0<=e.windowBits&&16>e.windowBits)||b&&b.windowBits||(e.windowBits+=32);15<e.windowBits&&48>e.windowBits&&0===(e.windowBits&15)&&(e.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new k;this.strm.avail_out=0;b=c.inflateInit2(this.strm,e.windowBits);if(b!==d.Z_OK)throw Error(q[b]);this.header=new f;c.inflateGetHeader(this.strm,this.header)}
function m(a,b){b=new h(b);b.push(a,!0);if(b.err)throw b.msg||q[b.err];return b.result}var c=e(106),a=e(4),b=e(41),d=e(43),q=e(29),k=e(45),f=e(104),p=Object.prototype.toString;h.prototype.push=function(e,f){var h=this.strm,g=this.options.chunkSize,k=this.options.dictionary,m,n,t,q=!1;if(this.ended)return!1;f=f===~~f?f:!0===f?d.Z_FINISH:d.Z_NO_FLUSH;"string"===typeof e?h.input=b.binstring2buf(e):"[object ArrayBuffer]"===p.call(e)?h.input=new Uint8Array(e):h.input=e;h.next_in=0;h.avail_in=h.input.length;
do{0===h.avail_out&&(h.output=new a.Buf8(g),h.next_out=0,h.avail_out=g);e=c.inflate(h,d.Z_NO_FLUSH);e===d.Z_NEED_DICT&&k&&(e="string"===typeof k?b.string2buf(k):"[object ArrayBuffer]"===p.call(k)?new Uint8Array(k):k,e=c.inflateSetDictionary(this.strm,e));e===d.Z_BUF_ERROR&&!0===q&&(e=d.Z_OK,q=!1);if(e!==d.Z_STREAM_END&&e!==d.Z_OK)return this.onEnd(e),this.ended=!0,!1;if(h.next_out&&(0===h.avail_out||e===d.Z_STREAM_END||0===h.avail_in&&(f===d.Z_FINISH||f===d.Z_SYNC_FLUSH)))if("string"===this.options.to)m=
b.utf8border(h.output,h.next_out),n=h.next_out-m,t=b.buf2string(h.output,m),h.next_out=n,h.avail_out=g-n,n&&a.arraySet(h.output,h.output,m,n,0),this.onData(t);else this.onData(a.shrinkBuf(h.output,h.next_out));0===h.avail_in&&0===h.avail_out&&(q=!0)}while((0<h.avail_in||0===h.avail_out)&&e!==d.Z_STREAM_END);e===d.Z_STREAM_END&&(f=d.Z_FINISH);if(f===d.Z_FINISH)return e=c.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===d.Z_OK;f===d.Z_SYNC_FLUSH&&(this.onEnd(d.Z_OK),h.avail_out=0);return!0};h.prototype.onData=
function(a){this.chunks.push(a)};h.prototype.onEnd=function(b){b===d.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};g.Inflate=h;g.inflate=m;g.inflateRaw=function(a,b){b=b||{};b.raw=!0;return m(a,b)};g.ungzip=m},function(n,g,e){function h(a,b){a.msg=F[b];return b}function m(a){for(var b=a.length;0<=--b;)a[b]=0}function c(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out);0!==c&&(t.arraySet(a.output,
b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function a(a,b){B._tr_flush_block(a,0<=a.block_start?a.block_start:-1,a.strstart-a.block_start,b);a.block_start=a.strstart;c(a.strm)}function b(a,b){a.pending_buf[a.pending++]=b}function d(a,b){a.pending_buf[a.pending++]=b>>>8&255;a.pending_buf[a.pending++]=b&255}function q(a,b){var c=a.max_chain_length,d=a.strstart,e,f=a.prev_length,h=a.nice_match,
g=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,k=a.window,u=a.w_mask,l=a.prev,t=a.strstart+258,m=k[d+f-1],n=k[d+f];a.prev_length>=a.good_match&&(c>>=2);h>a.lookahead&&(h=a.lookahead);do if(e=b,k[e+f]===n&&k[e+f-1]===m&&k[e]===k[d]&&k[++e]===k[d+1]){d+=2;for(e++;k[++d]===k[++e]&&k[++d]===k[++e]&&k[++d]===k[++e]&&k[++d]===k[++e]&&k[++d]===k[++e]&&k[++d]===k[++e]&&k[++d]===k[++e]&&k[++d]===k[++e]&&d<t;);e=258-(t-d);d=t-258;if(e>f){a.match_start=b;f=e;if(e>=h)break;m=k[d+f-1];n=k[d+f]}}while((b=
l[b&u])>g&&0!==--c);return f<=a.lookahead?f:a.lookahead}function k(a){var b=a.w_size,c,d,e,f;do{f=a.window_size-a.lookahead-a.strstart;if(a.strstart>=b+(b-262)){t.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;c=d=a.hash_size;do e=a.head[--c],a.head[c]=e>=b?e-b:0;while(--d);c=d=b;do e=a.prev[--c],a.prev[c]=e>=b?e-b:0;while(--d);f+=b}if(0===a.strm.avail_in)break;c=a.strm;d=a.window;e=a.strstart+a.lookahead;var h=c.avail_in;h>f&&(h=f);0===h?d=0:(c.avail_in-=h,t.arraySet(d,
c.input,c.next_in,h,e),1===c.state.wrap?c.adler=y(c.adler,d,h,e):2===c.state.wrap&&(c.adler=I(c.adler,d,h,e)),c.next_in+=h,c.total_in+=h,d=h);a.lookahead+=d;if(3<=a.lookahead+a.insert)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+3-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,3>a.lookahead+a.insert););}while(262>a.lookahead&&0!==a.strm.avail_in)}function f(b,
c){for(var d;;){if(262>b.lookahead){k(b);if(262>b.lookahead&&0===c)return 1;if(0===b.lookahead)break}d=0;3<=b.lookahead&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,d=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);0!==d&&b.strstart-d<=b.w_size-262&&(b.match_length=q(b,d));if(3<=b.match_length)if(d=B._tr_tally(b,b.strstart-b.match_start,b.match_length-3),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&3<=b.lookahead){b.match_length--;
do b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart;while(0!==--b.match_length);b.strstart++}else b.strstart+=b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else d=B._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=2>b.strstart?b.strstart:2;return 4===
c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function p(b,c){for(var d,e;;){if(262>b.lookahead){k(b);if(262>b.lookahead&&0===c)return 1;if(0===b.lookahead)break}d=0;3<=b.lookahead&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,d=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);b.prev_length=b.match_length;b.prev_match=b.match_start;b.match_length=2;0!==d&&b.prev_length<b.max_lazy_match&&b.strstart-d<=b.w_size-262&&
(b.match_length=q(b,d),5>=b.match_length&&(1===b.strategy||3===b.match_length&&4096<b.strstart-b.match_start)&&(b.match_length=2));if(3<=b.prev_length&&b.match_length<=b.prev_length){e=b.strstart+b.lookahead-3;d=B._tr_tally(b,b.strstart-1-b.prev_match,b.prev_length-3);b.lookahead-=b.prev_length-1;b.prev_length-=2;do++b.strstart<=e&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);while(0!==--b.prev_length);
b.match_available=0;b.match_length=2;b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}else if(b.match_available){if((d=B._tr_tally(b,0,b.window[b.strstart-1]))&&a(b,!1),b.strstart++,b.lookahead--,0===b.strm.avail_out)return 1}else b.match_available=1,b.strstart++,b.lookahead--}b.match_available&&(B._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0);b.insert=2>b.strstart?b.strstart:2;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function r(b,
c){for(var d,e,f,h=b.window;;){if(258>=b.lookahead){k(b);if(258>=b.lookahead&&0===c)return 1;if(0===b.lookahead)break}b.match_length=0;if(3<=b.lookahead&&0<b.strstart&&(e=b.strstart-1,d=h[e],d===h[++e]&&d===h[++e]&&d===h[++e])){for(f=b.strstart+258;d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&d===h[++e]&&e<f;);b.match_length=258-(f-e);b.match_length>b.lookahead&&(b.match_length=b.lookahead)}3<=b.match_length?(d=B._tr_tally(b,1,b.match_length-3),b.lookahead-=
b.match_length,b.strstart+=b.match_length,b.match_length=0):(d=B._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++);if(d&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=0;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function E(b,c){for(var d;;){if(0===b.lookahead&&(k(b),0===b.lookahead)){if(0===c)return 1;break}b.match_length=0;d=B._tr_tally(b,0,b.window[b.strstart]);b.lookahead--;b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=
0;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function l(a,b,c,d,e){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=d;this.func=e}function v(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=
this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new t.Buf16(1146);this.dyn_dtree=new t.Buf16(122);this.bl_tree=new t.Buf16(78);m(this.dyn_ltree);m(this.dyn_dtree);m(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new t.Buf16(16);
this.heap=new t.Buf16(573);m(this.heap);this.heap_max=this.heap_len=0;this.depth=new t.Buf16(573);m(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function z(a){var b;if(!a||!a.state)return h(a,-2);a.total_in=a.total_out=0;a.data_type=2;b=a.state;b.pending=0;b.pending_out=0;0>b.wrap&&(b.wrap=-b.wrap);b.status=b.wrap?42:113;a.adler=2===b.wrap?0:1;b.last_flush=0;B._tr_init(b);return 0}function D(a){var b=
z(a);0===b&&(a=a.state,a.window_size=2*a.w_size,m(a.head),a.max_lazy_match=H[a.level].max_lazy,a.good_match=H[a.level].good_length,a.nice_match=H[a.level].nice_length,a.max_chain_length=H[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return b}function w(a,b,c,d,e,f){if(!a)return-2;var g=1;-1===b&&(b=6);0>d?(g=0,d=-d):15<d&&(g=2,d-=16);if(1>e||9<e||8!==c||8>d||15<d||0>b||9<b||0>f||4<f)return h(a,-2);8===d&&(d=
9);var k=new v;a.state=k;k.strm=a;k.wrap=g;k.gzhead=null;k.w_bits=d;k.w_size=1<<k.w_bits;k.w_mask=k.w_size-1;k.hash_bits=e+7;k.hash_size=1<<k.hash_bits;k.hash_mask=k.hash_size-1;k.hash_shift=~~((k.hash_bits+3-1)/3);k.window=new t.Buf8(2*k.w_size);k.head=new t.Buf16(k.hash_size);k.prev=new t.Buf16(k.w_size);k.lit_bufsize=1<<e+6;k.pending_buf_size=4*k.lit_bufsize;k.pending_buf=new t.Buf8(k.pending_buf_size);k.d_buf=1*k.lit_bufsize;k.l_buf=3*k.lit_bufsize;k.level=b;k.strategy=f;k.method=c;return D(a)}
var t=e(4),B=e(108),y=e(42),I=e(44),F=e(29),H;H=[new l(0,0,0,0,function(b,c){var d=65535;for(d>b.pending_buf_size-5&&(d=b.pending_buf_size-5);;){if(1>=b.lookahead){k(b);if(0===b.lookahead&&0===c)return 1;if(0===b.lookahead)break}b.strstart+=b.lookahead;b.lookahead=0;var e=b.block_start+d;if(0===b.strstart||b.strstart>=e)if(b.lookahead=b.strstart-e,b.strstart=e,a(b,!1),0===b.strm.avail_out)return 1;if(b.strstart-b.block_start>=b.w_size-262&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=0;if(4===
c)return a(b,!0),0===b.strm.avail_out?3:4;b.strstart>b.block_start&&a(b,!1);return 1}),new l(4,4,8,4,f),new l(4,5,16,8,f),new l(4,6,32,32,f),new l(4,4,16,16,p),new l(8,16,32,32,p),new l(8,16,128,128,p),new l(8,32,128,256,p),new l(32,128,258,1024,p),new l(32,258,258,4096,p)];g.deflateInit=function(a,b){return w(a,b,8,15,8,0)};g.deflateInit2=w;g.deflateReset=D;g.deflateResetKeep=z;g.deflateSetHeader=function(a,b){if(!a||!a.state||2!==a.state.wrap)return-2;a.state.gzhead=b;return 0};g.deflate=function(a,
e){var f,g,k,l;if(!a||!a.state||5<e||0>e)return a?h(a,-2):-2;g=a.state;if(!a.output||!a.input&&0!==a.avail_in||666===g.status&&4!==e)return h(a,0===a.avail_out?-5:-2);g.strm=a;f=g.last_flush;g.last_flush=e;42===g.status&&(2===g.wrap?(a.adler=0,b(g,31),b(g,139),b(g,8),g.gzhead?(b(g,(g.gzhead.text?1:0)+(g.gzhead.hcrc?2:0)+(g.gzhead.extra?4:0)+(g.gzhead.name?8:0)+(g.gzhead.comment?16:0)),b(g,g.gzhead.time&255),b(g,g.gzhead.time>>8&255),b(g,g.gzhead.time>>16&255),b(g,g.gzhead.time>>24&255),b(g,9===g.level?
2:2<=g.strategy||2>g.level?4:0),b(g,g.gzhead.os&255),g.gzhead.extra&&g.gzhead.extra.length&&(b(g,g.gzhead.extra.length&255),b(g,g.gzhead.extra.length>>8&255)),g.gzhead.hcrc&&(a.adler=I(a.adler,g.pending_buf,g.pending,0)),g.gzindex=0,g.status=69):(b(g,0),b(g,0),b(g,0),b(g,0),b(g,0),b(g,9===g.level?2:2<=g.strategy||2>g.level?4:0),b(g,3),g.status=113)):(k=8+(g.w_bits-8<<4)<<8,k|=(2<=g.strategy||2>g.level?0:6>g.level?1:6===g.level?2:3)<<6,0!==g.strstart&&(k|=32),g.status=113,d(g,k+(31-k%31)),0!==g.strstart&&
(d(g,a.adler>>>16),d(g,a.adler&65535)),a.adler=1));if(69===g.status)if(g.gzhead.extra){for(k=g.pending;g.gzindex<(g.gzhead.extra.length&65535)&&(g.pending!==g.pending_buf_size||(g.gzhead.hcrc&&g.pending>k&&(a.adler=I(a.adler,g.pending_buf,g.pending-k,k)),c(a),k=g.pending,g.pending!==g.pending_buf_size));)b(g,g.gzhead.extra[g.gzindex]&255),g.gzindex++;g.gzhead.hcrc&&g.pending>k&&(a.adler=I(a.adler,g.pending_buf,g.pending-k,k));g.gzindex===g.gzhead.extra.length&&(g.gzindex=0,g.status=73)}else g.status=
73;if(73===g.status)if(g.gzhead.name){k=g.pending;do{if(g.pending===g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>k&&(a.adler=I(a.adler,g.pending_buf,g.pending-k,k)),c(a),k=g.pending,g.pending===g.pending_buf_size)){l=1;break}l=g.gzindex<g.gzhead.name.length?g.gzhead.name.charCodeAt(g.gzindex++)&255:0;b(g,l)}while(0!==l);g.gzhead.hcrc&&g.pending>k&&(a.adler=I(a.adler,g.pending_buf,g.pending-k,k));0===l&&(g.gzindex=0,g.status=91)}else g.status=91;if(91===g.status)if(g.gzhead.comment){k=g.pending;do{if(g.pending===
g.pending_buf_size&&(g.gzhead.hcrc&&g.pending>k&&(a.adler=I(a.adler,g.pending_buf,g.pending-k,k)),c(a),k=g.pending,g.pending===g.pending_buf_size)){l=1;break}l=g.gzindex<g.gzhead.comment.length?g.gzhead.comment.charCodeAt(g.gzindex++)&255:0;b(g,l)}while(0!==l);g.gzhead.hcrc&&g.pending>k&&(a.adler=I(a.adler,g.pending_buf,g.pending-k,k));0===l&&(g.status=103)}else g.status=103;103===g.status&&(g.gzhead.hcrc?(g.pending+2>g.pending_buf_size&&c(a),g.pending+2<=g.pending_buf_size&&(b(g,a.adler&255),b(g,
a.adler>>8&255),a.adler=0,g.status=113)):g.status=113);if(0!==g.pending){if(c(a),0===a.avail_out)return g.last_flush=-1,0}else if(0===a.avail_in&&(e<<1)-(4<e?9:0)<=(f<<1)-(4<f?9:0)&&4!==e)return h(a,-5);if(666===g.status&&0!==a.avail_in)return h(a,-5);if(0!==a.avail_in||0!==g.lookahead||0!==e&&666!==g.status){f=2===g.strategy?E(g,e):3===g.strategy?r(g,e):H[g.level].func(g,e);if(3===f||4===f)g.status=666;if(1===f||3===f)return 0===a.avail_out&&(g.last_flush=-1),0;if(2===f&&(1===e?B._tr_align(g):5!==
e&&(B._tr_stored_block(g,0,0,!1),3===e&&(m(g.head),0===g.lookahead&&(g.strstart=0,g.block_start=0,g.insert=0))),c(a),0===a.avail_out))return g.last_flush=-1,0}if(4!==e)return 0;if(0>=g.wrap)return 1;2===g.wrap?(b(g,a.adler&255),b(g,a.adler>>8&255),b(g,a.adler>>16&255),b(g,a.adler>>24&255),b(g,a.total_in&255),b(g,a.total_in>>8&255),b(g,a.total_in>>16&255),b(g,a.total_in>>24&255)):(d(g,a.adler>>>16),d(g,a.adler&65535));c(a);0<g.wrap&&(g.wrap=-g.wrap);return 0!==g.pending?0:1};g.deflateEnd=function(a){var b;
if(!a||!a.state)return-2;b=a.state.status;if(42!==b&&69!==b&&73!==b&&91!==b&&103!==b&&113!==b&&666!==b)return h(a,-2);a.state=null;return 113===b?h(a,-3):0};g.deflateSetDictionary=function(a,b){var c=b.length,d,e,f,g,h;if(!a||!a.state)return-2;d=a.state;e=d.wrap;if(2===e||1===e&&42!==d.status||d.lookahead)return-2;1===e&&(a.adler=y(a.adler,b,c,0));d.wrap=0;c>=d.w_size&&(0===e&&(m(d.head),d.strstart=0,d.block_start=0,d.insert=0),f=new t.Buf8(d.w_size),t.arraySet(f,b,c-d.w_size,d.w_size,0),b=f,c=d.w_size);
f=a.avail_in;g=a.next_in;h=a.input;a.avail_in=c;a.next_in=0;a.input=b;for(k(d);3<=d.lookahead;){b=d.strstart;c=d.lookahead-2;do d.ins_h=(d.ins_h<<d.hash_shift^d.window[b+3-1])&d.hash_mask,d.prev[b&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=b,b++;while(--c);d.strstart=b;d.lookahead=2;k(d)}d.strstart+=d.lookahead;d.block_start=d.strstart;d.insert=d.lookahead;d.lookahead=0;d.match_length=d.prev_length=2;d.match_available=0;a.next_in=g;a.input=h;a.avail_in=f;d.wrap=e;return 0};g.deflateInfo="pako deflate (from Nodeca project)"},
function(n,g,e){n.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},function(n,g,e){n.exports=function(e,g){var c,a,b,d,h,k,f,m,n,E,l,v,z,D,w,t,B,y,I,F,H,u,x;c=e.state;a=e.next_in;u=e.input;b=a+(e.avail_in-5);d=e.next_out;x=e.output;g=d-(g-e.avail_out);h=d+(e.avail_out-257);k=c.dmax;f=c.wsize;m=c.whave;n=c.wnext;E=c.window;l=c.hold;v=c.bits;z=c.lencode;D=c.distcode;w=(1<<c.lenbits)-1;t=(1<<c.distbits)-
1;a:do b:for(15>v&&(l+=u[a++]<<v,v+=8,l+=u[a++]<<v,v+=8),B=z[l&w];;){y=B>>>24;l>>>=y;v-=y;y=B>>>16&255;if(0===y)x[d++]=B&65535;else if(y&16){I=B&65535;if(y&=15)v<y&&(l+=u[a++]<<v,v+=8),I+=l&(1<<y)-1,l>>>=y,v-=y;15>v&&(l+=u[a++]<<v,v+=8,l+=u[a++]<<v,v+=8);B=D[l&t];c:for(;;){y=B>>>24;l>>>=y;v-=y;y=B>>>16&255;if(y&16){B&=65535;y&=15;v<y&&(l+=u[a++]<<v,v+=8,v<y&&(l+=u[a++]<<v,v+=8));B+=l&(1<<y)-1;if(B>k){e.msg="invalid distance too far back";c.mode=30;break a}l>>>=y;v-=y;y=d-g;if(B>y){y=B-y;if(y>m&&c.sane){e.msg=
"invalid distance too far back";c.mode=30;break a}F=0;H=E;if(0===n){if(F+=f-y,y<I){I-=y;do x[d++]=E[F++];while(--y);F=d-B;H=x}}else if(n<y){if(F+=f+n-y,y-=n,y<I){I-=y;do x[d++]=E[F++];while(--y);F=0;if(n<I){y=n;I-=y;do x[d++]=E[F++];while(--y);F=d-B;H=x}}}else if(F+=n-y,y<I){I-=y;do x[d++]=E[F++];while(--y);F=d-B;H=x}for(;2<I;)x[d++]=H[F++],x[d++]=H[F++],x[d++]=H[F++],I-=3;I&&(x[d++]=H[F++],1<I&&(x[d++]=H[F++]))}else{F=d-B;do x[d++]=x[F++],x[d++]=x[F++],x[d++]=x[F++],I-=3;while(2<I);I&&(x[d++]=x[F++],
1<I&&(x[d++]=x[F++]))}}else if(0===(y&64)){B=D[(B&65535)+(l&(1<<y)-1)];continue c}else{e.msg="invalid distance code";c.mode=30;break a}break}}else if(0===(y&64)){B=z[(B&65535)+(l&(1<<y)-1)];continue b}else{y&32?c.mode=12:(e.msg="invalid literal/length code",c.mode=30);break a}break}while(a<b&&d<h);I=v>>3;a-=I;v-=I<<3;e.next_in=a;e.next_out=d;e.avail_in=a<b?5+(b-a):5-(a-b);e.avail_out=d<h?257+(h-d):257-(d-h);c.hold=l&(1<<v)-1;c.bits=v}},function(n,g,e){function h(a){return(a>>>24&255)+(a>>>8&65280)+
((a&65280)<<8)+((a&255)<<24)}function m(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new k.Buf16(320);this.work=new k.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=
0}function c(a){var b;if(!a||!a.state)return-2;b=a.state;a.total_in=a.total_out=b.total=0;a.msg="";b.wrap&&(a.adler=b.wrap&1);b.mode=1;b.last=0;b.havedict=0;b.dmax=32768;b.head=null;b.hold=0;b.bits=0;b.lencode=b.lendyn=new k.Buf32(852);b.distcode=b.distdyn=new k.Buf32(592);b.sane=1;b.back=-1;return 0}function a(a){var b;if(!a||!a.state)return-2;b=a.state;b.wsize=0;b.whave=0;b.wnext=0;return c(a)}function b(b,c){var d,e;if(!b||!b.state)return-2;e=b.state;0>c?(d=0,c=-c):(d=(c>>4)+1,48>c&&(c&=15));if(c&&
(8>c||15<c))return-2;null!==e.window&&e.wbits!==c&&(e.window=null);e.wrap=d;e.wbits=c;return a(b)}function d(a,c){var d;if(!a)return-2;d=new m;a.state=d;d.window=null;c=b(a,c);0!==c&&(a.state=null);return c}function q(a,b,c,d){var e=a.state;null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new k.Buf8(e.wsize));d>=e.wsize?(k.arraySet(e.window,b,c-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(a=e.wsize-e.wnext,a>d&&(a=d),k.arraySet(e.window,b,c-d,a,e.wnext),(d-=a)?(k.arraySet(e.window,
b,c-d,d,0),e.wnext=d,e.whave=e.wsize):(e.wnext+=a,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=a)));return 0}var k=e(4),f=e(42),p=e(44),r=e(105),E=e(107),l=!0,v,z;g.inflateReset=a;g.inflateReset2=b;g.inflateResetKeep=c;g.inflateInit=function(a){return d(a,15)};g.inflateInit2=d;g.inflate=function(a,b){var c,d,e,g,n,m,u,x,A,D,w,C,K,N,R,J,G,T,L=new k.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;c=a.state;12===c.mode&&
(c.mode=13);n=a.next_out;e=a.output;u=a.avail_out;g=a.next_in;d=a.input;m=a.avail_in;x=c.hold;A=c.bits;D=m;w=u;T=0;a:for(;;)switch(c.mode){case 1:if(0===c.wrap){c.mode=13;break}for(;16>A;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}if(c.wrap&2&&35615===x){c.check=0;L[0]=x&255;L[1]=x>>>8&255;c.check=p(c.check,L,2,0);A=x=0;c.mode=2;break}c.flags=0;c.head&&(c.head.done=!1);if(!(c.wrap&1)||(((x&255)<<8)+(x>>8))%31){a.msg="incorrect header check";c.mode=30;break}if(8!==(x&15)){a.msg="unknown compression method";
c.mode=30;break}x>>>=4;A-=4;K=(x&15)+8;if(0===c.wbits)c.wbits=K;else if(K>c.wbits){a.msg="invalid window size";c.mode=30;break}c.dmax=1<<K;a.adler=c.check=1;c.mode=x&512?10:12;A=x=0;break;case 2:for(;16>A;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}c.flags=x;if(8!==(c.flags&255)){a.msg="unknown compression method";c.mode=30;break}if(c.flags&57344){a.msg="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=x>>8&1);c.flags&512&&(L[0]=x&255,L[1]=x>>>8&255,c.check=p(c.check,L,2,0));A=x=0;c.mode=
3;case 3:for(;32>A;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}c.head&&(c.head.time=x);c.flags&512&&(L[0]=x&255,L[1]=x>>>8&255,L[2]=x>>>16&255,L[3]=x>>>24&255,c.check=p(c.check,L,4,0));A=x=0;c.mode=4;case 4:for(;16>A;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}c.head&&(c.head.xflags=x&255,c.head.os=x>>8);c.flags&512&&(L[0]=x&255,L[1]=x>>>8&255,c.check=p(c.check,L,2,0));A=x=0;c.mode=5;case 5:if(c.flags&1024){for(;16>A;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}c.length=x;c.head&&(c.head.extra_len=x);c.flags&
512&&(L[0]=x&255,L[1]=x>>>8&255,c.check=p(c.check,L,2,0));A=x=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(c.flags&1024&&(C=c.length,C>m&&(C=m),C&&(c.head&&(K=c.head.extra_len-c.length,c.head.extra||(c.head.extra=Array(c.head.extra_len)),k.arraySet(c.head.extra,d,g,C,K)),c.flags&512&&(c.check=p(c.check,d,C,g)),m-=C,g+=C,c.length-=C),c.length))break a;c.length=0;c.mode=7;case 7:if(c.flags&2048){if(0===m)break a;C=0;do K=d[g+C++],c.head&&K&&65536>c.length&&(c.head.name+=String.fromCharCode(K));
while(K&&C<m);c.flags&512&&(c.check=p(c.check,d,C,g));m-=C;g+=C;if(K)break a}else c.head&&(c.head.name=null);c.length=0;c.mode=8;case 8:if(c.flags&4096){if(0===m)break a;C=0;do K=d[g+C++],c.head&&K&&65536>c.length&&(c.head.comment+=String.fromCharCode(K));while(K&&C<m);c.flags&512&&(c.check=p(c.check,d,C,g));m-=C;g+=C;if(K)break a}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(c.flags&512){for(;16>A;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}if(x!==(c.check&65535)){a.msg="header crc mismatch";
c.mode=30;break}A=x=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0);a.adler=c.check=0;c.mode=12;break;case 10:for(;32>A;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}a.adler=c.check=h(x);A=x=0;c.mode=11;case 11:if(0===c.havedict)return a.next_out=n,a.avail_out=u,a.next_in=g,a.avail_in=m,c.hold=x,c.bits=A,2;a.adler=c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.last){x>>>=A&7;A-=A&7;c.mode=27;break}for(;3>A;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}c.last=x&1;x>>>=1;--A;switch(x&3){case 0:c.mode=
14;break;case 1:C=c;if(l){v=new k.Buf32(512);z=new k.Buf32(32);for(K=0;144>K;)C.lens[K++]=8;for(;256>K;)C.lens[K++]=9;for(;280>K;)C.lens[K++]=7;for(;288>K;)C.lens[K++]=8;E(1,C.lens,0,288,v,0,C.work,{bits:9});for(K=0;32>K;)C.lens[K++]=5;E(2,C.lens,0,32,z,0,C.work,{bits:5});l=!1}C.lencode=v;C.lenbits=9;C.distcode=z;C.distbits=5;c.mode=20;if(6===b){x>>>=2;A-=2;break a}break;case 2:c.mode=17;break;case 3:a.msg="invalid block type",c.mode=30}x>>>=2;A-=2;break;case 14:x>>>=A&7;for(A-=A&7;32>A;){if(0===
m)break a;m--;x+=d[g++]<<A;A+=8}if((x&65535)!==(x>>>16^65535)){a.msg="invalid stored block lengths";c.mode=30;break}c.length=x&65535;A=x=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(C=c.length){C>m&&(C=m);C>u&&(C=u);if(0===C)break a;k.arraySet(e,d,g,C,n);m-=C;g+=C;u-=C;n+=C;c.length-=C;break}c.mode=12;break;case 17:for(;14>A;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}c.nlen=(x&31)+257;x>>>=5;A-=5;c.ndist=(x&31)+1;x>>>=5;A-=5;c.ncode=(x&15)+4;x>>>=4;A-=4;if(286<c.nlen||30<c.ndist){a.msg=
"too many length or distance symbols";c.mode=30;break}c.have=0;c.mode=18;case 18:for(;c.have<c.ncode;){for(;3>A;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}c.lens[O[c.have++]]=x&7;x>>>=3;A-=3}for(;19>c.have;)c.lens[O[c.have++]]=0;c.lencode=c.lendyn;c.lenbits=7;C={bits:c.lenbits};T=E(0,c.lens,0,19,c.lencode,0,c.work,C);c.lenbits=C.bits;if(T){a.msg="invalid code lengths set";c.mode=30;break}c.have=0;c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;;){R=c.lencode[x&(1<<c.lenbits)-1];C=R>>>24;R&=65535;
if(C<=A)break;if(0===m)break a;m--;x+=d[g++]<<A;A+=8}if(16>R)x>>>=C,A-=C,c.lens[c.have++]=R;else{if(16===R){for(K=C+2;A<K;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}x>>>=C;A-=C;if(0===c.have){a.msg="invalid bit length repeat";c.mode=30;break}K=c.lens[c.have-1];C=3+(x&3);x>>>=2;A-=2}else if(17===R){for(K=C+3;A<K;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}x>>>=C;A-=C;K=0;C=3+(x&7);x>>>=3;A-=3}else{for(K=C+7;A<K;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}x>>>=C;A-=C;K=0;C=11+(x&127);x>>>=7;A-=7}if(c.have+
C>c.nlen+c.ndist){a.msg="invalid bit length repeat";c.mode=30;break}for(;C--;)c.lens[c.have++]=K}}if(30===c.mode)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block";c.mode=30;break}c.lenbits=9;C={bits:c.lenbits};T=E(1,c.lens,0,c.nlen,c.lencode,0,c.work,C);c.lenbits=C.bits;if(T){a.msg="invalid literal/lengths set";c.mode=30;break}c.distbits=6;c.distcode=c.distdyn;C={bits:c.distbits};T=E(2,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,C);c.distbits=C.bits;if(T){a.msg="invalid distances set";
c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=m&&258<=u){a.next_out=n;a.avail_out=u;a.next_in=g;a.avail_in=m;c.hold=x;c.bits=A;r(a,w);n=a.next_out;e=a.output;u=a.avail_out;g=a.next_in;d=a.input;m=a.avail_in;x=c.hold;A=c.bits;12===c.mode&&(c.back=-1);break}for(c.back=0;;){R=c.lencode[x&(1<<c.lenbits)-1];C=R>>>24;K=R>>>16&255;R&=65535;if(C<=A)break;if(0===m)break a;m--;x+=d[g++]<<A;A+=8}if(K&&0===(K&240)){N=C;J=K;for(G=R;;){R=c.lencode[G+((x&(1<<N+J)-1)>>N)];C=R>>>24;K=
R>>>16&255;R&=65535;if(N+C<=A)break;if(0===m)break a;m--;x+=d[g++]<<A;A+=8}x>>>=N;A-=N;c.back+=N}x>>>=C;A-=C;c.back+=C;c.length=R;if(0===K){c.mode=26;break}if(K&32){c.back=-1;c.mode=12;break}if(K&64){a.msg="invalid literal/length code";c.mode=30;break}c.extra=K&15;c.mode=22;case 22:if(c.extra){for(K=c.extra;A<K;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}c.length+=x&(1<<c.extra)-1;x>>>=c.extra;A-=c.extra;c.back+=c.extra}c.was=c.length;c.mode=23;case 23:for(;;){R=c.distcode[x&(1<<c.distbits)-1];C=R>>>
24;K=R>>>16&255;R&=65535;if(C<=A)break;if(0===m)break a;m--;x+=d[g++]<<A;A+=8}if(0===(K&240)){N=C;J=K;for(G=R;;){R=c.distcode[G+((x&(1<<N+J)-1)>>N)];C=R>>>24;K=R>>>16&255;R&=65535;if(N+C<=A)break;if(0===m)break a;m--;x+=d[g++]<<A;A+=8}x>>>=N;A-=N;c.back+=N}x>>>=C;A-=C;c.back+=C;if(K&64){a.msg="invalid distance code";c.mode=30;break}c.offset=R;c.extra=K&15;c.mode=24;case 24:if(c.extra){for(K=c.extra;A<K;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}c.offset+=x&(1<<c.extra)-1;x>>>=c.extra;A-=c.extra;c.back+=
c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===u)break a;C=w-u;if(c.offset>C){C=c.offset-C;if(C>c.whave&&c.sane){a.msg="invalid distance too far back";c.mode=30;break}C>c.wnext?(C-=c.wnext,K=c.wsize-C):K=c.wnext-C;C>c.length&&(C=c.length);N=c.window}else N=e,K=n-c.offset,C=c.length;C>u&&(C=u);u-=C;c.length-=C;do e[n++]=N[K++];while(--C);0===c.length&&(c.mode=21);break;case 26:if(0===u)break a;e[n++]=c.length;u--;c.mode=21;break;case 27:if(c.wrap){for(;32>
A;){if(0===m)break a;m--;x|=d[g++]<<A;A+=8}w-=u;a.total_out+=w;c.total+=w;w&&(a.adler=c.check=c.flags?p(c.check,e,w,n-w):f(c.check,e,w,n-w));w=u;if((c.flags?x:h(x))!==c.check){a.msg="incorrect data check";c.mode=30;break}A=x=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;32>A;){if(0===m)break a;m--;x+=d[g++]<<A;A+=8}if(x!==(c.total&4294967295)){a.msg="incorrect length check";c.mode=30;break}A=x=0}c.mode=29;case 29:T=1;break a;case 30:T=-3;break a;case 31:return-4;default:return-2}a.next_out=n;a.avail_out=
u;a.next_in=g;a.avail_in=m;c.hold=x;c.bits=A;if((c.wsize||w!==a.avail_out&&30>c.mode&&(27>c.mode||4!==b))&&q(a,a.output,a.next_out,w-a.avail_out))return c.mode=31,-4;D-=a.avail_in;w-=a.avail_out;a.total_in+=D;a.total_out+=w;c.total+=w;c.wrap&&w&&(a.adler=c.check=c.flags?p(c.check,e,w,a.next_out-w):f(c.check,e,w,a.next_out-w));a.data_type=c.bits+(c.last?64:0)+(12===c.mode?128:0)+(20===c.mode||15===c.mode?256:0);(0===D&&0===w||4===b)&&0===T&&(T=-5);return T};g.inflateEnd=function(a){if(!a||!a.state)return-2;
var b=a.state;b.window&&(b.window=null);a.state=null;return 0};g.inflateGetHeader=function(a,b){if(!a||!a.state)return-2;a=a.state;if(0===(a.wrap&2))return-2;a.head=b;b.done=!1;return 0};g.inflateSetDictionary=function(a,b){var c=b.length,d,e;if(!a||!a.state)return-2;d=a.state;if(0!==d.wrap&&11!==d.mode)return-2;if(11===d.mode&&(e=f(1,b,c,0),e!==d.check))return-3;if(q(a,b,c,c))return d.mode=31,-4;d.havedict=1;return 0};g.inflateInfo="pako inflate (from Nodeca project)"},function(n,g,e){var h=e(4),
m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(d,e,g,f,n,r,E,l){var k=l.bits,p,q,w,t,B,y,I,F,H,u,x,A,S,P=0,C,K=new h.Buf16(16);
B=new h.Buf16(16);var N,R=0,J,G,T;for(p=0;15>=p;p++)K[p]=0;for(q=0;q<f;q++)K[e[g+q]]++;t=k;for(w=15;1<=w&&0===K[w];w--);t>w&&(t=w);if(0===w)return n[r++]=20971520,n[r++]=20971520,l.bits=1,0;for(k=1;k<w&&0===K[k];k++);t<k&&(t=k);for(p=y=1;15>=p;p++)if(y<<=1,y-=K[p],0>y)return-1;if(0<y&&(0===d||1!==w))return-1;B[1]=0;for(p=1;15>p;p++)B[p+1]=B[p]+K[p];for(q=0;q<f;q++)0!==e[g+q]&&(E[B[e[g+q]]++]=q);0===d?(S=N=E,C=19):1===d?(S=m,P-=257,N=c,R-=257,C=256):(S=a,N=b,C=-1);q=F=0;p=k;A=r;f=t;B=0;u=-1;I=1<<t;
x=I-1;if(1===d&&852<I||2===d&&592<I)return 1;for(;;){J=p-B;E[q]<C?(G=0,T=E[q]):E[q]>C?(G=N[R+E[q]],T=S[P+E[q]]):(G=96,T=0);y=1<<p-B;k=H=1<<f;do H-=y,n[A+(F>>B)+H]=J<<24|G<<16|T|0;while(0!==H);for(y=1<<p-1;F&y;)y>>=1;0!==y?(F&=y-1,F+=y):F=0;q++;if(0===--K[p]){if(p===w)break;p=e[g+E[q]]}if(p>t&&(F&x)!==u){0===B&&(B=t);A+=k;f=p-B;for(y=1<<f;f+B<w;){y-=K[f+B];if(0>=y)break;f++;y<<=1}I+=1<<f;if(1===d&&852<I||2===d&&592<I)return 1;u=F&x;n[u]=t<<24|f<<16|A-r|0}}0!==F&&(n[A+F]=p-B<<24|4194304);l.bits=t;return 0}},
function(n,g,e){function h(a){for(var b=a.length;0<=--b;)a[b]=0}function m(a,b,c,d,e){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=d;this.max_length=e;this.has_stree=a&&a.length}function c(a,b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b}function a(a,b){a.pending_buf[a.pending++]=b&255;a.pending_buf[a.pending++]=b>>>8&255}function b(b,c,d){b.bi_valid>16-d?(b.bi_buf|=c<<b.bi_valid&65535,a(b,b.bi_buf),b.bi_buf=c>>16-b.bi_valid,b.bi_valid+=d-16):(b.bi_buf|=c<<b.bi_valid&65535,
b.bi_valid+=d)}function d(a,c,d){b(a,d[2*c],d[2*c+1])}function q(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(0<--b);return c>>>1}function k(a,b,c){var d=Array(16),e=0,f;for(f=1;15>=f;f++)d[f]=e=e+c[f-1]<<1;for(c=0;c<=b;c++)e=a[2*c+1],0!==e&&(a[2*c]=q(d[e]++,e))}function f(a){var b;for(b=0;286>b;b++)a.dyn_ltree[2*b]=0;for(b=0;30>b;b++)a.dyn_dtree[2*b]=0;for(b=0;19>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function p(b){8<b.bi_valid?a(b,b.bi_buf):0<b.bi_valid&&
(b.pending_buf[b.pending++]=b.bi_buf);b.bi_buf=0;b.bi_valid=0}function r(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function E(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len;){e<a.heap_len&&r(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(r(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function l(a,c,e){var f,g,h=0,k,l;if(0!==a.last_lit){do f=a.pending_buf[a.d_buf+2*h]<<8|a.pending_buf[a.d_buf+2*h+1],g=a.pending_buf[a.l_buf+h],h++,0===f?d(a,g,c):(k=S[g],
d(a,k+256+1,c),l=y[k],0!==l&&(g-=P[k],b(a,g,l)),f--,k=256>f?A[f]:A[256+(f>>>7)],d(a,k,e),l=I[k],0!==l&&(f-=C[k],b(a,f,l)));while(h<a.last_lit)}d(a,256,c)}function v(a,b){var c=b.dyn_tree,d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.elems,g,h=-1,l;a.heap_len=0;a.heap_max=573;for(g=0;g<f;g++)0!==c[2*g]?(a.heap[++a.heap_len]=h=g,a.depth[g]=0):c[2*g+1]=0;for(;2>a.heap_len;)l=a.heap[++a.heap_len]=2>h?++h:0,c[2*l]=1,a.depth[l]=0,a.opt_len--,e&&(a.static_len-=d[2*l+1]);b.max_code=h;for(g=
a.heap_len>>1;1<=g;g--)E(a,c,g);l=f;do g=a.heap[1],a.heap[1]=a.heap[a.heap_len--],E(a,c,1),d=a.heap[1],a.heap[--a.heap_max]=g,a.heap[--a.heap_max]=d,c[2*l]=c[2*g]+c[2*d],a.depth[l]=(a.depth[g]>=a.depth[d]?a.depth[g]:a.depth[d])+1,c[2*g+1]=c[2*d+1]=l,a.heap[1]=l++,E(a,c,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];g=b.dyn_tree;l=b.max_code;var d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,f=b.stat_desc.extra_bits,m=b.stat_desc.extra_base,n=b.stat_desc.max_length,G,p,q,u,x=0;for(p=0;15>=
p;p++)a.bl_count[p]=0;g[2*a.heap[a.heap_max]+1]=0;for(b=a.heap_max+1;573>b;b++)G=a.heap[b],p=g[2*g[2*G+1]+1]+1,p>n&&(p=n,x++),g[2*G+1]=p,G>l||(a.bl_count[p]++,q=0,G>=m&&(q=f[G-m]),u=g[2*G],a.opt_len+=u*(p+q),e&&(a.static_len+=u*(d[2*G+1]+q)));if(0!==x){do{for(p=n-1;0===a.bl_count[p];)p--;a.bl_count[p]--;a.bl_count[p+1]+=2;a.bl_count[n]--;x-=2}while(0<x);for(p=n;0!==p;p--)for(G=a.bl_count[p];0!==G;)d=a.heap[--b],d>l||(g[2*d+1]!==p&&(a.opt_len+=(p-g[2*d+1])*g[2*d],g[2*d+1]=p),G--)}k(c,h,a.bl_count)}
function z(a,b,c){var d,e=-1,f,g=b[1],h=0,k=7,l=4;0===g&&(k=138,l=3);b[2*(c+1)+1]=65535;for(d=0;d<=c;d++)f=g,g=b[2*(d+1)+1],++h<k&&f===g||(h<l?a.bl_tree[2*f]+=h:0!==f?(f!==e&&a.bl_tree[2*f]++,a.bl_tree[32]++):10>=h?a.bl_tree[34]++:a.bl_tree[36]++,h=0,e=f,0===g?(k=138,l=3):f===g?(k=6,l=3):(k=7,l=4))}function D(a,c,e){var f,g=-1,h,k=c[1],l=0,m=7,n=4;0===k&&(m=138,n=3);for(f=0;f<=e;f++)if(h=k,k=c[2*(f+1)+1],!(++l<m&&h===k)){if(l<n){do d(a,h,a.bl_tree);while(0!==--l)}else 0!==h?(h!==g&&(d(a,h,a.bl_tree),
l--),d(a,16,a.bl_tree),b(a,l-3,2)):10>=l?(d(a,17,a.bl_tree),b(a,l-3,3)):(d(a,18,a.bl_tree),b(a,l-11,7));l=0;g=h;0===k?(m=138,n=3):h===k?(m=6,n=3):(m=7,n=4)}}function w(a){var b=4093624447,c;for(c=0;31>=c;c++,b>>>=1)if(b&1&&0!==a.dyn_ltree[2*c])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(c=32;256>c;c++)if(0!==a.dyn_ltree[2*c])return 1;return 0}function t(c,d,e,f){b(c,0+(f?1:0),3);p(c);a(c,e);a(c,~e);B.arraySet(c.pending_buf,c.window,d,e,c.pending);c.pending+=
e}var B=e(4),y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=Array(576);h(u);var x=Array(60);h(x);var A=Array(512);h(A);var S=Array(256);h(S);var P=Array(29);h(P);var C=Array(30);h(C);var K,N,R,J=!1;g._tr_init=function(a){if(!J){var b,d,e,g=Array(16);for(e=d=0;28>e;e++)for(P[e]=d,b=0;b<1<<y[e];b++)S[d++]=e;S[d-1]=e;for(e=
d=0;16>e;e++)for(C[e]=d,b=0;b<1<<I[e];b++)A[d++]=e;for(d>>=7;30>e;e++)for(C[e]=d<<7,b=0;b<1<<I[e]-7;b++)A[256+d++]=e;for(b=0;15>=b;b++)g[b]=0;for(b=0;143>=b;)u[2*b+1]=8,b++,g[8]++;for(;255>=b;)u[2*b+1]=9,b++,g[9]++;for(;279>=b;)u[2*b+1]=7,b++,g[7]++;for(;287>=b;)u[2*b+1]=8,b++,g[8]++;k(u,287,g);for(b=0;30>b;b++)x[2*b+1]=5,x[2*b]=q(b,5);K=new m(u,y,257,286,15);N=new m(x,I,0,30,15);R=new m([],F,0,19,7);J=!0}a.l_desc=new c(a.dyn_ltree,K);a.d_desc=new c(a.dyn_dtree,N);a.bl_desc=new c(a.bl_tree,R);a.bi_buf=
0;a.bi_valid=0;f(a)};g._tr_stored_block=t;g._tr_flush_block=function(a,c,d,e){var g,h,k=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=w(a));v(a,a.l_desc);v(a,a.d_desc);z(a,a.dyn_ltree,a.l_desc.max_code);z(a,a.dyn_dtree,a.d_desc.max_code);v(a,a.bl_desc);for(k=18;3<=k&&0===a.bl_tree[2*H[k]+1];k--);a.opt_len+=3*(k+1)+14;g=a.opt_len+3+7>>>3;h=a.static_len+3+7>>>3;h<=g&&(g=h)}else g=h=d+5;if(d+4<=g&&-1!==c)t(a,c,d,e);else if(4===a.strategy||h===g)b(a,2+(e?1:0),3),l(a,u,x);else{b(a,4+(e?1:0),
3);c=a.l_desc.max_code+1;d=a.d_desc.max_code+1;k+=1;b(a,c-257,5);b(a,d-1,5);b(a,k-4,4);for(g=0;g<k;g++)b(a,a.bl_tree[2*H[g]+1],3);D(a,a.dyn_ltree,c-1);D(a,a.dyn_dtree,d-1);l(a,a.dyn_ltree,a.dyn_dtree)}f(a);e&&p(a)};g._tr_tally=function(a,b,c){a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(S[c]+256+1)]++,a.dyn_dtree[2*(256>b?A[b]:A[256+(b>>>7)])]++);
return a.last_lit===a.lit_bufsize-1};g._tr_align=function(c){b(c,2,3);d(c,256,u);16===c.bi_valid?(a(c,c.bi_buf),c.bi_buf=0,c.bi_valid=0):8<=c.bi_valid&&(c.pending_buf[c.pending++]=c.bi_buf&255,c.bi_buf>>=8,c.bi_valid-=8)}},function(n,g,e){function h(c,a){if(0===c.indexOf("data:")){var b=c.indexOf("base64,")+7;c=atob(c.substring(b));for(var b=new Uint8Array(c.length),d=c.length-1;0<=d;d--)b[d]=c.charCodeAt(d);a(b.buffer)}else{var e=new XMLHttpRequest;e.open("GET",c,!0);e.responseType="arraybuffer";
e.onload=function(){a(e.response)};e.send(null)}}g=function(){function c(){this._src=null;this._parser=new m.JpegImage;this.onload=null}c.prototype={get src(){return this._src},set src(a){this.load(a)},get width(){return this._parser.width},get height(){return this._parser.height},load:function(a){this._src=a;h(a,function(a){this.parse(new Uint8Array(a));if(this.onload)this.onload()}.bind(this))},parse:function(a){this._parser.parse(a)},getData:function(a,b){return this._parser.getData(a,b,!1)},copyToImageData:function(a){if(2===
this._parser.numComponents||4<this._parser.numComponents)throw Error("Unsupported amount of components");var b=a.width,c=a.height,e=b*c*4;a=a.data;if(1===this._parser.numComponents)for(var g=this._parser.getData(b,c,!1),c=b=0;b<e;){var f=g[c++];a[b++]=f;a[b++]=f;a[b++]=f;a[b++]=255}else for(g=this._parser.getData(b,c,!0),c=b=0;b<e;)a[b++]=g[c++],a[b++]=g[c++],a[b++]=g[c++],a[b++]=255}};return c}();var m;(function(c){function a(a){for(var b=1,c=0;a>b;)b<<=1,c++;return c}function b(a,b){return a[b]<<
8|a[b+1]}function d(a,b){return(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}function e(a,b,c){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!1});return c}var g=function(){function a(){}function b(a,b){for(var c=0,d=[],e,f,g=16;0<g&&!a[g-1];)g--;d.push({children:[],index:0});var h=d[0],k;for(e=0;e<g;e++){for(f=0;f<a[e];f++){h=d.pop();for(h.children[h.index]=b[c];0<h.index;)h=d.pop();h.index++;for(d.push(h);d.length<=e;)d.push(k={children:[],index:0}),h.children[h.index]=k.children,
h=k;c++}e+1<g&&(d.push(k={children:[],index:0}),h.children[h.index]=k.children,h=k)}return d[0].children}function c(a,b,c,d,e,g,h,k,l){function m(){if(0<t)return t--,v>>t&1;v=a[b++];if(255===v){var c=a[b++];if(c)throw"unexpected marker: "+(v<<8|c).toString(16);}t=7;return v>>>7}function n(a){for(;;){a=a[m()];if("number"===typeof a)return a;if("object"!==typeof a)throw"invalid huffman sequence";}}function p(a){for(var b=0;0<a;)b=b<<1|m(),a--;return b}function q(a){if(1===a)return 1===m()?1:-1;var b=
p(a);return b>=1<<a-1?b:b+(-1<<a)+1}function G(a,b){var c=n(a.huffmanTableDC),c=0===c?0:q(c);a.blockData[b]=a.pred+=c;for(c=1;64>c;){var d=n(a.huffmanTableAC),e=d&15,d=d>>4;if(0===e){if(15>d)break;c+=16}else c+=d,a.blockData[b+f[c]]=q(e),c++}}function r(a,b){var c=n(a.huffmanTableDC),c=0===c?0:q(c)<<l;a.blockData[b]=a.pred+=c}function u(a,b){a.blockData[b]|=m()<<l}function x(a,b){if(0<I)I--;else for(var c=g;c<=h;){var d=n(a.huffmanTableAC),e=d&15,d=d>>4;if(0===e){if(15>d){I=p(d)+(1<<d)-1;break}c+=
16}else c+=d,a.blockData[b+f[c]]=q(e)*(1<<l),c++}}function Q(a,b){for(var c=g,d=0,e;c<=h;){e=f[c];switch(w){case 0:d=n(a.huffmanTableAC);e=d&15;d>>=4;if(0===e)15>d?(I=p(d)+(1<<d),w=4):(d=16,w=1);else{if(1!==e)throw"invalid ACn encoding";A=q(e);w=d?2:3}continue;case 1:case 2:a.blockData[b+e]?a.blockData[b+e]+=m()<<l:(d--,0===d&&(w=2===w?3:0));break;case 3:a.blockData[b+e]?a.blockData[b+e]+=m()<<l:(a.blockData[b+e]=A<<l,w=0);break;case 4:a.blockData[b+e]&&(a.blockData[b+e]+=m()<<l)}c++}4===w&&(I--,
0===I&&(w=0))}var M=c.mcusPerLine,jc=b,v=0,t=0,I=0,w=0,A,F=d.length,C,y,z,B,D;k=c.progressive?0===g?0===k?r:u:0===k?x:Q:G;var H=0;c=1===F?d[0].blocksPerLine*d[0].blocksPerColumn:M*c.mcusPerColumn;e||(e=c);for(var E,P;H<c;){for(y=0;y<F;y++)d[y].pred=0;I=0;if(1===F)for(C=d[0],D=0;D<e;D++)k(C,64*((C.blocksPerLine+1)*(H/C.blocksPerLine|0)+H%C.blocksPerLine)),H++;else for(D=0;D<e;D++){for(y=0;y<F;y++)for(C=d[y],E=C.h,P=C.v,z=0;z<P;z++)for(B=0;B<E;B++)k(C,64*((C.blocksPerLine+1)*((H/M|0)*C.v+z)+(H%M*C.h+
B)));H++}t=0;C=a[b]<<8|a[b+1];if(65280>=C)throw"marker was not found";if(65488<=C&&65495>=C)b+=2;else break}return b-jc}function d(a,b){a=b.blocksPerLine;for(var c=b.blocksPerColumn,d=new Int16Array(64),e=0;e<c;e++)for(var f=0;f<a;f++){for(var g=64*((b.blocksPerLine+1)*e+f),h=d,k=b.quantizationTable,l=b.blockData,m,n,p,q,r,L,O,Q,M,v,ea,w,t=0;64>t;t+=8)M=l[g+t],Q=l[g+t+1],v=l[g+t+2],L=l[g+t+3],n=l[g+t+4],O=l[g+t+5],ea=l[g+t+6],w=l[g+t+7],M*=k[t],0===(Q|v|L|n|O|ea|w)?(M=5793*M+512>>10,h[t]=M,h[t+1]=
M,h[t+2]=M,h[t+3]=M,h[t+4]=M,h[t+5]=M,h[t+6]=M,h[t+7]=M):(Q*=k[t+1],v*=k[t+2],L*=k[t+3],n*=k[t+4],O*=k[t+5],ea*=k[t+6],w*=k[t+7],m=5793*M+128>>8,n=5793*n+128>>8,p=v,q=ea,r=2896*(Q-w)+128>>8,Q=2896*(Q+w)+128>>8,L<<=4,O<<=4,m=m+n+1>>1,n=m-n,M=3784*p+1567*q+128>>8,p=1567*p-3784*q+128>>8,q=M,r=r+O+1>>1,O=r-O,Q=Q+L+1>>1,L=Q-L,m=m+q+1>>1,q=m-q,n=n+p+1>>1,p=n-p,M=2276*r+3406*Q+2048>>12,r=3406*r-2276*Q+2048>>12,Q=M,M=799*L+4017*O+2048>>12,L=4017*L-799*O+2048>>12,O=M,h[t]=m+Q,h[t+7]=m-Q,h[t+1]=n+O,h[t+6]=
n-O,h[t+2]=p+L,h[t+5]=p-L,h[t+3]=q+r,h[t+4]=q-r);for(k=0;8>k;++k)M=h[k],Q=h[k+8],v=h[k+16],L=h[k+24],n=h[k+32],O=h[k+40],ea=h[k+48],w=h[k+56],0===(Q|v|L|n|O|ea|w)?(M=5793*M+8192>>14,M=-2040>M?0:2024<=M?255:M+2056>>4,l[g+k]=M,l[g+k+8]=M,l[g+k+16]=M,l[g+k+24]=M,l[g+k+32]=M,l[g+k+40]=M,l[g+k+48]=M,l[g+k+56]=M):(m=5793*M+2048>>12,n=5793*n+2048>>12,p=v,q=ea,r=2896*(Q-w)+2048>>12,Q=2896*(Q+w)+2048>>12,m=(m+n+1>>1)+4112,n=m-n,M=3784*p+1567*q+2048>>12,p=1567*p-3784*q+2048>>12,q=M,r=r+O+1>>1,O=r-O,Q=Q+L+1>>
1,L=Q-L,m=m+q+1>>1,q=m-q,n=n+p+1>>1,p=n-p,M=2276*r+3406*Q+2048>>12,r=3406*r-2276*Q+2048>>12,Q=M,M=799*L+4017*O+2048>>12,L=4017*L-799*O+2048>>12,O=M,M=m+Q,w=m-Q,Q=n+O,ea=n-O,v=p+L,O=p-L,L=q+r,n=q-r,M=16>M?0:4080<=M?255:M>>4,Q=16>Q?0:4080<=Q?255:Q>>4,v=16>v?0:4080<=v?255:v>>4,L=16>L?0:4080<=L?255:L>>4,n=16>n?0:4080<=n?255:n>>4,O=16>O?0:4080<=O?255:O>>4,ea=16>ea?0:4080<=ea?255:ea>>4,w=16>w?0:4080<=w?255:w>>4,l[g+k]=M,l[g+k+8]=Q,l[g+k+16]=v,l[g+k+24]=L,l[g+k+32]=n,l[g+k+40]=O,l[g+k+48]=ea,l[g+k+56]=w)}return b.blockData}
function e(a){return 0>=a?0:255<=a?255:a}var f=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);a.prototype={parse:function(a){function e(){var b=a[k]<<8|a[k+1];k+=2;return b}function g(){var b=e(),b=a.subarray(k,k+b-2);k+=b.length;return b}function h(a){for(var b=Math.ceil(a.samplesPerLine/8/a.maxH),c=Math.ceil(a.scanLines/8/a.maxV),d=0;d<a.components.length;d++){w=
a.components[d];var e=Math.ceil(Math.ceil(a.samplesPerLine/8)*w.h/a.maxH),g=Math.ceil(Math.ceil(a.scanLines/8)*w.v/a.maxV);w.blockData=new Int16Array(64*c*w.v*(b*w.h+1));w.blocksPerLine=e;w.blocksPerColumn=g}a.mcusPerLine=b;a.mcusPerColumn=c}var k=0,l=null,m=null,n,p,q=[],r=[],v=[],J=e();if(65496!==J)throw"SOI not found";for(J=e();65497!==J;){var G,t;switch(J){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:G=
g();65504===J&&74===G[0]&&70===G[1]&&73===G[2]&&70===G[3]&&0===G[4]&&(l={version:{major:G[5],minor:G[6]},densityUnits:G[7],xDensity:G[8]<<8|G[9],yDensity:G[10]<<8|G[11],thumbWidth:G[12],thumbHeight:G[13],thumbData:G.subarray(14,14+3*G[12]*G[13])});65518===J&&65===G[0]&&100===G[1]&&111===G[2]&&98===G[3]&&101===G[4]&&0===G[5]&&(m={version:G[6],flags0:G[7]<<8|G[8],flags1:G[9]<<8|G[10],transformCode:G[11]});break;case 65499:for(var J=e()+k-2,L;k<J;){var O=a[k++],Q=new Uint16Array(64);if(0===O>>4)for(G=
0;64>G;G++)L=f[G],Q[L]=a[k++];else if(1===O>>4)for(G=0;64>G;G++)L=f[G],Q[L]=e();else throw"DQT: invalid table spec";q[O&15]=Q}break;case 65472:case 65473:case 65474:if(n)throw"Only single frame JPEGs supported";e();n={};n.extended=65473===J;n.progressive=65474===J;n.precision=a[k++];n.scanLines=e();n.samplesPerLine=e();n.components=[];n.componentIds={};G=a[k++];for(J=Q=O=0;J<G;J++){L=a[k];t=a[k+1]>>4;var M=a[k+1]&15;O<t&&(O=t);Q<M&&(Q=M);t=n.components.push({h:t,v:M,quantizationTable:q[a[k+2]]});
n.componentIds[L]=t-1;k+=3}n.maxH=O;n.maxV=Q;h(n);break;case 65476:L=e();for(J=2;J<L;){O=a[k++];Q=new Uint8Array(16);for(G=t=0;16>G;G++,k++)t+=Q[G]=a[k];M=new Uint8Array(t);for(G=0;G<t;G++,k++)M[G]=a[k];J+=17+t;(0===O>>4?v:r)[O&15]=b(Q,M)}break;case 65501:e();p=e();break;case 65498:e();L=a[k++];G=[];for(var w,J=0;J<L;J++)O=n.componentIds[a[k++]],w=n.components[O],O=a[k++],w.huffmanTableDC=v[O>>4],w.huffmanTableAC=r[O&15],G.push(w);J=a[k++];L=a[k++];O=a[k++];J=c(a,k,n,G,p,J,L,O>>4,O&15);k+=J;break;
case 65535:255!==a[k]&&k--;break;default:if(255===a[k-3]&&192<=a[k-2]&&254>=a[k-2])k-=3;else throw"unknown JPEG marker "+J.toString(16);}J=e()}this.width=n.samplesPerLine;this.height=n.scanLines;this.jfif=l;this.adobe=m;this.components=[];for(J=0;J<n.components.length;J++)w=n.components[J],this.components.push({output:d(n,w),scaleX:w.h/n.maxH,scaleY:w.v/n.maxV,blocksPerLine:w.blocksPerLine,blocksPerColumn:w.blocksPerColumn});this.numComponents=this.components.length},_getLinearizedBlockData:function(a,
b){var c=this.width/a,d=this.height/b,e,g,f,h,k,l,n,m,p=this.components.length,q=a*b*p,r=new Uint8Array(q),t=new Uint32Array(a);for(l=0;l<p;l++){e=this.components[l];g=e.scaleX*c;f=e.scaleY*d;n=l;m=e.output;h=e.blocksPerLine+1<<3;for(k=0;k<a;k++)e=0|k*g,t[k]=(e&4294967288)<<3|e&7;for(g=0;g<b;g++)for(e=0|g*f,e=h*(e&4294967288)|(e&7)<<3,k=0;k<a;k++)r[n]=m[e+t[k]],n+=p}if(b=this.decodeTransform)for(l=0;l<q;)for(a=e=0;e<p;e++,l++,a+=2)r[l]=(r[l]*b[a]>>8)+b[a+1];return r},_isColorConversionNeeded:function(){return this.adobe&&
this.adobe.transformCode?!0:3===this.numComponents?!0:!1},_convertYccToRgb:function(a){for(var b,c,d,g=0,f=a.length;g<f;g+=3)b=a[g],c=a[g+1],d=a[g+2],a[g]=e(b-179.456+1.402*d),a[g+1]=e(b+135.459-.344*c-.714*d),a[g+2]=e(b-226.816+1.772*c);return a},_convertYcckToRgb:function(a){for(var b,c,d,g,f=0,h=0,k=a.length;h<k;h+=4){b=a[h];c=a[h+1];d=a[h+2];g=a[h+3];var l=-122.67195406894+c*(-6.60635669420364E-5*c+4.37130475926232E-4*d-5.4080610064599E-5*b+4.8449797120281E-4*g-.154362151871126)+d*(-9.57964378445773E-4*
d+8.17076911346625E-4*b-.00477271405408747*g+1.53380253221734)+b*(9.61250184130688E-4*b-.00266257332283933*g+.48357088451265)+g*(-3.36197177618394E-4*g+.484791561490776),n=107.268039397724+c*(2.19927104525741E-5*c-6.40992018297945E-4*d+6.59397001245577E-4*b+4.26105652938837E-4*g-.176491792462875)+d*(-7.78269941513683E-4*d+.00130872261408275*b+7.70482631801132E-4*g-.151051492775562)+b*(.00126935368114843*b-.00265090189010898*g+.25802910206845)+g*(-3.18913117588328E-4*g-.213742400323665);b=-20.810012546947+
c*(-5.70115196973677E-4*c-2.63409051004589E-5*d+.0020741088115012*b-.00288260236853442*g+.814272968359295)+d*(-1.53496057440975E-5*d-1.32689043961446E-4*b+5.60833691242812E-4*g-.195152027534049)+b*(.00174418132927582*b-.00255243321439347*g+.116935020465145)+g*(-3.43531996510555E-4*g+.24165260232407);a[f++]=e(l);a[f++]=e(n);a[f++]=e(b)}return a},_convertYcckToCmyk:function(a){for(var b,c,d,g=0,f=a.length;g<f;g+=4)b=a[g],c=a[g+1],d=a[g+2],a[g]=e(434.456-b-1.402*d),a[g+1]=e(119.541-b+.344*c+.714*d),
a[g+2]=e(481.816-b-1.772*c);return a},_convertCmykToRgb:function(a){for(var b,c,d,e,g=0,f=1/255/255,h=0,k=a.length;h<k;h+=4){b=a[h];c=a[h+1];d=a[h+2];e=a[h+3];var l=b*(-4.387332384609988*b+54.48615194189176*c+18.82290502165302*d+212.25662451639585*e-72734.4411664936)+c*(1.7149763477362134*c-5.6096736904047315*d-17.873870861415444*e-1401.7366389350734)+d*(-2.5217340131683033*d-21.248923337353073*e+4465.541406466231)-e*(21.86122147463605*e+48317.86113160301),n=b*(8.841041422036149*b+60.118027045597366*
c+6.871425592049007*d+31.159100130055922*e-20220.756542821975)+c*(-15.310361306967817*c+17.575251261109482*d+131.35250912493976*e-48691.05921601825)+d*(4.444339102852739*d+9.8632861493405*e-6341.191035517494)-e*(20.737325471181034*e+47890.15695978492);b=b*(.8842522430003296*b+8.078677503112928*c+30.89978309703729*d-.23883238689178934*e-3616.812083916688)+c*(10.49593273432072*c+63.02378494754052*d+50.606957656360734*e-28620.90484698408)+d*(.03296041114873217*d+115.60384449646641*e-49363.43385999684)-
e*(22.33816807309886*e+45932.16563550634);a[g++]=0<=l?255:-16581375>=l?0:255+l*f|0;a[g++]=0<=n?255:-16581375>=n?0:255+n*f|0;a[g++]=0<=b?255:-16581375>=b?0:255+b*f|0}return a},getData:function(a,b,c){if(4<this.numComponents)throw"Unsupported color mode";a=this._getLinearizedBlockData(a,b);if(3===this.numComponents)return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return c?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(c)return this._convertCmykToRgb(a)}return a}};
return a}();"use strict";var f=function(){function a(a,b,c){this.data=a;this.bp=b;this.dataEnd=c;this.chigh=a[b];this.clow=0;this.byteIn();this.chigh=this.chigh<<7&65535|this.clow>>9&127;this.clow=this.clow<<7&65535;this.ct-=7;this.a=32768}var b=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},
{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,
switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,
nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},
{qe:22017,nmps:46,nlps:46,switchFlag:0}];a.prototype={byteIn:function(){var a=this.data,b=this.bp;255===a[b]?143<a[b+1]?(this.clow+=65280,this.ct=8):(b++,this.clow+=a[b]<<9,this.ct=7,this.bp=b):(b++,this.clow+=b<this.dataEnd?a[b]<<8:65280,this.ct=8,this.bp=b);65535<this.clow&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(a,c){var d=a[c]>>1,e=a[c]&1,d=b[d],g=d.qe,f=this.a-g;if(this.chigh<g)f<g?(f=g,g=e,d=d.nmps):(f=g,g=1^e,1===d.switchFlag&&(e=g),d=d.nlps);else{this.chigh-=g;if(0!==
(f&32768))return this.a=f,e;f<g?(g=1^e,1===d.switchFlag&&(e=g),d=d.nlps):(g=e,d=d.nmps)}do 0===this.ct&&this.byteIn(),f<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--;while(0===(f&32768));this.a=f;a[c]=d<<1|e;return g}};return a}();"use strict";var h=function(){function c(){this.failOnCorruptedImage=!1}function e(a,b,c){a=c.xcb_;c=c.ycb_;var d=1<<a,e=1<<c,g=b.tbx0>>a,f=b.tby0>>c,h=b.tbx1+d-1>>a,k=b.tby1+e-1>>c,l=b.resolution.precinctParameters,n=[],m=[],
p,q,r,G;for(q=f;q<k;q++)for(p=g;p<h;p++)if(r={cbx:p,cby:q,tbx0:d*p,tby0:e*q,tbx1:d*(p+1),tby1:e*(q+1)},r.tbx0_=Math.max(b.tbx0,r.tbx0),r.tby0_=Math.max(b.tby0,r.tby0),r.tbx1_=Math.min(b.tbx1,r.tbx1),r.tby1_=Math.min(b.tby1,r.tby1),G=Math.floor((r.tbx0_-b.tbx0)/l.precinctWidthInSubband)+Math.floor((r.tby0_-b.tby0)/l.precinctHeightInSubband)*l.numprecinctswide,r.precinctNumber=G,r.subbandType=b.type,r.Lblock=3,!(r.tbx1_<=r.tbx0_||r.tby1_<=r.tby0_)){n.push(r);var u=m[G];void 0!==u?(p<u.cbxMin?u.cbxMin=
p:p>u.cbxMax&&(u.cbxMax=p),q<u.cbyMin?u.cbxMin=q:q>u.cbyMax&&(u.cbyMax=q)):m[G]=u={cbxMin:p,cbyMin:q,cbxMax:p,cbyMax:q};r.precinct=u}b.codeblockParameters={codeblockWidth:a,codeblockHeight:c,numcodeblockwide:h-g+1,numcodeblockhigh:k-f+1};b.codeblocks=n;b.precincts=m}function g(a,b,c){var d=[];a=a.subbands;for(var e=0,g=a.length;e<g;e++)for(var f=a[e].codeblocks,h=0,k=f.length;h<k;h++){var l=f[h];l.precinctNumber===b&&d.push(l)}return{layerNumber:c,codeblocks:d}}function h(a){var b=a.tiles[a.currentTile.index],
c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e=0;for(a=0;a<d;a++)e=Math.max(e,b.components[a].codingStyleParameters.decompositionLevelsCount);var f=0,h=0,k=0,l=0;this.nextPacket=function(){for(;f<c;f++){for(;h<=e;h++){for(;k<d;k++){var a=b.components[k];if(!(h>a.codingStyleParameters.decompositionLevelsCount)){for(var a=a.resolutions[h],n=a.precinctParameters.numprecincts;l<n;)return a=g(a,l,f),l++,a;l=0}}k=0}h=0}throw Error("JPX Error: Out of packets");}}function k(a){var b=a.tiles[a.currentTile.index],
c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e=0;for(a=0;a<d;a++)e=Math.max(e,b.components[a].codingStyleParameters.decompositionLevelsCount);var f=0,h=0,k=0,l=0;this.nextPacket=function(){for(;f<=e;f++){for(;h<c;h++){for(;k<d;k++){var a=b.components[k];if(!(f>a.codingStyleParameters.decompositionLevelsCount)){for(var a=a.resolutions[f],n=a.precinctParameters.numprecincts;l<n;)return a=g(a,l,h),l++,a;l=0}}k=0}h=0}throw Error("JPX Error: Out of packets");}}function n(a){var b=a.tiles[a.currentTile.index],
c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e,f,h,k,l=0;for(h=0;h<d;h++)l=Math.max(l,b.components[h].codingStyleParameters.decompositionLevelsCount);var n=new Int32Array(l+1);for(f=0;f<=l;++f){for(h=a=0;h<d;++h){var m=b.components[h].resolutions;f<m.length&&(a=Math.max(a,m[f].precinctParameters.numprecincts))}n[f]=a}k=h=f=e=0;this.nextPacket=function(){for(;f<=l;f++){for(;k<n[f];k++){for(;h<d;h++){var a=b.components[h];if(!(f>a.codingStyleParameters.decompositionLevelsCount||(a=a.resolutions[f],
k>=a.precinctParameters.numprecincts))){for(;e<c;)return a=g(a,k,e),e++,a;e=0}}h=0}k=0}throw Error("JPX Error: Out of packets");}}function m(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e=r(b),f=0,h=0,k=0,l=0,n=0;this.nextPacket=function(){for(;n<e.maxNumHigh;n++){for(;l<e.maxNumWide;l++){for(;k<d;k++){for(var a=b.components[k],m=a.codingStyleParameters.decompositionLevelsCount;h<=m;h++){var p=a.resolutions[h],r=q(l,n,e.components[k].resolutions[h],
e,p);if(null!==r){for(;f<c;)return a=g(p,r,f),f++,a;f=0}}h=0}k=0}l=0}throw Error("JPX Error: Out of packets");}}function p(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e=r(b),f=0,h=0,k=0,l=0,n=0;this.nextPacket=function(){for(;k<d;++k){for(var a=b.components[k],m=e.components[k],p=a.codingStyleParameters.decompositionLevelsCount;n<m.maxNumHigh;n++){for(;l<m.maxNumWide;l++){for(;h<=p;h++){var r=a.resolutions[h],G=q(l,n,m.resolutions[h],m,r);if(null!==
G){for(;f<c;)return a=g(r,G,f),f++,a;f=0}}h=0}l=0}n=0}throw Error("JPX Error: Out of packets");}}function q(a,b,c,d,e){a*=d.minWidth;b*=d.minHeight;return 0!==a%c.width||0!==b%c.height?null:a/c.height+b/c.width*e.precinctParameters.numprecinctswide}function r(a){for(var b=a.components.length,c=Number.MAX_VALUE,d=Number.MAX_VALUE,e=0,g=0,f=Array(b),h=0;h<b;h++){for(var k=a.components[h],l=k.codingStyleParameters.decompositionLevelsCount,n=Array(l+1),m=Number.MAX_VALUE,p=Number.MAX_VALUE,q=0,r=0,u=
1;0<=l;--l){var v=k.resolutions[l],t=u*v.precinctParameters.precinctWidth,w=u*v.precinctParameters.precinctHeight,m=Math.min(m,t),p=Math.min(p,w),q=Math.max(q,v.precinctParameters.numprecinctswide),r=Math.max(r,v.precinctParameters.numprecinctshigh);n[l]={width:t,height:w};u<<=1}c=Math.min(c,m);d=Math.min(d,p);e=Math.max(e,q);g=Math.max(g,r);f[h]={resolutions:n,minWidth:m,minHeight:p,maxNumWide:q,maxNumHigh:r}}return{components:f,minWidth:c,minHeight:d,maxNumWide:e,maxNumHigh:g}}function x(b,c,d,
e){function g(a){for(;n<a;){var b=c[d+k];k++;m?(l=l<<7|b,n+=7,m=!1):(l=l<<8|b,n+=8);255===b&&(m=!0)}n-=a;return l>>>n&(1<<a)-1}function f(a){return 255===c[d+k-1]&&c[d+k]===a?(k+=1,!0):255===c[d+k]&&c[d+k+1]===a?(k+=2,!0):!1}function h(){if(0===g(1))return 1;if(0===g(1))return 2;var a=g(2);if(3>a)return a+3;a=g(5);if(31>a)return a+6;a=g(7);return a+37}var k=0,l,n=0,m=!1,p=b.COD.sopMarkerUsed,q=b.COD.ephMarkerUsed;for(b=b.tiles[b.currentTile.index].packetsIterator;k<e;){n=0;m&&(k++,m=!1);p&&f(145)&&
(k+=4);var r=b.nextPacket();if(g(1)){for(var G=r.layerNumber,u=[],v,t=0,w=r.codeblocks.length;t<w;t++){v=r.codeblocks[t];var J=v.precinct,x=v.cbx-J.cbxMin,L=v.cby-J.cbyMin,T=!1,y=!1,A;if(void 0!==v.included)T=!!g(1);else{var J=v.precinct,z,D;void 0!==J.inclusionTree?z=J.inclusionTree:(A=J.cbxMax-J.cbxMin+1,D=J.cbyMax-J.cbyMin+1,z=new P(A,D,G),D=new E(A,D),J.inclusionTree=z,J.zeroBitPlanesTree=D);if(z.reset(x,L,G))for(;;)if(g(1)){if(A=!z.nextLevel()){T=y=v.included=!0;break}}else{z.incrementValue(G);
break}}if(T){if(y){D=J.zeroBitPlanesTree;for(D.reset(x,L);;)if(g(1)){if(A=!D.nextLevel())break}else D.incrementValue();v.zeroBitPlanes=D.value}for(J=h();g(1);)v.Lblock++;x=a(J);x=g((J<1<<x?x-1:x)+v.Lblock);u.push({codeblock:v,codingpasses:J,dataLength:x})}}n=0;m&&(k++,m=!1);for(q&&f(146);0<u.length;)r=u.shift(),v=r.codeblock,void 0===v.data&&(v.data=[]),v.data.push({data:c,start:d+k,end:d+k+r.dataLength,codingpasses:r.codingpasses}),k+=r.dataLength}}return k}var A={LL:0,LH:1,HL:1,HH:2};c.prototype=
{parse:function(a){if(65359===b(a,0))this.parseCodestream(a,0,a.length);else for(var c=0,e=a.length;c<e;){var g=8,f=d(a,c),h=d(a,c+4),c=c+g;1===f&&(f=4294967296*d(a,c)+d(a,c+4),c+=8,g+=8);0===f&&(f=e-c+g);if(f<g)throw Error("JPX Error: Invalid box field size");g=f-g;f=!0;switch(h){case 1785737832:f=!1;break;case 1668246642:h=a[c];if(1===h)switch(h=d(a,c+3),h){case 16:case 17:case 18:break;default:l("Unknown colorspace "+h)}else 2===h&&v("ICC profile not supported");break;case 1785737827:this.parseCodestream(a,
c,c+g);break;case 1783636E3:218793738!==d(a,c)&&l("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var k=String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255);l("Unsupported header type "+h+" ("+k+")")}f&&(c+=g)}},parseImageProperties:function(a){for(var b=a.getByte();0<=b;){var c=b,b=a.getByte();if(65361===(c<<8|b)){a.skip(4);var b=a.getInt32()>>>0,c=a.getInt32()>>>0,d=a.getInt32()>>>0,e=a.getInt32()>>>0;a.skip(16);a=a.getUint16();
this.width=b-d;this.height=c-e;this.componentsCount=a;this.bitsPerComponent=8;return}}throw Error("JPX Error: No size marker found in JPX stream");},parseCodestream:function(a,c,g){var q={};try{for(var r=!1,u=c;u+1<g;){var G=b(a,u),u=u+2,v=0,t,w,y,T,z,D;switch(G){case 65359:q.mainHeader=!0;break;case 65497:break;case 65361:var v=b(a,u),J={};J.Xsiz=d(a,u+4);J.Ysiz=d(a,u+8);J.XOsiz=d(a,u+12);J.YOsiz=d(a,u+16);J.XTsiz=d(a,u+20);J.YTsiz=d(a,u+24);J.XTOsiz=d(a,u+28);J.YTOsiz=d(a,u+32);var B=b(a,u+36);
J.Csiz=B;var E=[];t=u+38;for(var F=0;F<B;F++){var H={precision:(a[t]&127)+1,isSigned:!!(a[t]&128),XRsiz:a[t+1],YRsiz:a[t+1]},I=H,K=J;I.x0=Math.ceil(K.XOsiz/I.XRsiz);I.x1=Math.ceil(K.Xsiz/I.XRsiz);I.y0=Math.ceil(K.YOsiz/I.YRsiz);I.y1=Math.ceil(K.Ysiz/I.YRsiz);I.width=I.x1-I.x0;I.height=I.y1-I.y0;E.push(H)}q.SIZ=J;q.components=E;for(var P=q,S=E,Z=P.SIZ,aa=void 0,Ua=[],kc=Math.ceil((Z.Xsiz-Z.XTOsiz)/Z.XTsiz),lc=Math.ceil((Z.Ysiz-Z.YTOsiz)/Z.YTsiz),Va=0;Va<lc;Va++)for(var Wa=0;Wa<kc;Wa++)aa={},aa.tx0=
Math.max(Z.XTOsiz+Wa*Z.XTsiz,Z.XOsiz),aa.ty0=Math.max(Z.YTOsiz+Va*Z.YTsiz,Z.YOsiz),aa.tx1=Math.min(Z.XTOsiz+(Wa+1)*Z.XTsiz,Z.Xsiz),aa.ty1=Math.min(Z.YTOsiz+(Va+1)*Z.YTsiz,Z.Ysiz),aa.width=aa.tx1-aa.tx0,aa.height=aa.ty1-aa.ty0,aa.components=[],Ua.push(aa);P.tiles=Ua;for(var Xa=0,mc=Z.Csiz;Xa<mc;Xa++)for(var Ya=S[Xa],lb=0,nc=Ua.length;lb<nc;lb++){var ia={},aa=Ua[lb];ia.tcx0=Math.ceil(aa.tx0/Ya.XRsiz);ia.tcy0=Math.ceil(aa.ty0/Ya.YRsiz);ia.tcx1=Math.ceil(aa.tx1/Ya.XRsiz);ia.tcy1=Math.ceil(aa.ty1/Ya.YRsiz);
ia.width=ia.tcx1-ia.tcx0;ia.height=ia.tcy1-ia.tcy0;aa.components[Xa]=ia}q.QCC=[];q.COC=[];break;case 65372:var v=b(a,u),Ga={};t=u+2;w=a[t++];switch(w&31){case 0:T=8;z=!0;break;case 1:T=16;z=!1;break;case 2:T=16;z=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+w);}Ga.noQuantization=8===T;Ga.scalarExpounded=z;Ga.guardBits=w>>5;for(y=[];t<v+u;){var ja={};8===T?(ja.epsilon=a[t++]>>3,ja.mu=0):(ja.epsilon=a[t]>>3,ja.mu=(a[t]&7)<<8|a[t+1],t+=2);y.push(ja)}Ga.SPqcds=y;q.mainHeader?q.QCD=Ga:
(q.currentTile.QCD=Ga,q.currentTile.QCC=[]);break;case 65373:var v=b(a,u),Ha={};t=u+2;var Za;257>q.SIZ.Csiz?Za=a[t++]:(Za=b(a,t),t+=2);w=a[t++];switch(w&31){case 0:T=8;z=!0;break;case 1:T=16;z=!1;break;case 2:T=16;z=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+w);}Ha.noQuantization=8===T;Ha.scalarExpounded=z;Ha.guardBits=w>>5;for(y=[];t<v+u;)ja={},8===T?(ja.epsilon=a[t++]>>3,ja.mu=0):(ja.epsilon=a[t]>>3,ja.mu=(a[t]&7)<<8|a[t+1],t+=2),y.push(ja);Ha.SPqcds=y;q.mainHeader?q.QCC[Za]=
Ha:q.currentTile.QCC[Za]=Ha;break;case 65362:var v=b(a,u),V={};t=u+2;var mb=a[t++];V.entropyCoderWithCustomPrecincts=!!(mb&1);V.sopMarkerUsed=!!(mb&2);V.ephMarkerUsed=!!(mb&4);V.progressionOrder=a[t++];V.layersCount=b(a,t);t+=2;V.multipleComponentTransform=a[t++];V.decompositionLevelsCount=a[t++];V.xcb=(a[t++]&15)+2;V.ycb=(a[t++]&15)+2;var Ia=a[t++];V.selectiveArithmeticCodingBypass=!!(Ia&1);V.resetContextProbabilities=!!(Ia&2);V.terminationOnEachCodingPass=!!(Ia&4);V.verticalyStripe=!!(Ia&8);V.predictableTermination=
!!(Ia&16);V.segmentationSymbolUsed=!!(Ia&32);V.reversibleTransformation=a[t++];if(V.entropyCoderWithCustomPrecincts){for(var Jb=[];t<v+u;){var Kb=a[t++];Jb.push({PPx:Kb&15,PPy:Kb>>4})}V.precinctsSizes=Jb}var ya=[];V.selectiveArithmeticCodingBypass&&ya.push("selectiveArithmeticCodingBypass");V.resetContextProbabilities&&ya.push("resetContextProbabilities");V.terminationOnEachCodingPass&&ya.push("terminationOnEachCodingPass");V.verticalyStripe&&ya.push("verticalyStripe");V.predictableTermination&&ya.push("predictableTermination");
if(0<ya.length)throw r=!0,Error("JPX Error: Unsupported COD options ("+ya.join(", ")+")");q.mainHeader?q.COD=V:(q.currentTile.COD=V,q.currentTile.COC=[]);break;case 65424:v=b(a,u);D={};D.index=b(a,u+2);D.length=d(a,u+4);D.dataEnd=D.length+u-2;D.partIndex=a[u+8];D.partsCount=a[u+9];q.mainHeader=!1;0===D.partIndex&&(D.COD=q.COD,D.COC=q.COC.slice(0),D.QCD=q.QCD,D.QCC=q.QCC.slice(0));q.currentTile=D;break;case 65427:D=q.currentTile;if(0===D.partIndex){for(var oa=q,oc=oa.SIZ.Csiz,Lb=oa.tiles[D.index],
za=0;za<oc;za++){var Mb=Lb.components[za];Mb.quantizationParameters=void 0!==oa.currentTile.QCC[za]?oa.currentTile.QCC[za]:oa.currentTile.QCD;Mb.codingStyleParameters=void 0!==oa.currentTile.COC[za]?oa.currentTile.COC[za]:oa.currentTile.COD}Lb.codingStyleDefaultParameters=oa.currentTile.COD;for(var fa=q,Aa=fa.tiles[fa.currentTile.index],pc=fa.SIZ.Csiz,nb=0;nb<pc;nb++){for(var W=Aa.components[nb],ob=W.codingStyleParameters.decompositionLevelsCount,Nb=[],Qa=[],Ba=0;Ba<=ob;Ba++){var pa,$a=Ba,Ca=W.codingStyleParameters,
ka={};Ca.entropyCoderWithCustomPrecincts?(ka.PPx=Ca.precinctsSizes[$a].PPx,ka.PPy=Ca.precinctsSizes[$a].PPy):(ka.PPx=15,ka.PPy=15);ka.xcb_=0<$a?Math.min(Ca.xcb,ka.PPx-1):Math.min(Ca.xcb,ka.PPx);ka.ycb_=0<$a?Math.min(Ca.ycb,ka.PPy-1):Math.min(Ca.ycb,ka.PPy);pa=ka;var X={},sa=1<<ob-Ba;X.trx0=Math.ceil(W.tcx0/sa);X.try0=Math.ceil(W.tcy0/sa);X.trx1=Math.ceil(W.tcx1/sa);X.try1=Math.ceil(W.tcy1/sa);X.resLevel=Ba;var pb=1<<pa.PPx,qb=1<<pa.PPy,Ob=0===X.resLevel,Pb=X.trx1>X.trx0?Math.ceil(X.trx1/pb)-Math.floor(X.trx0/
pb):0,Qb=X.try1>X.try0?Math.ceil(X.try1/qb)-Math.floor(X.try0/qb):0;X.precinctParameters={precinctWidth:pb,precinctHeight:qb,numprecinctswide:Pb,numprecinctshigh:Qb,numprecincts:Pb*Qb,precinctWidthInSubband:1<<pa.PPx+(Ob?0:-1),precinctHeightInSubband:1<<pa.PPy+(Ob?0:-1)};Nb.push(X);var U;if(0===Ba)U={type:"LL"},U.tbx0=Math.ceil(W.tcx0/sa),U.tby0=Math.ceil(W.tcy0/sa),U.tbx1=Math.ceil(W.tcx1/sa),U.tby1=Math.ceil(W.tcy1/sa),U.resolution=X,e(fa,U,pa),Qa.push(U),X.subbands=[U];else{var ga=1<<ob-Ba+1,ab=
[];U={type:"HL"};U.tbx0=Math.ceil(W.tcx0/ga-.5);U.tby0=Math.ceil(W.tcy0/ga);U.tbx1=Math.ceil(W.tcx1/ga-.5);U.tby1=Math.ceil(W.tcy1/ga);U.resolution=X;e(fa,U,pa);Qa.push(U);ab.push(U);U={type:"LH"};U.tbx0=Math.ceil(W.tcx0/ga);U.tby0=Math.ceil(W.tcy0/ga-.5);U.tbx1=Math.ceil(W.tcx1/ga);U.tby1=Math.ceil(W.tcy1/ga-.5);U.resolution=X;e(fa,U,pa);Qa.push(U);ab.push(U);U={type:"HH"};U.tbx0=Math.ceil(W.tcx0/ga-.5);U.tby0=Math.ceil(W.tcy0/ga-.5);U.tbx1=Math.ceil(W.tcx1/ga-.5);U.tby1=Math.ceil(W.tcy1/ga-.5);
U.resolution=X;e(fa,U,pa);Qa.push(U);ab.push(U);X.subbands=ab}}W.resolutions=Nb;W.subbands=Qa}var Rb=Aa.codingStyleDefaultParameters.progressionOrder;switch(Rb){case 0:Aa.packetsIterator=new h(fa);break;case 1:Aa.packetsIterator=new k(fa);break;case 2:Aa.packetsIterator=new n(fa);break;case 3:Aa.packetsIterator=new m(fa);break;case 4:Aa.packetsIterator=new p(fa);break;default:throw Error("JPX Error: Unsupported progression order "+Rb);}}v=D.dataEnd-u;x(q,a,u,v);break;case 65365:case 65367:case 65368:case 65380:v=
b(a,u);break;case 65363:throw Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw Error("JPX Error: Unknown codestream code: "+G.toString(16));}u+=v}}catch(Sb){if(r||this.failOnCorruptedImage)throw Sb;l("Trying to recover from "+Sb.message)}for(var Tb=q.components,Ja=q.SIZ.Csiz,Ub=[],rb=0,qc=q.tiles.length;rb<qc;rb++){var sb=q.tiles[rb],Da=[],ha;for(ha=0;ha<Ja;ha++){for(var rc=Da,sc=ha,Ea=sb.components[ha],tb=Ea.codingStyleParameters,ub=Ea.quantizationParameters,tc=tb.decompositionLevelsCount,
bb=ub.SPqcds,uc=ub.scalarExpounded,vc=ub.guardBits,wc=tb.segmentationSymbolUsed,xc=q.components[ha].precision,vb=tb.reversibleTransformation,yc=vb?new R:new N,Vb=[],wb=0,Ra=0;Ra<=tc;Ra++){for(var Ka=Ea.resolutions[Ra],xb=Ka.trx1-Ka.trx0,Wb=Ka.try1-Ka.try0,Xb=new Float32Array(xb*Wb),yb=0,zc=Ka.subbands.length;yb<zc;yb++){var zb,cb;uc?(zb=bb[wb].mu,cb=bb[wb].epsilon,wb++):(zb=bb[0].mu,cb=bb[0].epsilon+(0<Ra?1-Ra:0));for(var Yb=Ka.subbands[yb],Ac=A[Yb.type],Bc=Xb,Zb=xb,ta=Yb,Cc=vb?1:Math.pow(2,xc+Ac-
cb)*(1+zb/2048),Ab=vc+cb-1,$b=vb,Dc=wc,Ec=ta.tbx0,Fc=ta.tby0,db=ta.tbx1-ta.tbx0,ac=ta.codeblocks,Gc="H"===ta.type.charAt(0)?1:0,Hc="H"===ta.type.charAt(1)?Zb:0,Bb=0,Ic=ac.length;Bb<Ic;++Bb){var ma=ac[Bb],eb=ma.tbx1_-ma.tbx0_,Cb=ma.tby1_-ma.tby0_;if(0!==eb&&0!==Cb&&void 0!==ma.data){var qa,fb;qa=new C(eb,Cb,ma.subbandType,ma.zeroBitPlanes,Ab);fb=2;var gb=ma.data,Db=0,bc=0,ba,hb,ua;ba=0;for(hb=gb.length;ba<hb;ba++)ua=gb[ba],Db+=ua.end-ua.start,bc+=ua.codingpasses;var cc=new Uint8Array(Db),Fa=0;ba=0;
for(hb=gb.length;ba<hb;ba++){ua=gb[ba];var dc=ua.data.subarray(ua.start,ua.end);cc.set(dc,Fa);Fa+=dc.length}var Jc=new f(cc,0,Db);qa.setDecoder(Jc);for(ba=0;ba<bc;ba++){switch(fb){case 0:qa.runSignificancePropogationPass();break;case 1:qa.runMagnitudeRefinementPass();break;case 2:qa.runCleanupPass(),Dc&&qa.checkSegmentationSymbol()}fb=(fb+1)%3}var Sa=ma.tbx0_-Ec+(ma.tby0_-Fc)*db,Kc=qa.coefficentsSign,Lc=qa.coefficentsMagnitude,Mc=qa.bitsDecoded,Nc=$b?0:.5,Eb,va,Fb,Fa=0,Oc="LL"!==ta.type;for(ba=0;ba<
Cb;ba++){var Pc=2*(Sa/db|0)*(Zb-db)+Gc+Hc;for(Eb=0;Eb<eb;Eb++)va=Lc[Fa],0!==va&&(va=(va+Nc)*Cc,0!==Kc[Fa]&&(va=-va),Fb=Mc[Fa],Bc[Oc?Pc+(Sa<<1):Sa]=$b&&Fb>=Ab?va:va*(1<<Ab-Fb)),Sa++,Fa++;Sa+=db-eb}}}}Vb.push({width:xb,height:Wb,items:Xb})}var Gb=yc.calculate(Vb,Ea.tcx0,Ea.tcy0);rc[sc]={left:Ea.tcx0,top:Ea.tcy0,width:Gb.width,height:Gb.height,items:Gb.items}}var Ta=Da[0],ra=new Uint8Array(Ta.items.length*Ja),Qc={left:Ta.left,top:Ta.top,width:Ta.width,height:Ta.height,items:ra},ca,La,la,ib,Hb,da=0,Y,
Ma,Na,Oa,Pa,wa,na,xa,jb,kb;if(sb.codingStyleDefaultParameters.multipleComponentTransform){var ec=4===Ja,Ib=Da[0].items,fc=Da[1].items,gc=Da[2].items,Rc=ec?Da[3].items:null;ca=Tb[0].precision-8;La=(128<<ca)+.5;la=255*(1<<ca);Hb=.5*la;ib=-Hb;var Sc=sb.components[0],hc=Ja-3;Ma=Ib.length;if(Sc.codingStyleParameters.reversibleTransformation)for(Y=0;Y<Ma;Y++,da+=hc)Na=Ib[Y]+La,Oa=fc[Y],Pa=gc[Y],na=Na-(Pa+Oa>>2),wa=na+Pa,xa=na+Oa,ra[da++]=0>=wa?0:wa>=la?255:wa>>ca,ra[da++]=0>=na?0:na>=la?255:na>>ca,ra[da++]=
0>=xa?0:xa>=la?255:xa>>ca;else for(Y=0;Y<Ma;Y++,da+=hc)Na=Ib[Y]+La,Oa=fc[Y],Pa=gc[Y],wa=Na+1.402*Pa,na=Na-.34413*Oa-.71414*Pa,xa=Na+1.772*Oa,ra[da++]=0>=wa?0:wa>=la?255:wa>>ca,ra[da++]=0>=na?0:na>=la?255:na>>ca,ra[da++]=0>=xa?0:xa>=la?255:xa>>ca;if(ec)for(Y=0,da=3;Y<Ma;Y++,da+=4)jb=Rc[Y],ra[da]=jb<=ib?0:jb>=Hb?255:jb+La>>ca}else for(ha=0;ha<Ja;ha++){var ic=Da[ha].items;ca=Tb[ha].precision-8;La=(128<<ca)+.5;la=127.5*(1<<ca);ib=-la;da=ha;Y=0;for(Ma=ic.length;Y<Ma;Y++)kb=ic[Y],ra[da]=kb<=ib?0:kb>=la?
255:kb+La>>ca,da+=Ja}Ub.push(Qc)}this.tiles=Ub;this.width=q.SIZ.Xsiz-q.SIZ.XOsiz;this.height=q.SIZ.Ysiz-q.SIZ.YOsiz;this.componentsCount=q.SIZ.Csiz}};var E=function(){function b(b,c){var d=a(Math.max(b,c))+1;this.levels=[];for(var e=0;e<d;e++)this.levels.push({width:b,height:c,items:[]}),b=Math.ceil(b/2),c=Math.ceil(c/2)}b.prototype={reset:function(a,b){for(var c=0,d=0,e;c<this.levels.length;){e=this.levels[c];var g=a+b*e.width;if(void 0!==e.items[g]){d=e.items[g];break}e.index=g;a>>=1;b>>=1;c++}c--;
e=this.levels[c];e.items[e.index]=d;this.currentLevel=c;delete this.value},incrementValue:function(){var a=this.levels[this.currentLevel];a.items[a.index]++},nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];a--;if(0>a)return this.value=c,!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return b}(),P=function(){function b(b,c,d){var e=a(Math.max(b,c))+1;this.levels=[];for(var g=0;g<e;g++){for(var f=new Uint8Array(b*c),h=0,k=f.length;h<k;h++)f[h]=
d;this.levels.push({width:b,height:c,items:f});b=Math.ceil(b/2);c=Math.ceil(c/2)}}b.prototype={reset:function(a,b,c){for(var d=0;d<this.levels.length;){var e=this.levels[d],g=a+b*e.width;e.index=g;e=e.items[g];if(255===e)break;if(e>c)return this.currentLevel=d,this.propagateValues(),!1;a>>=1;b>>=1;d++}this.currentLevel=d-1;return!0},incrementValue:function(a){var b=this.levels[this.currentLevel];b.items[b.index]=a+1;this.propagateValues()},propagateValues:function(){for(var a=this.currentLevel,b=
this.levels[a],c=b.items[b.index];0<=--a;)b=this.levels[a],b.items[b.index]=c},nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];b.items[b.index]=255;a--;if(0>a)return!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return b}(),C=function(){function a(a,e,g,f,h){this.width=a;this.height=e;this.contextLabelTable="HH"===g?d:"HL"===g?c:b;a*=e;this.neighborsSignificance=new Uint8Array(a);this.coefficentsSign=new Uint8Array(a);this.coefficentsMagnitude=
14<h?new Uint32Array(a):6<h?new Uint16Array(a):new Uint8Array(a);this.processingFlags=new Uint8Array(a);h=new Uint8Array(a);if(0!==f)for(e=0;e<a;e++)h[e]=f;this.bitsDecoded=h;this.reset()}var b=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),c=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,
0,0,0,2,3,4,0,6,7,7,0,8,8,8]),d=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);a.prototype={setDecoder:function(a){this.decoder=a},reset:function(){this.contexts=new Int8Array(19);this.contexts[0]=8;this.contexts[17]=92;this.contexts[18]=6},setNeighborsSignificance:function(a,b,c){var d=this.neighborsSignificance,e=this.width,g=this.height,f=0<b;b=b+1<e;var h;0<a&&(h=c-e,f&&(d[h-
1]+=16),b&&(d[h+1]+=16),d[h]+=4);a+1<g&&(h=c+e,f&&(d[h-1]+=16),b&&(d[h+1]+=16),d[h]+=4);f&&(d[c-1]+=1);b&&(d[c+1]+=1);d[c]|=128},runSignificancePropogationPass:function(){for(var a=this.decoder,b=this.width,c=this.height,d=this.coefficentsMagnitude,e=this.coefficentsSign,g=this.neighborsSignificance,f=this.processingFlags,h=this.contexts,k=this.contextLabelTable,l=this.bitsDecoded,n=0;n<c;n+=4)for(var m=0;m<b;m++)for(var p=n*b+m,q=0;4>q;q++,p+=b){var r=n+q;if(r>=c)break;f[p]&=-2;if(!d[p]&&g[p]){if(a.readBit(h,
k[g[p]])){var u=this.decodeSignBit(r,m,p);e[p]=u;d[p]=1;this.setNeighborsSignificance(r,m,p);f[p]|=2}l[p]++;f[p]|=1}}},decodeSignBit:function(a,b,c){var d=this.width,e=this.height,g=this.coefficentsMagnitude,f=this.coefficentsSign,h;h=0<b&&0!==g[c-1];b+1<d&&0!==g[c+1]?(b=f[c+1],h?(h=f[c-1],b=1-b-h):b=1-b-b):h?(h=f[c-1],b=1-h-h):b=0;var k=3*b;h=0<a&&0!==g[c-d];a+1<e&&0!==g[c+d]?(b=f[c+d],h?(h=f[c-d],b=1-b-h+k):b=1-b-b+k):h?(h=f[c-d],b=1-h-h+k):b=k;return 0<=b?this.decoder.readBit(this.contexts,9+b):
this.decoder.readBit(this.contexts,9-b)^1},runMagnitudeRefinementPass:function(){for(var a=this.decoder,b=this.width,c=this.coefficentsMagnitude,d=this.neighborsSignificance,e=this.contexts,g=this.bitsDecoded,f=this.processingFlags,h=b*this.height,k=4*b,l=0,n;l<h;l=n){n=Math.min(h,l+k);for(var m=0;m<b;m++)for(var p=l+m;p<n;p+=b)if(c[p]&&0===(f[p]&1)){var q=16;0!==(f[p]&2)&&(f[p]^=2,q=0===(d[p]&127)?15:14);q=a.readBit(e,q);c[p]=c[p]<<1|q;g[p]++;f[p]|=1}}},runCleanupPass:function(){for(var a=this.decoder,
b=this.width,c=this.height,d=this.neighborsSignificance,e=this.coefficentsMagnitude,g=this.coefficentsSign,f=this.contexts,h=this.contextLabelTable,k=this.bitsDecoded,l=this.processingFlags,n=2*b,m=3*b,p,q=0;q<c;q=p){p=Math.min(q+4,c);for(var r=q*b,u=q+3<c,v=0;v<b;v++){var t=r+v,G=0,w=t,x=q,y;if(u&&0===l[t]&&0===l[t+b]&&0===l[t+n]&&0===l[t+m]&&0===d[t]&&0===d[t+b]&&0===d[t+n]&&0===d[t+m]){if(!a.readBit(f,18)){k[t]++;k[t+b]++;k[t+n]++;k[t+m]++;continue}G=a.readBit(f,17)<<1|a.readBit(f,17);0!==G&&(x=
q+G,w+=G*b);y=this.decodeSignBit(x,v,w);g[w]=y;e[w]=1;this.setNeighborsSignificance(x,v,w);l[w]|=2;w=t;for(t=q;t<=x;t++,w+=b)k[w]++;G++}for(x=q+G;x<p;x++,w+=b)e[w]||0!==(l[w]&1)||(1===a.readBit(f,h[d[w]])&&(y=this.decodeSignBit(x,v,w),g[w]=y,e[w]=1,this.setNeighborsSignificance(x,v,w),l[w]|=2),k[w]++)}}},checkSegmentationSymbol:function(){var a=this.decoder,b=this.contexts;if(10!==(a.readBit(b,17)<<3|a.readBit(b,17)<<2|a.readBit(b,17)<<1|a.readBit(b,17)))throw Error("JPX Error: Invalid segmentation symbol");
}};return a}(),K=function(){function a(){}a.prototype.calculate=function(a,b,c){for(var d=a[0],e=1,g=a.length;e<g;e++)d=this.iterate(d,a[e],b,c);return d};a.prototype.extend=function(a,b,c){var d=b-1,e=b+1,g=b+c-2;b+=c;a[d--]=a[e++];a[b++]=a[g--];a[d--]=a[e++];a[b++]=a[g--];a[d--]=a[e++];a[b++]=a[g--];a[d]=a[e];a[b]=a[g]};a.prototype.iterate=function(a,b,c,d){var e=a.width,g=a.height,f=a.items,h=b.width,k=b.height;b=b.items;var l,n,m,p;for(l=m=0;l<g;l++)for(p=2*l*h,n=0;n<e;n++,m++,p+=2)b[p]=f[m];
a.items=null;a=new Float32Array(h+8);if(1===h){if(0!==(c&1))for(m=p=0;p<k;p++,m+=h)b[m]*=.5}else for(m=p=0;p<k;p++,m+=h)a.set(b.subarray(m,m+h),4),this.extend(a,4,h),this.filter(a,4,h),b.set(a.subarray(4,4+h),m);c=16;e=[];for(l=0;l<c;l++)e.push(new Float32Array(k+8));l=0;a=4+k;if(1===k){if(0!==(d&1))for(d=0;d<h;d++)b[d]*=.5}else for(d=0;d<h;d++){if(0===l){c=Math.min(h-d,c);m=d;for(p=4;p<a;m+=h,p++)for(g=0;g<c;g++)e[g][p]=b[m+g];l=c}l--;m=e[l];this.extend(m,4,k);this.filter(m,4,k);if(0===l)for(m=d-
c+1,p=4;p<a;m+=h,p++)for(g=0;g<c;g++)b[m+g]=e[g][p]}return{width:h,height:k,items:b}};return a}(),N=function(){function a(){K.call(this)}a.prototype=Object.create(K.prototype);a.prototype.filter=function(a,b,c){c>>=1;b|=0;var d,e,g,f;d=b-3;for(e=c+4;e--;d+=2)a[d]*=.8128930661159609;d=b-2;g=.443506852043971*a[d-1];for(e=c+3;e--;d+=2)if(f=.443506852043971*a[d+1],a[d]=1.230174104914001*a[d]-g-f,e--)d+=2,g=.443506852043971*a[d+1],a[d]=1.230174104914001*a[d]-g-f;else break;d=b-1;g=.882911075530934*a[d-
1];for(e=c+2;e--;d+=2)if(f=.882911075530934*a[d+1],a[d]-=g+f,e--)d+=2,g=.882911075530934*a[d+1],a[d]-=g+f;else break;d=b;g=-.052980118572961*a[d-1];for(e=c+1;e--;d+=2)if(f=-.052980118572961*a[d+1],a[d]-=g+f,e--)d+=2,g=-.052980118572961*a[d+1],a[d]-=g+f;else break;if(0!==c)for(d=b+1,g=-1.586134342059924*a[d-1],e=c;e--;d+=2)if(f=-1.586134342059924*a[d+1],a[d]-=g+f,e--)d+=2,g=-1.586134342059924*a[d+1],a[d]-=g+f;else break};return a}(),R=function(){function a(){K.call(this)}a.prototype=Object.create(K.prototype);
a.prototype.filter=function(a,b,c){c>>=1;b|=0;var d,e;d=b;for(e=c+1;e--;d+=2)a[d]-=a[d-1]+a[d+1]+2>>2;d=b+1;for(e=c;e--;d+=2)a[d]+=a[d-1]+a[d+1]>>1};return a}();return c}();"use strict";var m=function(){function c(){}function g(a,b,c){this.data=a;this.start=b;this.end=c}function h(a,b,c){function d(a){for(var b=0,d=0;d<a;d++){var f=c.readBit(e,g);g=256>g?g<<1|f:(g<<1|f)&511|256;b=b<<1|f}return b>>>0}var e=a.getContexts(b),g=1;a=d(1);b=d(1)?d(1)?d(1)?d(1)?d(1)?d(32)+4436:d(12)+340:d(8)+84:d(6)+20:
d(4)+4:d(2);return 0===a?b:0<b?-b:null}function k(a,b,c){a=a.getContexts("IAID");for(var d=1,e=0;e<c;e++)var g=b.readBit(a,d),d=d<<1|g;return 31>c?d&(1<<c)-1:d&2147483647}function l(a,b,c){var d=c.decoder;c=c.contextCache.getContexts("GB");var e,g,f,h,k,l,m,n=[];for(g=0;g<b;g++)for(k=n[g]=new Uint8Array(a),l=1>g?k:n[g-1],m=2>g?k:n[g-2],e=m[0]<<13|m[1]<<12|m[2]<<11|l[0]<<7|l[1]<<6|l[2]<<5|l[3]<<4,f=0;f<a;f++)k[f]=h=d.readBit(c,e),e=(e&31735)<<1|(f+3<a?m[f+3]<<11:0)|(f+4<a?l[f+4]<<4:0)|h;return n}function m(a,
b,c,d,e,g,f,h){a&&n("JBIG2 error: MMR encoding is not supported");if(0===d&&!g&&!e&&4===f.length&&3===f[0].x&&-1===f[0].y&&-3===f[1].x&&-1===f[1].y&&2===f[2].x&&-2===f[2].y&&-2===f[3].x&&-2===f[3].y)return l(b,c,h);a=!!g;var k=E[d].concat(f);k.sort(function(a,b){return a.y-b.y||a.x-b.x});f=k.length;var m=new Int8Array(f),p=new Int8Array(f),q=[],r=0,u=0,t=0,v=0,w,x;for(x=0;x<f;x++)m[x]=k[x].x,p[x]=k[x].y,u=Math.min(u,k[x].x),t=Math.max(t,k[x].x),v=Math.min(v,k[x].y),x<f-1&&k[x].y===k[x+1].y&&k[x].x===
k[x+1].x-1?r|=1<<f-1-x:q.push(x);var y=q.length,z=new Int8Array(y),D=new Int8Array(y),A=new Uint16Array(y);for(w=0;w<y;w++)x=q[w],z[w]=k[x].x,D[w]=k[x].y,A[w]=1<<f-1-x;k=-u;v=-v;t=b-t;d=C[d];q=new Uint8Array(b);u=[];w=h.decoder;h=h.contextCache.getContexts("GB");for(var B=0,G,J,N,I=0,F,H=0;H<c;H++){if(e&&(x=w.readBit(h,d),B^=x)){u.push(q);continue}q=new Uint8Array(q);u.push(q);for(G=0;G<b;G++)if(a&&g[H][G])q[G]=0;else{if(G>=k&&G<t&&H>=v)for(I=I<<1&r,x=0;x<y;x++){if(J=H+D[x],N=G+z[x],J=u[J][N])J=A[x],
I|=J}else for(I=0,F=f-1,x=0;x<f;x++,F--)N=G+m[x],0<=N&&N<b&&(J=H+p[x],0<=J&&(J=u[J][N])&&(I|=J<<F));x=w.readBit(h,I);q[G]=x}}return u}function p(a,b,c,d,e,g,f,h,k){var l=P[c].coding;0===c&&(l=l.concat([h[0]]));var m=l.length,p=new Int32Array(m),q=new Int32Array(m),r;for(r=0;r<m;r++)p[r]=l[r].x,q[r]=l[r].y;var u=P[c].reference;0===c&&(u=u.concat([h[1]]));h=u.length;var l=new Int32Array(h),t=new Int32Array(h);for(r=0;r<h;r++)l[r]=u[r].x,t[r]=u[r].y;var u=d[0].length,v=d.length;c=K[c];var x=[],w=k.decoder;
k=k.contextCache.getContexts("GR");for(var y=0,z=0;z<b;z++){f&&(r=w.readBit(k,c),(y^=r)&&n("JBIG2 error: prediction is not supported"));var D=new Uint8Array(a);x.push(D);for(var A=0;A<a;A++){var G,B,C=0;for(r=0;r<m;r++)G=z+q[r],B=A+p[r],C=0>G||0>B||B>=a?C<<1:C<<1|x[G][B];for(r=0;r<h;r++)G=z+t[r]+g,B=A+l[r]+e,C=0>G||G>=v||0>B||B>=u?C<<1:C<<1|d[G][B];r=w.readBit(k,C);D[A]=r}}return x}function q(a,b,c,d,e,g,f,l,m,q,r,u,t,v,x,w,y){a&&n("JBIG2 error: huffman is not supported");a=[];var z;for(v=0;v<d;v++){z=
new Uint8Array(c);if(e)for(var A=0;A<c;A++)z[A]=e;a.push(z)}d=y.decoder;e=y.contextCache;var A=-h(e,"IADT",d),D=0;for(v=0;v<g;){var B=h(e,"IADT",d),A=A+B,B=h(e,"IAFS",d),B=D+=B;do{var C=1===f?0:h(e,"IAIT",d);z=f*A+C;var C=k(e,d,m),G=b&&h(e,"IARI",d),C=l[C],E=C[0].length,J=C.length;if(G)var G=h(e,"IARDW",d),I=h(e,"IARDH",d),F=h(e,"IARDX",d),H=h(e,"IARDY",d),E=E+G,J=J+I,C=p(E,J,x,C,(G>>1)+F,(I>>1)+H,!1,w,y);var G=z-(u&1?0:J),I=B-(u&2?E:0),N;if(q){for(F=0;F<J;F++)if(z=a[I+F]){N=C[F];var K=Math.min(c-
G,E);switch(t){case 0:for(H=0;H<K;H++)z[G+H]|=N[H];break;case 2:for(H=0;H<K;H++)z[G+H]^=N[H];break;default:n("JBIG2 error: operator "+t+" is not supported")}}B+=J-1}else{for(H=0;H<J;H++)if(z=a[G+H])switch(N=C[H],t){case 0:for(F=0;F<E;F++)z[I+F]|=N[F];break;case 2:for(F=0;F<E;F++)z[I+F]^=N[F];break;default:n("JBIG2 error: operator "+t+" is not supported")}B+=E-1}v++;C=h(e,"IADS",d);if(null===C)break;B+=C+r}while(1)}return a}function r(a,b){return{width:d(a,b),height:d(a,b+4),x:d(a,b+8),y:d(a,b+12),
combinationOperator:a[b+16]&7}}function u(){}function v(){}c.prototype={getContexts:function(a){return a in this?this[a]:this[a]=new Int8Array(65536)}};g.prototype={get decoder(){var a=new f(this.data,this.start,this.end);return e(this,"decoder",a)},get contextCache(){var a=new c;return e(this,"contextCache",a)}};var A=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"patternDictionary",null,
null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,
null,null,"Extension"],E=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,
y:0}]],P=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],C=[39717,1941,229,405],K=[32,8];u.prototype={onPageInformation:function(a){this.currentPageInfo=a;var b=new Uint8Array((a.width+7>>3)*a.height);if(a.defaultPixelValue){a=0;for(var c=b.length;a<c;a++)b[a]=255}this.buffer=
b},drawBitmap:function(a,b){var c=this.currentPageInfo,d=a.width,e=a.height,g=c.width+7>>3,f=c.combinationOperatorOverride?a.combinationOperator:c.combinationOperator,c=this.buffer,h=128>>(a.x&7);a=a.y*g+(a.x>>3);var k,l,m;switch(f){case 0:for(f=0;f<e;f++){l=h;m=a;for(k=0;k<d;k++)b[f][k]&&(c[m]|=l),l>>=1,l||(l=128,m++);a+=g}break;case 2:for(f=0;f<e;f++){l=h;m=a;for(k=0;k<d;k++)b[f][k]&&(c[m]^=l),l>>=1,l||(l=128,m++);a+=g}break;default:n("JBIG2 error: operator "+f+" is not supported")}},onImmediateGenericRegion:function(a,
b,c,d){var e=a.info;b=new g(b,c,d);a=m(a.mmr,e.width,e.height,a.template,a.prediction,null,a.at,b);this.drawBitmap(e,a)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(b,c,d,e,f,l){b.huffman&&n("JBIG2 error: huffman is not supported");var r=this.symbols;r||(this.symbols=r={});for(var u=[],v=0,t=d.length;v<t;v++)u=u.concat(r[d[v]]);l=new g(e,f,l);v=b.huffman;t=b.refinement;d=u;var u=b.numberOfNewSymbols,x=b.template,w=b.at,
z=b.refinementTemplate,y=b.refinementAt;v&&n("JBIG2 error: huffman is not supported");b=[];var A=0,D=a(d.length+u);e=l.decoder;for(f=l.contextCache;b.length<u;)for(var C=h(f,"IADH",e),A=A+C,C=0;;){var B=h(f,"IADW",e);if(null===B)break;C+=B;if(t)if(B=h(f,"IAAI",e),1<B)B=q(v,t,C,A,0,B,1,d.concat(b),D,0,0,1,0,void 0,z,y,l);else var B=k(f,e,D),E=h(f,"IARDX",e),F=h(f,"IARDY",e),B=p(C,A,z,B<d.length?d[B]:b[B-d.length],E,F,!1,y,l);else B=m(!1,C,A,x,!1,null,w,l);b.push(B)}l=[];v=[];t=!1;for(x=d.length+u;v.length<
x;){for(w=h(f,"IAEX",e);w--;)v.push(t);t=!t}e=0;for(f=d.length;e<f;e++)v[e]&&l.push(d[e]);for(d=0;d<u;e++,d++)v[e]&&l.push(b[d]);r[c]=l},onImmediateTextRegion:function(b,c,d,e,f){for(var h=b.info,k=this.symbols,l=[],m=0,n=c.length;m<n;m++)l=l.concat(k[c[m]]);c=a(l.length);d=new g(d,e,f);b=q(b.huffman,b.refinement,h.width,h.height,b.defaultPixelValue,b.numberOfSymbolInstances,b.stripSize,l,c,b.transposed,b.dsOffset,b.referenceCorner,b.combinationOperator,void 0,b.refinementTemplate,b.refinementAt,
d);this.drawBitmap(h,b)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)}};v.prototype={parseChunks:function(a){for(var c=new u,e=0,g=a.length;e<g;e++){for(var f=a[e],h={},k=f.data,l=f.end,m=[],p=f.start;p<l;){var f=k,q=p,p={};p.number=d(f,q);var v=f[q+4],t=v&63;A[t]||n("JBIG2 error: invalid segment type: "+t);p.type=t;p.typeName=A[t];p.deferredNonRetain=!!(v&128);var v=!!(v&64),x=f[q+5],w=x>>5&7,z=[x&31],q=q+6;if(7===x)for(w=d(f,q-1)&536870911,q+=3,x=w+7>>
3,z[0]=f[q++];0<--x;)z.push(f[q++]);else 5!==x&&6!==x||n("JBIG2 error: invalid referred-to flags");p.retainBits=z;for(var x=256>=p.number?1:65536>=p.number?2:4,y=[],z=0;z<w;z++){var D=1===x?f[q]:2===x?b(f,q):d(f,q);y.push(D);q+=x}p.referredTo=y;v?(p.pageAssociation=d(f,q),q+=4):p.pageAssociation=f[q++];p.length=d(f,q);q+=4;if(4294967295===p.length)if(38===t){v=r(f,q);w=!!(f[q+17]&1);t=new Uint8Array(6);w||(t[0]=255,t[1]=172);t[2]=v.height>>>24&255;t[3]=v.height>>16&255;t[4]=v.height>>8&255;t[5]=v.height&
255;z=q;for(v=f.length;z<v;z++){for(w=0;6>w&&t[w]===f[z+w];)w++;if(6===w){p.length=z+6;break}}4294967295===p.length&&n("JBIG2 error: segment end was not found")}else n("JBIG2 error: invalid unknown segment length");p.headerEnd=q;f=p;p=f.headerEnd;q={header:f,data:k};h.randomAccess||(q.start=p,p+=f.length,q.end=p);m.push(q);if(51===f.type)break}if(h.randomAccess)for(h=0,k=m.length;h<k;h++)m[h].start=p,p+=m[h].header.length,m[h].end=p;h=c;k=0;for(l=m.length;k<l;k++){v=m[k];f=h;p=v.header;q=v.data;t=
v.start;v=v.end;w=void 0;switch(p.type){case 0:y={};w=b(q,t);y.huffman=!!(w&1);y.refinement=!!(w&2);y.huffmanDHSelector=w>>2&3;y.huffmanDWSelector=w>>4&3;y.bitmapSizeSelector=w>>6&1;y.aggregationInstancesSelector=w>>7&1;y.bitmapCodingContextUsed=!!(w&256);y.bitmapCodingContextRetained=!!(w&512);y.template=w>>10&3;y.refinementTemplate=w>>12&1;t+=2;if(!y.huffman){x=0===y.template?4:1;w=[];for(z=0;z<x;z++)w.push({x:q[t]<<24>>24,y:q[t+1]<<24>>24}),t+=2;y.at=w}if(y.refinement&&!y.refinementTemplate){w=
[];for(z=0;2>z;z++)w.push({x:q[t]<<24>>24,y:q[t+1]<<24>>24}),t+=2;y.refinementAt=w}y.numberOfExportedSymbols=d(q,t);t+=4;y.numberOfNewSymbols=d(q,t);w=[y,p.number,p.referredTo,q,t+4,v];break;case 6:case 7:x={};x.info=r(q,t);t+=17;w=b(q,t);t+=2;x.huffman=!!(w&1);x.refinement=!!(w&2);x.stripSize=1<<(w>>2&3);x.referenceCorner=w>>4&3;x.transposed=!!(w&64);x.combinationOperator=w>>7&3;x.defaultPixelValue=w>>9&1;x.dsOffset=w<<17>>27;x.refinementTemplate=w>>15&1;x.huffman&&(w=b(q,t),t+=2,x.huffmanFS=w&3,
x.huffmanDS=w>>2&3,x.huffmanDT=w>>4&3,x.huffmanRefinementDW=w>>6&3,x.huffmanRefinementDH=w>>8&3,x.huffmanRefinementDX=w>>10&3,x.huffmanRefinementDY=w>>12&3,x.huffmanRefinementSizeSelector=!!(w&14));if(x.refinement&&!x.refinementTemplate){w=[];for(z=0;2>z;z++)w.push({x:q[t]<<24>>24,y:q[t+1]<<24>>24}),t+=2;x.refinementAt=w}x.numberOfSymbolInstances=d(q,t);t+=4;x.huffman&&n("JBIG2 error: huffman is not supported");w=[x,p.referredTo,q,t,v];break;case 38:case 39:y={};y.info=r(q,t);t+=17;w=q[t++];y.mmr=
!!(w&1);y.template=w>>1&3;y.prediction=!!(w&8);if(!y.mmr){x=0===y.template?4:1;w=[];for(z=0;z<x;z++)w.push({x:q[t]<<24>>24,y:q[t+1]<<24>>24}),t+=2;y.at=w}w=[y,q,t,v];break;case 48:v={width:d(q,t),height:d(q,t+4),resolutionX:d(q,t+8),resolutionY:d(q,t+12)};4294967295===v.height&&delete v.height;w=q[t+16];b(q,t+17);v.lossless=!!(w&1);v.refinement=!!(w&2);v.defaultPixelValue=w>>2&1;v.combinationOperator=w>>3&3;v.requiresBuffer=!!(w&32);v.combinationOperatorOverride=!!(w&64);w=[v];break;case 49:break;
case 50:break;case 51:break;case 62:break;default:n("JBIG2 error: segment type "+p.typeName+"("+p.type+") is not implemented")}p="on"+p.typeName;p in f&&f[p].apply(f,w)}}return c}};return v}(),n=function(){console.error.apply(console,arguments);throw Error("PDFJS error: "+arguments[0]);},l=function(){console.warn.apply(console,arguments)},v=function(){console.info.apply(console,arguments)};m.prototype.parse=function(a){var b=0,c=a.length;151===a[b]&&74===a[b+1]&&66===a[b+2]&&50===a[b+3]&&13===a[b+
4]&&10===a[b+5]&&26===a[b+6]&&10===a[b+7]||n("JBIG2 error: invalid header");b+=8;a[b++]&2||(d(a,b),b+=4);a=this.parseChunks([{data:a,start:b,end:c}]);var b=a.currentPageInfo.width,c=a.currentPageInfo.height,e=a.buffer;a=new Uint8Array(b*c);for(var f=0,g=0,h=0;h<c;h++)for(var k=0,l,m=0;m<b;m++)k||(k=128,l=e[g++]),a[f++]=l&k?0:255,k>>=1;this.width=b;this.height=c;this.data=a};c.JpegImage=g;c.JpxImage=h;c.Jbig2Image=m})(m||(m={}));n.exports={JpegImage:g,JpegDecoder:m.JpegImage,JpxDecoder:m.JpxImage,
Jbig2Decoder:m.Jbig2Image}},function(n,g,e){e(54);e(2);e(21);e(46);e(30);e(48);e(52);e(50);e(51);e(49);e(53);n.exports=e(47)}]);
