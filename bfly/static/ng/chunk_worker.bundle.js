/*

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2015 Mozilla Foundation

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(n,f,k){n!=Array.prototype&&n!=Object.prototype&&(n[f]=k.value)};$jscomp.getGlobal=function(n){return"undefined"!=typeof window&&window===n?n:"undefined"!=typeof global&&null!=global?global:n};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(n){return $jscomp.SYMBOL_PREFIX+(n||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var n=$jscomp.global.Symbol.iterator;n||(n=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[n]&&$jscomp.defineProperty(Array.prototype,n,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(n){var f=0;return $jscomp.iteratorPrototype(function(){return f<n.length?{done:!1,value:n[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(n){$jscomp.initSymbolIterator();n={next:n};n[$jscomp.global.Symbol.iterator]=function(){return this};return n};$jscomp.makeIterator=function(n){$jscomp.initSymbolIterator();$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=n[Symbol.iterator];return f?f.call(n):$jscomp.arrayIterator(n)};$jscomp.arrayFromIterator=function(n){for(var f,k=[];!(f=n.next()).done;)k.push(f.value);return k};$jscomp.arrayFromIterable=function(n){return n instanceof Array?n:$jscomp.arrayFromIterator($jscomp.makeIterator(n))};
$jscomp.owns=function(n,f){return Object.prototype.hasOwnProperty.call(n,f)};$jscomp.polyfill=function(n,f,k,g){if(f){k=$jscomp.global;n=n.split(".");for(g=0;g<n.length-1;g++){var e=n[g];e in k||(k[e]={});k=k[e]}n=n[n.length-1];g=k[n];f=f(g);f!=g&&null!=f&&$jscomp.defineProperty(k,n,{configurable:!0,writable:!0,value:f})}};
$jscomp.polyfill("WeakMap",function(n){function f(a){$jscomp.owns(a,g)||$jscomp.defineProperty(a,g,{value:{}})}function k(a){var b=Object[a];b&&(Object[a]=function(a){f(a);return b(a)})}if(function(){if(!n||!Object.seal)return!1;try{var a=Object.seal({}),b=Object.seal({}),d=new n([[a,2],[b,3]]);if(2!=d.get(a)||3!=d.get(b))return!1;d.delete(a);d.set(b,4);return!d.has(a)&&4==d.get(b)}catch(m){return!1}}())return n;var g="$jscomp_hidden_"+Math.random().toString().substring(2);k("freeze");k("preventExtensions");
k("seal");var e=0,c=function(a){this.id_=(e+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};c.prototype.set=function(a,b){f(a);if(!$jscomp.owns(a,g))throw Error("WeakMap key fail: "+a);a[g][this.id_]=b;return this};c.prototype.get=function(a){return $jscomp.owns(a,g)?a[g][this.id_]:void 0};c.prototype.has=function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)};c.prototype.delete=
function(a){return $jscomp.owns(a,g)&&$jscomp.owns(a[g],this.id_)?delete a[g][this.id_]:!1};return c},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(n){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!n||!n.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),d=new n($jscomp.makeIterator([[a,"s"]]));if("s"!=d.get(a)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var c=d.entries(),h=c.next();if(h.done||h.value[0]!=a||"s"!=h.value[1])return!1;h=c.next();return h.done||4!=h.value[0].x||"t"!=h.value[1]||!c.next().done?!1:!0}catch(t){return!1}}())return n;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var f=new WeakMap,k=function(a){this.data_={};this.head_=c();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};k.prototype.set=function(a,d){var b=g(this,a);b.list||(b.list=this.data_[b.id]=[]);b.entry?b.entry.value=d:(b.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:d},b.list.push(b.entry),this.head_.previous.next=b.entry,this.head_.previous=b.entry,this.size++);return this};k.prototype.delete=
function(a){a=g(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};k.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=c();this.size=0};k.prototype.has=function(a){return!!g(this,a).entry};k.prototype.get=function(a){return(a=g(this,a).entry)&&a.value};k.prototype.entries=function(){return e(this,function(a){return[a.key,
a.value]})};k.prototype.keys=function(){return e(this,function(a){return a.key})};k.prototype.values=function(){return e(this,function(a){return a.value})};k.prototype.forEach=function(a,d){for(var b=this.entries(),c;!(c=b.next()).done;)c=c.value,a.call(d,c[1],c[0],this)};k.prototype[Symbol.iterator]=k.prototype.entries;var g=function(b,d){var c=d&&typeof d;"object"==c||"function"==c?f.has(d)?c=f.get(d):(c=""+ ++a,f.set(d,c)):c="p_"+d;var h=b.data_[c];if(h&&$jscomp.owns(b.data_,c))for(b=0;b<h.length;b++){var t=
h[b];if(d!==d&&t.key!==t.key||d===t.key)return{id:c,list:h,index:b,entry:t}}return{id:c,list:h,index:-1,entry:void 0}},e=function(a,d){var b=a.head_;return $jscomp.iteratorPrototype(function(){if(b){for(;b.head!=a.head_;)b=b.previous;for(;b.next!=b.head;)return b=b.next,{done:!1,value:d(b)};b=null}return{done:!0,value:void 0}})},c=function(){var a={};return a.previous=a.next=a.head=a},a=0;return k},"es6","es3");
$jscomp.polyfill("Number.isNaN",function(n){return n?n:function(f){return"number"===typeof f&&isNaN(f)}},"es6","es3");$jscomp.polyfill("Number.isFinite",function(n){return n?n:function(f){return"number"!==typeof f?!1:!isNaN(f)&&Infinity!==f&&-Infinity!==f}},"es6","es3");
$jscomp.iteratorFromArray=function(n,f){$jscomp.initSymbolIterator();n instanceof String&&(n+="");var k=0,g={next:function(){if(k<n.length){var e=k++;return{value:f(e,n[e]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};$jscomp.polyfill("Array.prototype.keys",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},"es6","es3");
$jscomp.polyfill("Number.isInteger",function(n){return n?n:function(f){return Number.isFinite(f)?f===Math.floor(f):!1}},"es6","es3");$jscomp.polyfill("Array.from",function(n){return n?n:function(f,k,g){$jscomp.initSymbolIterator();k=null!=k?k:function(a){return a};var e=[],c=f[Symbol.iterator];if("function"==typeof c)for(f=c.call(f);!(c=f.next()).done;)e.push(k.call(g,c.value));else{c=f.length;for(var a=0;a<c;a++)e.push(k.call(g,f[a]))}return e}},"es6","es3");
$jscomp.checkStringArgs=function(n,f,k){if(null==n)throw new TypeError("The 'this' value for String.prototype."+k+" must not be null or undefined");if(f instanceof RegExp)throw new TypeError("First argument to String.prototype."+k+" must not be a regular expression");return n+""};
$jscomp.polyfill("String.prototype.startsWith",function(n){return n?n:function(f,k){var g=$jscomp.checkStringArgs(this,f,"startsWith");f+="";var e=g.length,c=f.length;k=Math.max(0,Math.min(k|0,g.length));for(var a=0;a<c&&k<e;)if(g[k++]!=f[a++])return!1;return a>=c}},"es6","es3");$jscomp.polyfill("Math.log2",function(n){return n?n:function(f){return Math.log(f)/Math.LN2}},"es6","es3");
$jscomp.polyfill("String.prototype.repeat",function(n){return n?n:function(f){var k=$jscomp.checkStringArgs(this,null,"repeat");if(0>f||1342177279<f)throw new RangeError("Invalid count value");f|=0;for(var g="";f;)if(f&1&&(g+=k),f>>>=1)k+=k;return g}},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(n){function f(){this.batch_=null}function k(a){return a instanceof e?a:new e(function(b,d){b(a)})}if(n&&!$jscomp.FORCE_POLYFILL_PROMISE)return n;f.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};f.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var g=$jscomp.global.setTimeout;f.prototype.asyncExecuteFunction=function(a){g(a,
0)};f.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var d=a[b];delete a[b];try{d()}catch(m){this.asyncThrow_(m)}}}this.batch_=null};f.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(d){b.reject(d)}};e.prototype.createResolveAndReject_=
function(){function a(a){return function(c){d||(d=!0,a.call(b,c))}}var b=this,d=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(d){this.reject_(d);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var c=new f;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var d=this.createResolveAndReject_();try{a.call(b,d.resolve,d.reject)}catch(m){d.reject(m)}};e.prototype.then=function(a,b){function d(a,b){return"function"==typeof a?function(b){try{c(a(b))}catch(l){h(l)}}:b}var c,h,t=new e(function(a,
b){c=a;h=b});this.callWhenSettled_(d(a,c),d(b,h));return t};e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function d(){switch(m.state_){case 1:a(m.result_);break;case 2:b(m.result_);break;default:throw Error("Unexpected state: "+m.state_);}}var m=this;null==this.onSettledCallbacks_?c.asyncExecute(d):this.onSettledCallbacks_.push(function(){c.asyncExecute(d)})};e.resolve=k;e.reject=function(a){return new e(function(b,d){d(a)})};e.race=function(a){return new e(function(b,
d){for(var c=$jscomp.makeIterator(a),h=c.next();!h.done;h=c.next())k(h.value).callWhenSettled_(b,d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?k([]):new e(function(a,c){function h(b){return function(d){r[b]=d;m--;0==m&&a(r)}}var r=[],m=0;do r.push(void 0),m++,k(d.value).callWhenSettled_(h(r.length-1),c),d=b.next();while(!d.done)})};return e},"es6","es3");
$jscomp.polyfill("Set",function(n){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!n||!n.prototype.entries||"function"!=typeof Object.seal)return!1;try{var f=Object.seal({x:4}),g=new n($jscomp.makeIterator([f]));if(!g.has(f)||1!=g.size||g.add(f)!=g||1!=g.size||g.add({x:4})!=g||2!=g.size)return!1;var e=g.entries(),c=e.next();if(c.done||c.value[0]!=f||c.value[1]!=f)return!1;c=e.next();return c.done||c.value[0]==f||4!=c.value[0].x||c.value[1]!=c.value[0]?!1:e.next().done}catch(a){return!1}}())return n;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=function(f){this.map_=new Map;if(f){f=$jscomp.makeIterator(f);for(var g;!(g=f.next()).done;)this.add(g.value)}this.size=this.map_.size};f.prototype.add=function(f){this.map_.set(f,f);this.size=this.map_.size;return this};f.prototype.delete=function(f){f=this.map_.delete(f);this.size=this.map_.size;return f};f.prototype.clear=function(){this.map_.clear();this.size=0};f.prototype.has=function(f){return this.map_.has(f)};f.prototype.entries=function(){return this.map_.entries()};
f.prototype.values=function(){return this.map_.values()};f.prototype.keys=f.prototype.values;f.prototype[Symbol.iterator]=f.prototype.values;f.prototype.forEach=function(f,g){var e=this;this.map_.forEach(function(c){return f.call(g,c,c,e)})};return f},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(f,k){return k})}},"es6","es3");
$jscomp.polyfill("Object.assign",function(n){return n?n:function(f,k){for(var g=1;g<arguments.length;g++){var e=arguments[g];if(e)for(var c in e)$jscomp.owns(e,c)&&(f[c]=e[c])}return f}},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(n){return n?n:function(){return $jscomp.iteratorFromArray(this,function(f,k){return[f,k]})}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(n){return n?n:function(f,k,g){var e=this.length||0;0>k&&(k=Math.max(0,e+k));if(null==g||g>e)g=e;g=Number(g);0>g&&(g=Math.max(0,e+g));for(k=Number(k||0);k<g;k++)this[k]=f;return this}},"es6","es3");
$jscomp.polyfill("Array.prototype.copyWithin",function(n){return n?n:function(f,k,g){var e=this.length;f=Number(f);k=Number(k);g=Number(null!=g?g:e);if(f<k)for(g=Math.min(g,e);k<g;)k in this?this[f++]=this[k++]:(delete this[f++],k++);else for(g=Math.min(g,e+k-f),f+=g-k;g>k;)--g in this?this[--f]=this[g]:delete this[f];return this}},"es6","es3");
(function(n){function f(g){if(k[g])return k[g].exports;var e=k[g]={i:g,l:!1,exports:{}};n[g].call(e.exports,e,e.exports,f);e.l=!0;return e.exports}var k={};f.m=n;f.c=k;f.d=function(g,e,c){f.o(g,e)||Object.defineProperty(g,e,{configurable:!1,enumerable:!0,get:c})};f.n=function(g){var e=g&&g.__esModule?function(){return g["default"]}:function(){return g};f.d(e,"a",e);return e};f.o=function(g,e){return Object.prototype.hasOwnProperty.call(g,e)};f.p="";return f(f.s=50)})([function(n,f,k){function g(a,
b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){t.set(a,b)}function b(a,b,d){d=void 0===d?{}:d;null!=b&&a.initializeSharedObject(b,d.id)}f.f=a;f.e=function(b,c){a(b,function(a){var b=this,l=a.id,h=new d.b;a=c.call(this,a,h);this.set(l,{promise:a,cancellationToken:h});a.then(function(a){var d=a.value;a=a.transfers;b.delete(l);b.invoke("rpc.promise.response",{id:l,value:d},a)},function(a){b.delete(l);b.invoke("rpc.promise.response",{id:l,error:a.message,errorName:a.name})})})};k.d(f,"a",function(){return p});
k.d(f,"b",function(){return x});f.d=b;k.d(f,"c",function(){return l});f.g=function(a){return function(b){v.set(a,b);b.prototype.RPC_TYPE_ID=a}};var d=k(14);n=k(30);var m=function w(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return w(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},h=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||
!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),t=new Map,r=function(a){function b(a,d){g(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,d));c.name=a;c.message=d;return c}c(b,a);return b}(Error);a("rpc.promise.cancel",function(a){this.get(a.id).cancellationToken.cancel()});a("rpc.promise.response",function(a){var b=a.id,c=this.get(b),l=c.resolve;c=c.reject;this.delete(b);a.hasOwnProperty("value")?
l(a.value):a.errorName===d.a.name?c(d.a):c(new r(a.errorName,a.error))});var p=function(){function a(b){var d=this;g(this,a);this.target=b;this.objects=new Map;this.nextId=-1;b.onmessage=function(a){a=a.data;t.get(a.functionName).call(d,a)}}h(a,[{key:"set",value:function(a,b){this.objects.set(a,b)}},{key:"delete",value:function(a){this.objects.delete(a)}},{key:"get",value:function(a){return this.objects.get(a)}},{key:"getRef",value:function(a){var b=this.get(a.id);b.referencedGeneration=a.gen;b.addRef();
return b}},{key:"invoke",value:function(a,b,d){b.functionName=a;this.target.postMessage(b,d)}},{key:"promiseInvoke",value:function(a,b,c,l){var u=this;c=void 0===c?d.d:c;return Object(d.c)(c,function(d,c,q){var h=b.id=u.newId();u.set(h,{resolve:d,reject:c});u.invoke(a,b,l);q.add(function(){u.invoke("rpc.promise.cancel",{id:h})})})}},{key:"newId",value:function(){return this.nextId--}},{key:"numObjects",get:function(){return this.objects.size}}]);return a}(),x=function(a){function b(){g(this,b);var a=
e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.rpc=null;a.rpcId=null;return a}c(b,a);h(b,[{key:"initializeSharedObject",value:function(a,b){b=void 0===b?a.newId():b;this.rpc=a;this.rpcId=b;this.isOwner=!1;a.set(b,this)}},{key:"initializeCounterpart",value:function(a,b){b=void 0===b?{}:b;this.initializeSharedObject(a);this.referencedGeneration=this.unreferencedGeneration=0;this.isOwner=!0;b.id=this.rpcId;b.type=this.RPC_TYPE_ID;a.invoke("SharedObject.new",b)}},{key:"dispose",
value:function(){m(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispose",this).call(this)}},{key:"addCounterpartRef",value:function(){return{id:this.rpcId,gen:++this.referencedGeneration}}},{key:"refCountReachedZero",value:function(){!0===this.isOwner?this.referencedGeneration===this.unreferencedGeneration&&this.ownerDispose():!1===this.isOwner?this.rpc.invoke("SharedObject.refCountReachedZero",{id:this.rpcId,gen:this.referencedGeneration}):m(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),
"refCountReachedZero",this).call(this)}},{key:"ownerDispose",value:function(){var a=this.rpc,d=this.rpcId;m(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"refCountReachedZero",this).call(this);a.delete(d);a.invoke("SharedObject.dispose",{id:d})}},{key:"counterpartRefCountReachedZero",value:function(a){this.unreferencedGeneration=a;0===this.refCount&&a===this.referencedGeneration&&this.ownerDispose()}}]);return b}(n.a),l=function(a){function d(a,c){c=void 0===c?{}:c;g(this,d);var l=e(this,
(d.__proto__||Object.getPrototypeOf(d)).call(this));b(l,a,c);return l}c(d,a);return d}(x);a("SharedObject.dispose",function(a){a=this.get(a.id);if(0!==a.refCount)throw Error("Attempted to dispose object with non-zero reference count.");a.disposed();this.delete(a.rpcId);a.rpcId=null;a.rpc=null});a("SharedObject.refCountReachedZero",function(a){this.get(a.id).counterpartRefCountReachedZero(a.gen)});var v=new Map;a("SharedObject.new",function(a){--(new (v.get(a.type))(this,a)).refCount})},function(n,
f,k){function g(a,d){var b=Math.abs(a[d]),c=Math.abs(a[d+1]),t=Math.abs(a[d+2]),r=Math.max(b,c,t);1E-4>b/r&&(a[d]=0);1E-4>c/r&&(a[d+1]=0);1E-4>t/r&&(a[d+2]=0)}function e(b){b=b.and(a[0]);for(var d=1;d<a.length;++d)b=b.xor(b.rshift(Math.pow(2,d))).and(a[d]);return b}f.h=function(a){return a[0]*a[1]*a[2]};f.m=function(a){return a[0]+","+a[1]+","+a[2]};f.j=function(a){g(a,0);g(a,4);g(a,8)};f.k=function(a,d,c){var b=d[0],t=d[1];d=d[2];a[0]=c[0]*b+c[4]*t+c[8]*d;a[1]=c[1]*b+c[5]*t+c[9]*d;a[2]=c[2]*b+c[6]*
t+c[10]*d;return a};f.b=function(a,d){var b=d[0],c=d[1],t=d[2],r=d[4],p=d[5],x=d[6],l=d[8],v=d[9];d=d[10];a[0]=Math.sqrt(b*b+c*c+t*t);a[1]=Math.sqrt(r*r+p*p+x*x);a[2]=Math.sqrt(l*l+v*v+d*d);return a};f.a=function(a){if(a.high)throw Error("Fragment ids >= 2^32 not supported yet");var b=e(a.rshift(0)),m=e(a.rshift(1));a=e(a.rshift(2));return c.c.clone([b.low,m.low,a.low])};var c=k(31);n=k(6);k.d(f,"g",function(){return c.a});k.d(f,"i",function(){return c.b});k.d(f,"l",function(){return c.c});k=c.a.create();
f.c=k;k=[c.c.fromValues(1,0,0),c.c.fromValues(0,1,0),c.c.fromValues(0,0,1)];f.d=k;k=c.c.fromValues(0,0,0);f.f=k;c.c.fromValues(1,1,1);k=c.c.fromValues(Infinity,Infinity,Infinity);f.e=k;c.b.create();var a=[new n.a(1227133513,306783378),new n.a(3272356035,818089008),new n.a(251719695,4027515120),new n.a(4278190335,16711680),new n.a(65535,16711680),new n.a(2097151,0)]},function(n,f,k){function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||
"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function a(a){var b=a.downloadCancellationToken=
new h.b;a.source.download(a,b).then(function(){a.downloadCancellationToken===b&&(a.downloadCancellationToken=void 0,a.downloadSucceeded())},function(d){a.downloadCancellationToken===b&&(a.downloadCancellationToken=void 0,a.downloadFailed(d),console.log("Error retrieving chunk "+a+": "+d))})}function b(a){return new F(new l.a(a),r.a)}function d(a,b,d,c,l,u){for(;1>b.availableItems||b.availableSize<a;){var q=l.next().value;if(void 0===q)return!1;var h=q.priorityTier;if(h<d||h===d&&q.priority>=c)return!1;
u(q)}return!0}Object.defineProperty(f,"__esModule",{value:!0});k.d(f,"Chunk",function(){return D});k.d(f,"ChunkSourceBase",function(){return G});k.d(f,"ChunkSource",function(){return z});k.d(f,"ChunkQueueManager",function(){return u});k.d(f,"ChunkManager",function(){return y});f.registerChunkSource=function(a){return function(b){Object(H.g)(a.RPC_ID)(b);b.prototype.toString=function(){return a.stringify(this.parameters)}}};f.withChunkManager=function(a){return function(a){function b(a){for(var d=
[],q=0;q<arguments.length;++q)d[q-0]=arguments[q];c(this,b);var l;q=g(this,(l=b.__proto__||Object.getPrototypeOf(b)).call.apply(l,[].concat([this],$jscomp.arrayFromIterable(d))));q.chunkManager=q.registerDisposer(d[0].get(d[1].chunkManager));return q}e(b,a);return b}(a)};var m=k(11),h=k(14),t=k(51),r=k(52),p=k(53),x=k(59),l=k(60),v=k(15),H=k(0),w=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,
c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();n=this&&this.__decorate||function(a,b,d,c){var q=arguments.length,l=3>q?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,u;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(a,b,d,c);else for(var h=a.length-1;0<=h;h--)if(u=a[h])l=(3>q?u(l):3<q?u(b,d,l):u(b,d))||l;return 3<q&&l&&Object.defineProperty(b,d,l),l};var D=function(){function a(){c(this,a);this.key=this.source=this.prev1=this.next1=
this.child1=this.prev0=this.next0=this.child0=null;this.state=m.e.NEW;this.error=null;this.newPriority=this.priority=0;this.newPriorityTier=this.priorityTier=m.d.RECENT;this.backendOnly=!1;this.downloadCancellationToken=void 0}w(a,[{key:"initialize",value:function(a){this.key=a;this.state=m.e.NEW;this.priority=Number.NEGATIVE_INFINITY;this.priorityTier=m.d.RECENT;this.newPriority=Number.NEGATIVE_INFINITY;this.newPriorityTier=m.d.RECENT;this.error=null}},{key:"updatePriorityProperties",value:function(){this.priorityTier=
this.newPriorityTier;this.priority=this.newPriority;this.newPriorityTier=m.d.RECENT;this.newPriority=Number.NEGATIVE_INFINITY}},{key:"dispose",value:function(){this.error=this.source=null}},{key:"downloadFailed",value:function(a){this.error=a;this.queueManager.updateChunkState(this,m.e.FAILED)}},{key:"downloadSucceeded",value:function(){this.queueManager.updateChunkState(this,m.e.SYSTEM_MEMORY_WORKER)}},{key:"freeSystemMemory",value:function(){}},{key:"serialize",value:function(a,b){a.id=this.key;
a.source=this.source.rpcId;a["new"]=!0}},{key:"toString",value:function(){return this.key}},{key:"chunkManager",get:function(){return this.source.chunkManager}},{key:"queueManager",get:function(){return this.source.chunkManager.queueManager}}],[{key:"priorityLess",value:function(a,b){return a.priority<b.priority}},{key:"priorityGreater",value:function(a,b){return a.priority>b.priority}}]);return a}(),G=function(a){function b(a){c(this,b);var d=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));
d.chunkManager=a;d.chunks=new Map;d.freeChunks=[];return d}e(b,a);w(b,[{key:"getNewChunk_",value:function(a){var b=this.freeChunks,d=b.length;if(0<d)return a=b[d-1],b.length=d-1,a.source=this,a;b=new a;b.source=this;return b}},{key:"addChunk",value:function(a){var b=this.chunks;0===b.size&&this.addRef();b.set(a.key,a)}},{key:"removeChunk",value:function(a){var b=this.chunks,d=this.freeChunks;b.delete(a.key);a.dispose();d[d.length]=a;0===b.size&&this.dispose()}}]);return b}(H.b),z=function(a){function b(a,
d){c(this,b);var q=a.get(d.chunkManager);q=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,q));Object(H.d)(q,a,d);return q}e(b,a);return b}(G),F=function(){function a(b,d){c(this,a);this.heapOperations=b;this.linkedListOperations=d;this.heapRoots=[null,null];this.recentHead=new D;d.initializeHead(this.recentHead)}w(a,[{key:"add",value:function(a){var b=a.priorityTier;if(b===m.d.RECENT)this.linkedListOperations.insertAfter(this.recentHead,a);else{var d=this.heapRoots;d[b]=this.heapOperations.meld(d[b],
a)}}},{key:"candidates",value:function(){function a(a,q){for(;;)switch(b){case 0:if(w.heapOperations.compare!==D.priorityLess){b=1;break}f=w;y=f.linkedListOperations;g=f.recentHead;case 3:H=y.back(g);if(null!=H){b=5;break}b=4;break;case 5:return b=7,{value:H,done:!1};case 7:if(void 0===q){b=8;break}b=-1;throw q;case 8:case 6:b=3;break;case 4:e=w,x=e.heapRoots,v=m.d.LAST_ORDERED_TIER;case 9:if(!(v>=m.d.FIRST_ORDERED_TIER)){b=11;break}case 12:p=x[v];if(null!=p){b=14;break}b=13;break;case 14:return b=
16,{value:p,done:!1};case 16:if(void 0===q){b=17;break}b=-1;throw q;case 17:case 15:b=12;break;case 13:case 10:--v;b=9;break;case 11:b=2;break;case 1:r=w.heapRoots,t=m.d.FIRST_ORDERED_TIER;case 18:if(!(t<=m.d.LAST_ORDERED_TIER)){b=20;break}case 21:h=r[t];if(null!=h){b=23;break}b=22;break;case 23:return b=25,{value:h,done:!1};case 25:if(void 0===q){b=26;break}b=-1;throw q;case 26:case 24:b=21;break;case 22:case 19:++t;b=18;break;case 20:u=w,l=u.linkedListOperations,c=u.recentHead;case 27:d=l.front(c);
if(null!=d){b=29;break}b=28;break;case 29:return b=31,{value:d,done:!1};case 31:if(void 0===q){b=32;break}b=-1;throw q;case 32:case 30:b=27;break;case 28:case 2:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,c,l,u,h,t,r,p,v,x,e,H,g,y,f,w=this,k={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}},{key:"delete",value:function(a){var b=
a.priorityTier;if(b===m.d.RECENT)this.linkedListOperations.pop(a);else{var d=this.heapRoots;d[b]=this.heapOperations.remove(d[b],a)}}}]);return a}(),u=function(l){function q(a,d){c(this,q);a=g(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,a,d));a.queuedPromotionQueue=b(D.priorityGreater);a.downloadEvictionQueue=b(D.priorityLess);a.systemMemoryEvictionQueue=new F(new x.a(D.priorityLess),t.a);a.gpuMemoryPromotionQueue=b(D.priorityGreater);a.gpuMemoryEvictionQueue=b(D.priorityLess);a.updatePending=
null;a.numQueued=0;a.numFailed=0;a.gpuMemoryCapacity=m.a.fromObject(d.gpuMemoryCapacity);a.systemMemoryCapacity=m.a.fromObject(d.systemMemoryCapacity);a.downloadCapacity=m.a.fromObject(d.downloadCapacity);return a}e(q,l);w(q,[{key:"scheduleUpdate",value:function(){null===this.updatePending&&(this.updatePending=setTimeout(this.process.bind(this),0))}},{key:"chunkQueuesForChunk",value:function(a){function b(b,u){for(;;)switch(d){case 0:q=!1;c=a.state;if(!q&&c!==m.e.QUEUED){d=2;break}q=!0;d=3;return{value:l.queuedPromotionQueue,
done:!1};case 3:if(void 0===u){d=4;break}d=-1;throw u;case 4:d=1;break;case 2:if(!q&&c!==m.e.DOWNLOADING){d=5;break}q=!0;d=6;return{value:l.downloadEvictionQueue,done:!1};case 6:if(void 0===u){d=7;break}d=-1;throw u;case 7:return d=8,{value:l.systemMemoryEvictionQueue,done:!1};case 8:if(void 0===u){d=9;break}d=-1;throw u;case 9:d=1;break;case 5:if(q||c===m.e.SYSTEM_MEMORY_WORKER)q=!0;if(!q&&c!==m.e.SYSTEM_MEMORY){d=10;break}q=!0;d=11;return{value:l.systemMemoryEvictionQueue,done:!1};case 11:if(void 0===
u){d=12;break}d=-1;throw u;case 12:if(a.priorityTier===m.d.RECENT||a.backendOnly){d=13;break}d=14;return{value:l.gpuMemoryPromotionQueue,done:!1};case 14:if(void 0===u){d=15;break}d=-1;throw u;case 15:case 13:d=1;break;case 10:if(!q&&c!==m.e.GPU_MEMORY){d=16;break}q=!0;d=17;return{value:l.systemMemoryEvictionQueue,done:!1};case 17:if(void 0===u){d=18;break}d=-1;throw u;case 18:return d=19,{value:l.gpuMemoryEvictionQueue,done:!1};case 19:if(void 0===u){d=20;break}d=-1;throw u;case 20:d=1;break;case 16:case 1:d=
-1;default:return{value:void 0,done:!0}}}var d=0,c,q,l=this,u={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();u[Symbol.iterator]=function(){return this};return u}},{key:"adjustCapacitiesForChunk",value:function(a,b){b=b?-1:1;switch(a.state){case m.e.FAILED:this.numFailed-=b;break;case m.e.QUEUED:this.numQueued-=b;break;case m.e.DOWNLOADING:this.downloadCapacity.adjust(b,0);this.systemMemoryCapacity.adjust(b,
0);break;case m.e.SYSTEM_MEMORY:case m.e.SYSTEM_MEMORY_WORKER:this.systemMemoryCapacity.adjust(b,b*a.systemMemoryBytes);break;case m.e.GPU_MEMORY:this.systemMemoryCapacity.adjust(b,b*a.systemMemoryBytes),this.gpuMemoryCapacity.adjust(b,b*a.gpuMemoryBytes)}}},{key:"removeChunkFromQueues_",value:function(a){for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),d=b.next();!d.done;d=b.next())d.value.delete(a)}},{key:"addChunkToQueues_",value:function(a){if(a.state===m.e.QUEUED&&a.priorityTier===
m.d.RECENT)return a.source.removeChunk(a),this.adjustCapacitiesForChunk(a,!1),!1;for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),d=b.next();!d.done;d=b.next())d.value.add(a);return!0}},{key:"performChunkPriorityUpdate",value:function(a){a.priorityTier===a.newPriorityTier&&a.priority===a.newPriority?(a.newPriorityTier=m.d.RECENT,a.newPriority=Number.NEGATIVE_INFINITY):(this.removeChunkFromQueues_(a),a.updatePriorityProperties(),a.state===m.e.NEW&&(a.state=m.e.QUEUED,this.adjustCapacitiesForChunk(a,
!0)),this.addChunkToQueues_(a))}},{key:"updateChunkState",value:function(a,b){b!==a.state&&(this.adjustCapacitiesForChunk(a,!1),this.removeChunkFromQueues_(a),a.state=b,this.adjustCapacitiesForChunk(a,!0),this.addChunkToQueues_(a),this.scheduleUpdate())}},{key:"processGPUPromotions_",value:function(){function a(a){b.freeChunkGPUMemory(a);a.source.chunkManager.queueManager.updateChunkState(a,m.e.SYSTEM_MEMORY)}for(var b=this,c=this.gpuMemoryPromotionQueue.candidates(),q=this.gpuMemoryEvictionQueue.candidates(),
l=this.gpuMemoryCapacity;;){var u=c.next().value;if(void 0===u)break;else{if(!d(u.gpuMemoryBytes,l,u.priorityTier,u.priority,q,a))break;this.copyChunkToGPU(u);this.updateChunkState(u,m.e.GPU_MEMORY)}}}},{key:"freeChunkGPUMemory",value:function(a){this.rpc.invoke("Chunk.update",{id:a.key,state:m.e.SYSTEM_MEMORY,source:a.source.rpcId})}},{key:"freeChunkSystemMemory",value:function(a){a.state===m.e.SYSTEM_MEMORY_WORKER?a.freeSystemMemory():this.rpc.invoke("Chunk.update",{id:a.key,state:m.e.EXPIRED,source:a.source.rpcId})}},
{key:"copyChunkToGPU",value:function(a){var b=this.rpc;if(a.state===m.e.SYSTEM_MEMORY)b.invoke("Chunk.update",{id:a.key,source:a.source.rpcId,state:m.e.GPU_MEMORY});else{var d={},c=[];a.serialize(d,c);d.state=m.e.GPU_MEMORY;b.invoke("Chunk.update",d,c)}}},{key:"processQueuePromotions_",value:function(){function b(a){switch(a.state){case m.e.DOWNLOADING:var b=a.downloadCancellationToken;a.downloadCancellationToken=void 0;b.cancel();break;case m.e.GPU_MEMORY:c.freeChunkGPUMemory(a);case m.e.SYSTEM_MEMORY_WORKER:case m.e.SYSTEM_MEMORY:c.freeChunkSystemMemory(a)}a.source.chunkManager.queueManager.updateChunkState(a,
m.e.QUEUED)}for(var c=this,q=this.queuedPromotionQueue.candidates(),l=this.downloadEvictionQueue.candidates(),u=this.systemMemoryEvictionQueue.candidates(),h=this.downloadCapacity,t=this.systemMemoryCapacity;;){var r=q.next();if(r.done)break;r=r.value;var p=r.priorityTier,v=r.priority;if(!d(0,h,p,v,l,b))break;if(!d(0,t,p,v,u,b))break;this.updateChunkState(r,m.e.DOWNLOADING);a(r)}}},{key:"process",value:function(){this.updatePending&&(this.updatePending=null,this.processGPUPromotions_(),this.processQueuePromotions_(),
this.logStatistics())}},{key:"logStatistics",value:function(){}}]);return q}(H.c);u=n([Object(H.g)(m.c)],u);var y=function(a){function b(a,d){c(this,b);var q=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));q.existingTierChunks=[];q.newTierChunks=[];q.updatePending=null;q.recomputeChunkPriorities=new v.a;q.recomputeChunkPrioritiesLate=new v.a;q.memoize=new p.a;q.queueManager=a.get(d.chunkQueueManager).addRef();for(a=m.d.FIRST_TIER;a<=m.d.LAST_TIER;++a)a!==m.d.RECENT&&(q.existingTierChunks[a]=
[]);return q}e(b,a);w(b,[{key:"scheduleUpdateChunkPriorities",value:function(){null===this.updatePending&&(this.updatePending=setTimeout(this.recomputeChunkPriorities_.bind(this),0))}},{key:"recomputeChunkPriorities_",value:function(){this.updatePending=null;this.recomputeChunkPriorities.dispatch();this.recomputeChunkPrioritiesLate.dispatch();this.updateQueueState([m.d.VISIBLE])}},{key:"requestChunk",value:function(a,b,d){a.newPriorityTier===m.d.RECENT&&this.newTierChunks.push(a);a.newPriorityTier=
b;a.newPriority=d}},{key:"updateQueueState",value:function(a){var b=this.existingTierChunks,d=this.queueManager;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){var q=b[c.value],l=$jscomp.makeIterator(q);for(c=l.next();!c.done;c=l.next())c=c.value,c.newPriorityTier===m.d.RECENT&&d.performChunkPriorityUpdate(c);q.length=0}a=this.newTierChunks;q=$jscomp.makeIterator(a);for(c=q.next();!c.done;c=q.next())c=c.value,d.performChunkPriorityUpdate(c),b[c.priorityTier].push(c);a.length=0;this.queueManager.scheduleUpdate()}}]);
return b}(H.c);y=n([Object(H.g)(m.b)],y)},function(n,f,k){k.d(f,"a",function(){return g});f.b=1E-6;var g="undefined"!==typeof Float32Array?Float32Array:Array;f.c=Math.random},function(n,f,k){n="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;f.assign=function(c){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var b=a.shift();if(b){if("object"!==typeof b)throw new TypeError(b+"must be non-object");for(var d in b)b.hasOwnProperty(d)&&(c[d]=
b[d])}}return c};f.shrinkBuf=function(c,a){if(c.length===a)return c;if(c.subarray)return c.subarray(0,a);c.length=a;return c};var g={arraySet:function(c,a,b,d,m){if(a.subarray&&c.subarray)c.set(a.subarray(b,b+d),m);else for(var h=0;h<d;h++)c[m+h]=a[b+h]},flattenChunks:function(c){var a,b;var d=b=0;for(a=c.length;d<a;d++)b+=c[d].length;var m=new Uint8Array(b);d=b=0;for(a=c.length;d<a;d++){var h=c[d];m.set(h,b);b+=h.length}return m}},e={arraySet:function(c,a,b,d,m){for(var h=0;h<d;h++)c[m+h]=a[b+h]},
flattenChunks:function(c){return[].concat.apply([],c)}};f.setTyped=function(c){c?(f.Buf8=Uint8Array,f.Buf16=Uint16Array,f.Buf32=Int32Array,f.assign(f,g)):(f.Buf8=Array,f.Buf16=Array,f.Buf32=Array,f.assign(f,e))};f.setTyped(n)},function(n,f,k){function g(a){if("object"===typeof a){if(null===a)return"null";if(Array.isArray(a)){var b="[",d=a.length,c=0;if(c<d)for(b+=g(a[c]);++c<d;)b+=",",b+=g(a[c]);return b+"]"}b="{";d=Object.keys(a).sort();c=0;var r=d.length;if(c<r){var p=d[c];b+=JSON.stringify(p);
for(b=b+":"+g(a[p]);++c<r;)b+=",",p=d[c],b+=JSON.stringify(p),b+=":",b+=g(a[p])}return b+"}"}return JSON.stringify(a)}function e(d){for(var c="";0<d.length;){var h=d.match(a);if(null===h){var t=d;h=d=""}else{t=d.substr(0,h.index);d=d.substr(h.index+h[0].length);var r=h[1];if(void 0!==r){if(h=r,2<=h.length&&"'"===h.charAt(0)&&"'"===h.charAt(h.length-1)){h=h.substr(1,h.length-2);for(r='"';0<h.length;){var p=h.match(b);if(null===p){r+=h;break}r+=p[1];r+="\\";r+='"';h=h.substr(p.index+p[0].length)}h=
r+'"'}}else h=h[2]}c+=t.replace(/\(/g,"[").replace(/\)/g,"]").replace("True","true").replace("False","false").replace(/,\s*([\}\]])/g,"$1");c+=h}return c}f.c=g;f.b=function(a){return JSON.parse(e(a))};f.a=function(a,b){if(!Array.isArray(a))throw Error("Expected array, but received: "+JSON.stringify(a)+".");return a.map(b)};f.e=function(a){if("object"!==typeof a||null==a||Array.isArray(a))throw Error("Expected JSON object, but received: "+JSON.stringify(a)+".");return a};f.g=function(a){if("string"!==
typeof a)throw Error("Expected string, but received: "+JSON.stringify(a)+".");return a};f.f=function(a,b,c){a=a.hasOwnProperty(b)?a[b]:void 0;try{return c(a)}catch(t){throw Error("Error parsing "+JSON.stringify(b)+" property: "+t.message);}};f.d=function(a){var b=c.l.create(),d=b.length;if(!Array.isArray(a)||a.length!==d)throw Error("Expected length "+d+" array, but received: "+JSON.stringify(a)+".");for(var t=0;t<d;++t){var r=b,p=t;var x=a[t];b:{var l=typeof x;if("number"===l||"string"===l)if(l=
parseFloat(""+x),!Number.isNaN(l)){x=l;break b}throw Error("Expected floating-point number, but received: "+JSON.stringify(x)+".");}if(!Number.isFinite(x))throw Error("Expected finite floating-point number, but received: "+x+".");r[p]=x}return b};f.h=function(a){if(!Array.isArray(a))throw Error("Expected array, received: "+JSON.stringify(a)+".");for(var b=$jscomp.makeIterator(a),d=b.next();!d.done;d=b.next())if(d=d.value,"string"!==typeof d)throw Error("Expected string, received: "+JSON.stringify(d)+
".");return a};var c=k(1),a=new RegExp(/('(?:[^'\\]|(?:\\.))*')/.source+"|"+/("(?:[^'\\]|(?:\\.))*")/.source),b=/^((?:[^"'\\]|(?:\\.))*)"/},function(n,f,k){k.d(f,"a",function(){return m});var g=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),e=new Uint32Array(2),c=[];for(n=2;36>=n;++n){f=Math.floor(32/Math.log2(n));
k=Math.pow(n,f);var a=Math.floor(f/2),b=Math.pow(n,a);a=Math.pow(n,f-a);var d="^[0-"+String.fromCharCode(48+Math.min(9,n-1));10<n&&(d+="a-"+String.fromCharCode(97+n-11),d+="A-"+String.fromCharCode(65+n-11));d+="]{1,"+Math.ceil(64/Math.log2(n))+"}$";c[n]={lowDigits:f,lowBase:k,lowBase1:b,lowBase2:a,pattern:new RegExp(d)}}var m=function(){function a(b,d){b=void 0===b?0:b;d=void 0===d?0:d;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.low=b;this.high=d}g(a,[{key:"clone",
value:function(){return new a(this.low,this.high)}},{key:"assign",value:function(a){this.low=a.low;this.high=a.high}},{key:"toString",value:function(a){a=void 0===a?10:a;var b=this.low,d=this.high;if(0===d)return b.toString(a);d*=4294967296;var h=c[a],l=h.lowBase;h=h.lowDigits;var t=d%l;d=Math.floor(d/l);b+=t;d+=Math.floor(b/l);b=(b%l).toString(a);return d.toString(a)+"0".repeat(h-b.length)+b}},{key:"tryParseString",value:function(a,b){b=void 0===b?10:b;var d=c[b],h=d.lowDigits,l=d.lowBase,r=d.lowBase1,
t=d.lowBase2;if(!d.pattern.test(a))return!1;if(a.length<=h)return this.low=parseInt(a,b),this.high=0,!0;h=a.length-h;d=parseInt(a.substr(h),b);a=parseInt(a.substr(0,h),b);l=Math.floor(a*l/4294967296);r=d+a%4294967296*r%4294967296*t%4294967296;4294967296<r&&(++l,r-=4294967296);if(r>>>0!==r||l>>>0!==l)return!1;this.low=r;this.high=l;return!0}},{key:"parseString",value:function(a,b){if(!this.tryParseString(a,void 0===b?10:b))throw Error("Failed to parse string as uint64 value: "+JSON.stringify(a)+".");
return this}},{key:"valid",value:function(){var a=this.low,b=this.high;return a>>>0===a&&b>>>0===b}},{key:"toJSON",value:function(){return this.toString()}},{key:"lshift",value:function(b){b&=63;if(0==b)return this.clone();var d=this.low,c=this.high;return 32>b?new a(d<<b,c<<b|d>>>32-b):new a(0,d<<b-32)}},{key:"rshift",value:function(b){b&=63;if(0==b)return this.clone();var d=this.low,c=this.high;return 32>b?new a(d>>>b|c<<32-b,c>>b):new a(c>>b-32,0<=c?0:-1)}},{key:"or",value:function(b){return new a(this.low|
b.low,this.high|b.high)}},{key:"xor",value:function(b){return new a(this.low^b.low,this.high^b.high)}},{key:"and",value:function(b){return new a(this.low&b.low,this.high&b.high)}}],[{key:"less",value:function(a,b){return a.high<b.high||a.high===b.high&&a.low<b.low}},{key:"compare",value:function(a,b){return a.high-b.high||a.low-b.low}},{key:"equal",value:function(a,b){return a.low===b.low&&a.high===b.high}},{key:"min",value:function(b,d){return a.less(b,d)?b:d}},{key:"random",value:function(){crypto.getRandomValues(e);
return new a(e[0],e[1])}},{key:"parseString",value:function(b,d){d=void 0===d?10:d;return(new a).parseString(b,d)}}]);return a}();m.ZERO=new m(0,0)},function(n,f,k){k.d(f,"b",function(){return g});var g;(function(e){e[e.UINT8=0]="UINT8";e[e.UINT16=1]="UINT16";e[e.UINT32=2]="UINT32";e[e.UINT64=3]="UINT64";e[e.FLOAT32=4]="FLOAT32"})(g||(g={}));n=[];f.a=n;n[g.UINT8]=1;n[g.UINT16]=2;n[g.UINT32]=4;n[g.UINT64]=8;n[g.FLOAT32]=4},function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}k.d(f,"a",function(){return m});f.b=function(a,c){c=void 0===c?"GET":c;var h=new XMLHttpRequest;h[d]=c;h[b]=a;h.open(c,a);return h};f.c=function(a,m,r){r=void 0===r?"GET":r;var h=new XMLHttpRequest;if(Array.isArray(a)){var t=a.length;t=1===t?0:Math.abs(Object(c.a)(m))%t;a=a[t]+m}else a+=m;h[d]=r;h[b]=a;h.open(r,a);
return h};f.e=function(a,b,d){d=void 0===d?e.d:d;a.responseType=b;return new Promise(function(b,c){var l=function(){a.abort()};d.add(l);a.onloadend=function(){var h=this.status;d.remove(l);200<=h&&300>h?b(this.response):c(m.fromXhr(a))};a.send()})};f.d=function(a,b,d,c){c=void 0===c?e.d:c;a.responseType=d;a.setRequestHeader("Content-Type","application/json");return new Promise(function(d,l){var h=function(){a.abort()};c.add(h);a.onloadend=function(){var b=this.status;c.remove(h);200<=b&&300>b?d(this.response):
l(m.fromXhr(a))};a.send(JSON.stringify(b))})};var e=k(14),c=k(67),a=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();$jscomp.initSymbol();var b=Symbol("url");$jscomp.initSymbol();var d=Symbol("method"),m=function(c){function h(a,b,d,c){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");
var l=a+" "+JSON.stringify(b)+" resulted in HTTP error "+d;c&&(l+=": "+c);l+=".";var m=(h.__proto__||Object.getPrototypeOf(h)).call(this,l);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");m=!m||"object"!==typeof m&&"function"!==typeof m?this:m;m.name="HttpError";m.message=l;m.method=a;m.url=b;m.code=d;m.statusMessage=c;return m}g(h,c);a(h,null,[{key:"fromXhr",value:function(a){return new h(a[d],a[b],a.status,a.statusText)}}]);return h}(Error)},function(n,
f,k){k.d(f,"b",function(){return g});f.c=function(c,a,b){b=void 0===b?e:b;if(a!==b)for(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength),a=0,b=c.length;a<b;a+=2){var d=c[a];c[a]=c[a+1];c[a+1]=d}};f.d=function(c,a,b){b=void 0===b?e:b;if(a!==b)for(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength),a=0,b=c.length;a<b;a+=4){var d=c[a];c[a]=c[a+3];c[a+3]=d;d=c[a+1];c[a+1]=c[a+2];c[a+2]=d}};var g;(function(c){c[c.LITTLE=0]="LITTLE";c[c.BIG=1]="BIG"})(g||(g={}));var e=function(){var c=Uint16Array.of(4386);
return 17===(new Uint8Array(c.buffer))[0]?g.BIG:g.LITTLE}();f.a=e},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}k.d(f,"a",function(){return r});n=k(21);var a=k(39),b=k(1);k=k(0);var d=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),m=function x(a,b,d){null===a&&(a=Function.prototype);
var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return x(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}};f=this&&this.__decorate||function(a,b,d,c){var l=arguments.length,h=3>l?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,m;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(a,b,d,c);else for(var r=a.length-1;0<=r;r--)if(m=a[r])h=(3>l?m(h):3<l?m(b,d,h):m(b,d))||h;return 3<
l&&h&&Object.defineProperty(b,d,h),h};var h=function(a){function b(){g(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.source=null;return a}c(b,a);d(b,[{key:"initializeVolumeChunk",value:function(a,d){m(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initializeVolumeChunk",this).call(this,a,d);a=this.source;this.gpuMemoryBytes=this.systemMemoryBytes=a.spec.chunkBytes;this.data=null}},{key:"serialize",value:function(a,d){m(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),
"serialize",this).call(this,a,d);a=a.data=this.data;d.push(a.buffer);this.data=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.data.byteLength;m(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){this.data=null}}]);return b}(n.SliceViewChunk),t=function(m){function l(b,d){g(this,l);b=e(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,b,d));b.spec=a.c.fromObject(d.spec);
return b}c(l,m);d(l,[{key:"getChunk",value:function(a){var d=Object(b.m)(a),c=this.chunks.get(d);void 0===c&&(c=this.getNewChunk_(h),c.initializeVolumeChunk(d,a),this.addChunk(c));return c}}]);return l}(n.SliceViewChunkSource);n=function(a){function b(){g(this,b);return e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);return b}(n.RenderLayer);n=f([Object(k.g)(a.b)],n);var r=function(a){function b(a,d){g(this,b);a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,
a,d));a.parameters=d.parameters;return a}c(b,a);return b}(t)},function(n,f,k){k.d(f,"e",function(){return e});k.d(f,"d",function(){return c});k.d(f,"a",function(){return a});var g=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,c,h){c&&a(b.prototype,c);h&&a(b,h);return b}}(),e;(function(a){a[a.GPU_MEMORY=0]="GPU_MEMORY";a[a.SYSTEM_MEMORY=1]="SYSTEM_MEMORY";
a[a.SYSTEM_MEMORY_WORKER=2]="SYSTEM_MEMORY_WORKER";a[a.DOWNLOADING=3]="DOWNLOADING";a[a.QUEUED=4]="QUEUED";a[a.NEW=5]="NEW";a[a.FAILED=6]="FAILED";a[a.EXPIRED=7]="EXPIRED"})(e||(e={}));var c;(function(a){a[a.FIRST_TIER=0]="FIRST_TIER";a[a.FIRST_ORDERED_TIER=0]="FIRST_ORDERED_TIER";a[a.VISIBLE=0]="VISIBLE";a[a.PREFETCH=1]="PREFETCH";a[a.LAST_ORDERED_TIER=1]="LAST_ORDERED_TIER";a[a.RECENT=2]="RECENT";a[a.LAST_TIER=2]="LAST_TIER"})(c||(c={}));f.f=1E13;var a=function(){function a(b,c){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this.itemCapacity=this.availableItems=b;this.sizeCapacity=this.availableSize=c}g(a,[{key:"adjust",value:function(a,b){this.availableItems+=a;this.availableSize+=b}},{key:"toString",value:function(){return this.availableItems+"/"+this.itemCapacity+" items, "+(this.availableSize+"/"+this.sizeCapacity+" size")}},{key:"toObject",value:function(){return{itemCapacity:this.itemCapacity,sizeCapacity:this.sizeCapacity}}}],[{key:"fromObject",value:function(b){return new a(b.itemCapacity,
b.sizeCapacity)}}]);return a}();a.INFINITE=new a(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);f.c="ChunkQueueManager";f.b="ChunkManager"},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b,d){for(var c=0;3>c;++c)a[c]=Number.POSITIVE_INFINITY,b[c]=Number.NEGATIVE_INFINITY;d=$jscomp.makeIterator(d);for(c=d.next();!c.done;c=d.next()){var u=c.value.spec;c=u.lowerChunkBound;u=u.upperChunkBound;for(var q=0;3>q;++q)a[q]=Math.min(a[q],c[q]),b[q]=Math.max(b[q],u[q])}}function a(a,b,d,c){for(var u=v.FULLY_INSIDE,q=0;3>q;++q){var l=a[q];var h=b[q],m=d[q],r=c[q];l=l>=r||h<=m?v.FULLY_OUTSIDE:l>=m&&h<=r?v.FULLY_INSIDE:
v.PARTIALLY_INSIDE;switch(l){case v.FULLY_OUTSIDE:return l;case v.PARTIALLY_INSIDE:u=l}}return u}function b(a,b){var d=b.length,c=0;if(1<d)for(var h=0,q=0;q<d;++q){var m=b[q].spec.chunkLayout;var r=m.size;m=m.globalToLocalSpatialVector(l,a);for(var p=0,t=0,v=1,e=0;3>e;++e){var x=r[e];v*=x;x*=m[e];p=Math.min(p,x);t=Math.max(t,x)}r=v/(t-p);r>h&&(h=r,c=q)}return b[c]}function d(a){var b=a.voxelSize,d=void 0===a.lowerVoxelBound?p.f:a.lowerVoxelBound,c=a.upperVoxelBound,l=void 0===a.maxVoxelsPerChunkLog2?
18:a.maxVoxelsPerChunkLog2;a=void 0===a.transform?p.c:a.transform;a=Object(p.b)(p.l.create(),a);b=p.l.multiply(a,a,b);a=p.l.fromValues(1,1,1);if(void 0===c)var q=p.e;else{q=p.l.create();for(var h=0;3>h;++h)q[h]=Math.pow(2,Math.floor(Math.log2(c[h]-d[h])))}for(d=0;d<l;++d){c=Infinity;h=-1;for(var m=0;3>m;++m)if(!(a[m]>=q[m])){var r=a[m]*b[m];r<c&&(c=r,h=m)}c=h;if(-1===c)break;a[c]*=2}return a}k.d(f,"c",function(){return w});f.g=d;f.f=function(a,b){b=b.transform;return void 0===b?void 0===a?p.c:a:void 0===
a?b:p.g.multiply(p.g.create(),b,a)};f.e=function(a){if(void 0!==a.chunkDataSizes)return a.chunkDataSizes;var b=void 0===a.chunkLayoutPreference?D.ISOTROPIC:a.chunkLayoutPreference;switch(b){case D.ISOTROPIC:return[d(a)];case D.FLAT:b=[];for(var c=0;3>c;++c){var h=c;var m=a.lowerVoxelBound;var q=a.upperVoxelBound,r=c,t=a.voxelSize,v=a.maxVoxelsPerChunkLog2,e=a.transform;p.l.subtract(l,void 0===q?p.e:q,void 0===m?p.f:m);l[r]=1;m=d({voxelSize:t,upperVoxelBound:l,maxVoxelsPerChunkLog2:v,transform:e});
b[h]=m}b.push(d(a));return b}throw Error("Invalid chunk layout preference: "+b+".");};k.d(f,"d",function(){return G});var m=k(61),h=k(19),t=k(62),r=k(7),p=k(1);n=k(0);k.d(f,"a",function(){return r.b});var x=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),l=p.l.create(),v;(function(a){a[a.FULLY_OUTSIDE=0]=
"FULLY_OUTSIDE";a[a.FULLY_INSIDE=1]="FULLY_INSIDE";a[a.PARTIALLY_INSIDE=2]="PARTIALLY_INSIDE"})(v||(v={}));var H=[p.l.create(),p.l.create(),p.l.create(),p.l.create()],w=function(d){function m(){g(this,m);var a=(m.__proto__||Object.getPrototypeOf(m)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.width=-1;a.height=-1;a.hasViewportToData=!1;a.hasValidViewport=!1;a.viewportToData=p.g.create();
a.viewportAxes=[p.l.create(),p.l.create(),p.l.create()];a.previousViewportAxes=[p.l.create(),p.l.create()];a.centerDataPosition=p.l.create();a.viewportPlaneDistanceToOrigin=0;a.visibleChunkLayouts=new Map;a.visibleLayers=new Map;a.visibleSourcesStale=!0;a.pixelSize=0;p.g.identity(a.viewportToData);return a}e(m,d);x(m,[{key:"onViewportChanged",value:function(){}},{key:"maybeSetHasValidViewport",value:function(){!this.hasValidViewport&&-1!==this.width&&-1!==this.height&&this.hasViewportToData&&(this.hasValidViewport=
!0,this.onHasValidViewport());if(this.hasValidViewport)this.onViewportChanged()}},{key:"onHasValidViewport",value:function(){}},{key:"setViewportSize",value:function(a,b){return a!==this.width||b!==this.height?(this.width=a,this.height=b,this.maybeSetHasValidViewport(),!0):!1}},{key:"setViewportToDataMatrix",value:function(a){if(this.hasViewportToData&&p.g.equals(this.viewportToData,a))return!1;this.hasViewportToData=!0;var b=this.viewportToData;p.g.copy(b,a);Object(p.j)(b);p.l.transformMat4(this.centerDataPosition,
p.f,a);a=0;for(var d=this.viewportAxes,c=this.previousViewportAxes,l=0;3>l;++l){var u=d[l];Object(p.k)(u,p.d[l],b);0===l&&(a=p.l.length(u));p.l.normalize(u,u)}this.viewportAxes=d;this.previousViewportAxes=c;if(!Object(t.a)(a,this.pixelSize)||.95>p.l.dot(d[0],c[0])||.95>p.l.dot(d[1],c[1]))p.l.copy(c[0],d[0]),p.l.copy(c[1],d[1]),this.visibleSourcesStale=!0,this.pixelSize=a;this.viewportPlaneDistanceToOrigin=p.l.dot(this.centerDataPosition,this.viewportAxes[2]);this.onViewportToDataMatrixChanged();this.maybeSetHasValidViewport();
return!0}},{key:"onViewportToDataMatrixChanged",value:function(){}},{key:"updateVisibleSources",value:function(){if(this.visibleSourcesStale){this.visibleSourcesStale=!1;var a=1.1*this.pixelSize,d=this.visibleChunkLayouts,c=this.viewportAxes[2],q=this.visibleLayers;d.clear();var l={};q=$jscomp.makeIterator(q);for(var h=q.next();!h.done;l={smallestVoxelSize:l.smallestVoxelSize,visibleSources:l.visibleSources},h=q.next()){h=$jscomp.makeIterator(h.value);var m=h.next().value;l.visibleSources=h.next().value;
l.visibleSources.length=0;h=m.sources;var r=h.length;m=void 0;l.smallestVoxelSize=h[0][0].spec.voxelSize;var p=function(b){return function(d){for(var c=0;3>c;++c){var q=d[c];if(q>a&&q>b.smallestVoxelSize[c])return!0}return!1}}(l),t=function(a){return function(b,c){a.visibleSources[a.visibleSources.length++]=b;var q=b.spec.chunkLayout,l=d.get(q);void 0===l&&(l=new Map,d.set(q,l));l.set(b,c)}}(l);for(m=r-1;;){r=b(c,h[m]);t(r,m);if(0===m||!p(r.spec.voxelSize))break;--m}l.visibleSources.reverse()}}}},
{key:"computeVisibleChunks",value:function(b,d){var u=this;this.updateVisibleSources();for(var q=this.width,m=this.height,r=this.viewportToData,t=0;3>t;++t)H[0][t]=-p.d[0][t]*q/2-p.d[1][t]*m/2,H[1][t]=-p.d[0][t]*q/2+p.d[1][t]*m/2,H[2][t]=p.d[0][t]*q/2-p.d[1][t]*m/2,H[3][t]=p.d[0][t]*q/2+p.d[1][t]*m/2;for(q=0;4>q;++q)p.l.transformMat4(H[q],H[q],r);var e=p.l.create(),x=p.l.create(),g=p.l.create(),f=p.l.create(),w=p.l.create(),y=p.l.create(),A=[],k=[];this.visibleChunkLayouts.forEach(function(q,m){function r(){for(var a=
0,b=0,d=0;3>d;++d){var c=y[d],q=e[d],l=x[d]-q,u=w[d]*l;a+=c*(q+u);b+=c*(q+l-u)}return a<D?!1:b<=D}function t(b){function c(){J=Object(h.b)(A,0,H,function(b){var d=b.spec;switch(a(e,x,d.lowerChunkBound,d.upperChunkBound)){case v.PARTIALLY_INSIDE:return!0;case v.FULLY_INSIDE:k.push(b);default:return!1}})}if(0!==k.length||0!==J){for(var q=1,l=0;3>l;++l)q*=Math.max(0,x[l]-e[l]);if(0!==q&&r())if(1===q)d(m,C,e,k);else{for(var u;;)if(q=e[b],l=x[b],u=l-q,1===u)b=(b+1)%3;else break;u=q+Math.floor(.5*u);var p=
(b+1)%3,g=k.length;x[b]=u;var H=J;c();t(p);k.length=g;J=H;x[b]=l;e[b]=u;c();t(p);e[b]=q;k.length=g;J=H}}}var C=b(m);c(g,f,q.keys());p.l.set(e,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);p.l.set(x,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);m.globalToLocalSpatialVector(y,u.viewportAxes[2]);for(var I=0;3>I;++I)w[I]=0<y[I]?1:0;var D=p.l.dot(m.globalToLocalGrid(l,u.centerDataPosition),y);for(I=0;4>I;++I)for(var F=m.globalToLocalGrid(l,H[I]),
z=0;3>z;++z)e[z]=Math.min(e[z],Math.floor(F[z])),x[z]=Math.max(x[z],Math.floor(F[z])+1);p.l.max(e,e,g);p.l.min(x,x,f);k.length=0;A.length=0;q=$jscomp.makeIterator(q.keys());for(I=q.next();!I.done;I=q.next())switch(I=I.value,F=I.spec,a(e,x,F.lowerChunkBound,F.upperChunkBound)){case v.FULLY_INSIDE:k.push(I);break;case v.PARTIALLY_INSIDE:A.push(I)}var J=A.length;t(0)})}}]);return m}(n.b),D;(function(a){a[a.ISOTROPIC=0]="ISOTROPIC";a[a.FLAT=1]="FLAT"})(D||(D={}));var G=function F(a){g(this,F);var b=void 0===
a.lowerVoxelBound?p.f:a.lowerVoxelBound,d=a.upperVoxelBound,c=a.chunkDataSize,l=a.voxelSize,u=a.transform,h=void 0===a.baseVoxelOffset?p.f:a.baseVoxelOffset,r=void 0===a.lowerClipBound?p.l.multiply(p.l.create(),l,b):a.lowerClipBound,t=void 0===a.upperClipBound?p.l.multiply(p.l.create(),l,d):a.upperClipBound;this.voxelSize=l;this.chunkDataSize=c;this.chunkLayout=m.a.get(p.l.multiply(p.l.create(),a.chunkDataSize,l),u);this.lowerClipBound=r;this.upperClipBound=t;this.lowerVoxelBound=b;this.upperVoxelBound=
d;this.baseVoxelOffset=h;a=this.lowerChunkBound=p.l.create();l=this.upperChunkBound=p.l.create();for(u=0;3>u;++u)a[u]=Math.floor(b[u]/c[u]),l[u]=Math.floor((d[u]-1)/c[u]+1)};f.b="SliceView"},function(n,f,k){f.a=function(c,a){Object(g.a)(c,Object(e.a)(new Uint8Array(a),c.chunkDataSize,c.source.spec.numChannels))};var g=k(24),e=k(79)},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}k.d(f,"b",function(){return b});f.c=function(d,c){return new Promise(function(h,
m){if(d===a)c(h,m,a);else{var r=new b,p=d.add(function(){r.cancel()});c(function(a){p();h(a)},function(a){p();m(a)},r)}})};var e=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();n=new (function(){function a(){g(this,a);this.name="CancellationError";this.message="CANCELED"}e(a,[{key:"toString",value:function(){return"CANCELED"}}]);
return a}());f.a=n;var c=function(){},a={isCanceled:!1,add:function(){return c},remove:c};f.d=a;var b=function(){function a(){g(this,a)}e(a,[{key:"cancel",value:function(){var a=this.handlers;if(null!==a&&(this.handlers=null,void 0!==a)){a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next())b=b.value,b()}}},{key:"add",value:function(a){var b=this,d=this.handlers;if(null===d)return a(),c;void 0===d&&(d=this.handlers=new Set);d.add(a);return function(){b.remove(a)}}},{key:"remove",value:function(a){var b=
this.handlers;null!=b&&b.delete(a)}},{key:"isCanceled",get:function(){return null===this.handlers}}]);return a}()},function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}k.d(f,"b",function(){return a});k.d(f,"a",function(){return b});var c=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),a=function(){function a(){e(this,a);this.handlers=new Set;this.count=0;var b=this;this.dispatch=function(){var a=this,d=arguments;++b.count;b.handlers.forEach(function(b){b.apply(a,d)})}}
c(a,[{key:"add",value:function(a){var b=this;this.handlers.add(a);return function(){return b.remove(a)}}},{key:"remove",value:function(a){return this.handlers.delete(a)}},{key:"dispose",value:function(){this.handlers=void 0}}]);return a}(),b=function(a){function b(){e(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}g(b,
a);return b}(a)},function(n,f,k){function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}f.c=function(a){return function(a){function b(a){for(var d=[],c=0;c<arguments.length;++c)d[c-0]=arguments[c];if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var m,p=g(this,(m=b.__proto__||Object.getPrototypeOf(b)).call.apply(m,[].concat([this],$jscomp.arrayFromIterable(d))));p.visibility=d[0].get(d[1].visibility);p.registerDisposer(p.visibility.changed.add(function(){return p.chunkManager.scheduleUpdateChunkPriorities()}));return p}e(b,a);return b}(a)};f.b=function(a){return a===
Number.POSITIVE_INFINITY?c.d.VISIBLE:c.d.PREFETCH};f.a=function(a){return a===Number.POSITIVE_INFINITY?0:a*c.f};k(63);var c=k(11)},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){for(var d=r.l.create(),c=r.l.create(),q=r.l.create(),l=new Float32Array(a.length),u=new Float32Array(a.length/3),h=b.length,m=0;m<h;m+=3)for(var p=0;3>p;++p)u[b[m+p]]+=1;for(m=0;m<h;m+=3){p=3*b[m];for(var t=3*b[m+1],e=3*b[m+2],v=0;3>v;++v)c[v]=a[t+v]-a[p+v],q[v]=a[e+v]-a[t+v];r.l.cross(d,c,q);r.l.normalize(d,
d);for(p=0;3>p;++p)for(e=b[m+p],t=1/u[e],e*=3,v=0;3>v;++v)l[e+v]+=t*d[v]}a=l.length;for(b=0;b<a;b+=3)d=l.subarray(b,3),r.l.normalize(d,d);return l}function b(a,b,d,c,q,l,h,m){var u=new Float32Array(d,q,3*l);Object(t.d)(u,c);void 0===h&&(h=q+12*l);var r;void 0!==m&&(r=m*b);d=void 0===r?new Uint32Array(d,h):new Uint32Array(d,h,r);if(0!==d.length%b)throw Error("Number of indices is not a multiple of "+b+": "+d.length+".");Object(t.d)(d,c);a.vertexPositions=u;a.indices=d}f.c=function(a,b,d){Object(p.e)(b);
a.fragmentIds=Object(p.f)(b,d,p.h)};f.b=a;f.e=b;f.d=function(d,c,l,h,q,m,r){b(d,3,c,l,h,q,m,r);d.vertexNormals=a(d.vertexPositions,d.indices)};k.d(f,"a",function(){return z});var d=k(2),m=k(11);n=k(69);f=k(37);var h=k(22),t=k(9),r=k(1),p=k(5),x=k(6),l=k(16);k=k(0);var v=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);
return b}}(),H=function u(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return u(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},w=this&&this.__decorate||function(a,b,d,c){var l=arguments.length,q=3>l?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,u;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)q=Reflect.decorate(a,b,d,c);else for(var h=a.length-
1;0<=h;h--)if(u=a[h])q=(3>l?u(q):3<l?u(b,d,q):u(b,d))||q;return 3<l&&q&&Object.defineProperty(b,d,q),q},D=function(a){function b(){g(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.backendOnly=!0;a.objectId=new x.a;return a}c(b,a);v(b,[{key:"initializeManifestChunk",value:function(a,d,c){H(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.objectId.assign(d);c&&(this.clipBounds=c)}},{key:"freeSystemMemory",value:function(){this.fragmentIds=
null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=100;H(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this);this.priorityTier<m.d.RECENT&&this.source.chunkManager.scheduleUpdateChunkPriorities()}},{key:"toString",value:function(){return this.objectId.toString()}}]);return b}(d.Chunk),G=function(a){function b(){g(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.manifestChunk=null;a.fragmentId=null;a.vertexPositions=
null;a.indices=null;a.vertexNormals=null;return a}c(b,a);v(b,[{key:"initializeFragmentChunk",value:function(a,d,c){H(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.manifestChunk=d;this.fragmentId=c}},{key:"freeSystemMemory",value:function(){this.fragmentId=this.vertexPositions=this.indices=this.vertexNormals=this.manifestChunk=null}},{key:"serialize",value:function(a,d){H(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,
a,d);a.objectKey=this.manifestChunk.key;var c=this.vertexPositions,l=this.indices,q=this.vertexNormals;a.vertexPositions=c;a.indices=l;a.vertexNormals=q;a=c.buffer;d.push(a);l=l.buffer;l!==a&&d.push(l);q=q.buffer;q!==a&&q!==l&&d.push(q);this.vertexPositions=this.indices=this.vertexNormals=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.vertexPositions.byteLength+this.indices.byteLength+this.vertexNormals.byteLength;H(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),
"downloadSucceeded",this).call(this)}}]);return b}(d.Chunk),z=function(a){function b(a,d){g(this,b);a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));a.parameters=d.parameters;return a}c(b,a);return b}(function(a){function b(a,d){g(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));return(c.fragmentSource=c.registerDisposer(a.getRef(d.fragmentSource))).meshSource=c}c(b,a);v(b,[{key:"getChunk",value:function(a,b){var d=Object(h.b)(a,b),c=this.chunks.get(d);
void 0===c&&(c=this.getNewChunk_(D),c.initializeManifestChunk(d,a,b),this.addChunk(c));return c}},{key:"getFragmentChunk",value:function(a,b){var d=a.key+"/"+b,c=this.fragmentSource,l=c.chunks.get(d);void 0===l&&(l=c.getNewChunk_(G),l.initializeFragmentChunk(d,a,b),c.addChunk(l));return l}}]);return b}(d.ChunkSource));d=function(a){function b(){g(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.meshSource=null;return a}c(b,a);v(b,[{key:"download",value:function(a,
b){return this.meshSource.downloadFragment(a,b)}}]);return b}(d.ChunkSource);d=w([Object(k.g)(n.a)],d);f=function(a){function b(a,d){g(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));c.source=c.registerDisposer(a.getRef(d.source));c.registerDisposer(c.chunkManager.recomputeChunkPriorities.add(function(){c.updateChunkPriorities()}));return c}c(b,a);v(b,[{key:"updateChunkPriorities",value:function(){var a=this,b=this.visibility.value;if(b!==Number.NEGATIVE_INFINITY){var d=
Object(l.b)(b),c=Object(l.a)(b),u=this.source,r=this.chunkManager;Object(h.a)(this,function(b){b=u.getChunk(b,a.clipBounds.value);r.requestChunk(b,d,c+100);if(b.state===m.e.SYSTEM_MEMORY_WORKER)for(var l=$jscomp.makeIterator(b.fragmentIds),q=l.next();!q.done;q=l.next())q=u.getFragmentChunk(b,q.value),r.requestChunk(q,d,c+50)})}}}]);return b}(f.a);f=w([Object(k.g)(n.b)],f)},function(n,f,k){f.a=function(b,d,m){m=void 0===m?c.a:m;var h=b.source.spec,t=h.dataType,r=Object(a.h)(b.chunkDataSize),p=e.a[t];
h=r*p*h.numChannels;if(h!==d.byteLength)throw Error("Raw-format chunk is "+d.byteLength+" bytes, "+("but "+r+" * "+p+" = "+h+" bytes are expected."));switch(t){case e.b.UINT8:d=new Uint8Array(d);break;case e.b.UINT16:d=new Uint16Array(d);Object(c.c)(d,m);break;case e.b.UINT32:case e.b.UINT64:d=new Uint32Array(d);Object(c.d)(d,m);break;case e.b.FLOAT32:d=new Float32Array(d);Object(c.d)(d,m);break;default:throw Error("Unexpected data type: "+t+".");}Object(g.a)(b,d)};var g=k(24),e=k(7),c=k(9),a=k(1)},
function(n,f,k){f.b=function(g,e,c,a){for(;e<c;){var b=g[e];a(b)?++e:(--c,g[e]=g[c],g[c]=b)}return c};f.a=function(g,e){var c=g.length,a=Array(c);e=a[0]=void 0===e?1:e;for(var b=1;b<c;++b)e*=g[b-1],a[b]=e;return a};f.c=function(g,e,c){for(var a=new g.constructor(g.length),b=0;b<e*c;b+=c)for(var d=0;d<c;d++)a[d*e+b/c]=g[b+d];return a}},function(n,f,k){function g(e,c,a,b,d,m,h){for(var t=new Map,r=Array(3),p=2,x=0;3>x;++x){var l=r[x]=Math.ceil(b[x]/c[x]);p*=l}x=r[0];l=r[1];r=r[2];var v=b[0],g=b[1];
b=b[2];var f=c[0],k=c[1],G=c[2],z=e.length,F=z,u=[0,0,0];e.resize(z+p);p=m[0];for(var y=m[1],J=m[2],q=0;q<r;++q){u[2]=Math.min(G,b-q*G);for(var I=0;I<l;++I){u[1]=Math.min(k,g-I*k);for(var C=0;C<x;++C){u[0]=Math.min(f,v-C*f);var L=e.length-z,B=$jscomp.makeIterator(h(a,d+(q*G*J+I*k*y+C*f*p),m,c,u,z,t,e)),n=B.next().value;B=B.next().value;var O=e.data;O[F++]=B|n<<24;O[F++]=L}}}}f.c=function(e,c,a,b,d,m,h,t,r){if(1===d)var p=0;else for(p=1;1<<p<d;)p*=2;var x=Math.ceil(p*b/32),l=e.length,v=x,g=!1,f=Array.prototype.join.call(m.subarray(0,
d*r),",");b=a.get(f);void 0===b&&(g=!0,v+=d*r,b=l+x-c,a.set(f,b));e.resize(l+v);e=e.data;if(0<p)switch(p){case 1:for(c=a=0;a<x;++a)v=0,v|=t[h[c+0]]<<0,v|=t[h[c+1]]<<1,v|=t[h[c+2]]<<2,v|=t[h[c+3]]<<3,v|=t[h[c+4]]<<4,v|=t[h[c+5]]<<5,v|=t[h[c+6]]<<6,v|=t[h[c+7]]<<7,v|=t[h[c+8]]<<8,v|=t[h[c+9]]<<9,v|=t[h[c+10]]<<10,v|=t[h[c+11]]<<11,v|=t[h[c+12]]<<12,v|=t[h[c+13]]<<13,v|=t[h[c+14]]<<14,v|=t[h[c+15]]<<15,v|=t[h[c+16]]<<16,v|=t[h[c+17]]<<17,v|=t[h[c+18]]<<18,v|=t[h[c+19]]<<19,v|=t[h[c+20]]<<20,v|=t[h[c+
21]]<<21,v|=t[h[c+22]]<<22,v|=t[h[c+23]]<<23,v|=t[h[c+24]]<<24,v|=t[h[c+25]]<<25,v|=t[h[c+26]]<<26,v|=t[h[c+27]]<<27,v|=t[h[c+28]]<<28,v|=t[h[c+29]]<<29,v|=t[h[c+30]]<<30,v|=t[h[c+31]]<<31,e[l+a]=v,c+=32;break;case 2:for(c=a=0;a<x;++a)v=0,v|=t[h[c+0]]<<0,v|=t[h[c+1]]<<2,v|=t[h[c+2]]<<4,v|=t[h[c+3]]<<6,v|=t[h[c+4]]<<8,v|=t[h[c+5]]<<10,v|=t[h[c+6]]<<12,v|=t[h[c+7]]<<14,v|=t[h[c+8]]<<16,v|=t[h[c+9]]<<18,v|=t[h[c+10]]<<20,v|=t[h[c+11]]<<22,v|=t[h[c+12]]<<24,v|=t[h[c+13]]<<26,v|=t[h[c+14]]<<28,v|=t[h[c+
15]]<<30,e[l+a]=v,c+=16;break;case 4:for(c=a=0;a<x;++a)v=0,v|=t[h[c+0]]<<0,v|=t[h[c+1]]<<4,v|=t[h[c+2]]<<8,v|=t[h[c+3]]<<12,v|=t[h[c+4]]<<16,v|=t[h[c+5]]<<20,v|=t[h[c+6]]<<24,v|=t[h[c+7]]<<28,e[l+a]=v,c+=8;break;case 8:for(c=a=0;a<x;++a)v=0,v|=t[h[c+0]]<<0,v|=t[h[c+1]]<<8,v|=t[h[c+2]]<<16,v|=t[h[c+3]]<<24,e[l+a]=v,c+=4;break;case 16:for(c=a=0;a<x;++a)v=0,v|=t[h[c+0]]<<0,v|=t[h[c+1]]<<16,e[l+a]=v,c+=2;break;case 32:for(c=a=0;a<x;++a)v=0,v|=t[h[c+0]]<<0,e[l+a]=v,c+=1}if(g)for(h=l+x,t=0,d*=r;t<d;++t)e[h++]=
m[t];return[p,b]};f.a=g;f.b=function(e,c,a,b,d,m,h){var t=e.length,r=b[3];e.resize(t+r);for(var p=0;p<r;++p)e.data[t+p]=e.length,g(e,c,a,b,d+m[3]*p,m,h)}},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(f,"__esModule",{value:!0});k.d(f,"SliceView",function(){return v});k.d(f,"SliceViewChunk",function(){return H});k.d(f,"SliceViewChunkSource",function(){return w});k.d(f,"RenderLayer",function(){return D});k.d(f,"ParameterizedSliceViewChunkSource",function(){return G});n=k(2);f=k(12);var a=k(1),
b=k(15),d=k(16);k=k(0);var m=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),h=function F(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return F(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:
b.call(d)}},t=this&&this.__decorate||function(a,b,d,c){var l=arguments.length,h=3>l?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,u;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(a,b,d,c);else for(var m=a.length-1;0<=m;m--)if(u=a[m])h=(3>l?u(h):3<l?u(b,d,h):u(b,d))||h;return 3<l&&h&&Object.defineProperty(b,d,h),h},r=a.l.create(),p=a.l.create(),x=a.l.create(),l=function(a){function b(a,d){g(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));
c.initializeSharedObject(a,d.id);return c}c(b,a);return b}(f.c),v=function(b){function l(a,b){g(this,l);var d=e(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,a,b));d.handleLayerChanged=function(){d.hasValidViewport&&d.chunkManager.scheduleUpdateChunkPriorities()};d.registerDisposer(d.chunkManager.recomputeChunkPriorities.add(function(){d.updateVisibleChunks()}));return d}c(l,b);m(l,[{key:"onViewportChanged",value:function(){this.chunkManager.scheduleUpdateChunkPriorities()}},{key:"updateVisibleChunks",
value:function(){var b=this,c=this.centerDataPosition,l=this.chunkManager,h=this.visibility.value;if(h!==Number.NEGATIVE_INFINITY){var u=Object(d.b)(h),m=Object(d.a)(h);m+=-1E12;this.computeVisibleChunks(function(a){a.globalToLocalSpatial(x,c);return b.visibleChunkLayouts.get(a)},function(b,d,c,q){a.l.multiply(r,c,b.size);b=-a.l.distance(x,r);q=$jscomp.makeIterator(q);for(var h=q.next();!h.done;h=q.next()){var p=h.value;h=d.get(p);p=p.getChunk(c);l.requestChunk(p,u,m+b+1E9*h)}})}}},{key:"removeVisibleLayer",
value:function(a){this.visibleLayers.delete(a);a.layerChanged.remove(this.handleLayerChanged);this.visibleSourcesStale=!0;this.hasValidViewport&&this.chunkManager.scheduleUpdateChunkPriorities()}},{key:"disposed",value:function(){for(var a=$jscomp.makeIterator(this.visibleLayers.keys()),b=a.next();!b.done;b=a.next())this.removeVisibleLayer(b.value);h(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"disposed",this).call(this)}}]);return l}(Object(d.c)(Object(n.withChunkManager)(l)));v=t([Object(k.g)(f.b)],
v);Object(k.f)("SliceView.updateView",function(a){var b=this.get(a.id);a.width&&b.setViewportSize(a.width,a.height);a.viewportToData&&b.setViewportToDataMatrix(a.viewportToData)});Object(k.f)("SliceView.addVisibleLayer",function(a){var b=this.get(a.id);a=this.get(a.layerId);b.visibleLayers.set(a,[]);a.layerChanged.add(b.handleLayerChanged);b.visibleSourcesStale=!0;b.hasValidViewport&&b.chunkManager.scheduleUpdateChunkPriorities()});Object(k.f)("SliceView.removeVisibleLayer",function(a){var b=this.get(a.id);
a=this.get(a.layerId);b.removeVisibleLayer(a)});var H=function(b){function d(){g(this,d);var b=e(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));b.source=null;b.chunkGridPosition=a.l.create();return b}c(d,b);m(d,[{key:"initializeVolumeChunk",value:function(b,c){h(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"initialize",this).call(this,b);a.l.copy(this.chunkGridPosition,c);this.chunkDataSize=null}},{key:"serialize",value:function(a,b){h(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),
"serialize",this).call(this,a,b);b=this.chunkDataSize;b!==this.source.spec.chunkDataSize&&(a.chunkDataSize=b);a.chunkGridPosition=this.chunkGridPosition}},{key:"downloadSucceeded",value:function(){h(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){}},{key:"toString",value:function(){return this.source.toString()+":"+Object(a.m)(this.chunkGridPosition)}}]);return d}(n.Chunk),w=function(b){function d(a,b){g(this,
d);return e(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,a,b))}c(d,b);m(d,[{key:"computeChunkBounds",value:function(b){var d=this.spec,c=d.upperVoxelBound;d=d.chunkDataSize;for(var l=a.l.multiply(r,b.chunkGridPosition,d),h=!1,m=0;3>m;++m)(p[m]=Math.min(c[m],l[m]+d[m])-l[m])!==d[m]&&(h=!0);a.l.add(l,l,this.spec.baseVoxelOffset);b.chunkDataSize=h?a.l.clone(p):d;return l}}]);return d}(n.ChunkSource),D=function(a){function d(a,c){g(this,d);var l=e(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,
a,c));l.layerChanged=new b.a;var h=l.sources=[];c=$jscomp.makeIterator(c.sources);for(var m=c.next();!m.done;m=c.next()){var u=m.value;m=[];h.push(m);u=$jscomp.makeIterator(u);for(var r=u.next();!r.done;r=u.next())r=a.get(r.value),l.registerDisposer(r.addRef()),m.push(r)}return l}c(d,a);return d}(k.c),G=function(a){function b(a,d){g(this,b);a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));a.parameters=d.parameters;return a}c(b,a);return b}(w)},function(n,f,k){f.b=function(g,e){return g.low+
","+g.high+(e?"_"+e.center.toString()+"_"+e.size.toString():"")};f.a=function(g,e){var c=g.segmentEquivalences;g=$jscomp.makeIterator(g.visibleSegments);for(var a=g.next();!a.done;a=g.next())if(a=a.value,c.allSets.isMinElement(a))for(var b=$jscomp.makeIterator(c.setElements(a)),d=b.next();!d.done;d=b.next())e(d.value,a)}},function(n,f,k){f.a=function(g,e){g.data=new Uint32Array(e)}},function(n,f,k){f.a=function(d,m){var h=d.source.spec;if(h.compressedSegmentationBlockSize){var t=h.dataType;a.clear();
var r=d.chunkDataSize;b[0]=r[0];b[1]=r[1];b[2]=r[2];b[3]=h.numChannels;switch(t){case g.a.UINT32:Object(e.a)(a,h.compressedSegmentationBlockSize,m,b);break;case g.a.UINT64:Object(c.a)(a,h.compressedSegmentationBlockSize,m,b);break;default:throw Error("Unsupported data type for compressed segmentation: "+g.a[t]);}d.data=new Uint32Array(a.view)}else d.data=m};var g=k(12),e=k(76),c=k(77),a=new (k(78).a)(2E4),b=Array(4)},function(n,f,k){f=k(4).assign;var g=k(83),e=k(86);k=k(46);var c={};f(c,g,e,k);n.exports=
c},function(n,f,k){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==
typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}k.d(f,"a",function(){return p});n=k(2);var a=k(11),b=k(14),d=k(8),m=k(104),h=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);
Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),t=function l(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return l(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},r=function(a){function b(){g(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.backendOnly=!0;return a}c(b,a);h(b,[{key:"initialize",
value:function(a){t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.requesters=new Set}},{key:"downloadSucceeded",value:function(){t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this);var a=this.requesters,d=this.data;this.requesters=void 0;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c.value.resolve(d)}},{key:"downloadFailed",value:function(a){t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),
"downloadFailed",this).call(this,a);var d=this.requesters;this.requesters=void 0;d=$jscomp.makeIterator(d);for(var c=d.next();!c.done;c=d.next())c.value.reject(a)}},{key:"freeSystemMemory",value:function(){this.data=void 0}}]);return b}(n.Chunk),p=function(l){function p(a,b){g(this,p);var d=e(this,(p.__proto__||Object.getPrototypeOf(p)).call(this,a));d.decodeFile=b;d.registerDisposer(a);d.registerDisposer(d.chunkManager.recomputeChunkPrioritiesLate.add(function(){d.updateChunkPriorities()}));return d}
c(p,l);h(p,[{key:"updateChunkPriorities",value:function(){for(var a=this.chunkManager,b=$jscomp.makeIterator(this.chunks.values()),d=b.next();!d.done;d=b.next()){d=d.value;var c=d.requesters;if(void 0!==c){c=$jscomp.makeIterator(c);for(var l=c.next();!l.done;l=c.next())l=l.value.getPriority(),a.requestChunk(d,l.priorityTier,l.priority)}}}},{key:"download",value:function(a,b){var c=this;return Object(d.e)(Object(d.b)(a.key),"arraybuffer",b).then(function(b){a.data=c.decodeFile(b)})}},{key:"getData",
value:function(d,c,l){var h=this,m=this.chunks.get(d);void 0===m&&(m=this.getNewChunk_(r),m.initialize(d),this.addChunk(m));return Object(b.c)(l,function(d,l,r){switch(m.state){case a.e.FAILED:l(m.error);return;case a.e.SYSTEM_MEMORY_WORKER:d(m.data);return}var u={resolve:d,reject:l,getPriority:c};m.requesters.add(u);r.add(function(){var a=m.requesters;void 0!==a&&(a.delete(u),h.chunkManager.scheduleUpdateChunkPriorities());l(b.a)});h.chunkManager.scheduleUpdateChunkPriorities()})}}],[{key:"get",
value:function(a,b){return a.memoize.get("getFileSource:"+Object(m.a)(b),function(){return new p(a,b)})}},{key:"getData",value:function(a,b,d,c,l){a=p.get(a,b);d=a.getData(d,c,l);a.dispose();return d}}]);return p}(n.ChunkSourceBase)},function(n,f,k){var g=g||{};g.Utils=g.Utils||{};g.Utils.crcTable=null;g.Utils.GUNZIP_MAGIC_COOKIE1=31;g.Utils.GUNZIP_MAGIC_COOKIE2=139;g.Utils.getStringAt=function(e,c,a){for(var b="",d;c<a;c+=1)d=e.getUint8(c),0!==d&&(b+=String.fromCharCode(d));return b};g.Utils.getByteAt=
function(e,c){return e.getInt8(c)};g.Utils.getShortAt=function(e,c,a){return e.getInt16(c,a)};g.Utils.getIntAt=function(e,c,a){return e.getInt32(c,a)};g.Utils.getFloatAt=function(e,c,a){return e.getFloat32(c,a)};g.Utils.getDoubleAt=function(e,c,a){return e.getFloat64(c,a)};g.Utils.getLongAt=function(e,c,a){var b,d=[],m=0;for(b=0;8>b;b+=1)d[b]=g.Utils.getByteAt(e,c+b,a);for(b=d.length-1;0<=b;b--)m=256*m+d[b];return m};g.Utils.toArrayBuffer=function(e){var c;var a=new ArrayBuffer(e.length);var b=new Uint8Array(a);
for(c=0;c<e.length;c+=1)b[c]=e[c];return a};g.Utils.isString=function(e){return"string"===typeof e||e instanceof String};g.Utils.formatNumber=function(e,c){e=g.Utils.isString(e)?Number(e):e;e=c?e.toPrecision(5):e.toPrecision(7);return parseFloat(e)};g.Utils.makeCRCTable=function(){for(var e,c=[],a=0;256>a;a++){e=a;for(var b=0;8>b;b++)e=e&1?3988292384^e>>>1:e>>>1;c[a]=e}return c};g.Utils.crc32=function(e){for(var c=g.Utils.crcTable||(g.Utils.crcTable=g.Utils.makeCRCTable()),a=-1,b=0;b<e.byteLength;b++)a=
a>>>8^c[(a^e.getUint8(b))&255];return(a^-1)>>>0};"undefined"!==typeof n&&n.exports&&(n.exports=g.Utils)},function(n,f,k){Object.defineProperty(f,"__esModule",{value:!0});k.d(f,"rpc",function(){return g});var g=new (k(0).a)(self)},function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}k.d(f,"a",function(){return a});k.d(f,"b",function(){return b});var c=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),a=function(){function a(){e(this,a);this.refCount=1}
c(a,[{key:"addRef",value:function(){++this.refCount;return this}},{key:"dispose",value:function(){0===--this.refCount&&this.refCountReachedZero()}},{key:"refCountReachedZero",value:function(){this.disposed();var a=this.disposers;if(null!=a){for(var b=a.length;0<b;--b){var d=a[b-1];"object"===typeof d?d.dispose():d.call(this)}this.disposers=void 0}this.wasDisposed=!0}},{key:"disposed",value:function(){}},{key:"registerDisposer",value:function(a){var b=this.disposers;null==b?this.disposers=[a]:b.push(a);
return a}},{key:"unregisterDisposer",value:function(a){var b=this.disposers;if(null!=b){var d=b.indexOf(a);-1!==d&&b.splice(d,1)}return a}},{key:"registerEventListener",value:function(a,b,d,c){a.addEventListener(b,d,c);this.registerDisposer(function(){return a.removeEventListener(b,d,c)})}},{key:"registerCancellable",value:function(a){this.registerDisposer(function(){a.cancel()});return a}}]);return a}(),b=function(a){function b(a){e(this,b);var d=(b.__proto__||Object.getPrototypeOf(b)).call(this);
if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.value=a;return d}g(b,a);return b}(a)},function(n,f,k){k(3);k(54);k(55);k(32);var g=k(56),e=k(57);k(58);var c=k(33);k(34);k.d(f,"a",function(){return g});k.d(f,"b",function(){return e});k.d(f,"c",function(){return c})},function(n,f,k){f.a=function(){var e=new g.a(9);e[0]=1;e[1]=0;e[2]=0;e[3]=0;e[4]=1;e[5]=0;e[6]=0;e[7]=0;e[8]=1;return e};var g=k(3)},
function(n,f,k){function g(){var a=new x.a(3);a[0]=0;a[1]=0;a[2]=0;return a}function e(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)}function c(a,b,d){var c=new x.a(3);c[0]=a;c[1]=b;c[2]=d;return c}function a(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];return a}function b(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];return a}function d(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];return a}function m(a,b){var d=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(d*
d+c*c+a*a)}function h(a,b){var d=b[0]-a[0],c=b[1]-a[1];a=b[2]-a[2];return d*d+c*c+a*a}function t(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a}function r(a,b){var d=b[0],c=b[1],l=b[2];d=d*d+c*c+l*l;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d);return a}function p(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}Object.defineProperty(f,"__esModule",{value:!0});f.create=g;f.clone=function(a){var b=new x.a(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};f.length=e;f.fromValues=c;f.copy=function(a,
b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a};f.set=function(a,b,d,c){a[0]=b;a[1]=d;a[2]=c;return a};f.add=function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];return a};f.subtract=a;f.multiply=b;f.divide=d;f.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};f.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};f.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);
return a};f.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);return a};f.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};f.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;return a};f.scaleAndAdd=function(a,b,d,c){a[0]=b[0]+d[0]*c;a[1]=b[1]+d[1]*c;a[2]=b[2]+d[2]*c;return a};f.distance=m;f.squaredDistance=h;f.squaredLength=t;f.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};f.inverse=
function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};f.normalize=r;f.dot=p;f.cross=function(a,b,d){var c=b[0],l=b[1];b=b[2];var h=d[0],m=d[1];d=d[2];a[0]=l*d-b*m;a[1]=b*h-c*d;a[2]=c*m-l*h;return a};f.lerp=function(a,b,d,c){var l=b[0],h=b[1];b=b[2];a[0]=l+c*(d[0]-l);a[1]=h+c*(d[1]-h);a[2]=b+c*(d[2]-b);return a};f.hermite=function(a,b,d,c,h,m){var l=m*m,p=l*(2*m-3)+1,u=l*(m-2)+m,r=l*(m-1);m=l*(3-2*m);a[0]=b[0]*p+d[0]*u+c[0]*r+h[0]*m;a[1]=b[1]*p+d[1]*u+c[1]*r+h[1]*m;a[2]=b[2]*p+d[2]*u+c[2]*r+
h[2]*m;return a};f.bezier=function(a,b,d,c,h,m){var l=1-m,p=l*l,u=m*m,r=p*l;p*=3*m;l*=3*u;m*=u;a[0]=b[0]*r+d[0]*p+c[0]*l+h[0]*m;a[1]=b[1]*r+d[1]*p+c[1]*l+h[1]*m;a[2]=b[2]*r+d[2]*p+c[2]*l+h[2]*m;return a};f.random=function(a,b){b=b||1;var d=2*x.c()*Math.PI,c=2*x.c()-1,h=Math.sqrt(1-c*c)*b;a[0]=Math.cos(d)*h;a[1]=Math.sin(d)*h;a[2]=c*b;return a};f.transformMat4=function(a,b,d){var c=b[0],h=b[1];b=b[2];var l=d[3]*c+d[7]*h+d[11]*b+d[15];l=l||1;a[0]=(d[0]*c+d[4]*h+d[8]*b+d[12])/l;a[1]=(d[1]*c+d[5]*h+d[9]*
b+d[13])/l;a[2]=(d[2]*c+d[6]*h+d[10]*b+d[14])/l;return a};f.transformMat3=function(a,b,d){var c=b[0],h=b[1];b=b[2];a[0]=c*d[0]+h*d[3]+b*d[6];a[1]=c*d[1]+h*d[4]+b*d[7];a[2]=c*d[2]+h*d[5]+b*d[8];return a};f.transformQuat=function(a,b,d){var c=b[0],h=b[1],l=b[2];b=d[0];var m=d[1],p=d[2];d=d[3];var u=d*c+m*l-p*h,r=d*h+p*c-b*l,e=d*l+b*h-m*c;c=-b*c-m*h-p*l;a[0]=u*d+c*-b+r*-p-e*-m;a[1]=r*d+c*-m+e*-b-u*-p;a[2]=e*d+c*-p+u*-m-r*-b;return a};f.rotateX=function(a,b,d,c){var h=[],l=[];h[0]=b[0]-d[0];h[1]=b[1]-
d[1];h[2]=b[2]-d[2];l[0]=h[0];l[1]=h[1]*Math.cos(c)-h[2]*Math.sin(c);l[2]=h[1]*Math.sin(c)+h[2]*Math.cos(c);a[0]=l[0]+d[0];a[1]=l[1]+d[1];a[2]=l[2]+d[2];return a};f.rotateY=function(a,b,d,c){var h=[],l=[];h[0]=b[0]-d[0];h[1]=b[1]-d[1];h[2]=b[2]-d[2];l[0]=h[2]*Math.sin(c)+h[0]*Math.cos(c);l[1]=h[1];l[2]=h[2]*Math.cos(c)-h[0]*Math.sin(c);a[0]=l[0]+d[0];a[1]=l[1]+d[1];a[2]=l[2]+d[2];return a};f.rotateZ=function(a,b,d,c){var h=[],l=[];h[0]=b[0]-d[0];h[1]=b[1]-d[1];h[2]=b[2]-d[2];l[0]=h[0]*Math.cos(c)-
h[1]*Math.sin(c);l[1]=h[0]*Math.sin(c)+h[1]*Math.cos(c);l[2]=h[2];a[0]=l[0]+d[0];a[1]=l[1]+d[1];a[2]=l[2]+d[2];return a};f.angle=function(a,b){a=c(a[0],a[1],a[2]);b=c(b[0],b[1],b[2]);r(a,a);r(b,b);b=p(a,b);return 1<b?0:-1>b?Math.PI:Math.acos(b)};f.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};f.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};f.equals=function(a,b){var d=a[0],c=a[1];a=a[2];var h=b[0],l=b[1];b=b[2];return Math.abs(d-h)<=x.b*Math.max(1,Math.abs(d),
Math.abs(h))&&Math.abs(c-l)<=x.b*Math.max(1,Math.abs(c),Math.abs(l))&&Math.abs(a-b)<=x.b*Math.max(1,Math.abs(a),Math.abs(b))};var x=k(3);f.sub=a;f.mul=b;f.div=d;f.dist=m;f.sqrDist=h;f.len=e;f.sqrLen=t;n=function(){var a=g();return function(b,d,c,h,l,m){d||(d=3);c||(c=0);for(h=h?Math.min(h*d+c,b.length):b.length;c<h;c+=d)a[0]=b[c],a[1]=b[c+1],a[2]=b[c+2],l(a,a,m),b[c]=a[0],b[c+1]=a[1],b[c+2]=a[2];return b}}();f.forEach=n},function(n,f,k){function g(){var c=new e.a(4);c[0]=0;c[1]=0;c[2]=0;c[3]=0;return c}
f.b=function(c){var a=new e.a(4);a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a};f.g=function(c,a,b,d){var m=new e.a(4);m[0]=c;m[1]=a;m[2]=b;m[3]=d;return m};f.c=function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c};f.l=function(c,a,b,d,m){c[0]=a;c[1]=b;c[2]=d;c[3]=m;return c};f.a=function(c,a,b){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};f.k=function(c,a,b){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};f.h=function(c){var a=c[0],b=c[1],d=c[2];c=
c[3];return Math.sqrt(a*a+b*b+d*d+c*c)};f.m=function(c){var a=c[0],b=c[1],d=c[2];c=c[3];return a*a+b*b+d*d+c*c};f.j=function(c,a){var b=a[0],d=a[1],m=a[2];a=a[3];var h=b*b+d*d+m*m+a*a;0<h&&(h=1/Math.sqrt(h),c[0]=b*h,c[1]=d*h,c[2]=m*h,c[3]=a*h);return c};f.d=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]};f.i=function(c,a,b,d){var m=a[0],h=a[1],e=a[2];a=a[3];c[0]=m+d*(b[0]-m);c[1]=h+d*(b[1]-h);c[2]=e+d*(b[2]-e);c[3]=a+d*(b[3]-a);return c};f.f=function(c,a){return c[0]===a[0]&&c[1]===
a[1]&&c[2]===a[2]&&c[3]===a[3]};f.e=function(c,a){var b=c[0],d=c[1],m=c[2];c=c[3];var h=a[0],t=a[1],r=a[2];a=a[3];return Math.abs(b-h)<=e.b*Math.max(1,Math.abs(b),Math.abs(h))&&Math.abs(d-t)<=e.b*Math.max(1,Math.abs(d),Math.abs(t))&&Math.abs(m-r)<=e.b*Math.max(1,Math.abs(m),Math.abs(r))&&Math.abs(c-a)<=e.b*Math.max(1,Math.abs(c),Math.abs(a))};var e=k(3);(function(){var c=g();return function(a,b,d,m,h,e){b||(b=4);d||(d=0);for(m=m?Math.min(m*b+d,a.length):a.length;d<m;d+=b)c[0]=a[d],c[1]=a[d+1],c[2]=
a[d+2],c[3]=a[d+3],h(c,c,e),a[d]=c[0],a[d+1]=c[1],a[d+2]=c[2],a[d+3]=c[3];return a}})()},function(n,f,k){k.d(f,"b",function(){return g});f.a=function(a){if(null!==e&&(null===c||null==a||a.generationId!==c.generationId))return e;c=null;e=g.getNewTokenPromise(a);e.then(function(a){c=a});return e};var g=new function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");},e=null,c=null},function(n,f,k){f.a=function(a){return d[a]};f.b=function(d,h,t){t=void 0===t?e.d:t;
var m=void 0;return new Promise(function(p,r){function l(e){null===m?--a:(m=Object(c.c)(b[d],h.path,h.method),m.responseType=h.responseType,m.setRequestHeader("Authorization",e.tokenType+" "+e.accessToken),m.onloadend=function(){if(null===m)--a;else{var b=this.status;200<=b&&300>b?(--a,t.remove(x),p(this.response)):401===b?Object(g.a)(e).then(l):504===b?Object(g.a)().then(l):(--a,t.remove(x),r(c.a.fromXhr(this)))}},m.send(h.payload))}var x=function(){var a=m;m=null;null!=a&&a.abort();r(e.a)};t.add(x);
Object(g.a)().then(l)})};var g=k(35),e=k(14),c=k(8),a=0,b=[],d=["prod"];b[0]=["https://brainmaps.googleapis.com"]},function(n,f,k){function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}k.d(f,"a",function(){return c});k(70);k(72);n=k(2);f=k(16);k=k(0);var c=function(a){function b(a,c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));d.visibleSegments=a.get(c.visibleSegments);d.clipBounds=a.get(c.clipBounds);d.segmentEquivalences=a.get(c.segmentEquivalences);a=function(){d.chunkManager.scheduleUpdateChunkPriorities()};
d.registerDisposer(d.visibleSegments.changed.add(a));d.registerDisposer(d.segmentEquivalences.changed.add(a));d.registerDisposer(d.clipBounds.changed.add(a));return d}e(b,a);return b}(Object(f.c)(Object(n.withChunkManager)(k.c)))},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?
a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}k.d(f,"a",function(){return l});f.b=function(b,d,c,h,l,m,p){Object(a.e)(b,2,d,c,h,l,m,p)};f=k(2);var a=k(17),b=k(37),d=k(22);n=k(75);var m=k(6),h=k(16);k=k(0);var t=function(){function a(a,
b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),r=function H(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return H(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},p=this&&this.__decorate||function(a,
b,d,c){var h=arguments.length,l=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,m;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(a,b,d,c);else for(var p=a.length-1;0<=p;p--)if(m=a[p])l=(3>h?m(l):3<h?m(b,d,l):m(b,d))||l;return 3<h&&l&&Object.defineProperty(b,d,l),l},x=function(a){function b(){g(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.objectId=new m.a;a.vertexPositions=null;a.vertexAttributes=null;a.indices=null;return a}
c(b,a);t(b,[{key:"initializeSkeletonChunk",value:function(a,d){r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initialize",this).call(this,a);this.objectId.assign(d)}},{key:"freeSystemMemory",value:function(){this.vertexPositions=this.indices=null}},{key:"getVertexAttributeBytes",value:function(){var a=this.vertexPositions.byteLength,b=this.vertexAttributes;null!=b&&b.forEach(function(b){a+=b.byteLength});return a}},{key:"serialize",value:function(a,d){r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),
"serialize",this).call(this,a,d);var c=this.vertexPositions,h=this.indices;a.indices=h;d.push(h.buffer);h=this.vertexAttributes;if(null!=h&&0<h.length){var l=new Uint8Array(this.getVertexAttributeBytes());l.set(new Uint8Array(c.buffer,c.byteOffset,c.byteLength));var m=a.vertexAttributeOffsets=new Uint32Array(h.length+1);m[0]=0;var p=c.byteLength;h.forEach(function(a,b){m[b+1]=p;l.set(new Uint8Array(a.buffer,a.byteOffset,a.byteLength),p);p+=a.byteLength});d.push(l.buffer);a.vertexAttributes=l}else a.vertexAttributes=
new Uint8Array(c.buffer,c.byteOffset,c.byteLength),a.vertexAttributeOffsets=Uint32Array.of(0),c.buffer!==d[0]&&d.push(c.buffer);this.vertexPositions=this.indices=this.vertexAttributes=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.indices.byteLength+this.getVertexAttributeBytes();r(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(f.Chunk),l=function(a){function b(a,d){g(this,b);a=e(this,(b.__proto__||
Object.getPrototypeOf(b)).call(this,a,d));a.parameters=d.parameters;return a}c(b,a);return b}(function(a){function b(){g(this,b);return e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);t(b,[{key:"getChunk",value:function(a){var b=Object(d.b)(a),c=this.chunks.get(b);void 0===c&&(c=this.getNewChunk_(x),c.initializeSkeletonChunk(b,a),this.addChunk(c));return c}}]);return b}(f.ChunkSource));f=function(a){function b(a,d){g(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,
a,d));c.source=c.registerDisposer(a.getRef(d.source));c.registerDisposer(c.chunkManager.recomputeChunkPriorities.add(function(){c.updateChunkPriorities()}));return c}c(b,a);t(b,[{key:"updateChunkPriorities",value:function(){var a=this.visibility.value;if(a!==Number.NEGATIVE_INFINITY){var b=Object(h.b)(a),c=Object(h.a)(a),l=this.source,m=this.chunkManager;Object(d.a)(this,function(a){a=l.getChunk(a);m.requestChunk(a,b,c+60)})}}}]);return b}(b.a);f=p([Object(k.g)(n.a)],f)},function(n,f,k){function g(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}k.d(f,"d",function(){return d});k.d(f,"c",function(){return m});var e=k(12),c=k(7),a=k(1);k.d(f,"a",function(){return c.b});var b=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=
c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),d;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.IMAGE=1]="IMAGE";a[a.SEGMENTATION=2]="SEGMENTATION"})(d||(d={}));var m=function(h){function m(b){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");var d=(m.__proto__||Object.getPrototypeOf(m)).call(this,b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;var h=d.dataType=b.dataType,l=d.numChannels=b.numChannels;d.chunkBytes=Object(a.h)(b.chunkDataSize)*c.a[h]*l;d.compressedSegmentationBlockSize=b.compressedSegmentationBlockSize;return d}g(m,h);b(m,[{key:"toObject",value:function(){return{transform:this.chunkLayout.transform,numChannels:this.numChannels,chunkDataSize:this.chunkDataSize,voxelSize:this.voxelSize,dataType:this.dataType,lowerVoxelBound:this.lowerVoxelBound,upperVoxelBound:this.upperVoxelBound,
lowerClipBound:this.lowerClipBound,upperClipBound:this.upperClipBound,baseVoxelOffset:this.baseVoxelOffset,compressedSegmentationBlockSize:this.compressedSegmentationBlockSize}}}],[{key:"make",value:function(a){return new m(Object.assign({},a,{transform:Object(e.f)(a.transform,a.volumeSourceOptions)}))}},{key:"fromObject",value:function(a){return new m(a)}},{key:"withDefaultCompression",value:function(a){var b=a.compressedSegmentationBlockSize,h=a.dataType,l=a.voxelSize,r=a.transform,t=a.lowerVoxelBound,
g=a.upperVoxelBound;r=Object(e.f)(r,a.volumeSourceOptions);void 0!==b||a.volumeType!==d.SEGMENTATION||h!==c.b.UINT32&&h!==c.b.UINT64||(b=Object(e.g)({voxelSize:l,transform:r,lowerVoxelBound:t,upperVoxelBound:g,maxVoxelsPerChunkLog2:9}));return new m(Object.assign({},a,{compressedSegmentationBlockSize:b,transform:r}))}},{key:"getDefaults",value:function(a){var b=Object.assign({},a,{transform:Object(e.f)(a.transform,a.volumeSourceOptions)});return(void 0===a.chunkDataSizes?Object(e.e)(b):a.chunkDataSizes).map(function(b){return m.withDefaultCompression(Object.assign({},
a,{chunkDataSize:b}))})}}]);return m}(e.d);f.b="volume/RenderLayer"},function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(f,"__esModule",{value:!0});k.d(f,"VolumeChunkSource",function(){return t});n=k(2);
f=k(81);var e=k(13),c=k(41),a=k(18),b=k(10),d=k(8),m=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}();k=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,l=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,m;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(a,
b,d,c);else for(var p=a.length-1;0<=p;p--)if(m=a[p])l=(3>h?m(l):3<h?m(b,d,l):m(b,d))||l;return 3<h&&l&&Object.defineProperty(b,d,l),l};var h=new Map;h.set("npz",c.a);h.set("jpeg",e.a);h.set("raw",a.a);var t=function(a){function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&
"function"!==typeof a?this:a;a.chunkDecoder=h.get(a.parameters.encoding);return a}g(b,a);m(b,[{key:"download",value:function(a,b){for(var c=this,h=this.parameters,l=h.urlPrefix+"/"+h.key+"/"+h.channel+"/"+(h.encoding+"/"+h.resolution),m=this.computeChunkBounds(a),p=a.chunkDataSize,r=0;3>r;++r)l+="/"+m[r]+","+(m[r]+p[r]);h.neariso&&(l+="/neariso/");return Object(d.e)(Object(d.c)(h.baseUrls,l),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(b.a);t=k([Object(n.registerChunkSource)(f.a)],
t)},function(n,f,k){f.a=function(d,m){m=Object(a.a)(Object(b.inflate)(new Uint8Array(m)));var h=d.chunkDataSize,t=d.source,r=t.spec.numChannels,p=m.shape;if(4!==p.length||p[0]!==r||p[1]!==h[2]||p[2]!==h[1]||p[3]!==h[0])throw Error("Shape "+JSON.stringify(p)+" does not match chunkDataSize "+Object(c.m)(h));h=m.dataType.dataType;t=t.spec;if(h!==t.dataType)throw Error("Data type "+e.a[h]+" does not match "+("expected data type "+e.a[t.dataType]));Object(g.a)(d,m.data)};var g=k(24),e=k(12),c=k(1),a=k(82),
b=k(25);k.n(b)},function(n,f,k){n.exports=function(g,e,c,a){var b=g&65535|0;g=g>>>16&65535|0;for(var d;0!==c;){d=2E3<c?2E3:c;c-=d;do b=b+e[a++]|0,g=g+b|0;while(--d);b%=65521;g%=65521}return b|g<<16|0}},function(n,f,k){var g=function(){for(var e,c=[],a=0;256>a;a++){e=a;for(var b=0;8>b;b++)e=e&1?3988292384^e>>>1:e>>>1;c[a]=e}return c}();n.exports=function(e,c,a,b){a=b+a;for(e^=-1;b<a;b++)e=e>>>8^g[(e^c[b])&255];return e^-1}},function(n,f,k){function g(b,m){if(65537>m&&(b.subarray&&a||!b.subarray&&c))return String.fromCharCode.apply(null,
e.shrinkBuf(b,m));for(var d="",t=0;t<m;t++)d+=String.fromCharCode(b[t]);return d}var e=k(4),c=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(d){c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(d){a=!1}var b=new e.Buf8(256);for(n=0;256>n;n++)b[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;b[254]=b[254]=1;f.string2buf=function(a){var b,d,c=a.length,r=0;for(b=0;b<c;b++){var p=a.charCodeAt(b);if(55296===(p&64512)&&b+1<c){var x=a.charCodeAt(b+1);56320===(x&64512)&&(p=65536+(p-
55296<<10)+(x-56320),b++)}r+=128>p?1:2048>p?2:65536>p?3:4}var l=new e.Buf8(r);for(b=d=0;d<r;b++)p=a.charCodeAt(b),55296===(p&64512)&&b+1<c&&(x=a.charCodeAt(b+1),56320===(x&64512)&&(p=65536+(p-55296<<10)+(x-56320),b++)),128>p?l[d++]=p:(2048>p?l[d++]=192|p>>>6:(65536>p?l[d++]=224|p>>>12:(l[d++]=240|p>>>18,l[d++]=128|p>>>12&63),l[d++]=128|p>>>6&63),l[d++]=128|p&63);return l};f.buf2binstring=function(a){return g(a,a.length)};f.binstring2buf=function(a){for(var b=new e.Buf8(a.length),d=0,c=b.length;d<
c;d++)b[d]=a.charCodeAt(d);return b};f.buf2string=function(a,c){var d,m=c||a.length,r=Array(2*m);for(c=d=0;c<m;){var p=a[c++];if(128>p)r[d++]=p;else{var e=b[p];if(4<e)r[d++]=65533,c+=e-1;else{for(p&=2===e?31:3===e?15:7;1<e&&c<m;)p=p<<6|a[c++]&63,e--;1<e?r[d++]=65533:65536>p?r[d++]=p:(p-=65536,r[d++]=55296|p>>10&1023,r[d++]=56320|p&1023)}}}return g(r,d)};f.utf8border=function(a,c){var d;c=c||a.length;c>a.length&&(c=a.length);for(d=c-1;0<=d&&128===(a[d]&192);)d--;return 0>d||0===d?c:d+b[a[d]]>c?d:c}},
function(n,f,k){n.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},function(n,f,k){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,
Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(n,f,k){var g=g||{};g.Utils=g.Utils||k(28);g.NIFTI1=g.NIFTI1||function(){this.littleEndian=!1;this.dim_info=0;this.dims=[];this.slice_code=this.slice_end=this.slice_start=this.numBitsPerVoxel=this.datatypeCode=this.intent_code=this.intent_p3=this.intent_p2=this.intent_p1=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.toffset=this.slice_duration=this.cal_min=this.cal_max=
this.xyzt_units=this.scl_inter=0;this.intent_name=this.aux_file=this.description="";this.qoffset_z=this.qoffset_y=this.qoffset_x=this.quatern_d=this.quatern_c=this.quatern_b=this.sform_code=this.qform_code=0;this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.isHDR=!1;this.extensionFlag=[0,0,0,0];this.extensionCode=this.extensionSize=0};g.NIFTI1.TYPE_NONE=0;g.NIFTI1.TYPE_BINARY=1;g.NIFTI1.TYPE_UINT8=2;g.NIFTI1.TYPE_INT16=4;g.NIFTI1.TYPE_INT32=8;g.NIFTI1.TYPE_FLOAT32=16;g.NIFTI1.TYPE_COMPLEX64=
32;g.NIFTI1.TYPE_FLOAT64=64;g.NIFTI1.TYPE_RGB24=128;g.NIFTI1.TYPE_INT8=256;g.NIFTI1.TYPE_UINT16=512;g.NIFTI1.TYPE_UINT32=768;g.NIFTI1.TYPE_INT64=1024;g.NIFTI1.TYPE_UINT64=1280;g.NIFTI1.TYPE_FLOAT128=1536;g.NIFTI1.TYPE_COMPLEX128=1792;g.NIFTI1.TYPE_COMPLEX256=2048;g.NIFTI1.XFORM_UNKNOWN=0;g.NIFTI1.XFORM_SCANNER_ANAT=1;g.NIFTI1.XFORM_ALIGNED_ANAT=2;g.NIFTI1.XFORM_TALAIRACH=3;g.NIFTI1.XFORM_MNI_152=4;g.NIFTI1.SPATIAL_UNITS_MASK=7;g.NIFTI1.TEMPORAL_UNITS_MASK=56;g.NIFTI1.UNITS_UNKNOWN=0;g.NIFTI1.UNITS_METER=
1;g.NIFTI1.UNITS_MM=2;g.NIFTI1.UNITS_MICRON=3;g.NIFTI1.UNITS_SEC=8;g.NIFTI1.UNITS_MSEC=16;g.NIFTI1.UNITS_USEC=24;g.NIFTI1.UNITS_HZ=32;g.NIFTI1.UNITS_PPM=40;g.NIFTI1.UNITS_RADS=48;g.NIFTI1.MAGIC_COOKIE=348;g.NIFTI1.STANDARD_HEADER_SIZE=348;g.NIFTI1.MAGIC_NUMBER_LOCATION=344;g.NIFTI1.MAGIC_NUMBER=[110,43,49];g.NIFTI1.MAGIC_NUMBER2=[110,105,49];g.NIFTI1.EXTENSION_HEADER_SIZE=8;g.NIFTI1.prototype.readHeader=function(e){e=new DataView(e);var c=g.Utils.getIntAt(e,0,this.littleEndian),a,b;c!==g.NIFTI1.MAGIC_COOKIE&&
(this.littleEndian=!0,c=g.Utils.getIntAt(e,0,this.littleEndian));if(c!==g.NIFTI1.MAGIC_COOKIE)throw Error("This does not appear to be a NIFTI file!");this.dim_info=g.Utils.getByteAt(e,39);for(a=0;8>a;a+=1)c=40+2*a,this.dims[a]=g.Utils.getShortAt(e,c,this.littleEndian);this.intent_p1=g.Utils.getFloatAt(e,56,this.littleEndian);this.intent_p2=g.Utils.getFloatAt(e,60,this.littleEndian);this.intent_p3=g.Utils.getFloatAt(e,64,this.littleEndian);this.intent_code=g.Utils.getShortAt(e,68,this.littleEndian);
this.datatypeCode=g.Utils.getShortAt(e,70,this.littleEndian);this.numBitsPerVoxel=g.Utils.getShortAt(e,72,this.littleEndian);this.slice_start=g.Utils.getShortAt(e,74,this.littleEndian);for(a=0;8>a;a+=1)c=76+4*a,this.pixDims[a]=g.Utils.getFloatAt(e,c,this.littleEndian);this.vox_offset=g.Utils.getFloatAt(e,108,this.littleEndian);this.scl_slope=g.Utils.getFloatAt(e,112,this.littleEndian);this.scl_inter=g.Utils.getFloatAt(e,116,this.littleEndian);this.slice_end=g.Utils.getShortAt(e,120,this.littleEndian);
this.slice_code=g.Utils.getByteAt(e,122);this.xyzt_units=g.Utils.getByteAt(e,123);this.cal_max=g.Utils.getFloatAt(e,124,this.littleEndian);this.cal_min=g.Utils.getFloatAt(e,128,this.littleEndian);this.slice_duration=g.Utils.getFloatAt(e,132,this.littleEndian);this.toffset=g.Utils.getFloatAt(e,136,this.littleEndian);this.description=g.Utils.getStringAt(e,148,228);this.aux_file=g.Utils.getStringAt(e,228,252);this.qform_code=g.Utils.getShortAt(e,252,this.littleEndian);this.sform_code=g.Utils.getShortAt(e,
254,this.littleEndian);this.quatern_b=g.Utils.getFloatAt(e,256,this.littleEndian);this.quatern_c=g.Utils.getFloatAt(e,260,this.littleEndian);this.quatern_d=g.Utils.getFloatAt(e,264,this.littleEndian);this.qoffset_x=g.Utils.getFloatAt(e,268,this.littleEndian);this.qoffset_y=g.Utils.getFloatAt(e,272,this.littleEndian);this.qoffset_z=g.Utils.getFloatAt(e,276,this.littleEndian);for(a=0;3>a;a+=1)for(b=0;4>b;b+=1)c=280+4*(4*a+b),this.affine[a][b]=g.Utils.getFloatAt(e,c,this.littleEndian);this.affine[3][0]=
0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.intent_name=g.Utils.getStringAt(e,328,344);this.magic=g.Utils.getStringAt(e,344,348);this.isHDR=this.magic===g.NIFTI1.MAGIC_NUMBER2;e.byteLength>g.NIFTI1.MAGIC_COOKIE&&(this.extensionFlag[0]=g.Utils.getByteAt(e,348),this.extensionFlag[1]=g.Utils.getByteAt(e,349),this.extensionFlag[2]=g.Utils.getByteAt(e,350),this.extensionFlag[3]=g.Utils.getByteAt(e,351),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(e),this.extensionCode=
this.getExtensionCode(e)))};g.NIFTI1.prototype.toFormattedString=function(){var e=g.Utils.formatNumber;var c=""+("Dim Info = "+this.dim_info+"\n");c+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n";c+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n";c+="Intent Code = "+this.intent_code+"\n";c+="Datatype = "+this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+
")\n";c+="Bits Per Voxel = "+this.numBitsPerVoxel+"\n";c+="Slice Start = "+this.slice_start+"\n";c+="Voxel Dimensions (1-8): "+e(this.pixDims[0])+", "+e(this.pixDims[1])+", "+e(this.pixDims[2])+", "+e(this.pixDims[3])+", "+e(this.pixDims[4])+", "+e(this.pixDims[5])+", "+e(this.pixDims[6])+", "+e(this.pixDims[7])+"\n";c+="Image Offset = "+this.vox_offset+"\n";c+="Data Scale:  Slope = "+e(this.scl_slope)+"  Intercept = "+e(this.scl_inter)+"\n";c+="Slice End = "+this.slice_end+"\n";c+="Slice Code = "+
this.slice_code+"\n";c+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(g.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(g.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n";c+="Display Range:  Max = "+e(this.cal_max)+"  Min = "+e(this.cal_min)+"\n";c+="Slice Duration = "+this.slice_duration+"\n";c+="Time Axis Shift = "+this.toffset+"\n";c+='Description: "'+this.description+'"\n';c+='Auxiliary File: "'+this.aux_file+'"\n';c+="Q-Form Code = "+this.qform_code+" ("+
this.getTransformCodeString(this.qform_code)+")\n";c+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n";c+="Quaternion Parameters:  b = "+e(this.quatern_b)+"  c = "+e(this.quatern_c)+"  d = "+e(this.quatern_d)+"\n";c+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n";c+="S-Form Parameters X: "+e(this.affine[0][0])+", "+e(this.affine[0][1])+", "+e(this.affine[0][2])+", "+e(this.affine[0][3])+"\n";c+="S-Form Parameters Y: "+
e(this.affine[1][0])+", "+e(this.affine[1][1])+", "+e(this.affine[1][2])+", "+e(this.affine[1][3])+"\n";c+="S-Form Parameters Z: "+e(this.affine[2][0])+", "+e(this.affine[2][1])+", "+e(this.affine[2][2])+", "+e(this.affine[2][3])+"\n";c+='Intent Name: "'+this.intent_name+'"\n';this.extensionFlag[0]&&(c+="Extension: Size = "+this.extensionSize+"  Code = "+this.extensionCode+"\n");return c};g.NIFTI1.prototype.getDatatypeCodeString=function(e){return e===g.NIFTI1.TYPE_UINT8?"1-Byte Unsigned Integer":
e===g.NIFTI1.TYPE_INT16?"2-Byte Signed Integer":e===g.NIFTI1.TYPE_INT32?"4-Byte Signed Integer":e===g.NIFTI1.TYPE_FLOAT32?"4-Byte Float":e===g.NIFTI1.TYPE_FLOAT64?"8-Byte Float":e===g.NIFTI1.TYPE_RGB24?"RGB":e===g.NIFTI1.TYPE_INT8?"1-Byte Signed Integer":e===g.NIFTI1.TYPE_UINT16?"2-Byte Unsigned Integer":e===g.NIFTI1.TYPE_UINT32?"4-Byte Unsigned Integer":e===g.NIFTI1.TYPE_INT64?"8-Byte Signed Integer":e===g.NIFTI1.TYPE_UINT64?"8-Byte Unsigned Integer":"Unknown"};g.NIFTI1.prototype.getTransformCodeString=
function(e){return e===g.NIFTI1.XFORM_SCANNER_ANAT?"Scanner":e===g.NIFTI1.XFORM_ALIGNED_ANAT?"Aligned":e===g.NIFTI1.XFORM_TALAIRACH?"Talairach":e===g.NIFTI1.XFORM_MNI_152?"MNI":"Unknown"};g.NIFTI1.prototype.getUnitsCodeString=function(e){return e===g.NIFTI1.UNITS_METER?"Meters":e===g.NIFTI1.UNITS_MM?"Millimeters":e===g.NIFTI1.UNITS_MICRON?"Microns":e===g.NIFTI1.UNITS_SEC?"Seconds":e===g.NIFTI1.UNITS_MSEC?"Milliseconds":e===g.NIFTI1.UNITS_USEC?"Microseconds":e===g.NIFTI1.UNITS_HZ?"Hz":e===g.NIFTI1.UNITS_PPM?
"PPM":e===g.NIFTI1.UNITS_RADS?"Rads":"Unknown"};g.NIFTI1.prototype.getQformMat=function(){return this.convertNiftiQFormToNiftiSForm(this.quatern_b,this.quatern_c,this.quatern_d,this.qoffset_x,this.qoffset_y,this.qoffset_z,this.pixDims[1],this.pixDims[2],this.pixDims[3],this.pixDims[0])};g.NIFTI1.prototype.convertNiftiQFormToNiftiSForm=function(e,c,a,b,d,m,h,t,r,p){var g=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],l=a;g[3][0]=g[3][1]=g[3][2]=0;g[3][3]=1;a=1-(e*e+c*c+l*l);1E-7>a?(a=1/Math.sqrt(e*e+c*
c+l*l),e*=a,c*=a,l*=a,a=0):a=Math.sqrt(a);h=0<h?h:1;t=0<t?t:1;r=0<r?r:1;0>p&&(r=-r);g[0][0]=(a*a+e*e-c*c-l*l)*h;g[0][1]=2*(e*c-a*l)*t;g[0][2]=2*(e*l+a*c)*r;g[1][0]=2*(e*c+a*l)*h;g[1][1]=(a*a+c*c-e*e-l*l)*t;g[1][2]=2*(c*l-a*e)*r;g[2][0]=2*(e*l-a*c)*h;g[2][1]=2*(c*l+a*e)*t;g[2][2]=(a*a+l*l-c*c-e*e)*r;g[0][3]=b;g[1][3]=d;g[2][3]=m;return g};g.NIFTI1.prototype.convertNiftiSFormToNEMA=function(e){var c,a,b,d;var m=[[0,0,0],[0,0,0],[0,0,0]];var h=[[0,0,0],[0,0,0],[0,0,0]];var t=e[0][0];var r=e[0][1];var p=
e[0][2];var g=e[1][0];var l=e[1][1];var f=e[1][2];var k=e[2][0];var w=e[2][1];var n=e[2][2];e=Math.sqrt(t*t+g*g+k*k);if(0===e)return null;t/=e;g/=e;k/=e;e=Math.sqrt(r*r+l*l+w*w);if(0===e)return null;r/=e;l/=e;w/=e;e=t*r+g*l+k*w;if(1E-4<Math.abs(e)){r-=e*t;l-=e*g;w-=e*k;e=Math.sqrt(r*r+l*l+w*w);if(0===e)return null;r/=e;l/=e;w/=e}e=Math.sqrt(p*p+f*f+n*n);0===e?(p=g*w-k*l,f=k*r-w*t,n=t*l-g*r):(p/=e,f/=e,n/=e);e=t*p+g*f+k*n;if(1E-4<Math.abs(e)){p-=e*t;f-=e*g;n-=e*k;e=Math.sqrt(p*p+f*f+n*n);if(0===e)return null;
p/=e;f/=e;n/=e}e=r*p+l*f+w*n;if(1E-4<Math.abs(e)){p-=e*r;f-=e*l;n-=e*w;e=Math.sqrt(p*p+f*f+n*n);if(0===e)return null;p/=e;f/=e;n/=e}m[0][0]=t;m[0][1]=r;m[0][2]=p;m[1][0]=g;m[1][1]=l;m[1][2]=f;m[2][0]=k;m[2][1]=w;m[2][2]=n;k=this.nifti_mat33_determ(m);if(0===k)return null;var G=-666;t=g=l=f=1;r=2;p=3;for(w=1;3>=w;w+=1)for(n=1;3>=n;n+=1)if(w!==n)for(c=1;3>=c;c+=1)if(w!==c&&n!==c)for(h[0][0]=h[0][1]=h[0][2]=h[1][0]=h[1][1]=h[1][2]=h[2][0]=h[2][1]=h[2][2]=0,a=-1;1>=a;a+=2)for(b=-1;1>=b;b+=2)for(d=-1;1>=
d;d+=2)h[0][w-1]=a,h[1][n-1]=b,h[2][c-1]=d,e=this.nifti_mat33_determ(h),0<e*k&&(e=this.nifti_mat33_mul(h,m),e=e[0][0]+e[1][1]+e[2][2],e>G&&(G=e,t=w,r=n,p=c,g=a,l=b,f=d));m=h=e=k=w=n=0;switch(t*g){case 1:m="X";k="+";break;case -1:m="X";k="-";break;case 2:m="Y";k="+";break;case -2:m="Y";k="-";break;case 3:m="Z";k="+";break;case -3:m="Z",k="-"}switch(r*l){case 1:h="X";w="+";break;case -1:h="X";w="-";break;case 2:h="Y";w="+";break;case -2:h="Y";w="-";break;case 3:h="Z";w="+";break;case -3:h="Z",w="-"}switch(p*
f){case 1:e="X";n="+";break;case -1:e="X";n="-";break;case 2:e="Y";n="+";break;case -2:e="Y";n="-";break;case 3:e="Z";n="+";break;case -3:e="Z",n="-"}return m+h+e+k+w+n};g.NIFTI1.prototype.nifti_mat33_mul=function(e,c){var a=[[0,0,0],[0,0,0],[0,0,0]],b,d;for(b=0;3>b;b+=1)for(d=0;3>d;d+=1)a[b][d]=e[b][0]*c[0][d]+e[b][1]*c[1][d]+e[b][2]*c[2][d];return a};g.NIFTI1.prototype.nifti_mat33_determ=function(e){var c=e[0][0];var a=e[0][1];var b=e[0][2];var d=e[1][0];var m=e[1][1];var h=e[1][2];var t=e[2][0];
var r=e[2][1];e=e[2][2];return c*m*e-c*r*h-d*a*e+d*r*b+t*a*h-t*m*b};g.NIFTI1.prototype.getExtensionLocation=function(){return g.NIFTI1.MAGIC_COOKIE+4};g.NIFTI1.prototype.getExtensionSize=function(e){return g.Utils.getIntAt(e,this.getExtensionLocation(),this.littleEndian)};g.NIFTI1.prototype.getExtensionCode=function(e){return g.Utils.getIntAt(e,this.getExtensionLocation()+4,this.littleEndian)};"undefined"!==typeof n&&n.exports&&(n.exports=g.NIFTI1)},function(n,f,k){function g(a,b){if(!(a instanceof
b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}function a(a,b){b=b.match(z);if(null===b||void 0===b[1])throw Error('Data source URL must have the form "<protocol>://<path>".');var d=b[1];a=a.get(d);if(void 0===a)throw Error("Unsupported data source: "+JSON.stringify(d)+".");return[a,b[2],d]}function b(b,d,c,q){var h=$jscomp.makeIterator(a(D,d));d=h.next().value;h=h.next().value;return d.getMesh(b,h,c,q)}function d(b,d,c,q){var h=$jscomp.makeIterator(a(G,d));d=h.next().value;h=h.next().value;return d.getMeshVertexAttributes(b,
h,c,q)}function m(a){var b=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next())c=c.value,b=Math.min(b,c),d=Math.max(d,c);return[b,d]}function h(a,c,h,q){for(var l=[b(a,c.meshSourceUrl,h,q)],p=$jscomp.makeIterator(c.attributeSourceUrls),u=p.next();!u.done;u=p.next())l.push(d(a,u.value,h,q));return Promise.all(l).then(function(a){function b(a,b,d){for(var c=a.length,h=0;h<c;++h){var l=a[h],p=b[h],u=d,r=$jscomp.makeIterator(m(p)),e=r.next().value;
r=r.next().value;q.info.vertexAttributes.push({name:l.name,source:u,numComponents:l.numComponents,dataType:l.dataType,min:e,max:r});q.vertexAttributes.push(p)}}var d=a[0],q={info:{numVertices:d.info.numVertices,numTriangles:d.info.numTriangles,vertexAttributes:[]},vertexPositions:d.vertexPositions,indices:d.indices,vertexNormals:d.vertexNormals,vertexAttributes:[]};b(d.info.vertexAttributes,d.vertexAttributes);c.attributeSourceUrls.forEach(function(c,q){q=a[q+1];if(q.numVertices!==d.info.numVertices)throw Error("Vertex attribute source "+
JSON.stringify(c)+" specifies attributes for "+(q.numVertices+" vertices, but mesh has "+d.info.numVertices+" vertices."));b(q.attributeInfo,q.attributes,c)});return q})}f.a=function(a,b){D.set(a,b)};f.b=function(a,b){G.set(a,b)};n=k(2);var t=k(11),r=k(17),p=k(110),x=k(5),l=k(16);k=k(0);var v=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,
d);c&&a(b,c);return b}}(),H=function y(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return y(a,b,d)}else{if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}};f=this&&this.__decorate||function(a,b,d,c){var h=arguments.length,q=3>h?b:null===c?c=Object.getOwnPropertyDescriptor(b,d):c,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)q=Reflect.decorate(a,b,d,c);else for(var m=
a.length-1;0<=m;m--)if(l=a[m])q=(3>h?l(q):3<h?l(b,d,q):l(b,d))||q;return 3<h&&q&&Object.defineProperty(b,d,q),q};var w=function(a){function b(){g(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.data=null;return a}c(b,a);v(b,[{key:"freeSystemMemory",value:function(){this.data=null}},{key:"serialize",value:function(a,d){H(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"serialize",this).call(this,a,d);var c=this.data,h=c.vertexPositions,q=c.indices,l=c.vertexNormals;
c=c.vertexAttributes;a.vertexPositions=h;a.indices=q;a.vertexNormals=l;a.vertexAttributes=c;a=new Set;a.add(h.buffer);a.add(q.buffer);a.add(l.buffer);h=$jscomp.makeIterator(c);for(q=h.next();!q.done;q=h.next())a.add(q.value.buffer);d.push.apply(d,[].concat($jscomp.arrayFromIterable(a)));this.data=null}},{key:"downloadSucceeded",value:function(){var a=this.data,d=a.vertexAttributes;a=this.gpuMemoryBytes=a.vertexPositions.byteLength+a.indices.byteLength+a.vertexNormals.byteLength;d=$jscomp.makeIterator(d);
for(var c=d.next();!c.done;c=d.next())a+=c.value.byteLength;this.systemMemoryBytes=this.gpuMemoryBytes=a;H(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}}]);return b}(n.Chunk),D=new Map,G=new Map,z=/^(?:([a-zA-Z-+_]+):\/\/)?(.*)$/,F=function(a){function b(a,d){g(this,b);a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));a.parameters=d.parameters;a.info=d.info;return a}c(b,a);v(b,[{key:"getChunk",value:function(){var a=p.b,b=this.chunks.get(a);
void 0===b&&(b=this.getNewChunk_(w),b.initialize(a),this.addChunk(b));return b}},{key:"download",value:function(a,b){var d=this;return h(this.chunkManager,this.parameters,function(){return{priorityTier:a.priorityTier,priority:a.priority}},b).then(function(b){if(Object(x.c)(b.info)!==Object(x.c)(d.info))throw Error("Mesh info has changed.");void 0===b.vertexNormals&&(b.vertexNormals=Object(r.b)(b.vertexPositions,b.indices));a.data=b})}}]);return b}(n.ChunkSource);F=f([Object(k.g)(p.d)],F);n=function(a){function b(a,
d){g(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d));c.source=c.registerDisposer(a.getRef(d.source));c.registerDisposer(c.chunkManager.recomputeChunkPriorities.add(function(){c.updateChunkPriorities()}));return c}c(b,a);v(b,[{key:"updateChunkPriorities",value:function(){var a=this.visibility.value;if(a!==Number.NEGATIVE_INFINITY){var b=Object(l.b)(a);a=Object(l.a)(a);var d=this.chunkManager,c=this.source.getChunk();d.requestChunk(c,b,a+50)}}}]);return b}(Object(l.c)(Object(n.withChunkManager)(k.c)));
n=f([Object(k.g)(p.c)],n);Object(k.e)(p.a,function(a,b){var d=this.getRef(a.chunkManager);try{return h(d,a.parameters,function(){return{priorityTier:t.d.VISIBLE,priority:1E3}},b).then(function(a){return{value:a.info}})}finally{d.dispose()}})},function(n,f,k){f.a=function(e){e=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);var c=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return 2<c.length&&31===c[0]&&139===c[1]?Object(g.inflate)(e):e};var g=k(25);
k.n(g)},function(n,f,k){k(29);k(2);k(21);k(65);k(40);k(91);k(93);k(98);k(99);k(101);k(103);k(108);n.exports=k(111)},function(n,f,k){var g=function(){function e(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&e(c.prototype,a);b&&e(c,b);return c}}();n=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");}g(e,null,[{key:"insertAfter",
value:function(c,a){var b=c.next0;a.next0=b;a.prev0=c;c.next0=a;b.prev0=a}},{key:"insertBefore",value:function(c,a){var b=c.prev0;a.prev0=b;a.next0=c;c.prev0=a;b.next0=a}},{key:"front",value:function(c){var a=c.next0;return a===c?null:a}},{key:"back",value:function(c){var a=c.prev0;return a===c?null:a}},{key:"pop",value:function(c){var a=c.next0,b=c.prev0;a.prev0=b;b.next0=a;c.next0=null;c.prev0=null;return c}},{key:"iterator",value:function(c){function a(a,m){for(;;)switch(b){case 0:d=c.next0;case 1:if(d===
c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===m){b=5;break}b=-1;throw m;case 5:case 2:d=d.next0;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,m={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();m[Symbol.iterator]=function(){return this};return m}},{key:"reverseIterator",value:function(c){function a(a,m){for(;;)switch(b){case 0:d=c.prev0;case 1:if(d===
c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===m){b=5;break}b=-1;throw m;case 5:case 2:d=d.prev0;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,m={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();m[Symbol.iterator]=function(){return this};return m}},{key:"initializeHead",value:function(c){c.next0=c.prev0=c}}]);return e}();f.a=n},function(n,f,k){var g=
function(){function e(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&e(c.prototype,a);b&&e(c,b);return c}}();n=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");}g(e,null,[{key:"insertAfter",value:function(c,a){var b=c.next1;a.next1=b;a.prev1=c;c.next1=a;b.prev1=a}},{key:"insertBefore",value:function(c,a){var b=
c.prev1;a.prev1=b;a.next1=c;c.prev1=a;b.next1=a}},{key:"front",value:function(c){var a=c.next1;return a===c?null:a}},{key:"back",value:function(c){var a=c.prev1;return a===c?null:a}},{key:"pop",value:function(c){var a=c.next1,b=c.prev1;a.prev1=b;b.next1=a;c.next1=null;c.prev1=null;return c}},{key:"iterator",value:function(c){function a(a,m){for(;;)switch(b){case 0:d=c.next1;case 1:if(d===c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===m){b=5;break}b=-1;throw m;case 5:case 2:d=d.next1;
b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,m={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();m[Symbol.iterator]=function(){return this};return m}},{key:"reverseIterator",value:function(c){function a(a,m){for(;;)switch(b){case 0:d=c.prev1;case 1:if(d===c){b=3;break}b=4;return{value:d,done:!1};case 4:if(void 0===m){b=5;break}b=-1;throw m;case 5:case 2:d=d.prev1;
b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,m={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();m[Symbol.iterator]=function(){return this};return m}},{key:"initializeHead",value:function(c){c.next1=c.prev1=c}}]);return e}();f.a=n},function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}k.d(f,"a",function(){return m});var c=k(30),a=k(5),b=function t(a,b,d){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c){if(a=Object.getPrototypeOf(a),null!==a)return t(a,b,d)}else{if("value"in
c)return c.value;b=c.get;return void 0===b?void 0:b.call(d)}},d=function(){function a(a,b){for(var d=0;d<b.length;d++){var c=b[d];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(b,d,c){d&&a(b.prototype,d);c&&a(b,c);return b}}(),m=function(m){function r(){e(this,r);var a=(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!a||"object"!==typeof a&&"function"!==typeof a?this:a}g(r,m);d(r,[{key:"get",value:function(d,c){"string"!==typeof d&&(d=Object(a.c)(d));return b(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"get",this).call(this,d,c)}},{key:"getUncounted",value:function(a,b){return this.get(a,function(){return new c.b(b())}).value}}]);return r}(function(){function a(){e(this,a);this.map=new Map}d(a,[{key:"get",value:function(a,b){var d=this.map,c=d.get(a);void 0===c?(c=b(),c.registerDisposer(function(){d.delete(a)}),
d.set(a,c)):c.addRef();return c}}]);return a}())},function(n,f,k){k(3)},function(n,f,k){k(3)},function(n,f,k){function g(a,b,d){var c=b[0],h=b[1],e=b[2],r=b[3],p=b[4],g=b[5],l=b[6],f=b[7],k=b[8],w=b[9],n=b[10],G=b[11],z=b[12],F=b[13],u=b[14];b=b[15];var y=d[0],J=d[1],q=d[2],I=d[3];a[0]=y*c+J*p+q*k+I*z;a[1]=y*h+J*g+q*w+I*F;a[2]=y*e+J*l+q*n+I*u;a[3]=y*r+J*f+q*G+I*b;y=d[4];J=d[5];q=d[6];I=d[7];a[4]=y*c+J*p+q*k+I*z;a[5]=y*h+J*g+q*w+I*F;a[6]=y*e+J*l+q*n+I*u;a[7]=y*r+J*f+q*G+I*b;y=d[8];J=d[9];q=d[10];I=
d[11];a[8]=y*c+J*p+q*k+I*z;a[9]=y*h+J*g+q*w+I*F;a[10]=y*e+J*l+q*n+I*u;a[11]=y*r+J*f+q*G+I*b;y=d[12];J=d[13];q=d[14];I=d[15];a[12]=y*c+J*p+q*k+I*z;a[13]=y*h+J*g+q*w+I*F;a[14]=y*e+J*l+q*n+I*u;a[15]=y*r+J*f+q*G+I*b;return a}function e(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];a[4]=b[4]-d[4];a[5]=b[5]-d[5];a[6]=b[6]-d[6];a[7]=b[7]-d[7];a[8]=b[8]-d[8];a[9]=b[9]-d[9];a[10]=b[10]-d[10];a[11]=b[11]-d[11];a[12]=b[12]-d[12];a[13]=b[13]-d[13];a[14]=b[14]-d[14];a[15]=b[15]-d[15];return a}
Object.defineProperty(f,"__esModule",{value:!0});f.create=function(){var a=new c.a(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.clone=function(a){var b=new c.a(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};f.copy=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=
b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};f.fromValues=function(a,b,d,m,h,e,r,p,g,l,f,k,w,n,G,z){var t=new c.a(16);t[0]=a;t[1]=b;t[2]=d;t[3]=m;t[4]=h;t[5]=e;t[6]=r;t[7]=p;t[8]=g;t[9]=l;t[10]=f;t[11]=k;t[12]=w;t[13]=n;t[14]=G;t[15]=z;return t};f.set=function(a,b,d,c,h,e,r,p,g,l,f,k,w,n,G,z,F){a[0]=b;a[1]=d;a[2]=c;a[3]=h;a[4]=e;a[5]=r;a[6]=p;a[7]=g;a[8]=l;a[9]=f;a[10]=k;a[11]=w;a[12]=n;a[13]=G;a[14]=z;a[15]=
F;return a};f.identity=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.transpose=function(a,b){if(a===b){var d=b[1],c=b[2],h=b[3],e=b[6],r=b[7],p=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=d;a[6]=b[9];a[7]=b[13];a[8]=c;a[9]=e;a[11]=b[14];a[12]=h;a[13]=r;a[14]=p}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=
b[7],a[14]=b[11],a[15]=b[15];return a};f.invert=function(a,b){var d=b[0],c=b[1],h=b[2],e=b[3],r=b[4],p=b[5],g=b[6],l=b[7],f=b[8],k=b[9],w=b[10],n=b[11],G=b[12],z=b[13],F=b[14];b=b[15];var u=d*p-c*r,y=d*g-h*r,J=d*l-e*r,q=c*g-h*p,I=c*l-e*p,C=h*l-e*g,L=f*z-k*G,B=f*F-w*G,E=f*b-n*G,O=k*F-w*z,N=k*b-n*z,Q=w*b-n*F,K=u*Q-y*N+J*O+q*E-I*B+C*L;if(!K)return null;K=1/K;a[0]=(p*Q-g*N+l*O)*K;a[1]=(h*N-c*Q-e*O)*K;a[2]=(z*C-F*I+b*q)*K;a[3]=(w*I-k*C-n*q)*K;a[4]=(g*E-r*Q-l*B)*K;a[5]=(d*Q-h*E+e*B)*K;a[6]=(F*J-G*C-b*y)*
K;a[7]=(f*C-w*J+n*y)*K;a[8]=(r*N-p*E+l*L)*K;a[9]=(c*E-d*N-e*L)*K;a[10]=(G*I-z*J+b*u)*K;a[11]=(k*J-f*I-n*u)*K;a[12]=(p*B-r*O-g*L)*K;a[13]=(d*O-c*B+h*L)*K;a[14]=(z*y-G*q-F*u)*K;a[15]=(f*q-k*y+w*u)*K;return a};f.adjoint=function(a,b){var d=b[0],c=b[1],h=b[2],e=b[3],r=b[4],p=b[5],g=b[6],l=b[7],f=b[8],k=b[9],w=b[10],n=b[11],G=b[12],z=b[13],F=b[14];b=b[15];a[0]=p*(w*b-n*F)-k*(g*b-l*F)+z*(g*n-l*w);a[1]=-(c*(w*b-n*F)-k*(h*b-e*F)+z*(h*n-e*w));a[2]=c*(g*b-l*F)-p*(h*b-e*F)+z*(h*l-e*g);a[3]=-(c*(g*n-l*w)-p*(h*
n-e*w)+k*(h*l-e*g));a[4]=-(r*(w*b-n*F)-f*(g*b-l*F)+G*(g*n-l*w));a[5]=d*(w*b-n*F)-f*(h*b-e*F)+G*(h*n-e*w);a[6]=-(d*(g*b-l*F)-r*(h*b-e*F)+G*(h*l-e*g));a[7]=d*(g*n-l*w)-r*(h*n-e*w)+f*(h*l-e*g);a[8]=r*(k*b-n*z)-f*(p*b-l*z)+G*(p*n-l*k);a[9]=-(d*(k*b-n*z)-f*(c*b-e*z)+G*(c*n-e*k));a[10]=d*(p*b-l*z)-r*(c*b-e*z)+G*(c*l-e*p);a[11]=-(d*(p*n-l*k)-r*(c*n-e*k)+f*(c*l-e*p));a[12]=-(r*(k*F-w*z)-f*(p*F-g*z)+G*(p*w-g*k));a[13]=d*(k*F-w*z)-f*(c*F-h*z)+G*(c*w-h*k);a[14]=-(d*(p*F-g*z)-r*(c*F-h*z)+G*(c*g-h*p));a[15]=d*
(p*w-g*k)-r*(c*w-h*k)+f*(c*g-h*p);return a};f.determinant=function(a){var b=a[0],d=a[1],c=a[2],h=a[3],e=a[4],r=a[5],p=a[6],g=a[7],l=a[8],f=a[9],k=a[10],w=a[11],n=a[12],G=a[13],z=a[14];a=a[15];return(b*r-d*e)*(k*a-w*z)-(b*p-c*e)*(f*a-w*G)+(b*g-h*e)*(f*z-k*G)+(d*p-c*r)*(l*a-w*n)-(d*g-h*r)*(l*z-k*n)+(c*g-h*p)*(l*G-f*n)};f.multiply=g;f.translate=function(a,b,d){var c=d[0],h=d[1];d=d[2];if(b===a)a[12]=b[0]*c+b[4]*h+b[8]*d+b[12],a[13]=b[1]*c+b[5]*h+b[9]*d+b[13],a[14]=b[2]*c+b[6]*h+b[10]*d+b[14],a[15]=b[3]*
c+b[7]*h+b[11]*d+b[15];else{var e=b[0];var r=b[1];var p=b[2];var g=b[3];var l=b[4];var f=b[5];var k=b[6];var w=b[7];var n=b[8];var G=b[9];var z=b[10];var F=b[11];a[0]=e;a[1]=r;a[2]=p;a[3]=g;a[4]=l;a[5]=f;a[6]=k;a[7]=w;a[8]=n;a[9]=G;a[10]=z;a[11]=F;a[12]=e*c+l*h+n*d+b[12];a[13]=r*c+f*h+G*d+b[13];a[14]=p*c+k*h+z*d+b[14];a[15]=g*c+w*h+F*d+b[15]}return a};f.scale=function(a,b,d){var c=d[0],h=d[1];d=d[2];a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*h;a[5]=b[5]*h;a[6]=b[6]*h;a[7]=b[7]*h;a[8]=
b[8]*d;a[9]=b[9]*d;a[10]=b[10]*d;a[11]=b[11]*d;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};f.rotate=function(a,b,d,m){var h=m[0],e=m[1];m=m[2];var r=Math.sqrt(h*h+e*e+m*m);if(Math.abs(r)<c.b)return null;r=1/r;h*=r;e*=r;m*=r;var p=Math.sin(d);var g=Math.cos(d);var l=1-g;d=b[0];r=b[1];var f=b[2];var k=b[3];var w=b[4];var n=b[5];var G=b[6];var z=b[7];var F=b[8];var u=b[9];var y=b[10];var J=b[11];var q=h*h*l+g;var I=e*h*l+m*p;var C=m*h*l-e*p;var L=h*e*l-m*p;var B=e*e*l+g;var E=m*e*l+h*p;
var O=h*m*l+e*p;h=e*m*l-h*p;e=m*m*l+g;a[0]=d*q+w*I+F*C;a[1]=r*q+n*I+u*C;a[2]=f*q+G*I+y*C;a[3]=k*q+z*I+J*C;a[4]=d*L+w*B+F*E;a[5]=r*L+n*B+u*E;a[6]=f*L+G*B+y*E;a[7]=k*L+z*B+J*E;a[8]=d*O+w*h+F*e;a[9]=r*O+n*h+u*e;a[10]=f*O+G*h+y*e;a[11]=k*O+z*h+J*e;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};f.rotateX=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var h=b[4],e=b[5],r=b[6],p=b[7],g=b[8],l=b[9],f=b[10],k=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],
a[14]=b[14],a[15]=b[15]);a[4]=h*d+g*c;a[5]=e*d+l*c;a[6]=r*d+f*c;a[7]=p*d+k*c;a[8]=g*d-h*c;a[9]=l*d-e*c;a[10]=f*d-r*c;a[11]=k*d-p*c;return a};f.rotateY=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var h=b[0],e=b[1],r=b[2],p=b[3],g=b[8],l=b[9],f=b[10],k=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=h*d-g*c;a[1]=e*d-l*c;a[2]=r*d-f*c;a[3]=p*d-k*c;a[8]=h*c+g*d;a[9]=e*c+l*d;a[10]=r*c+f*d;a[11]=p*c+k*d;return a};f.rotateZ=function(a,b,d){var c=
Math.sin(d);d=Math.cos(d);var h=b[0],e=b[1],r=b[2],p=b[3],g=b[4],l=b[5],f=b[6],k=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=h*d+g*c;a[1]=e*d+l*c;a[2]=r*d+f*c;a[3]=p*d+k*c;a[4]=g*d-h*c;a[5]=l*d-e*c;a[6]=f*d-r*c;a[7]=k*d-p*c;return a};f.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};f.fromScaling=function(a,b){a[0]=
b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.fromRotation=function(a,b,d){var e=d[0],h=d[1];d=d[2];var g=Math.sqrt(e*e+h*h+d*d);if(Math.abs(g)<c.b)return null;g=1/g;e*=g;h*=g;d*=g;g=Math.sin(b);b=Math.cos(b);var r=1-b;a[0]=e*e*r+b;a[1]=h*e*r+d*g;a[2]=d*e*r-h*g;a[3]=0;a[4]=e*h*r-d*g;a[5]=h*h*r+b;a[6]=d*h*r+e*g;a[7]=0;a[8]=e*d*r+h*g;a[9]=h*d*r-e*g;a[10]=d*d*r+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
f.fromXRotation=function(a,b){var d=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.fromYRotation=function(a,b){var d=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.fromZRotation=function(a,b){var d=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=b;a[6]=0;a[7]=0;
a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.fromRotationTranslation=function(a,b,d){var c=b[0],h=b[1],e=b[2],r=b[3],p=c+c,g=h+h,l=e+e;b=c*p;var f=c*g;c*=l;var k=h*g;h*=l;e*=l;p*=r;g*=r;r*=l;a[0]=1-(k+e);a[1]=f+r;a[2]=c-g;a[3]=0;a[4]=f-r;a[5]=1-(b+e);a[6]=h+p;a[7]=0;a[8]=c+g;a[9]=h-p;a[10]=1-(b+k);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};f.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};f.getScaling=function(a,b){var d=b[0],c=
b[1],h=b[2],e=b[4],r=b[5],p=b[6],g=b[8],l=b[9];b=b[10];a[0]=Math.sqrt(d*d+c*c+h*h);a[1]=Math.sqrt(e*e+r*r+p*p);a[2]=Math.sqrt(g*g+l*l+b*b);return a};f.getRotation=function(a,b){var d=b[0]+b[5]+b[10];0<d?(d=2*Math.sqrt(d+1),a[3]=.25*d,a[0]=(b[6]-b[9])/d,a[1]=(b[8]-b[2])/d,a[2]=(b[1]-b[4])/d):b[0]>b[5]&b[0]>b[10]?(d=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/d,a[0]=.25*d,a[1]=(b[1]+b[4])/d,a[2]=(b[8]+b[2])/d):b[5]>b[10]?(d=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/d,a[0]=(b[1]+b[4])/d,a[1]=
.25*d,a[2]=(b[6]+b[9])/d):(d=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/d,a[0]=(b[8]+b[2])/d,a[1]=(b[6]+b[9])/d,a[2]=.25*d);return a};f.fromRotationTranslationScale=function(a,b,d,c){var h=b[0],e=b[1],m=b[2],p=b[3],g=h+h,l=e+e,f=m+m;b=h*g;var k=h*l;h*=f;var n=e*l;e*=f;m*=f;g*=p;l*=p;p*=f;f=c[0];var D=c[1];c=c[2];a[0]=(1-(n+m))*f;a[1]=(k+p)*f;a[2]=(h-l)*f;a[3]=0;a[4]=(k-p)*D;a[5]=(1-(b+m))*D;a[6]=(e+g)*D;a[7]=0;a[8]=(h+l)*c;a[9]=(e-g)*c;a[10]=(1-(b+n))*c;a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];
a[15]=1;return a};f.fromRotationTranslationScaleOrigin=function(a,b,d,c,h){var e=b[0],m=b[1],p=b[2],g=b[3],l=e+e,f=m+m,k=p+p;b=e*l;var n=e*f;e*=k;var D=m*f;m*=k;p*=k;l*=g;f*=g;g*=k;k=c[0];var G=c[1];c=c[2];var z=h[0],F=h[1];h=h[2];a[0]=(1-(D+p))*k;a[1]=(n+g)*k;a[2]=(e-f)*k;a[3]=0;a[4]=(n-g)*G;a[5]=(1-(b+p))*G;a[6]=(m+l)*G;a[7]=0;a[8]=(e+f)*c;a[9]=(m-l)*c;a[10]=(1-(b+D))*c;a[11]=0;a[12]=d[0]+z-(a[0]*z+a[4]*F+a[8]*h);a[13]=d[1]+F-(a[1]*z+a[5]*F+a[9]*h);a[14]=d[2]+h-(a[2]*z+a[6]*F+a[10]*h);a[15]=1;return a};
f.fromQuat=function(a,b){var c=b[0],e=b[1],h=b[2];b=b[3];var g=c+c,r=e+e,p=h+h;c*=g;var f=e*g;e*=r;var l=h*g,k=h*r;h*=p;g*=b;r*=b;b*=p;a[0]=1-e-h;a[1]=f+b;a[2]=l-r;a[3]=0;a[4]=f-b;a[5]=1-c-h;a[6]=k+g;a[7]=0;a[8]=l+r;a[9]=k-g;a[10]=1-c-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.frustum=function(a,b,c,e,h,g,r){var d=1/(c-b),m=1/(h-e),l=1/(g-r);a[0]=2*g*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*m;a[6]=0;a[7]=0;a[8]=(c+b)*d;a[9]=(h+e)*m;a[10]=(r+g)*l;a[11]=-1;a[12]=0;a[13]=0;a[14]=r*g*2*l;a[15]=
0;return a};f.perspective=function(a,b,c,e,h){b=1/Math.tan(b/2);var d=1/(e-h);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(h+e)*d;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*h*e*d;a[15]=0;return a};f.perspectiveFromFieldOfView=function(a,b,c,e){var d=Math.tan(b.upDegrees*Math.PI/180),g=Math.tan(b.downDegrees*Math.PI/180),m=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var p=2/(m+b),f=2/(d+g);a[0]=p;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f;a[6]=0;a[7]=
0;a[8]=-((m-b)*p*.5);a[9]=(d-g)*f*.5;a[10]=e/(c-e);a[11]=-1;a[12]=0;a[13]=0;a[14]=e*c/(c-e);a[15]=0;return a};f.ortho=function(a,b,c,e,h,g,r){var d=1/(b-c),m=1/(e-h),l=1/(g-r);a[0]=-2*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*m;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*l;a[11]=0;a[12]=(b+c)*d;a[13]=(h+e)*m;a[14]=(r+g)*l;a[15]=1;return a};f.lookAt=function(a,b,d,e){var h=b[0],g=b[1];b=b[2];var m=e[0];var p=e[1];var f=e[2];var l=d[0];e=d[1];var k=d[2];if(Math.abs(h-l)<c.b&&Math.abs(g-e)<c.b&&Math.abs(b-k)<c.b)return mat4.identity(a);
d=h-l;e=g-e;l=b-k;var n=1/Math.sqrt(d*d+e*e+l*l);d*=n;e*=n;l*=n;k=p*l-f*e;f=f*d-m*l;m=m*e-p*d;(n=Math.sqrt(k*k+f*f+m*m))?(n=1/n,k*=n,f*=n,m*=n):m=f=k=0;p=e*m-l*f;var w=l*k-d*m;var D=d*f-e*k;(n=Math.sqrt(p*p+w*w+D*D))?(n=1/n,p*=n,w*=n,D*=n):D=w=p=0;a[0]=k;a[1]=p;a[2]=d;a[3]=0;a[4]=f;a[5]=w;a[6]=e;a[7]=0;a[8]=m;a[9]=D;a[10]=l;a[11]=0;a[12]=-(k*h+f*g+m*b);a[13]=-(p*h+w*g+D*b);a[14]=-(d*h+e*g+l*b);a[15]=1;return a};f.targetTo=function(a,b,c,e){var d=b[0],g=b[1];b=b[2];var m=e[0],p=e[1],f=e[2];e=d-c[0];
var l=g-c[1];c=b-c[2];var k=e*e+l*l+c*c;0<k&&(k=1/Math.sqrt(k),e*=k,l*=k,c*=k);k=p*c-f*l;f=f*e-m*c;m=m*l-p*e;a[0]=k;a[1]=f;a[2]=m;a[3]=0;a[4]=l*m-c*f;a[5]=c*k-e*m;a[6]=e*f-l*k;a[7]=0;a[8]=e;a[9]=l;a[10]=c;a[11]=0;a[12]=d;a[13]=g;a[14]=b;a[15]=1;return a};f.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};f.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};f.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];a[6]=b[6]+c[6];a[7]=b[7]+c[7];a[8]=b[8]+c[8];a[9]=b[9]+c[9];a[10]=b[10]+c[10];a[11]=b[11]+c[11];a[12]=b[12]+c[12];a[13]=b[13]+
c[13];a[14]=b[14]+c[14];a[15]=b[15]+c[15];return a};f.subtract=e;f.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;a[6]=b[6]*c;a[7]=b[7]*c;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12]*c;a[13]=b[13]*c;a[14]=b[14]*c;a[15]=b[15]*c;return a};f.multiplyScalarAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;a[2]=b[2]+c[2]*e;a[3]=b[3]+c[3]*e;a[4]=b[4]+c[4]*e;a[5]=b[5]+c[5]*e;a[6]=b[6]+c[6]*e;a[7]=b[7]+c[7]*e;a[8]=b[8]+c[8]*
e;a[9]=b[9]+c[9]*e;a[10]=b[10]+c[10]*e;a[11]=b[11]+c[11]*e;a[12]=b[12]+c[12]*e;a[13]=b[13]+c[13]*e;a[14]=b[14]+c[14]*e;a[15]=b[15]+c[15]*e;return a};f.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};f.equals=function(a,b){var d=a[0],e=a[1],h=a[2],g=a[3],f=a[4],p=a[5],k=a[6],l=a[7],n=a[8],H=a[9],
w=a[10],D=a[11],G=a[12],z=a[13],F=a[14];a=a[15];var u=b[0],y=b[1],J=b[2],q=b[3],I=b[4],C=b[5],L=b[6],B=b[7],E=b[8],O=b[9],N=b[10],Q=b[11],K=b[12],A=b[13],M=b[14];b=b[15];return Math.abs(d-u)<=c.b*Math.max(1,Math.abs(d),Math.abs(u))&&Math.abs(e-y)<=c.b*Math.max(1,Math.abs(e),Math.abs(y))&&Math.abs(h-J)<=c.b*Math.max(1,Math.abs(h),Math.abs(J))&&Math.abs(g-q)<=c.b*Math.max(1,Math.abs(g),Math.abs(q))&&Math.abs(f-I)<=c.b*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(p-C)<=c.b*Math.max(1,Math.abs(p),Math.abs(C))&&
Math.abs(k-L)<=c.b*Math.max(1,Math.abs(k),Math.abs(L))&&Math.abs(l-B)<=c.b*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(n-E)<=c.b*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(H-O)<=c.b*Math.max(1,Math.abs(H),Math.abs(O))&&Math.abs(w-N)<=c.b*Math.max(1,Math.abs(w),Math.abs(N))&&Math.abs(D-Q)<=c.b*Math.max(1,Math.abs(D),Math.abs(Q))&&Math.abs(G-K)<=c.b*Math.max(1,Math.abs(G),Math.abs(K))&&Math.abs(z-A)<=c.b*Math.max(1,Math.abs(z),Math.abs(A))&&Math.abs(F-M)<=c.b*Math.max(1,Math.abs(F),Math.abs(M))&&
Math.abs(a-b)<=c.b*Math.max(1,Math.abs(a),Math.abs(b))};var c=k(3);f.mul=g;f.sub=e},function(n,f,k){function g(){var a=new d.a(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}function e(a,b,c){c*=.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a}function c(a,b,c){var d=b[0],e=b[1],h=b[2];b=b[3];var g=c[0],p=c[1],m=c[2];c=c[3];a[0]=d*c+b*g+e*m-h*p;a[1]=e*c+b*p+h*g-d*m;a[2]=h*c+b*m+d*p-e*g;a[3]=b*c-d*g-e*p-h*m;return a}function a(a,b,c,d){var e=b[0],h=b[1],l=b[2];b=b[3];var g=
c[0],p=c[1],m=c[2];c=c[3];var f=e*g+h*p+l*m+b*c;0>f&&(f=-f,g=-g,p=-p,m=-m,c=-c);if(1E-6<1-f){var u=Math.acos(f);var r=Math.sin(u);f=Math.sin((1-d)*u)/r;d=Math.sin(d*u)/r}else f=1-d;a[0]=f*e+d*g;a[1]=f*h+d*p;a[2]=f*l+d*m;a[3]=f*b+d*c;return a}function b(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var e=(d+1)%3,h=(d+2)%3;c=Math.sqrt(b[3*d+d]-b[3*e+e]-b[3*h+h]+1);a[d]=.5*
c;c=.5/c;a[3]=(b[3*e+h]-b[3*h+e])*c;a[e]=(b[3*e+d]+b[3*d+e])*c;a[h]=(b[3*h+d]+b[3*d+h])*c}return a}Object.defineProperty(f,"__esModule",{value:!0});f.create=g;f.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};f.setAxisAngle=e;f.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),d=Math.sin(c/2);0!=d?(a[0]=b[0]/d,a[1]=b[1]/d,a[2]=b[2]/d):(a[0]=1,a[1]=0,a[2]=0);return c};f.multiply=c;f.rotateX=function(a,b,c){c*=.5;var d=b[0],e=b[1],h=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+b*
g;a[1]=e*c+h*g;a[2]=h*c-e*g;a[3]=b*c-d*g;return a};f.rotateY=function(a,b,c){c*=.5;var d=b[0],e=b[1],h=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c-h*g;a[1]=e*c+b*g;a[2]=h*c+d*g;a[3]=b*c-e*g;return a};f.rotateZ=function(a,b,c){c*=.5;var d=b[0],e=b[1],h=b[2];b=b[3];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+e*g;a[1]=e*c-d*g;a[2]=h*c+b*g;a[3]=b*c-h*g;return a};f.calculateW=function(a,b){var c=b[0],d=b[1];b=b[2];a[0]=c;a[1]=d;a[2]=b;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-b*b));return a};f.slerp=a;f.invert=
function(a,b){var c=b[0],d=b[1],e=b[2];b=b[3];var h=c*c+d*d+e*e+b*b;h=h?1/h:0;a[0]=-c*h;a[1]=-d*h;a[2]=-e*h;a[3]=b*h;return a};f.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};f.fromMat3=b;f.fromEuler=function(a,b,c,d){var e=.5*Math.PI/180;b*=e;c*=e;d*=e;e=Math.sin(b);b=Math.cos(b);var h=Math.sin(c);c=Math.cos(c);var l=Math.sin(d);d=Math.cos(d);a[0]=e*c*d-b*h*l;a[1]=b*h*d+e*c*l;a[2]=b*c*l-e*h*d;a[3]=b*c*d+e*h*l;return a};f.str=function(a){return"quat("+a[0]+", "+a[1]+
", "+a[2]+", "+a[3]+")"};var d=k(3),m=k(32),h=k(33);n=k(34);f.clone=n.b;f.fromValues=n.g;f.copy=n.c;f.set=n.l;f.add=n.a;f.mul=c;f.scale=n.k;f.dot=n.d;f.lerp=n.i;k=n.h;f.length=k;f.len=k;k=n.m;f.squaredLength=k;f.sqrLen=k;var t=n.j;f.normalize=t;f.exactEquals=n.f;f.equals=n.e;n=function(){var a=h.create(),b=h.fromValues(1,0,0),c=h.fromValues(0,1,0);return function(d,g,m){var l=h.dot(g,m);if(-.999999>l)return h.cross(a,b,g),1E-6>h.len(a)&&h.cross(a,c,g),h.normalize(a,a),e(d,a,Math.PI),d;if(.999999<
l)return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d;h.cross(a,g,m);d[0]=a[0];d[1]=a[1];d[2]=a[2];d[3]=1+l;return t(d,d)}}();f.rotationTo=n;n=function(){var b=g(),c=g();return function(d,e,h,g,m,f){a(b,e,m,f);a(c,h,g,f);a(d,b,c,2*f*(1-f));return d}}();f.sqlerp=n;n=function(){var a=m.a();return function(c,d,e,h){a[0]=e[0];a[3]=e[1];a[6]=e[2];a[1]=h[0];a[4]=h[1];a[7]=h[2];a[2]=-d[0];a[5]=-d[1];a[8]=-d[2];return t(c,b(c,a))}}();f.setAxes=n},function(n,f,k){function g(){var c=new e.a(2);c[0]=0;c[1]=0;return c}var e=
k(3);(function(){var c=g();return function(a,b,d,e,h,g){b||(b=2);d||(d=0);for(e=e?Math.min(e*b+d,a.length):a.length;d<e;d+=b)c[0]=a[d],c[1]=a[d+1],h(c,c,g),a[d]=c[0],a[d+1]=c[1];return a}})()},function(n,f,k){var g=function(){function e(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&e(c.prototype,a);b&&e(c,b);return c}}();n=function(){function e(c){if(!(this instanceof
e))throw new TypeError("Cannot call a class as a function");this.compare=c}g(e,[{key:"meld",value:function(c,a){if(null===a)return c;if(null===c)return a;var b=this.compare;b(a,c)&&(b=c,c=a,a=b);b=c.child0;a.next0=b;a.prev0=c;null!==b&&(b.prev0=a);c.child0=a;return c}},{key:"combineChildren",value:function(c){var a=c.child0;if(null===a)return null;for(c=null;;){var b=a.next0;if(null===b)var d=null;else d=b.next0,a=this.meld(a,b);a.next0=c;c=a;if(null===d)break;a=d}d=c;for(c=c.next0;null!==c;)a=c.next0,
d=this.meld(d,c),c=a;d.prev0=null;d.next0=null;return d}},{key:"removeMin",value:function(c){var a=this.combineChildren(c);c.next0=null;c.prev0=null;c.child0=null;return a}},{key:"remove",value:function(c,a){if(c===a)return this.removeMin(c);var b=a.prev0,d=a.next0;b.child0===a?b.child0=d:b.next0=d;null!==d&&(d.prev0=b);c=this.meld(c,this.combineChildren(a));a.next0=null;a.prev0=null;a.child0=null;return c}},{key:"entries",value:function(c){function a(a,l){for(;;)switch(b){case 0:if(null===c){b=1;
break}g=c.child0;b=2;return{value:c,done:!1};case 2:if(void 0===l){b=3;break}b=-1;throw l;case 3:case 4:if(null===g){b=5;break}h=g.next0;e=$jscomp.makeIterator(f.entries(g));case 6:if((d=e.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===l){b=9;break}b=-1;throw l;case 9:b=6;break;case 7:g=h;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,e,h,g,f=this,k={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");
}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}},{key:"removedEntries",value:function(c){function a(a,l){for(;;)switch(b){case 0:if(null===c){b=1;break}g=c.child0;c.child0=null;c.next0=null;c.prev0=null;b=2;return{value:c,done:!1};case 2:if(void 0===l){b=3;break}b=-1;throw l;case 3:case 4:if(null===g){b=5;break}h=g.next0;g.child0=null;g.next0=null;g.prev0=null;e=$jscomp.makeIterator(f.entries(g));case 6:if((d=e.next(a)).done){b=7;break}b=8;return{value:d.value,
done:!1};case 8:if(void 0===l){b=9;break}b=-1;throw l;case 9:b=6;break;case 7:g=h;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,e,h,g,f=this,k={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}}]);return e}();f.a=n},function(n,f,k){var g=function(){function e(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=
d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&e(c.prototype,a);b&&e(c,b);return c}}();n=function(){function e(c){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.compare=c}g(e,[{key:"meld",value:function(c,a){if(null===a)return c;if(null===c)return a;var b=this.compare;b(a,c)&&(b=c,c=a,a=b);b=c.child1;a.next1=b;a.prev1=c;null!==b&&(b.prev1=a);c.child1=a;return c}},{key:"combineChildren",
value:function(c){var a=c.child1;if(null===a)return null;for(c=null;;){var b=a.next1;if(null===b)var d=null;else d=b.next1,a=this.meld(a,b);a.next1=c;c=a;if(null===d)break;a=d}d=c;for(c=c.next1;null!==c;)a=c.next1,d=this.meld(d,c),c=a;d.prev1=null;d.next1=null;return d}},{key:"removeMin",value:function(c){var a=this.combineChildren(c);c.next1=null;c.prev1=null;c.child1=null;return a}},{key:"remove",value:function(c,a){if(c===a)return this.removeMin(c);var b=a.prev1,d=a.next1;b.child1===a?b.child1=
d:b.next1=d;null!==d&&(d.prev1=b);c=this.meld(c,this.combineChildren(a));a.next1=null;a.prev1=null;a.child1=null;return c}},{key:"entries",value:function(c){function a(a,l){for(;;)switch(b){case 0:if(null===c){b=1;break}g=c.child1;b=2;return{value:c,done:!1};case 2:if(void 0===l){b=3;break}b=-1;throw l;case 3:case 4:if(null===g){b=5;break}h=g.next1;e=$jscomp.makeIterator(f.entries(g));case 6:if((d=e.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===l){b=9;break}b=-1;throw l;
case 9:b=6;break;case 7:g=h;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,e,h,g,f=this,k={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}},{key:"removedEntries",value:function(c){function a(a,l){for(;;)switch(b){case 0:if(null===c){b=1;break}g=c.child1;c.child1=null;c.next1=null;c.prev1=null;b=2;return{value:c,
done:!1};case 2:if(void 0===l){b=3;break}b=-1;throw l;case 3:case 4:if(null===g){b=5;break}h=g.next1;g.child1=null;g.next1=null;g.prev1=null;e=$jscomp.makeIterator(f.entries(g));case 6:if((d=e.next(a)).done){b=7;break}b=8;return{value:d.value,done:!1};case 8:if(void 0===l){b=9;break}b=-1;throw l;case 9:b=6;break;case 7:g=h;b=4;break;case 5:case 1:b=-1;default:return{value:void 0,done:!0}}}var b=0,d,e,h,g,f=this,k={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");
}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}}]);return e}();f.a=n},function(n,f,k){k.d(f,"a",function(){return c});var g=k(1),e=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),c=function(){function a(b,c){c=void 0===c?g.c:c;if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.size=g.l.clone(b);this.transform=g.g.clone(c);this.invTransform=g.g.invert(g.g.create(),c)}e(a,[{key:"toObject",value:function(a){a.size=this.size;a.transform=this.transform}},{key:"localSpatialToGlobal",value:function(a,c){return g.l.transformMat4(a,c,this.transform)}},{key:"globalToLocalSpatial",value:function(a,c){return g.l.transformMat4(a,c,this.invTransform)}},{key:"globalToLocalGrid",value:function(a,c){this.globalToLocalSpatial(a,c);g.l.divide(a,a,this.size);return a}},{key:"localSpatialVectorToGlobal",
value:function(a,c){return Object(g.k)(a,c,this.transform)}},{key:"globalToLocalSpatialVector",value:function(a,c){return Object(g.k)(a,c,this.invTransform)}},{key:"assignLocalSpatialToGlobalMat4",value:function(a){return g.g.copy(a,this.transform)}}],[{key:"get",value:function(b,c){c=void 0===c?g.c:c;var d=a.cache,e=JSON.stringify([Array.from(b),Array.from(c)]),f=d.get(e);void 0===f&&(f=new a(b,c),d.set(e,f));return f}},{key:"fromObject",value:function(b){return a.get(b.size,b.transform)}}]);return a}();
c.cache=new Map},function(n,f,k){f.a=function(g,e){return g===e?!0:1E-6>Math.abs(g-e)/Math.min(Math.abs(g),Math.abs(e))}},function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var e=k(64);n=k(0);var c=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),a=function m(a,b,c){null===a&&(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,b);if(void 0===e){if(a=Object.getPrototypeOf(a),null!==a)return m(a,b,c)}else{if("value"in e)return e.value;b=e.get;return void 0===b?void 0:b.call(c)}};f=this&&this.__decorate||function(a,
b,c,e){var h=arguments.length,g=3>h?b:null===e?e=Object.getOwnPropertyDescriptor(b,c):e,l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,b,c,e);else for(var f=a.length-1;0<=f;f--)if(l=a[f])g=(3>h?l(g):3<h?l(b,c,g):l(b,c))||g;return 3<h&&g&&Object.defineProperty(b,c,g),g};k=b=function(f){function h(a,b){b=void 0===b?{}:b;if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");var c=(h.__proto__||Object.getPrototypeOf(h)).call(this,a,
b);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");c=!c||"object"!==typeof c&&"function"!==typeof c?this:c;c.updatingValue_=!1;void 0!==a&&(c.base=new e.a(b.value),c.setupChangedHandler());return c}g(h,f);c(h,[{key:"initializeCounterpart",value:function(b,c){c=void 0===c?{}:c;c.value=this.value;a(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"initializeCounterpart",this).call(this,b,c)}},{key:"setupChangedHandler",value:function(){var a=this;
this.registerDisposer(this.base.changed.add(function(){if(a.updatingValue_)a.updatingValue_=!1;else{var b=a.rpc;null!==b&&b.invoke("SharedWatchableValue.changed",{id:a.rpcId,value:a.value})}}))}},{key:"value",get:function(){return this.base.value},set:function(a){this.base.value=a}},{key:"changed",get:function(){return this.base.changed}}],[{key:"makeFromExisting",value:function(a,c){var e=new b;e.base=c;e.setupChangedHandler();e.initializeCounterpart(a);return e}},{key:"make",value:function(a,c){return b.makeFromExisting(a,
new e.a(c))}}]);return h}(n.c);k=b=f([Object(n.g)("SharedWatchableValue")],k);Object(n.f)("SharedWatchableValue.changed",function(a){var b=this.get(a.id);b.updatingValue_=!0;b.base.value=a.value;b.updatingValue_=!1});var b},function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}k.d(f,"a",function(){return b});var c=k(15),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=function(){function b(a){e(this,b);this.value_=a;this.changed=new c.a}a(b,
[{key:"value",get:function(){return this.value_},set:function(a){a!==this.value_&&(this.value_=a,this.changed.dispatch())}}]);return b}();(function(b){function c(a,b,d){d=void 0===d?a:d;e(this,c);a=(c.__proto__||Object.getPrototypeOf(c)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:a;a.validator=b;a.defaultValue=d;return a}g(c,b);a(c,[{key:"toJSON",value:function(){if(this.value_!==
this.defaultValue)return this.value_}},{key:"reset",value:function(){this.value=this.defaultValue}},{key:"restoreState",value:function(a){if(void 0!==a){var b=this.validator;try{this.value=b(a);return}catch(r){}}this.value=this.defaultValue}}]);return c})(b)},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&
"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){a&&(b.change_spec={change_stack_id:a.changeStackId},a.timeStamp&&(b.change_spec.time_stamp=a.timeStamp),a.skipEquivalences&&(b.change_spec.skip_equivalences=
a.skipEquivalences))}function b(a,b){Object(p.c)(a,b,"fragmentKey");a.clipBounds&&(a.fragmentIds=d(a.fragmentIds,a.clipBounds));return a}function d(a,b){b;if(!a)return a;var c=[];a=$jscomp.makeIterator(a);for(var d=a.next();!d.done;d=a.next()){d=d.value;var e=D.l.clone([500,500,500]),h=d;var q=e;var g=new z.a;if(!g.tryParseString(h,16))throw Error("Couldn't parse fragmentId "+h+" as hex-encoded Uint64");if(g.high)throw Error("Fragment ids > 2^32 not supported yet");h=Object(D.a)(g);g=D.l.create();
q=D.l.mul(g,h,q);h=D.l.create();D.l.scale(h,e,.5);g=D.l.create();D.l.add(g,q,h);m({center:g,size:e},b)&&c.push(d)}return c}function m(a,b){function c(a,b,c){return[].concat($jscomp.arrayFromIterable(a.map(function(a,d){return a+c*b[d]/2}).values()))}function d(a){return{min:D.l.clone(c(a.center,a.size,-1)),max:D.l.clone(c(a.center,a.size,1))}}a=d(a);b=d(b);return a.min[0]<=b.max[0]&&a.max[0]>=b.min[0]&&a.min[1]<=b.max[1]&&a.max[1]>=b.min[1]&&a.min[2]<=b.max[2]&&a.max[2]>=b.min[2]}function h(a,b){Object(G.e)(b);
var c=Object(G.f)(b,"fragmentKey",G.h);b=Object(G.f)(b,"supervoxelId",G.h);if(c.length!==b.length)throw Error("Expected fragmentKey and supervoxelId arrays to have the same length.");a.fragmentIds=b.map(function(a,b){return a+"\x00"+c[b]});a.clipBounds&&(a.fragmentIds=d(a.fragmentIds,a.clipBounds))}Object.defineProperty(f,"__esModule",{value:!0});k.d(f,"VolumeChunkSource",function(){return y});k.d(f,"MeshSource",function(){return J});k.d(f,"SkeletonSource",function(){return q});k(66);n=k(2);var t=
k(36),r=k(68),p=k(17),x=k(38);f=k(23);var l=k(13),v=k(18),H=k(10),w=k(9),D=k(1),G=k(5),z=k(6),F=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();k=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,h=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,q;if("object"===typeof Reflect&&"function"===
typeof Reflect.decorate)h=Reflect.decorate(a,b,c,d);else for(var g=a.length-1;0<=g;g--)if(q=a[g])h=(3>e?q(h):3<e?q(b,c,h):q(b,c))||h;return 3<e&&h&&Object.defineProperty(b,c,h),h};var u=new Map([[r.c.RAW,v.a],[r.c.JPEG,l.a],[r.c.COMPRESSED_SEGMENTATION,f.a]]),y=function(b){function d(){g(this,d);var a=e(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments));a.chunkDecoder=u.get(a.parameters.encoding);return a}c(d,b);F(d,[{key:"applyEncodingParams",value:function(a){var b=this.parameters.encoding;
switch(b){case r.c.RAW:a.subvolume_format="RAW";break;case r.c.JPEG:a.subvolume_format="SINGLE_IMAGE";a.image_format_options={image_format:"JPEG",jpeg_quality:70};break;case r.c.COMPRESSED_SEGMENTATION:a.subvolume_format="RAW";a.image_format_options={compressed_segmentation_block_size:Object(D.m)(this.spec.compressedSegmentationBlockSize)};break;default:throw Error("Invalid encoding: "+b);}}},{key:"download",value:function(b,c){var d=this,e=this.parameters,h=this.computeChunkBounds(b),q=b.chunkDataSize;
var g="/v1/volumes/"+e.volumeId+"/subvolume:binary";h={geometry:{corner:Object(D.m)(h),size:Object(D.m)(q),scale:e.scaleIndex}};this.applyEncodingParams(h);a(e.changeSpec,h);g={method:"POST",payload:JSON.stringify(h),path:g,responseType:"arraybuffer"};return Object(t.b)(e.instance,g,c).then(function(a){return d.chunkDecoder(b,a)})}}]);return d}(H.a);y=k([Object(n.registerChunkSource)(r.d)],y);var J=function(d){function q(){g(this,q);var a=e(this,(q.__proto__||Object.getPrototypeOf(q)).apply(this,
arguments));a.manifestDecoder=void 0!==a.parameters.changeSpec?h:b;var c=a.parameters.changeSpec;c=void 0!==c?"&header.changeStackId="+c.changeStackId+"&return_supervoxel_ids=true":"";a.listFragmentsParams=c;return a}c(q,d);F(q,[{key:"download",value:function(a,b){var c=this,d=this.parameters;return Object(t.b)(d.instance,{method:"GET",path:"/v1/objects/"+d.volumeId+"/meshes/"+(d.meshName+":listfragments?object_id="+a.objectId)+this.listFragmentsParams,responseType:"json"},b).then(function(b){return c.manifestDecoder(a,
b)})}},{key:"downloadFragment",value:function(b,c){var d=this.parameters,e=b.fragmentId;if(void 0!==d.changeSpec){var h=e.indexOf("\x00");var q=e.substring(0,h);e=e.substring(h+1)}else q=b.manifestChunk.objectId.toString();h="/v1/objects/"+d.volumeId+("/meshes/"+d.meshName)+"/fragment:binary";q={fragment_key:e,object_id:q};a(d.changeSpec,q);q={method:"POST",path:h,payload:JSON.stringify(q),responseType:"arraybuffer"};return Object(t.b)(d.instance,q,c).then(function(a){var c=new DataView(a),d=c.getUint32(0,
!0);if(0!==c.getUint32(4,!0))throw Error("The number of vertices should not exceed 2^32-1.");Object(p.d)(b,a,w.b.LITTLE,8,d)})}}]);return q}(p.a);J=k([Object(n.registerChunkSource)(r.a)],J);var q=function(b){function d(){g(this,d);return e(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}c(d,b);F(d,[{key:"download",value:function(b,c){var d=this.parameters,e={object_id:""+b.objectId},h="/v1/objects/"+d.volumeId+("/meshes/"+d.meshName)+"/skeleton:binary";a(d.changeSpec,e);e={method:"POST",
path:h,payload:JSON.stringify(e),responseType:"arraybuffer"};return Object(t.b)(d.instance,e,c).then(function(a){var c=new DataView(a),d=c.getUint32(0,!0);if(0!==c.getUint32(4,!0))throw Error("The number of vertices should not exceed 2^32-1.");var e=c.getUint32(8,!0);if(0!==c.getUint32(12,!0))throw Error("The number of edges should not exceed 2^32-1.");Object(x.b)(b,a,w.b.LITTLE,16,d,void 0,e)})}}]);return d}(x.a);q=k([Object(n.registerChunkSource)(r.b)],q)},function(n,f,k){n=k(35);f=k(0);var g=k(29),
e=null;n.b.getNewTokenPromise=function(c){var a={};null!=c&&(a.invalidToken=c);c=new Promise(function(a,c){e=a});g.rpc.invoke("brainmaps.requestToken",a);return c};Object(f.f)("brainmaps.receiveToken",function(c){e(c.authResult)})},function(n,f,k){f.a=function(g){for(var e=0,c=g.length,a=0;a<c;++a)e=31*e+g.charCodeAt(a)|0;return e}},function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=
Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}k.d(f,"c",function(){return b});k.d(f,"d",function(){return m});k.d(f,"a",function(){return h});k.d(f,"b",function(){return t});var c=k(36),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=
!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b;(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION"})(b||(b={}));var d=function(){function b(){e(this,b)}a(b,null,[{key:"stringify",value:function(a){return void 0===a?"":a.changeStackId+"/"+a.timeStamp+"/"+a.skipEquivalences}}]);return b}(),m=function(){function h(){e(this,h)}a(h,null,[{key:"stringify",value:function(a){return"brainmaps-"+
Object(c.a)(a.instance)+":volume/"+a.volumeId+"/"+(a.scaleIndex+"/"+b[a.encoding]+"/")+(""+d.stringify(a.changeSpec))}}]);return h}();m.RPC_ID="brainmaps/VolumeChunkSource";var h=function(){function b(){e(this,b)}a(b,null,[{key:"stringify",value:function(a){return"brainmaps:"+Object(c.a)(a.instance)+":mesh/"+(a.volumeId+"/"+a.meshName+"/")+(""+d.stringify(a.changeSpec))}}]);return b}();h.RPC_ID="brainmaps/MeshSource";var t=function(a){function b(){e(this,b);var a=(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}g(b,a);return b}(h);t.RPC_ID="brainmaps/SkeletonSource"},function(n,f,k){f.b="mesh/MeshLayer";f.a="mesh/FragmentSource"},function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var e=k(71),c=k(5),a=k(15),b=k(6);n=k(0);var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),m=function p(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===
d){if(a=Object.getPrototypeOf(a),null!==a)return p(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};f=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,h=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(a,b,c,d);else for(var l=a.length-1;0<=l;l--)if(g=a[l])h=(3>e?g(h):3<e?g(b,c,h):g(b,c))||h;return 3<e&&h&&Object.defineProperty(b,c,h),h};k=function(h){function f(){if(!(this instanceof
f))throw new TypeError("Cannot call a class as a function");var b=(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");b=!b||"object"!==typeof b&&"function"!==typeof b?this:b;b.allSets=new e.a;b.currentSets=new e.a;b.changed=new a.a;return b}g(f,h);d(f,[{key:"disposed",value:function(){this.changed=this.allSets=this.currentSets=void 0;m(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),
"disposed",this).call(this)}},{key:"linkSaved",value:function(a,b){this.allSets.link(a,b);this.changed.dispatch()}},{key:"link",value:function(a,b){this.allSets.link(a,b);if(this.currentSets.link(a,b)){var c=this.rpc;c&&c.invoke("DisjointUint64Sets.add",{id:this.rpcId,al:a.low,ah:a.high,bl:b.low,bh:b.high});this.changed.dispatch()}}},{key:"get",value:function(a){return this.allSets.get(a)}},{key:"clearAll",value:function(){this.allSets.clear();if(this.currentSets.clear()){var a=this.rpc;a&&a.invoke("DisjointUint64Sets.clear",
{id:this.rpcId});this.changed.dispatch()}}},{key:"clearSaved",value:function(){this.allSets.clear();this.restoreSets(this.linkSaved,this.toJSON())}},{key:"setElements",value:function(a){return this.allSets.setElements(a)}},{key:"toJSON",value:function(){return this.currentSets.toJSON()}},{key:"restoreSets",value:function(a,d){var e=this;if(void 0!==d){var h=[new b.a,new b.a];Object(c.a)(d,function(b){Object(c.a)(b,function(b,c){h[c%2].parseString(String(b),10);0!==c&&a.call(e,h[0],h[1])})})}}},{key:"restoreState",
value:function(a){this.clearAll();this.restoreSets(this.link,a)}},{key:"restoreSaved",value:function(a){this.clearSaved();this.restoreSets(this.linkSaved,a)}},{key:"size",get:function(){return this.allSets.size}}],[{key:"makeWithCounterpart",value:function(a){var b=new this;b.initializeCounterpart(a);return b}}]);return f}(n.c);k=f([Object(n.g)("DisjointUint64Sets")],k);var h=new b.a,t=new b.a;Object(n.f)("DisjointUint64Sets.add",function(a){var b=this.get(a.id);h.low=a.al;h.high=a.ah;t.low=a.bl;
t.high=a.bh;b.currentSets.link(h,t)&&b.changed.dispatch()});Object(n.f)("DisjointUint64Sets.clear",function(a){a=this.get(a.id);a.currentSets.clear()&&a.changed.dispatch()})},function(n,f,k){function g(a){for(var b=a,c=a[d];c!==a;)a=c,c=a[d];for(a=b[d];c!==a;)b[d]=c,b=a,a=b[d];return c}function e(a){function b(b,h){for(;;)switch(c){case 0:e=!0,d=a;case 1:if(!e&&d===a){c=3;break}c=4;return{value:d,done:!1};case 4:if(void 0===h){c=5;break}c=-1;throw h;case 5:d=d[m];case 2:e=!1;c=1;break;case 3:c=-1;
default:return{value:void 0,done:!0}}}var c=0,d,e,h={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();h[Symbol.iterator]=function(){return this};return h}k.d(f,"a",function(){return r});var c=k(6),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,
c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();$jscomp.initSymbol();var b=Symbol("disjoint_sets:rank");$jscomp.initSymbol();var d=Symbol("disjoint_sets:parent");$jscomp.initSymbol();var m=Symbol("disjoint_sets:next");$jscomp.initSymbol();var h=Symbol("disjoint_sets:prev");$jscomp.initSymbol();var t=Symbol("disjoint_sets:min"),r=function(){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.map=new Map;this.generation=0}$jscomp.initSymbol();$jscomp.initSymbolIterator();
a(f,[{key:"get",value:function(a){var b=this.map.get(a.toString());return void 0===b?a:g(b)[t]}},{key:"isMinElement",value:function(a){var b=this.get(a);return b===a||c.a.equal(b,a)}},{key:"makeSet",value:function(a){var c=a.toString(),e=this.map,f=e.get(c);return void 0===f?(a=f=a.clone(),a[d]=a,a[b]=0,a[m]=a[h]=a,f[t]=f,e.set(c,f),f):g(f)}},{key:"link",value:function(a,e){a=this.makeSet(a);e=this.makeSet(e);if(a===e)return!1;this.generation++;var g=a;var f=e,l=g[b],k=f[b];l>k?f[d]=g:(g[d]=f,l===
k&&(f[b]=k+1),g=f);f=a;l=e;k=f[h];var p=l[h];l[h]=k;k[m]=l;f[h]=p;p[m]=f;a=a[t];e=e[t];g[t]=c.a.less(a,e)?a:e;return!0}},{key:"setElements",value:function(a){function b(b,l){for(;;)switch(c){case 0:f=a.toString();g=k.map.get(f);if(void 0!==g){c=1;break}c=3;return{value:a,done:!1};case 3:if(void 0===l){c=4;break}c=-1;throw l;case 4:c=2;break;case 1:h=$jscomp.makeIterator(e(g));case 5:if((d=h.next(b)).done){c=6;break}c=7;return{value:d.value,done:!1};case 7:if(void 0===l){c=8;break}c=-1;throw l;case 8:c=
5;break;case 6:case 2:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,h,g,f,k=this,m={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();m[Symbol.iterator]=function(){return this};return m}},{key:"clear",value:function(){var a=this.map;if(0===a.size)return!1;++this.generation;a.clear();return!0}},{key:"mappings",value:function(a){function b(b,u){for(;;)switch(c){case 0:a=void 0===a?Array(2):
a,h=$jscomp.makeIterator(f.map.values()),e=h.next();case 1:if(e.done){c=3;break}d=e.value;a[0]=d;a[1]=g(d)[t];c=4;return{value:a,done:!1};case 4:if(void 0===u){c=5;break}c=-1;throw u;case 5:case 2:e=h.next();c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,d,e,h,f=this,k={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}},
{key:Symbol.iterator,value:function(){return this.mappings()}},{key:"toJSON",value:function(){for(var a=[],b=$jscomp.makeIterator(this.map.values()),h=b.next();!h.done;h=b.next()){var g=h.value;if(g[d]===g){h=[];g=$jscomp.makeIterator(e(g));for(var f=g.next();!f.done;f=g.next())h.push(f.value);h.sort(c.a.compare);a.push(h)}}a.sort(function(a,b){return c.a.compare(a[0],b[0])});return a.map(function(a){return a.map(function(a){return a.toString()})})}},{key:"size",get:function(){return this.map.size}}]);
return f}()},function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var e=k(73),c=k(15);n=k(0);var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in
d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=function h(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return h(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(c)}};f=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,h=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===
typeof Reflect&&"function"===typeof Reflect.decorate)h=Reflect.decorate(a,b,c,d);else for(var f=a.length-1;0<=f;f--)if(g=a[f])h=(3>e?g(h):3<e?g(b,c,h):g(b,c))||h;return 3<e&&h&&Object.defineProperty(b,c,h),h};k=d=function(h){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var a=(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&
"function"!==typeof a?this:a;a.hashTable=new e.a;a.changed=new c.b;return a}g(f,h);$jscomp.initSymbol();$jscomp.initSymbolIterator();a(f,[{key:"disposed",value:function(){b(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"disposed",this).call(this);this.changed=this.hashTable=void 0}},{key:"add_",value:function(a){return this.hashTable.add(a)}},{key:"add",value:function(a){if(this.add_(a)){var b=this.rpc;b&&b.invoke("Uint64Set.add",{id:this.rpcId,value:a});this.changed.dispatch(a,!0)}}},
{key:"has",value:function(a){return this.hashTable.has(a)}},{key:Symbol.iterator,value:function(){return this.hashTable.keys()}},{key:"delete_",value:function(a){return this.hashTable.delete(a)}},{key:"delete",value:function(a){if(this.delete_(a)){var b=this.rpc;b&&b.invoke("Uint64Set.delete",{id:this.rpcId,value:a});this.changed.dispatch(a,!1)}}},{key:"clear",value:function(){if(this.hashTable.clear()){var a=this.rpc;a&&a.invoke("Uint64Set.clear",{id:this.rpcId});this.changed.dispatch(null,!1)}}},
{key:"toJSON",value:function(){for(var a=[],b=$jscomp.makeIterator(this),c=b.next();!c.done;c=b.next())a.push(c.value.toString());return a}},{key:"size",get:function(){return this.hashTable.size}}],[{key:"makeWithCounterpart",value:function(a){var b=new d;b.initializeCounterpart(a);return b}}]);return f}(n.c);k=d=f([Object(n.g)("Uint64Set")],k);Object(n.f)("Uint64Set.add",function(a){var b=this.get(a.id);b.add_(a.value)&&b.changed.dispatch()});Object(n.f)("Uint64Set.delete",function(a){var b=this.get(a.id);
b.delete_(a.value)&&b.changed.dispatch()});Object(n.f)("Uint64Set.clear",function(a){a=this.get(a.id);a.hashTable.clear()&&a.changed.dispatch()});var d},function(n,f,k){function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&
b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}k.d(f,"a",function(){return x});var a=k(74),b=k(6),d=function G(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return G(a,b,c)}else{if("value"in d)return d.value;b=d.get;
return void 0===b?void 0:b.call(c)}},m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),h=0,t=0,r=0,p=0;n=function(){function d(a){a=void 0===a?d.generateHashFunctions(3):a;c(this,d);this.loadFactor=.9;this.size=0;this.growFactor=1.2;this.maxHeight=8192;this.emptyHigh=this.emptyLow=4294967295;this.maxAttempts=
this.maxRehashAttempts=5;this.maxWidth=4096/this.entryStride;this.generation=0;this.mungedEmptyKey=-1;this.hashFunctions=a;this.allocate(4,1)}m(d,[{key:"updateHashFunctions",value:function(a){this.hashFunctions=d.generateHashFunctions(a);this.mungedEmptyKey=-1}},{key:"tableWithMungedEmptyKey",value:function(a){for(var b=this.hashFunctions.length,c=Array(b),d=0;d<b;++d)c[d]=this.getHash(d,this.emptyLow,this.emptyHigh);d=this.mungedEmptyKey;if(-1===d)a:for(;;){d=16777216*Math.random()>>>0;for(var e=
0;e<b;++e)for(var h=this.getHash(e,d,d),g=0;g<b;++g)if(c[g]===h)continue a;this.mungedEmptyKey=d;break}e=this.table;h=this.emptyLow;g=this.emptyHigh;for(var f=0;f<b;++f){var l=c[f];e[l]===h&&e[l+1]===g&&(e[l]=d,e[l+1]=d)}try{a(e)}finally{for(a=0;a<b;++a)f=c[a],e[f]===d&&e[f+1]===d&&(e[f]=h,e[f+1]=g)}}},{key:"getHash",value:function(a,b,c){a=this.hashFunctions[a];var d=this.width,e=this.height;d=a[0].compute(b,c)%d;b=a[1].compute(b,c)%e;return this.entryStride*(b*this.width+d)}},{key:"keys",value:function(a){function c(c,
q){for(;;)switch(d){case 0:a=void 0===a?new b.a:a,n=t,r=n.emptyLow,p=n.emptyHigh,m=n.entryStride,k=t,l=k.table,f=0,g=l.length;case 1:if(!(f<g)){d=3;break}h=l[f];e=l[f+1];if(h===r&&e===p){d=4;break}a.low=h;a.high=e;d=5;return{value:a,done:!1};case 5:if(void 0===q){d=6;break}d=-1;throw q;case 6:case 4:case 2:f+=m;d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,e,h,g,f,l,k,m,p,r,n,t=this,w={next:function(a){return c(a,void 0)},throw:function(a){return c(void 0,a)},return:function(a){throw Error("Not yet implemented");
}};$jscomp.initSymbolIterator();w[Symbol.iterator]=function(){return this};return w}},{key:"indexOfPair",value:function(a,b){var c=this.table,d=this.emptyHigh;if(a===this.emptyLow&&b===d)return-1;d=0;for(var e=this.hashFunctions.length;d<e;++d){var h=this.getHash(d,a,b);if(c[h]===a&&c[h+1]===b)return h}return-1}},{key:"indexOf",value:function(a){return this.indexOfPair(a.low,a.high)}},{key:"chooseAnotherEmptyKey",value:function(){for(var a=this.emptyLow,b=this.emptyHigh,c=this.table,d=this.entryStride,
e,h;e=4294967296*Math.random()>>>0,h=4294967296*Math.random()>>>0,e===a&&h===b||this.hasPair(e,h););this.emptyLow=e;this.emptyHigh=h;for(var g=0,f=c.length;g<f;g+=d)c[g]===a&&c[g+1]===b&&(c[g]=e,c[g+1]=h)}},{key:"has",value:function(a){return-1!==this.indexOf(a)}},{key:"hasPair",value:function(a,b){return-1!==this.indexOfPair(a,b)}},{key:"delete",value:function(a){a=this.indexOf(a);if(-1!==a){var b=this.table;b[a]=this.emptyLow;b[a+1]=this.emptyHigh;++this.generation;this.size--;return!0}return!1}},
{key:"clearTable",value:function(){for(var a=this.table,b=this.entryStride,c=this.emptyLow,d=this.emptyHigh,e=a.length,h=0;h<e;h+=b)a[h]=c,a[h+1]=d}},{key:"clear",value:function(){if(0===this.size)return!1;this.size=0;++this.generation;this.clearTable();return!0}},{key:"swapPending",value:function(a,b){var c=h,d=t;this.storePending(a,b);a[b]=c;a[b+1]=d}},{key:"storePending",value:function(a,b){h=a[b];t=a[b+1]}},{key:"backupPending",value:function(){r=h;p=t}},{key:"restorePending",value:function(){h=
r;t=p}},{key:"tryToInsert",value:function(){for(var a=0,b=this.emptyLow,c=this.emptyHigh,d=this.maxAttempts,e=this.table,g=this.hashFunctions.length,f=Math.floor(Math.random()*g);;){var l=this.getHash(f,h,t);this.swapPending(e,l);if(h===b&&t===c)return!0;if(++a===d)break;f=(f+Math.floor(Math.random()*(g-1))+1)%g}return!1}},{key:"allocate",value:function(a,b){var c=a*b;this.width=a;this.height=b;this.table=new Uint32Array(c*this.entryStride);this.maxAttempts=c;this.clearTable();this.capacity=c*this.loadFactor;
this.mungedEmptyKey=-1}},{key:"rehash",value:function(a,b,c){this.allocate(b,c);this.updateHashFunctions(this.hashFunctions.length);b=this.emptyLow;c=this.emptyHigh;for(var d=this.entryStride,e=0,h=a.length;e<h;e+=d){var g=a[e+1];if(a[e]!==b||g!==c)if(this.storePending(a,e),!this.tryToInsert())return!1}return!0}},{key:"grow",value:function(a){for(var b=this.table,c=this.width,d=this.height,e=this.maxWidth,h=this.maxHeight;;){var g=c*d;c=Math.min(e,Math.ceil(a/this.height));c*d<a&&(d=Math.min(h,Math.ceil(a/
c)));var f=c*d;if(f<a&&f===g)throw Error("Maximum table size exceeded");for(g=0;g<this.maxRehashAttempts;++g)if(this.rehash(b,c,d))return;a=Math.ceil(this.growFactor*a)}}},{key:"insertInternal",value:function(){++this.generation;h===this.emptyLow&&t===this.emptyHigh&&this.chooseAnotherEmptyKey();++this.size>this.capacity&&(this.backupPending(),this.grow(Math.ceil(this.growFactor*this.width*this.height)),this.restorePending());for(;!this.tryToInsert();)this.backupPending(),this.grow(this.width*this.height),
this.restorePending()}}],[{key:"generateHashFunctions",value:function(b){b=void 0===b?3:b;for(var c=[],d=0;d<b;++d){var e=[a.a.generate(),a.a.generate()];c.push(e)}return c}}]);return d}();var x=function(a){function b(){c(this,b);return g(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}e(b,a);$jscomp.initSymbol();$jscomp.initSymbolIterator();m(b,[{key:"add",value:function(a){var b=a.low;a=a.high;if(this.hasPair(b,a))return!1;h=b;t=a;this.insertInternal();return!0}},{key:Symbol.iterator,
value:function(){return this.keys()}}]);return b}(n);x.prototype.entryStride=2;var l=0,v=0,H=0,w=0;(function(a){function f(){c(this,f);return g(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}e(f,a);$jscomp.initSymbol();$jscomp.initSymbolIterator();m(f,[{key:"set",value:function(a,b){var c=a.low;a=a.high;if(this.hasPair(c,a))return!1;h=c;t=a;l=b.low;v=b.high;this.insertInternal();return!0}},{key:"get",value:function(a,b){a=this.indexOf(a);if(-1===a)return!1;var c=this.table;b.low=
c[a+2];b.high=c[a+3];return!0}},{key:"swapPending",value:function(a,b){var c=l,e=v;d(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"swapPending",this).call(this,a,b);a[b+2]=c;a[b+3]=e}},{key:"storePending",value:function(a,b){d(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"storePending",this).call(this,a,b);l=a[b+2];v=a[b+3]}},{key:"backupPending",value:function(){d(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"backupPending",this).call(this);H=l;w=v}},{key:"restorePending",
value:function(){d(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"restorePending",this).call(this);l=H;v=w}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(a){function c(c,q){for(;;)switch(d){case 0:a=void 0===a?[new b.a,new b.a]:a,w=R,A=w.emptyLow,t=w.emptyHigh,n=w.entryStride,r=R,p=r.table,m=$jscomp.makeIterator(a),k=m.next().value,l=m.next().value,f=0,g=p.length;case 1:if(!(f<g)){d=3;break}h=p[f];e=p[f+1];if(h===A&&e===t){d=4;break}k.low=
h;k.high=e;l.low=p[f+2];l.high=p[f+3];d=5;return{value:a,done:!1};case 5:if(void 0===q){d=6;break}d=-1;throw q;case 6:case 4:case 2:f+=n;d=1;break;case 3:d=-1;default:return{value:void 0,done:!0}}}var d=0,e,h,g,f,l,k,m,p,r,n,t,A,w,R=this,la={next:function(a){return c(a,void 0)},throw:function(a){return c(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();la[Symbol.iterator]=function(){return this};return la}}]);return f})(n).prototype.entryStride=4},function(n,
f,k){k.d(f,"a",function(){return e});var g=function(){function c(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),e=function(){function c(a,b,d,e){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.a0=a;this.a1=b;this.b=d;this.c=e}g(c,[{key:"computeDotProduct",value:function(a,b){var c=this.a0,
e=this.a1;return c[0]*(a&255)+c[1]*(a>>8&255)+c[2]*(a>>16&255)+c[3]*(a>>24&255)+(e[0]*(b&255)+e[1]*(b>>8&255)+e[2]*(b>>16&255)+e[3]*(b>>24&255))}},{key:"compute",value:function(a,b){var c=this.b,e=this.c;a=this.computeDotProduct(a,b);return(a+a*a%4093*e+c)%4093}},{key:"toString",value:function(){return"new HashFunction(Float32Array.of("+this.a0+"), "+("Float32Array.of("+this.a1+"), "+this.b+", "+this.c+")")}}],[{key:"generate",value:function(){function a(){return Math.floor(4093*Math.random())}return new c(Float32Array.of(a(),
a(),a(),a()),Float32Array.of(a(),a(),a(),a()),a(),a())}}]);return c}()},function(n,f,k){f.a="skeleton/SkeletonLayer"},function(n,f,k){function g(c,g,f,k,l,n,H,w){var p=l[0],r=l[1],t=l[2];l=k[0];var x=k[1];k=k[2];var u=f[0],y=f[1],v=f[2];v-=y*r;y-=u*p;if(0===p*r*t)return[0,0];f=l*x*k+31;if(void 0===a||a.length<f)a=new Uint32Array(f),b=new Uint32Array(1*f),d=new Uint32Array(1*f),m=new Uint32Array(f),h=new Uint32Array(f);f=a.subarray(0,f);f.fill(0);for(var q=b,I=d,C=m,L=h,B=0,E=c[g]+1>>>0,O=0,N=l-p,
Q=l*x-l*r,K=0;K<t;++K,g+=v,O+=Q)for(var A=0;A<r;++A,g+=y,O+=N)for(var M=0;M<p;++M,g+=u){var R=c[g];R!==E&&(E=q[1*B]=R,C[B]=B++);f[O++]=B}C.subarray(0,B).sort(function(a,b){return q[a]-q[b]});c=-1;p=q[1*C[0]]+1>>>0;for(r=0;r<B;++r)t=C[r],u=q[1*t],u!==p&&(++c,p=I[1*c]=u),L[t+1]=c;++c;return Object(e.c)(w,n,H,l*x*k,c,I,f,L,1)}f.a=function(a,b,d,h,f,k){f=void 0===f?0:f;k=void 0===k?Object(c.a)(h,1):k;return Object(e.b)(a,b,d,h,f,k,g)};var e=k(20),c=k(19),a,b,d,m,h},function(n,f,k){function g(c,g,f,k,
l,n,H,w){var p=l[0],r=l[1],t=l[2];l=k[0];var x=k[1];k=k[2];var u=f[0],y=f[1],v=f[2];v-=y*r;y-=u*p;if(0===p*r*t)return[0,0];f=l*x*k+31;if(void 0===a||a.length<f)a=new Uint32Array(f),b=new Uint32Array(2*f),d=new Uint32Array(2*f),m=new Uint32Array(f),h=new Uint32Array(f);f=a.subarray(0,f);f.fill(0);for(var q=b,I=d,C=m,L=h,B=0,E=c[g]+1>>>0,O=0,N=0,Q=l-p,K=l*x-l*r,A=0;A<t;++A,g+=v,N+=K)for(var M=0;M<r;++M,g+=y,N+=Q)for(var R=0;R<p;++R,g+=u){var la=c[g],ka=c[g+1];if(la!==E||ka!==O)E=q[2*B]=la,O=q[2*B+1]=
ka,C[B]=B++;f[N++]=B}C.subarray(0,B).sort(function(a,b){var c=q[2*a],d=q[2*b];return q[2*a+1]-q[2*b+1]||c-d});c=-1;p=q[2*C[0]]+1>>>0;for(r=y=0;r<B;++r){t=C[r];v=2*t;u=q[v];v=q[v+1];if(u!==p||v!==y)++c,y=2*c,p=I[y]=u,y=I[y+1]=v;L[t+1]=c}++c;return Object(e.c)(w,n,H,l*x*k,c,I,f,L,2)}f.a=function(a,b,d,h,f,k){f=void 0===f?0:f;k=void 0===k?Object(c.a)(h,2):k;return Object(e.b)(a,b,d,h,f,k,g)};var e=k(20),c=k(19),a,b,d,m,h},function(n,f,k){k.d(f,"a",function(){return e});var g=function(){function c(a,
b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),e=function(){function c(a){a=void 0===a?16:a;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.length=0;this.data=new Uint32Array(a)}g(c,[{key:"resize",value:function(a){var b=this.data;if(a>b.length){var c=new Uint32Array(Math.max(a,2*b.length));
c.set(b.subarray(0,this.length));this.data=c}this.length=a}},{key:"shrinkToFit",value:function(){this.data=new Uint32Array(this.view)}},{key:"clear",value:function(){this.length=0}},{key:"appendArray",value:function(a){var b=this.length;this.resize(b+a.length);this.data.set(a,b)}},{key:"eraseRange",value:function(a,b){this.data.copyWithin(a,b,this.length);this.length-=b-a}},{key:"view",get:function(){var a=this.data;return new Uint32Array(a.buffer,a.byteOffset,this.length)}}]);return c}()},function(n,
f,k){f.a=function(a,b,d){var f=new g.JpegDecoder;f.parse(a);if(f.width*f.height!==b[0]*b[1]*b[2])throw Error("JPEG data does not have the expected dimensions: "+("width="+f.width+", height="+f.height+", ")+("chunkDataSize="+c.l.str(b)));if(f.numComponents!==d)throw Error("JPEG data does not have the expected number of components: "+("components="+f.numComponents+", expected="+d));if(1===f.numComponents)return f.getData(f.width,f.height,!1);if(3===f.numComponents)return a=f.getData(f.width,f.height,
!1),Object(e.c)(a,f.width*f.height,3);throw Error("JPEG data has an unsupported number of components: components="+f.numComponents);};var g=k(80);k.n(g);var e=k(19),c=k(1)},function(n,f,k){function g(c,a){if(0===c.indexOf("data:")){var b=c.indexOf("base64,")+7;c=atob(c.substring(b));b=new Uint8Array(c.length);for(var d=c.length-1;0<=d;d--)b[d]=c.charCodeAt(d);a(b.buffer)}else{var e=new XMLHttpRequest;e.open("GET",c,!0);e.responseType="arraybuffer";e.onload=function(){a(e.response)};e.send(null)}}
f=function(){function c(){this._src=null;this._parser=new e.JpegImage;this.onload=null}c.prototype={get src(){return this._src},set src(a){this.load(a)},get width(){return this._parser.width},get height(){return this._parser.height},load:function(a){this._src=a;g(a,function(a){this.parse(new Uint8Array(a));if(this.onload)this.onload()}.bind(this))},parse:function(a){this._parser.parse(a)},getData:function(a,b){return this._parser.getData(a,b,!1)},copyToImageData:function(a){if(2===this._parser.numComponents||
4<this._parser.numComponents)throw Error("Unsupported amount of components");var b=a.width,c=a.height,e=b*c*4;a=a.data;if(1===this._parser.numComponents){var h=this._parser.getData(b,c,!1);for(c=b=0;b<e;){var g=h[c++];a[b++]=g;a[b++]=g;a[b++]=g;a[b++]=255}}else for(h=this._parser.getData(b,c,!0),c=b=0;b<e;)a[b++]=h[c++],a[b++]=h[c++],a[b++]=h[c++],a[b++]=255}};return c}();var e;(function(c){function a(a){for(var b=1,c=0;a>b;)b<<=1,c++;return c}function b(a,b){return a[b]<<8|a[b+1]}function d(a,b){return(a[b]<<
24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}function e(a,b,c){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!1});return c}var h=function(){function a(){}function b(a,b){for(var c=0,d=[],e,h,g=16;0<g&&!a[g-1];)g--;d.push({children:[],index:0});var f=d[0],k;for(e=0;e<g;e++){for(h=0;h<a[e];h++){f=d.pop();for(f.children[f.index]=b[c];0<f.index;)f=d.pop();f.index++;for(d.push(f);d.length<=e;)d.push(k={children:[],index:0}),f.children[f.index]=k.children,f=k;c++}e+1<g&&(d.push(k={children:[],
index:0}),f.children[f.index]=k.children,f=k)}return d[0].children}function c(a,b,c,d,e,g,f,k,l){function q(){if(0<B)return B--,y>>B&1;y=a[b++];if(255===y){var c=a[b++];if(c)throw"unexpected marker: "+(y<<8|c).toString(16);}B=7;return y>>>7}function u(a){for(;;){a=a[q()];if("number"===typeof a)return a;if("object"!==typeof a)throw"invalid huffman sequence";}}function m(a){for(var b=0;0<a;)b=b<<1|q(),a--;return b}function p(a){if(1===a)return 1===q()?1:-1;var b=m(a);return b>=1<<a-1?b:b+(-1<<a)+1}
function A(a,b){var c=u(a.huffmanTableDC);c=0===c?0:p(c);a.blockData[b]=a.pred+=c;for(c=1;64>c;){var d=u(a.huffmanTableAC),e=d&15;d>>=4;if(0===e){if(15>d)break;c+=16}else c+=d,a.blockData[b+h[c]]=p(e),c++}}function r(a,b){var c=u(a.huffmanTableDC);c=0===c?0:p(c)<<l;a.blockData[b]=a.pred+=c}function n(a,b){a.blockData[b]|=q()<<l}function t(a,b){if(0<L)L--;else for(var c=g;c<=f;){var d=u(a.huffmanTableAC),e=d&15;d>>=4;if(0===e){if(15>d){L=m(d)+(1<<d)-1;break}c+=16}else c+=d,a.blockData[b+h[c]]=p(e)*
(1<<l),c++}}function C(a,b){for(var c=g,d=0,e;c<=f;){e=h[c];switch(v){case 0:d=u(a.huffmanTableAC);e=d&15;d>>=4;if(0===e)15>d?(L=m(d)+(1<<d),v=4):(d=16,v=1);else{if(1!==e)throw"invalid ACn encoding";x=p(e);v=d?2:3}continue;case 1:case 2:a.blockData[b+e]?a.blockData[b+e]+=q()<<l:(d--,0===d&&(v=2===v?3:0));break;case 3:a.blockData[b+e]?a.blockData[b+e]+=q()<<l:(a.blockData[b+e]=x<<l,v=0);break;case 4:a.blockData[b+e]&&(a.blockData[b+e]+=q()<<l)}c++}4===v&&(L--,0===L&&(v=0))}var w=c.mcusPerLine,I=b,
y=0,B=0,L=0,v=0,x,F=d.length,z,D,G,E;k=c.progressive?0===g?0===k?r:n:0===k?t:C:A;var H=0;c=1===F?d[0].blocksPerLine*d[0].blocksPerColumn:w*c.mcusPerColumn;e||(e=c);for(var J,Hb;H<c;){for(z=0;z<F;z++)d[z].pred=0;L=0;if(1===F){var X=d[0];for(E=0;E<e;E++)k(X,64*((X.blocksPerLine+1)*(H/X.blocksPerLine|0)+H%X.blocksPerLine)),H++}else for(E=0;E<e;E++){for(z=0;z<F;z++)for(X=d[z],J=X.h,Hb=X.v,D=0;D<Hb;D++)for(G=0;G<J;G++)k(X,64*((X.blocksPerLine+1)*((H/w|0)*X.v+D)+(H%w*X.h+G)));H++}B=0;X=a[b]<<8|a[b+1];if(65280>=
X)throw"marker was not found";if(65488<=X&&65495>=X)b+=2;else break}return b-I}function d(a,b){a=b.blocksPerLine;for(var c=b.blocksPerColumn,d=new Int16Array(64),e=0;e<c;e++)for(var h=0;h<a;h++){for(var g,f,k,l,u,m,p,A,r,n,t,w,y=64*((b.blocksPerLine+1)*e+h),v=d,x=b.quantizationTable,F=b.blockData,z=0;64>z;z+=8)g=F[y+z],A=F[y+z+1],p=F[y+z+2],m=F[y+z+3],u=F[y+z+4],l=F[y+z+5],k=F[y+z+6],f=F[y+z+7],g*=x[z],0===(A|p|m|u|l|k|f)?(g=5793*g+512>>10,v[z]=g,v[z+1]=g,v[z+2]=g,v[z+3]=g,v[z+4]=g,v[z+5]=g,v[z+6]=
g,v[z+7]=g):(A*=x[z+1],p*=x[z+2],m*=x[z+3],u*=x[z+4],l*=x[z+5],k*=x[z+6],f*=x[z+7],w=5793*g+128>>8,t=5793*u+128>>8,n=p,r=k,u=2896*(A-f)+128>>8,f=2896*(A+f)+128>>8,m<<=4,l<<=4,w=w+t+1>>1,t=w-t,g=3784*n+1567*r+128>>8,n=1567*n-3784*r+128>>8,r=g,u=u+l+1>>1,l=u-l,f=f+m+1>>1,m=f-m,w=w+r+1>>1,r=w-r,t=t+n+1>>1,n=t-n,g=2276*u+3406*f+2048>>12,u=3406*u-2276*f+2048>>12,f=g,g=799*m+4017*l+2048>>12,m=4017*m-799*l+2048>>12,l=g,v[z]=w+f,v[z+7]=w-f,v[z+1]=t+l,v[z+6]=t-l,v[z+2]=n+m,v[z+5]=n-m,v[z+3]=r+u,v[z+4]=r-u);
for(x=0;8>x;++x)g=v[x],A=v[x+8],p=v[x+16],m=v[x+24],u=v[x+32],l=v[x+40],k=v[x+48],f=v[x+56],0===(A|p|m|u|l|k|f)?(g=5793*g+8192>>14,g=-2040>g?0:2024<=g?255:g+2056>>4,F[y+x]=g,F[y+x+8]=g,F[y+x+16]=g,F[y+x+24]=g,F[y+x+32]=g,F[y+x+40]=g,F[y+x+48]=g,F[y+x+56]=g):(w=5793*g+2048>>12,t=5793*u+2048>>12,n=p,r=k,u=2896*(A-f)+2048>>12,f=2896*(A+f)+2048>>12,w=(w+t+1>>1)+4112,t=w-t,g=3784*n+1567*r+2048>>12,n=1567*n-3784*r+2048>>12,r=g,u=u+l+1>>1,l=u-l,f=f+m+1>>1,m=f-m,w=w+r+1>>1,r=w-r,t=t+n+1>>1,n=t-n,g=2276*u+
3406*f+2048>>12,u=3406*u-2276*f+2048>>12,f=g,g=799*m+4017*l+2048>>12,m=4017*m-799*l+2048>>12,l=g,g=w+f,f=w-f,A=t+l,k=t-l,p=n+m,l=n-m,m=r+u,u=r-u,g=16>g?0:4080<=g?255:g>>4,A=16>A?0:4080<=A?255:A>>4,p=16>p?0:4080<=p?255:p>>4,m=16>m?0:4080<=m?255:m>>4,u=16>u?0:4080<=u?255:u>>4,l=16>l?0:4080<=l?255:l>>4,k=16>k?0:4080<=k?255:k>>4,f=16>f?0:4080<=f?255:f>>4,F[y+x]=g,F[y+x+8]=A,F[y+x+16]=p,F[y+x+24]=m,F[y+x+32]=u,F[y+x+40]=l,F[y+x+48]=k,F[y+x+56]=f)}return b.blockData}function e(a){return 0>=a?0:255<=a?255:
a}var h=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);a.prototype={parse:function(a){function e(){var b=a[l]<<8|a[l+1];l+=2;return b}function g(){var b=e();b=a.subarray(l,l+b-2);l+=b.length;return b}function f(a){for(var b=Math.ceil(a.samplesPerLine/8/a.maxH),c=Math.ceil(a.scanLines/8/a.maxV),d=0;d<a.components.length;d++){z=a.components[d];var e=
Math.ceil(Math.ceil(a.samplesPerLine/8)*z.h/a.maxH),g=Math.ceil(Math.ceil(a.scanLines/8)*z.v/a.maxV);z.blockData=new Int16Array(64*c*z.v*(b*z.h+1));z.blocksPerLine=e;z.blocksPerColumn=g}a.mcusPerLine=b;a.mcusPerColumn=c}var l=0,k=null,u=null,m=[],p=[],r=[];var n=e();if(65496!==n)throw"SOI not found";for(n=e();65497!==n;){switch(n){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var t=
g();65504===n&&74===t[0]&&70===t[1]&&73===t[2]&&70===t[3]&&0===t[4]&&(k={version:{major:t[5],minor:t[6]},densityUnits:t[7],xDensity:t[8]<<8|t[9],yDensity:t[10]<<8|t[11],thumbWidth:t[12],thumbHeight:t[13],thumbData:t.subarray(14,14+3*t[12]*t[13])});65518===n&&65===t[0]&&100===t[1]&&111===t[2]&&98===t[3]&&101===t[4]&&0===t[5]&&(u={version:t[6],flags0:t[7]<<8|t[8],flags1:t[9]<<8|t[10],transformCode:t[11]});break;case 65499:n=e()+l-2;for(var w;l<n;){var A=a[l++],M=new Uint16Array(64);if(0===A>>4)for(t=
0;64>t;t++)w=h[t],M[w]=a[l++];else if(1===A>>4)for(t=0;64>t;t++)w=h[t],M[w]=e();else throw"DQT: invalid table spec";m[A&15]=M}break;case 65472:case 65473:case 65474:if(v)throw"Only single frame JPEGs supported";e();var v={};v.extended=65473===n;v.progressive=65474===n;v.precision=a[l++];v.scanLines=e();v.samplesPerLine=e();v.components=[];v.componentIds={};t=a[l++];for(n=M=A=0;n<t;n++){w=a[l];var x=a[l+1]>>4;var ka=a[l+1]&15;A<x&&(A=x);M<ka&&(M=ka);x=v.components.push({h:x,v:ka,quantizationTable:m[a[l+
2]]});v.componentIds[w]=x-1;l+=3}v.maxH=A;v.maxV=M;f(v);break;case 65476:w=e();for(n=2;n<w;){A=a[l++];M=new Uint8Array(16);for(t=x=0;16>t;t++,l++)x+=M[t]=a[l];ka=new Uint8Array(x);for(t=0;t<x;t++,l++)ka[t]=a[l];n+=17+x;(0===A>>4?r:p)[A&15]=b(M,ka)}break;case 65501:e();var F=e();break;case 65498:e();w=a[l++];t=[];for(n=0;n<w;n++){A=v.componentIds[a[l++]];var z=v.components[A];A=a[l++];z.huffmanTableDC=r[A>>4];z.huffmanTableAC=p[A&15];t.push(z)}n=a[l++];w=a[l++];A=a[l++];n=c(a,l,v,t,F,n,w,A>>4,A&15);
l+=n;break;case 65535:255!==a[l]&&l--;break;default:if(255===a[l-3]&&192<=a[l-2]&&254>=a[l-2])l-=3;else throw"unknown JPEG marker "+n.toString(16);}n=e()}this.width=v.samplesPerLine;this.height=v.scanLines;this.jfif=k;this.adobe=u;this.components=[];for(n=0;n<v.components.length;n++)z=v.components[n],this.components.push({output:d(v,z),scaleX:z.h/v.maxH,scaleY:z.v/v.maxV,blocksPerLine:z.blocksPerLine,blocksPerColumn:z.blocksPerColumn});this.numComponents=this.components.length},_getLinearizedBlockData:function(a,
b){var c=this.width/a,d=this.height/b,e,g,h=this.components.length,f=a*b*h,l=new Uint8Array(f),k=new Uint32Array(a);for(g=0;g<h;g++){var u=this.components[g];var m=u.scaleX*c;var p=u.scaleY*d;var A=g;var n=u.output;var r=u.blocksPerLine+1<<3;for(e=0;e<a;e++)u=0|e*m,k[e]=(u&4294967288)<<3|u&7;for(m=0;m<b;m++)for(u=0|m*p,u=r*(u&4294967288)|(u&7)<<3,e=0;e<a;e++)l[A]=n[u+k[e]],A+=h}if(b=this.decodeTransform)for(g=0;g<f;)for(a=u=0;u<h;u++,g++,a+=2)l[g]=(l[g]*b[a]>>8)+b[a+1];return l},_isColorConversionNeeded:function(){return this.adobe&&
this.adobe.transformCode?!0:3===this.numComponents?!0:!1},_convertYccToRgb:function(a){for(var b,c,d,g=0,h=a.length;g<h;g+=3)b=a[g],c=a[g+1],d=a[g+2],a[g]=e(b-179.456+1.402*d),a[g+1]=e(b+135.459-.344*c-.714*d),a[g+2]=e(b-226.816+1.772*c);return a},_convertYcckToRgb:function(a){for(var b,c,d,g,h=0,f=0,l=a.length;f<l;f+=4){b=a[f];c=a[f+1];d=a[f+2];g=a[f+3];var k=-122.67195406894+c*(-6.60635669420364E-5*c+4.37130475926232E-4*d-5.4080610064599E-5*b+4.8449797120281E-4*g-.154362151871126)+d*(-9.57964378445773E-4*
d+8.17076911346625E-4*b-.00477271405408747*g+1.53380253221734)+b*(9.61250184130688E-4*b-.00266257332283933*g+.48357088451265)+g*(-3.36197177618394E-4*g+.484791561490776),u=107.268039397724+c*(2.19927104525741E-5*c-6.40992018297945E-4*d+6.59397001245577E-4*b+4.26105652938837E-4*g-.176491792462875)+d*(-7.78269941513683E-4*d+.00130872261408275*b+7.70482631801132E-4*g-.151051492775562)+b*(.00126935368114843*b-.00265090189010898*g+.25802910206845)+g*(-3.18913117588328E-4*g-.213742400323665);b=-20.810012546947+
c*(-5.70115196973677E-4*c-2.63409051004589E-5*d+.0020741088115012*b-.00288260236853442*g+.814272968359295)+d*(-1.53496057440975E-5*d-1.32689043961446E-4*b+5.60833691242812E-4*g-.195152027534049)+b*(.00174418132927582*b-.00255243321439347*g+.116935020465145)+g*(-3.43531996510555E-4*g+.24165260232407);a[h++]=e(k);a[h++]=e(u);a[h++]=e(b)}return a},_convertYcckToCmyk:function(a){for(var b,c,d,g=0,h=a.length;g<h;g+=4)b=a[g],c=a[g+1],d=a[g+2],a[g]=e(434.456-b-1.402*d),a[g+1]=e(119.541-b+.344*c+.714*d),
a[g+2]=e(481.816-b-1.772*c);return a},_convertCmykToRgb:function(a){for(var b,c,d,e,g=0,h=1/255/255,f=0,l=a.length;f<l;f+=4){b=a[f];c=a[f+1];d=a[f+2];e=a[f+3];var k=b*(-4.387332384609988*b+54.48615194189176*c+18.82290502165302*d+212.25662451639585*e-72734.4411664936)+c*(1.7149763477362134*c-5.6096736904047315*d-17.873870861415444*e-1401.7366389350734)+d*(-2.5217340131683033*d-21.248923337353073*e+4465.541406466231)-e*(21.86122147463605*e+48317.86113160301),u=b*(8.841041422036149*b+60.118027045597366*
c+6.871425592049007*d+31.159100130055922*e-20220.756542821975)+c*(-15.310361306967817*c+17.575251261109482*d+131.35250912493976*e-48691.05921601825)+d*(4.444339102852739*d+9.8632861493405*e-6341.191035517494)-e*(20.737325471181034*e+47890.15695978492);b=b*(.8842522430003296*b+8.078677503112928*c+30.89978309703729*d-.23883238689178934*e-3616.812083916688)+c*(10.49593273432072*c+63.02378494754052*d+50.606957656360734*e-28620.90484698408)+d*(.03296041114873217*d+115.60384449646641*e-49363.43385999684)-
e*(22.33816807309886*e+45932.16563550634);a[g++]=0<=k?255:-16581375>=k?0:255+k*h|0;a[g++]=0<=u?255:-16581375>=u?0:255+u*h|0;a[g++]=0<=b?255:-16581375>=b?0:255+b*h|0}return a},getData:function(a,b,c){if(4<this.numComponents)throw"Unsupported color mode";a=this._getLinearizedBlockData(a,b);if(3===this.numComponents)return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return c?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(c)return this._convertCmykToRgb(a)}return a}};
return a}();"use strict";var g=function(){function a(a,b,c){this.data=a;this.bp=b;this.dataEnd=c;this.chigh=a[b];this.clow=0;this.byteIn();this.chigh=this.chigh<<7&65535|this.clow>>9&127;this.clow=this.clow<<7&65535;this.ct-=7;this.a=32768}var b=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},
{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,
switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,
nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},
{qe:22017,nmps:46,nlps:46,switchFlag:0}];a.prototype={byteIn:function(){var a=this.data,b=this.bp;255===a[b]?143<a[b+1]?(this.clow+=65280,this.ct=8):(b++,this.clow+=a[b]<<9,this.ct=7,this.bp=b):(b++,this.clow+=b<this.dataEnd?a[b]<<8:65280,this.ct=8,this.bp=b);65535<this.clow&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(a,c){var d=a[c]>>1,e=a[c]&1;d=b[d];var g=d.qe,h=this.a-g;if(this.chigh<g)h<g?(h=g,g=e,d=d.nmps):(h=g,g=1^e,1===d.switchFlag&&(e=g),d=d.nlps);else{this.chigh-=g;if(0!==
(h&32768))return this.a=h,e;h<g?(g=1^e,1===d.switchFlag&&(e=g),d=d.nlps):(g=e,d=d.nmps)}do 0===this.ct&&this.byteIn(),h<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--;while(0===(h&32768));this.a=h;a[c]=d<<1|e;return g}};return a}();"use strict";var f=function(){function c(){this.failOnCorruptedImage=!1}function e(a,b,c){a=c.xcb_;c=c.ycb_;var d=1<<a,e=1<<c,g=b.tbx0>>a,h=b.tby0>>c,f=b.tbx1+d-1>>a,q=b.tby1+e-1>>c,l=b.resolution.precinctParameters,k=[],m=[],
u,A;for(A=h;A<q;A++)for(u=g;u<f;u++){var p={cbx:u,cby:A,tbx0:d*u,tby0:e*A,tbx1:d*(u+1),tby1:e*(A+1)};p.tbx0_=Math.max(b.tbx0,p.tbx0);p.tby0_=Math.max(b.tby0,p.tby0);p.tbx1_=Math.min(b.tbx1,p.tbx1);p.tby1_=Math.min(b.tby1,p.tby1);var n=Math.floor((p.tbx0_-b.tbx0)/l.precinctWidthInSubband)+Math.floor((p.tby0_-b.tby0)/l.precinctHeightInSubband)*l.numprecinctswide;p.precinctNumber=n;p.subbandType=b.type;p.Lblock=3;if(!(p.tbx1_<=p.tbx0_||p.tby1_<=p.tby0_)){k.push(p);var r=m[n];void 0!==r?(u<r.cbxMin?r.cbxMin=
u:u>r.cbxMax&&(r.cbxMax=u),A<r.cbyMin?r.cbxMin=A:A>r.cbyMax&&(r.cbyMax=A)):m[n]=r={cbxMin:u,cbyMin:A,cbxMax:u,cbyMax:A};p.precinct=r}}b.codeblockParameters={codeblockWidth:a,codeblockHeight:c,numcodeblockwide:f-g+1,numcodeblockhigh:q-h+1};b.codeblocks=k;b.precincts=m}function h(a,b,c){var d=[];a=a.subbands;for(var e=0,g=a.length;e<g;e++)for(var h=a[e].codeblocks,f=0,q=h.length;f<q;f++){var l=h[f];l.precinctNumber===b&&d.push(l)}return{layerNumber:c,codeblocks:d}}function f(a){var b=a.tiles[a.currentTile.index],
c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e=0;for(a=0;a<d;a++)e=Math.max(e,b.components[a].codingStyleParameters.decompositionLevelsCount);var g=0,f=0,q=0,l=0;this.nextPacket=function(){for(;g<c;g++){for(;f<=e;f++){for(;q<d;q++){var a=b.components[q];if(!(f>a.codingStyleParameters.decompositionLevelsCount)){a=a.resolutions[f];for(var k=a.precinctParameters.numprecincts;l<k;)return a=h(a,l,g),l++,a;l=0}}q=0}f=0}throw Error("JPX Error: Out of packets");}}function k(a){var b=a.tiles[a.currentTile.index],
c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e=0;for(a=0;a<d;a++)e=Math.max(e,b.components[a].codingStyleParameters.decompositionLevelsCount);var g=0,f=0,q=0,l=0;this.nextPacket=function(){for(;g<=e;g++){for(;f<c;f++){for(;q<d;q++){var a=b.components[q];if(!(g>a.codingStyleParameters.decompositionLevelsCount)){a=a.resolutions[g];for(var k=a.precinctParameters.numprecincts;l<k;)return a=h(a,l,f),l++,a;l=0}}q=0}f=0}throw Error("JPX Error: Out of packets");}}function m(a){var b=a.tiles[a.currentTile.index],
c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e,g,f,q=0;for(f=0;f<d;f++)q=Math.max(q,b.components[f].codingStyleParameters.decompositionLevelsCount);var l=new Int32Array(q+1);for(g=0;g<=q;++g){for(f=a=0;f<d;++f){var k=b.components[f].resolutions;g<k.length&&(a=Math.max(a,k[g].precinctParameters.numprecincts))}l[g]=a}var m=f=g=e=0;this.nextPacket=function(){for(;g<=q;g++){for(;m<l[g];m++){for(;f<d;f++){var a=b.components[f];if(!(g>a.codingStyleParameters.decompositionLevelsCount||(a=a.resolutions[g],
m>=a.precinctParameters.numprecincts))){for(;e<c;)return a=h(a,m,e),e++,a;e=0}}f=0}m=0}throw Error("JPX Error: Out of packets");}}function u(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e=q(b),g=0,f=0,l=0,k=0,m=0;this.nextPacket=function(){for(;m<e.maxNumHigh;m++){for(;k<e.maxNumWide;k++){for(;l<d;l++){for(var a=b.components[l],q=a.codingStyleParameters.decompositionLevelsCount;f<=q;f++){var u=a.resolutions[f],A=n(k,m,e.components[l].resolutions[f],
e,u);if(null!==A){for(;g<c;)return a=h(u,A,g),g++,a;g=0}}f=0}l=0}k=0}throw Error("JPX Error: Out of packets");}}function p(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,d=a.SIZ.Csiz,e=q(b),g=0,f=0,l=0,k=0,m=0;this.nextPacket=function(){for(;l<d;++l){for(var a=b.components[l],q=e.components[l],u=a.codingStyleParameters.decompositionLevelsCount;m<q.maxNumHigh;m++){for(;k<q.maxNumWide;k++){for(;f<=u;f++){var A=a.resolutions[f],p=n(k,m,q.resolutions[f],q,A);if(null!==
p){for(;g<c;)return a=h(A,p,g),g++,a;g=0}}f=0}k=0}m=0}throw Error("JPX Error: Out of packets");}}function n(a,b,c,d,e){a*=d.minWidth;b*=d.minHeight;return 0!==a%c.width||0!==b%c.height?null:a/c.height+b/c.width*e.precinctParameters.numprecinctswide}function q(a){for(var b=a.components.length,c=Number.MAX_VALUE,d=Number.MAX_VALUE,e=0,g=0,h=Array(b),f=0;f<b;f++){for(var q=a.components[f],l=q.codingStyleParameters.decompositionLevelsCount,k=Array(l+1),m=Number.MAX_VALUE,u=Number.MAX_VALUE,p=0,r=0,n=
1;0<=l;--l){var t=q.resolutions[l],w=n*t.precinctParameters.precinctWidth,C=n*t.precinctParameters.precinctHeight;m=Math.min(m,w);u=Math.min(u,C);p=Math.max(p,t.precinctParameters.numprecinctswide);r=Math.max(r,t.precinctParameters.numprecinctshigh);k[l]={width:w,height:C};n<<=1}c=Math.min(c,m);d=Math.min(d,u);e=Math.max(e,p);g=Math.max(g,r);h[f]={resolutions:k,minWidth:m,minHeight:u,maxNumWide:p,maxNumHigh:r}}return{components:h,minWidth:c,minHeight:d,maxNumWide:e,maxNumHigh:g}}function r(b,c,d,
e){function g(a){for(;k<a;){var b=c[d+q];q++;m?(l=l<<7|b,k+=7,m=!1):(l=l<<8|b,k+=8);255===b&&(m=!0)}k-=a;return l>>>k&(1<<a)-1}function h(a){return 255===c[d+q-1]&&c[d+q]===a?(q+=1,!0):255===c[d+q]&&c[d+q+1]===a?(q+=2,!0):!1}function f(){if(0===g(1))return 1;if(0===g(1))return 2;var a=g(2);if(3>a)return a+3;a=g(5);if(31>a)return a+6;a=g(7);return a+37}var q=0,l,k=0,m=!1,u=b.COD.sopMarkerUsed,A=b.COD.ephMarkerUsed;for(b=b.tiles[b.currentTile.index].packetsIterator;q<e;){k=0;m&&(q++,m=!1);u&&h(145)&&
(q+=4);var p=b.nextPacket();if(g(1)){for(var r=p.layerNumber,n=[],t,w=0,C=p.codeblocks.length;w<C;w++){t=p.codeblocks[w];var v=t.precinct,M=t.cbx-v.cbxMin,F=t.cby-v.cbyMin,y=!1,z=!1;if(void 0!==t.included)y=!!g(1);else{v=t.precinct;if(void 0!==v.inclusionTree)var I=v.inclusionTree;else{var L=v.cbxMax-v.cbxMin+1;var R=v.cbyMax-v.cbyMin+1;I=new B(L,R,r);L=new x(L,R);v.inclusionTree=I;v.zeroBitPlanesTree=L}if(I.reset(M,F,r))for(;;)if(g(1)){if(R=!I.nextLevel()){y=z=t.included=!0;break}}else{I.incrementValue(r);
break}}if(y){if(z){L=v.zeroBitPlanesTree;for(L.reset(M,F);;)if(g(1)){if(R=!L.nextLevel())break}else L.incrementValue();t.zeroBitPlanes=L.value}for(v=f();g(1);)t.Lblock++;M=a(v);M=g((v<1<<M?M-1:M)+t.Lblock);n.push({codeblock:t,codingpasses:v,dataLength:M})}}k=0;m&&(q++,m=!1);for(A&&h(146);0<n.length;)p=n.shift(),t=p.codeblock,void 0===t.data&&(t.data=[]),t.data.push({data:c,start:d+q,end:d+q+p.dataLength,codingpasses:p.codingpasses}),q+=p.dataLength}}return q}var t={LL:0,LH:1,HL:1,HH:2};c.prototype=
{parse:function(a){if(65359===b(a,0))this.parseCodestream(a,0,a.length);else for(var c=0,e=a.length;c<e;){var g=8,h=d(a,c),f=d(a,c+4);c+=g;1===h&&(h=4294967296*d(a,c)+d(a,c+4),c+=8,g+=8);0===h&&(h=e-c+g);if(h<g)throw Error("JPX Error: Invalid box field size");g=h-g;h=!0;switch(f){case 1785737832:h=!1;break;case 1668246642:f=a[c];if(1===f)switch(f=d(a,c+3),f){case 16:case 17:case 18:break;default:l("Unknown colorspace "+f)}else 2===f&&v("ICC profile not supported");break;case 1785737827:this.parseCodestream(a,
c,c+g);break;case 1783636E3:218793738!==d(a,c)&&l("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var q=String.fromCharCode(f>>24&255,f>>16&255,f>>8&255,f&255);l("Unsupported header type "+f+" ("+q+")")}h&&(c+=g)}},parseImageProperties:function(a){for(var b=a.getByte();0<=b;){var c=b;b=a.getByte();if(65361===(c<<8|b)){a.skip(4);b=a.getInt32()>>>0;c=a.getInt32()>>>0;var d=a.getInt32()>>>0,e=a.getInt32()>>>0;a.skip(16);a=a.getUint16();
this.width=b-d;this.height=c-e;this.componentsCount=a;this.bitsPerComponent=8;return}}throw Error("JPX Error: No size marker found in JPX stream");},parseCodestream:function(a,c,h){var q={};try{var A=!1;for(var n=c;n+1<h;){var w=b(a,n);n+=2;var C=0,v;switch(w){case 65359:q.mainHeader=!0;break;case 65497:break;case 65361:C=b(a,n);var x={};x.Xsiz=d(a,n+4);x.Ysiz=d(a,n+8);x.XOsiz=d(a,n+12);x.YOsiz=d(a,n+16);x.XTsiz=d(a,n+20);x.YTsiz=d(a,n+24);x.XTOsiz=d(a,n+28);x.YTOsiz=d(a,n+32);var M=b(a,n+36);x.Csiz=
M;var F=[];var y=n+38;for(var z=0;z<M;z++){var I={precision:(a[y]&127)+1,isSigned:!!(a[y]&128),XRsiz:a[y+1],YRsiz:a[y+1]},B=I,L=x;B.x0=Math.ceil(L.XOsiz/B.XRsiz);B.x1=Math.ceil(L.Xsiz/B.XRsiz);B.y0=Math.ceil(L.YOsiz/B.YRsiz);B.y1=Math.ceil(L.Ysiz/B.YRsiz);B.width=B.x1-B.x0;B.height=B.y1-B.y0;F.push(I)}q.SIZ=x;q.components=F;for(var D=void 0,H=q,G=F,J=H.SIZ,K=[],O=Math.ceil((J.Xsiz-J.XTOsiz)/J.XTsiz),lc=Math.ceil((J.Ysiz-J.YTOsiz)/J.YTsiz),Wa=0;Wa<lc;Wa++)for(var Xa=0;Xa<O;Xa++)D={},D.tx0=Math.max(J.XTOsiz+
Xa*J.XTsiz,J.XOsiz),D.ty0=Math.max(J.YTOsiz+Wa*J.YTsiz,J.YOsiz),D.tx1=Math.min(J.XTOsiz+(Xa+1)*J.XTsiz,J.Xsiz),D.ty1=Math.min(J.YTOsiz+(Wa+1)*J.YTsiz,J.Ysiz),D.width=D.tx1-D.tx0,D.height=D.ty1-D.ty0,D.components=[],K.push(D);H.tiles=K;for(var Ya=0,mc=J.Csiz;Ya<mc;Ya++)for(var Za=G[Ya],gb=0,nc=K.length;gb<nc;gb++){var ea={};D=K[gb];ea.tcx0=Math.ceil(D.tx0/Za.XRsiz);ea.tcy0=Math.ceil(D.ty0/Za.YRsiz);ea.tcx1=Math.ceil(D.tx1/Za.XRsiz);ea.tcy1=Math.ceil(D.ty1/Za.YRsiz);ea.width=ea.tcx1-ea.tcx0;ea.height=
ea.tcy1-ea.tcy0;D.components[Ya]=ea}q.QCC=[];q.COC=[];break;case 65372:C=b(a,n);var Ia={};y=n+2;var ua=a[y++];switch(ua&31){case 0:var ma=8;var va=!0;break;case 1:ma=16;va=!1;break;case 2:ma=16;va=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+ua);}Ia.noQuantization=8===ma;Ia.scalarExpounded=va;Ia.guardBits=ua>>5;for(v=[];y<C+n;){var fa={};8===ma?(fa.epsilon=a[y++]>>3,fa.mu=0):(fa.epsilon=a[y]>>3,fa.mu=(a[y]&7)<<8|a[y+1],y+=2);v.push(fa)}Ia.SPqcds=v;q.mainHeader?q.QCD=Ia:(q.currentTile.QCD=
Ia,q.currentTile.QCC=[]);break;case 65373:C=b(a,n);var Ja={};y=n+2;if(257>q.SIZ.Csiz)var hb=a[y++];else hb=b(a,y),y+=2;ua=a[y++];switch(ua&31){case 0:ma=8;va=!0;break;case 1:ma=16;va=!1;break;case 2:ma=16;va=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+ua);}Ja.noQuantization=8===ma;Ja.scalarExpounded=va;Ja.guardBits=ua>>5;for(v=[];y<C+n;)fa={},8===ma?(fa.epsilon=a[y++]>>3,fa.mu=0):(fa.epsilon=a[y]>>3,fa.mu=(a[y]&7)<<8|a[y+1],y+=2),v.push(fa);Ja.SPqcds=v;q.mainHeader?q.QCC[hb]=Ja:
q.currentTile.QCC[hb]=Ja;break;case 65362:C=b(a,n);var S={};y=n+2;var ib=a[y++];S.entropyCoderWithCustomPrecincts=!!(ib&1);S.sopMarkerUsed=!!(ib&2);S.ephMarkerUsed=!!(ib&4);S.progressionOrder=a[y++];S.layersCount=b(a,y);y+=2;S.multipleComponentTransform=a[y++];S.decompositionLevelsCount=a[y++];S.xcb=(a[y++]&15)+2;S.ycb=(a[y++]&15)+2;var Ka=a[y++];S.selectiveArithmeticCodingBypass=!!(Ka&1);S.resetContextProbabilities=!!(Ka&2);S.terminationOnEachCodingPass=!!(Ka&4);S.verticalyStripe=!!(Ka&8);S.predictableTermination=
!!(Ka&16);S.segmentationSymbolUsed=!!(Ka&32);S.reversibleTransformation=a[y++];if(S.entropyCoderWithCustomPrecincts){for(var Ib=[];y<C+n;){var Jb=a[y++];Ib.push({PPx:Jb&15,PPy:Jb>>4})}S.precinctsSizes=Ib}var wa=[];S.selectiveArithmeticCodingBypass&&wa.push("selectiveArithmeticCodingBypass");S.resetContextProbabilities&&wa.push("resetContextProbabilities");S.terminationOnEachCodingPass&&wa.push("terminationOnEachCodingPass");S.verticalyStripe&&wa.push("verticalyStripe");S.predictableTermination&&wa.push("predictableTermination");
if(0<wa.length)throw A=!0,Error("JPX Error: Unsupported COD options ("+wa.join(", ")+")");q.mainHeader?q.COD=S:(q.currentTile.COD=S,q.currentTile.COC=[]);break;case 65424:C=b(a,n);var W={};W.index=b(a,n+2);W.length=d(a,n+4);W.dataEnd=W.length+n-2;W.partIndex=a[n+8];W.partsCount=a[n+9];q.mainHeader=!1;0===W.partIndex&&(W.COD=q.COD,W.COC=q.COC.slice(0),W.QCD=q.QCD,W.QCC=q.QCC.slice(0));q.currentTile=W;break;case 65427:W=q.currentTile;if(0===W.partIndex){for(var na=q,oc=na.SIZ.Csiz,Kb=na.tiles[W.index],
xa=0;xa<oc;xa++){var Lb=Kb.components[xa];Lb.quantizationParameters=void 0!==na.currentTile.QCC[xa]?na.currentTile.QCC[xa]:na.currentTile.QCD;Lb.codingStyleParameters=void 0!==na.currentTile.COC[xa]?na.currentTile.COC[xa]:na.currentTile.COD}Kb.codingStyleDefaultParameters=na.currentTile.COD;for(var ba=q,ya=ba.tiles[ba.currentTile.index],pc=ba.SIZ.Csiz,jb=0;jb<pc;jb++){for(var T=ya.components[jb],kb=T.codingStyleParameters.decompositionLevelsCount,Mb=[],Na=[],za=0;za<=kb;za++){var $a=za,Aa=T.codingStyleParameters,
ha={};Aa.entropyCoderWithCustomPrecincts?(ha.PPx=Aa.precinctsSizes[$a].PPx,ha.PPy=Aa.precinctsSizes[$a].PPy):(ha.PPx=15,ha.PPy=15);ha.xcb_=0<$a?Math.min(Aa.xcb,ha.PPx-1):Math.min(Aa.xcb,ha.PPx);ha.ycb_=0<$a?Math.min(Aa.ycb,ha.PPy-1):Math.min(Aa.ycb,ha.PPy);var qa=ha;var U={},ra=1<<kb-za;U.trx0=Math.ceil(T.tcx0/ra);U.try0=Math.ceil(T.tcy0/ra);U.trx1=Math.ceil(T.tcx1/ra);U.try1=Math.ceil(T.tcy1/ra);U.resLevel=za;var lb=1<<qa.PPx,mb=1<<qa.PPy,Nb=0===U.resLevel,Ob=U.trx1>U.trx0?Math.ceil(U.trx1/lb)-Math.floor(U.trx0/
lb):0,Pb=U.try1>U.try0?Math.ceil(U.try1/mb)-Math.floor(U.try0/mb):0;U.precinctParameters={precinctWidth:lb,precinctHeight:mb,numprecinctswide:Ob,numprecinctshigh:Pb,numprecincts:Ob*Pb,precinctWidthInSubband:1<<qa.PPx+(Nb?0:-1),precinctHeightInSubband:1<<qa.PPy+(Nb?0:-1)};Mb.push(U);if(0===za){var P={type:"LL"};P.tbx0=Math.ceil(T.tcx0/ra);P.tby0=Math.ceil(T.tcy0/ra);P.tbx1=Math.ceil(T.tcx1/ra);P.tby1=Math.ceil(T.tcy1/ra);P.resolution=U;e(ba,P,qa);Na.push(P);U.subbands=[P]}else{var ca=1<<kb-za+1,ab=
[];P={type:"HL"};P.tbx0=Math.ceil(T.tcx0/ca-.5);P.tby0=Math.ceil(T.tcy0/ca);P.tbx1=Math.ceil(T.tcx1/ca-.5);P.tby1=Math.ceil(T.tcy1/ca);P.resolution=U;e(ba,P,qa);Na.push(P);ab.push(P);P={type:"LH"};P.tbx0=Math.ceil(T.tcx0/ca);P.tby0=Math.ceil(T.tcy0/ca-.5);P.tbx1=Math.ceil(T.tcx1/ca);P.tby1=Math.ceil(T.tcy1/ca-.5);P.resolution=U;e(ba,P,qa);Na.push(P);ab.push(P);P={type:"HH"};P.tbx0=Math.ceil(T.tcx0/ca-.5);P.tby0=Math.ceil(T.tcy0/ca-.5);P.tbx1=Math.ceil(T.tcx1/ca-.5);P.tby1=Math.ceil(T.tcy1/ca-.5);
P.resolution=U;e(ba,P,qa);Na.push(P);ab.push(P);U.subbands=ab}}T.resolutions=Mb;T.subbands=Na}var Qb=ya.codingStyleDefaultParameters.progressionOrder;switch(Qb){case 0:ya.packetsIterator=new f(ba);break;case 1:ya.packetsIterator=new k(ba);break;case 2:ya.packetsIterator=new m(ba);break;case 3:ya.packetsIterator=new u(ba);break;case 4:ya.packetsIterator=new p(ba);break;default:throw Error("JPX Error: Unsupported progression order "+Qb);}}C=W.dataEnd-n;r(q,a,n,C);break;case 65365:case 65367:case 65368:case 65380:C=
b(a,n);break;case 65363:throw Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw Error("JPX Error: Unknown codestream code: "+w.toString(16));}n+=C}}catch(Rb){if(A||this.failOnCorruptedImage)throw Rb;l("Trying to recover from "+Rb.message)}for(var Sb=q.components,La=q.SIZ.Csiz,Tb=[],nb=0,qc=q.tiles.length;nb<qc;nb++){var ob=q.tiles[nb],Ba=[],da;for(da=0;da<La;da++){for(var rc=Ba,sc=da,Ca=ob.components[da],pb=Ca.codingStyleParameters,qb=Ca.quantizationParameters,tc=pb.decompositionLevelsCount,
bb=qb.SPqcds,uc=qb.scalarExpounded,vc=qb.guardBits,wc=pb.segmentationSymbolUsed,xc=q.components[da].precision,rb=pb.reversibleTransformation,yc=rb?new Q:new N,Ub=[],sb=0,Oa=0;Oa<=tc;Oa++){for(var Ma=Ca.resolutions[Oa],tb=Ma.trx1-Ma.trx0,Vb=Ma.try1-Ma.try0,Wb=new Float32Array(tb*Vb),ub=0,zc=Ma.subbands.length;ub<zc;ub++){if(uc){var Xb=bb[sb].mu;var vb=bb[sb].epsilon;sb++}else Xb=bb[0].mu,vb=bb[0].epsilon+(0<Oa?1-Oa:0);for(var Yb=Ma.subbands[ub],Ac=t[Yb.type],Bc=Wb,Zb=tb,sa=Yb,Cc=rb?1:Math.pow(2,xc+
Ac-vb)*(1+Xb/2048),wb=vc+vb-1,$b=rb,Dc=wc,Ec=sa.tbx0,Fc=sa.tby0,cb=sa.tbx1-sa.tbx0,ac=sa.codeblocks,Gc="H"===sa.type.charAt(0)?1:0,Hc="H"===sa.type.charAt(1)?Zb:0,xb=0,Ic=ac.length;xb<Ic;++xb){var ia=ac[xb],db=ia.tbx1_-ia.tbx0_,yb=ia.tby1_-ia.tby0_;if(0!==db&&0!==yb&&void 0!==ia.data){var ta=new E(db,yb,ia.subbandType,ia.zeroBitPlanes,wb);var zb=2;var eb=ia.data,Ab=0,bc=0,fb;var Z=0;for(fb=eb.length;Z<fb;Z++){var Da=eb[Z];Ab+=Da.end-Da.start;bc+=Da.codingpasses}var cc=new Uint8Array(Ab),Ea=0;Z=0;
for(fb=eb.length;Z<fb;Z++){Da=eb[Z];var dc=Da.data.subarray(Da.start,Da.end);cc.set(dc,Ea);Ea+=dc.length}var Jc=new g(cc,0,Ab);ta.setDecoder(Jc);for(Z=0;Z<bc;Z++){switch(zb){case 0:ta.runSignificancePropogationPass();break;case 1:ta.runMagnitudeRefinementPass();break;case 2:ta.runCleanupPass(),Dc&&ta.checkSegmentationSymbol()}zb=(zb+1)%3}var Pa=ia.tbx0_-Ec+(ia.tby0_-Fc)*cb,Kc=ta.coefficentsSign,Lc=ta.coefficentsMagnitude,Mc=ta.bitsDecoded,Nc=$b?0:.5,Bb;Ea=0;var Oc="LL"!==sa.type;for(Z=0;Z<yb;Z++){var Pc=
2*(Pa/cb|0)*(Zb-cb)+Gc+Hc;for(Bb=0;Bb<db;Bb++){var Fa=Lc[Ea];if(0!==Fa){Fa=(Fa+Nc)*Cc;0!==Kc[Ea]&&(Fa=-Fa);var ec=Mc[Ea];Bc[Oc?Pc+(Pa<<1):Pa]=$b&&ec>=wb?Fa:Fa*(1<<wb-ec)}Pa++;Ea++}Pa+=cb-db}}}}Ub.push({width:tb,height:Vb,items:Wb})}var Cb=yc.calculate(Ub,Ca.tcx0,Ca.tcy0);rc[sc]={left:Ca.tcx0,top:Ca.tcy0,width:Cb.width,height:Cb.height,items:Cb.items}}var Qa=Ba[0],oa=new Uint8Array(Qa.items.length*La),Qc={left:Qa.left,top:Qa.top,width:Qa.width,height:Qa.height,items:oa},Y=0,V;if(ob.codingStyleDefaultParameters.multipleComponentTransform){var fc=
4===La,Db=Ba[0].items,gc=Ba[1].items,hc=Ba[2].items,Rc=fc?Ba[3].items:null;var aa=Sb[0].precision-8;var Ra=(128<<aa)+.5;var ja=255*(1<<aa);var ic=.5*ja;var Eb=-ic;var Sc=ob.components[0],jc=La-3;var Sa=Db.length;if(Sc.codingStyleParameters.reversibleTransformation)for(V=0;V<Sa;V++,Y+=jc){var Ta=Db[V]+Ra;var Ua=gc[V];var Va=hc[V];var pa=Ta-(Va+Ua>>2);var Ga=pa+Va;var Ha=pa+Ua;oa[Y++]=0>=Ga?0:Ga>=ja?255:Ga>>aa;oa[Y++]=0>=pa?0:pa>=ja?255:pa>>aa;oa[Y++]=0>=Ha?0:Ha>=ja?255:Ha>>aa}else for(V=0;V<Sa;V++,
Y+=jc)Ta=Db[V]+Ra,Ua=gc[V],Va=hc[V],Ga=Ta+1.402*Va,pa=Ta-.34413*Ua-.71414*Va,Ha=Ta+1.772*Ua,oa[Y++]=0>=Ga?0:Ga>=ja?255:Ga>>aa,oa[Y++]=0>=pa?0:pa>=ja?255:pa>>aa,oa[Y++]=0>=Ha?0:Ha>=ja?255:Ha>>aa;if(fc)for(V=0,Y=3;V<Sa;V++,Y+=4){var Fb=Rc[V];oa[Y]=Fb<=Eb?0:Fb>=ic?255:Fb+Ra>>aa}}else for(da=0;da<La;da++){var kc=Ba[da].items;aa=Sb[da].precision-8;Ra=(128<<aa)+.5;ja=127.5*(1<<aa);Eb=-ja;Y=da;V=0;for(Sa=kc.length;V<Sa;V++){var Gb=kc[V];oa[Y]=Gb<=Eb?0:Gb>=ja?255:Gb+Ra>>aa;Y+=La}}Tb.push(Qc)}this.tiles=Tb;
this.width=q.SIZ.Xsiz-q.SIZ.XOsiz;this.height=q.SIZ.Ysiz-q.SIZ.YOsiz;this.componentsCount=q.SIZ.Csiz}};var x=function(){function b(b,c){var d=a(Math.max(b,c))+1;this.levels=[];for(var e=0;e<d;e++)this.levels.push({width:b,height:c,items:[]}),b=Math.ceil(b/2),c=Math.ceil(c/2)}b.prototype={reset:function(a,b){for(var c=0,d=0,e;c<this.levels.length;){e=this.levels[c];var g=a+b*e.width;if(void 0!==e.items[g]){d=e.items[g];break}e.index=g;a>>=1;b>>=1;c++}c--;e=this.levels[c];e.items[e.index]=d;this.currentLevel=
c;delete this.value},incrementValue:function(){var a=this.levels[this.currentLevel];a.items[a.index]++},nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];a--;if(0>a)return this.value=c,!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return b}(),B=function(){function b(b,c,d){var e=a(Math.max(b,c))+1;this.levels=[];for(var g=0;g<e;g++){for(var h=new Uint8Array(b*c),f=0,q=h.length;f<q;f++)h[f]=d;this.levels.push({width:b,height:c,items:h});b=Math.ceil(b/
2);c=Math.ceil(c/2)}}b.prototype={reset:function(a,b,c){for(var d=0;d<this.levels.length;){var e=this.levels[d],g=a+b*e.width;e.index=g;e=e.items[g];if(255===e)break;if(e>c)return this.currentLevel=d,this.propagateValues(),!1;a>>=1;b>>=1;d++}this.currentLevel=d-1;return!0},incrementValue:function(a){var b=this.levels[this.currentLevel];b.items[b.index]=a+1;this.propagateValues()},propagateValues:function(){for(var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];0<=--a;)b=this.levels[a],b.items[b.index]=
c},nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];b.items[b.index]=255;a--;if(0>a)return!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return b}(),E=function(){function a(a,e,g,h,f){this.width=a;this.height=e;this.contextLabelTable="HH"===g?d:"HL"===g?c:b;a*=e;this.neighborsSignificance=new Uint8Array(a);this.coefficentsSign=new Uint8Array(a);this.coefficentsMagnitude=14<f?new Uint32Array(a):6<f?new Uint16Array(a):new Uint8Array(a);this.processingFlags=
new Uint8Array(a);f=new Uint8Array(a);if(0!==h)for(e=0;e<a;e++)f[e]=h;this.bitsDecoded=f;this.reset()}var b=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),c=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),d=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,
0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);a.prototype={setDecoder:function(a){this.decoder=a},reset:function(){this.contexts=new Int8Array(19);this.contexts[0]=8;this.contexts[17]=92;this.contexts[18]=6},setNeighborsSignificance:function(a,b,c){var d=this.neighborsSignificance,e=this.width,g=this.height,h=0<b;b=b+1<e;if(0<a){var f=c-e;h&&(d[f-1]+=16);b&&(d[f+1]+=16);d[f]+=4}a+1<g&&(f=c+e,h&&(d[f-1]+=16),b&&(d[f+1]+=16),d[f]+=
4);h&&(d[c-1]+=1);b&&(d[c+1]+=1);d[c]|=128},runSignificancePropogationPass:function(){for(var a=this.decoder,b=this.width,c=this.height,d=this.coefficentsMagnitude,e=this.coefficentsSign,g=this.neighborsSignificance,f=this.processingFlags,h=this.contexts,q=this.contextLabelTable,l=this.bitsDecoded,k=0;k<c;k+=4)for(var m=0;m<b;m++)for(var u=k*b+m,p=0;4>p;p++,u+=b){var n=k+p;if(n>=c)break;f[u]&=-2;if(!d[u]&&g[u]){if(a.readBit(h,q[g[u]])){var r=this.decodeSignBit(n,m,u);e[u]=r;d[u]=1;this.setNeighborsSignificance(n,
m,u);f[u]|=2}l[u]++;f[u]|=1}}},decodeSignBit:function(a,b,c){var d=this.width,e=this.height,g=this.coefficentsMagnitude,f=this.coefficentsSign;var h=0<b&&0!==g[c-1];b+1<d&&0!==g[c+1]?(b=f[c+1],h?(h=f[c-1],b=1-b-h):b=1-b-b):h?(h=f[c-1],b=1-h-h):b=0;var q=3*b;h=0<a&&0!==g[c-d];a+1<e&&0!==g[c+d]?(b=f[c+d],h?(h=f[c-d],b=1-b-h+q):b=1-b-b+q):h?(h=f[c-d],b=1-h-h+q):b=q;return 0<=b?this.decoder.readBit(this.contexts,9+b):this.decoder.readBit(this.contexts,9-b)^1},runMagnitudeRefinementPass:function(){for(var a=
this.decoder,b=this.width,c=this.coefficentsMagnitude,d=this.neighborsSignificance,e=this.contexts,g=this.bitsDecoded,h=this.processingFlags,f=b*this.height,q=4*b,l=0,k;l<f;l=k){k=Math.min(f,l+q);for(var m=0;m<b;m++)for(var u=l+m;u<k;u+=b)if(c[u]&&0===(h[u]&1)){var p=16;0!==(h[u]&2)&&(h[u]^=2,p=0===(d[u]&127)?15:14);p=a.readBit(e,p);c[u]=c[u]<<1|p;g[u]++;h[u]|=1}}},runCleanupPass:function(){for(var a=this.decoder,b=this.width,c=this.height,d=this.neighborsSignificance,e=this.coefficentsMagnitude,
g=this.coefficentsSign,h=this.contexts,f=this.contextLabelTable,q=this.bitsDecoded,l=this.processingFlags,k=2*b,m=3*b,u,p=0;p<c;p=u){u=Math.min(p+4,c);for(var n=p*b,r=p+3<c,A=0;A<b;A++){var t=n+A,w=0,C=t,v=p;if(r&&0===l[t]&&0===l[t+b]&&0===l[t+k]&&0===l[t+m]&&0===d[t]&&0===d[t+b]&&0===d[t+k]&&0===d[t+m]){if(!a.readBit(h,18)){q[t]++;q[t+b]++;q[t+k]++;q[t+m]++;continue}w=a.readBit(h,17)<<1|a.readBit(h,17);0!==w&&(v=p+w,C+=w*b);var x=this.decodeSignBit(v,A,C);g[C]=x;e[C]=1;this.setNeighborsSignificance(v,
A,C);l[C]|=2;C=t;for(t=p;t<=v;t++,C+=b)q[C]++;w++}for(v=p+w;v<u;v++,C+=b)e[C]||0!==(l[C]&1)||(1===a.readBit(h,f[d[C]])&&(x=this.decodeSignBit(v,A,C),g[C]=x,e[C]=1,this.setNeighborsSignificance(v,A,C),l[C]|=2),q[C]++)}}},checkSegmentationSymbol:function(){var a=this.decoder,b=this.contexts;if(10!==(a.readBit(b,17)<<3|a.readBit(b,17)<<2|a.readBit(b,17)<<1|a.readBit(b,17)))throw Error("JPX Error: Invalid segmentation symbol");}};return a}(),O=function(){function a(){}a.prototype.calculate=function(a,
b,c){for(var d=a[0],e=1,g=a.length;e<g;e++)d=this.iterate(d,a[e],b,c);return d};a.prototype.extend=function(a,b,c){var d=b-1,e=b+1,g=b+c-2;b+=c;a[d--]=a[e++];a[b++]=a[g--];a[d--]=a[e++];a[b++]=a[g--];a[d--]=a[e++];a[b++]=a[g--];a[d]=a[e];a[b]=a[g]};a.prototype.iterate=function(a,b,c,d){var e=a.width,g=a.height,h=a.items,f=b.width,q=b.height;b=b.items;var l,k,m;for(l=m=0;l<g;l++){var u=2*l*f;for(k=0;k<e;k++,m++,u+=2)b[u]=h[m]}a.items=null;a=new Float32Array(f+8);if(1===f){if(0!==(c&1))for(m=u=0;u<
q;u++,m+=f)b[m]*=.5}else for(m=u=0;u<q;u++,m+=f)a.set(b.subarray(m,m+f),4),this.extend(a,4,f),this.filter(a,4,f),b.set(a.subarray(4,4+f),m);c=16;e=[];for(l=0;l<c;l++)e.push(new Float32Array(q+8));l=0;a=4+q;if(1===q){if(0!==(d&1))for(d=0;d<f;d++)b[d]*=.5}else for(d=0;d<f;d++){if(0===l){c=Math.min(f-d,c);m=d;for(u=4;u<a;m+=f,u++)for(g=0;g<c;g++)e[g][u]=b[m+g];l=c}l--;m=e[l];this.extend(m,4,q);this.filter(m,4,q);if(0===l)for(m=d-c+1,u=4;u<a;m+=f,u++)for(g=0;g<c;g++)b[m+g]=e[g][u]}return{width:f,height:q,
items:b}};return a}(),N=function(){function a(){O.call(this)}a.prototype=Object.create(O.prototype);a.prototype.filter=function(a,b,c){c>>=1;b|=0;var d;var e=b-3;for(d=c+4;d--;e+=2)a[e]*=.8128930661159609;e=b-2;var g=.443506852043971*a[e-1];for(d=c+3;d--;e+=2){var f=.443506852043971*a[e+1];a[e]=1.230174104914001*a[e]-g-f;if(d--)e+=2,g=.443506852043971*a[e+1],a[e]=1.230174104914001*a[e]-g-f;else break}e=b-1;g=.882911075530934*a[e-1];for(d=c+2;d--;e+=2)if(f=.882911075530934*a[e+1],a[e]-=g+f,d--)e+=
2,g=.882911075530934*a[e+1],a[e]-=g+f;else break;e=b;g=-.052980118572961*a[e-1];for(d=c+1;d--;e+=2)if(f=-.052980118572961*a[e+1],a[e]-=g+f,d--)e+=2,g=-.052980118572961*a[e+1],a[e]-=g+f;else break;if(0!==c)for(e=b+1,g=-1.586134342059924*a[e-1],d=c;d--;e+=2)if(f=-1.586134342059924*a[e+1],a[e]-=g+f,d--)e+=2,g=-1.586134342059924*a[e+1],a[e]-=g+f;else break};return a}(),Q=function(){function a(){O.call(this)}a.prototype=Object.create(O.prototype);a.prototype.filter=function(a,b,c){c>>=1;b|=0;var d;var e=
b;for(d=c+1;d--;e+=2)a[e]-=a[e-1]+a[e+1]+2>>2;e=b+1;for(d=c;d--;e+=2)a[e]+=a[e-1]+a[e+1]>>1};return a}();return c}();"use strict";var k=function(){function c(){}function f(a,b,c){this.data=a;this.start=b;this.end=c}function h(a,b,c){function d(a){for(var b=0,d=0;d<a;d++){var f=c.readBit(e,g);g=256>g?g<<1|f:(g<<1|f)&511|256;b=b<<1|f}return b>>>0}var e=a.getContexts(b),g=1;a=d(1);b=d(1)?d(1)?d(1)?d(1)?d(1)?d(32)+4436:d(12)+340:d(8)+84:d(6)+20:d(4)+4:d(2);return 0===a?b:0<b?-b:null}function l(a,b,c){a=
a.getContexts("IAID");for(var d=1,e=0;e<c;e++){var g=b.readBit(a,d);d=d<<1|g}return 31>c?d&(1<<c)-1:d&2147483647}function k(a,b,c){var d=c.decoder;c=c.contextCache.getContexts("GB");var e,g,f,h=[];for(e=0;e<b;e++){var q=h[e]=new Uint8Array(a);var l=1>e?q:h[e-1];var k=2>e?q:h[e-2];var m=k[0]<<13|k[1]<<12|k[2]<<11|l[0]<<7|l[1]<<6|l[2]<<5|l[3]<<4;for(g=0;g<a;g++)q[g]=f=d.readBit(c,m),m=(m&31735)<<1|(g+3<a?k[g+3]<<11:0)|(g+4<a?l[g+4]<<4:0)|f}return h}function m(a,b,c,d,e,g,f,h){a&&n("JBIG2 error: MMR encoding is not supported");
if(0===d&&!g&&!e&&4===f.length&&3===f[0].x&&-1===f[0].y&&-3===f[1].x&&-1===f[1].y&&2===f[2].x&&-2===f[2].y&&-2===f[3].x&&-2===f[3].y)return k(b,c,h);a=!!g;var q=v[d].concat(f);q.sort(function(a,b){return a.y-b.y||a.x-b.x});f=q.length;var l=new Int8Array(f),m=new Int8Array(f),u=[],p=0,r=0,t=0,A=0,w,C;for(C=0;C<f;C++)l[C]=q[C].x,m[C]=q[C].y,r=Math.min(r,q[C].x),t=Math.max(t,q[C].x),A=Math.min(A,q[C].y),C<f-1&&q[C].y===q[C+1].y&&q[C].x===q[C+1].x-1?p|=1<<f-1-C:u.push(C);var x=u.length,y=new Int8Array(x),
F=new Int8Array(x),z=new Uint16Array(x);for(w=0;w<x;w++)C=u[w],y[w]=q[C].x,F[w]=q[C].y,z[w]=1<<f-1-C;q=-r;A=-A;t=b-t;d=E[d];u=new Uint8Array(b);r=[];w=h.decoder;h=h.contextCache.getContexts("GB");for(var I=0,B,L,M,D=0,H,N=0;N<c;N++){if(e&&(C=w.readBit(h,d),I^=C)){r.push(u);continue}u=new Uint8Array(u);r.push(u);for(B=0;B<b;B++)if(a&&g[N][B])u[B]=0;else{if(B>=q&&B<t&&N>=A)for(D=D<<1&p,C=0;C<x;C++){if(L=N+F[C],M=B+y[C],L=r[L][M])L=z[C],D|=L}else for(D=0,H=f-1,C=0;C<f;C++,H--)M=B+l[C],0<=M&&M<b&&(L=
N+m[C],0<=L&&(L=r[L][M])&&(D|=L<<H));C=w.readBit(h,D);u[B]=C}}return r}function u(a,b,c,d,e,g,f,h,q){var l=x[c].coding;0===c&&(l=l.concat([h[0]]));var k=l.length,m=new Int32Array(k),u=new Int32Array(k),p;for(p=0;p<k;p++)m[p]=l[p].x,u[p]=l[p].y;var r=x[c].reference;0===c&&(r=r.concat([h[1]]));h=r.length;l=new Int32Array(h);var t=new Int32Array(h);for(p=0;p<h;p++)l[p]=r[p].x,t[p]=r[p].y;r=d[0].length;var A=d.length;c=O[c];var C=[],w=q.decoder;q=q.contextCache.getContexts("GR");for(var v=0,y=0;y<b;y++){f&&
(p=w.readBit(q,c),(v^=p)&&n("JBIG2 error: prediction is not supported"));var F=new Uint8Array(a);C.push(F);for(var z=0;z<a;z++){var B=0;for(p=0;p<k;p++){var I=y+u[p];var L=z+m[p];B=0>I||0>L||L>=a?B<<1:B<<1|C[I][L]}for(p=0;p<h;p++)I=y+t[p]+g,L=z+l[p]+e,B=0>I||I>=A||0>L||L>=r?B<<1:B<<1|d[I][L];p=w.readBit(q,B);F[z]=p}}return C}function p(a,b,c,d,e,g,f,q,k,m,p,r,t,C,w,v,x){a&&n("JBIG2 error: huffman is not supported");a=[];for(C=0;C<d;C++){var A=new Uint8Array(c);if(e)for(var y=0;y<c;y++)A[y]=e;a.push(A)}d=
x.decoder;e=x.contextCache;y=-h(e,"IADT",d);var F=0;for(C=0;C<g;){var z=h(e,"IADT",d);y+=z;z=h(e,"IAFS",d);z=F+=z;do{var B=1===f?0:h(e,"IAIT",d);A=f*y+B;B=l(e,d,k);var I=b&&h(e,"IARI",d);B=q[B];var L=B[0].length,D=B.length;if(I){I=h(e,"IARDW",d);var M=h(e,"IARDH",d),H=h(e,"IARDX",d),G=h(e,"IARDY",d);L+=I;D+=M;B=u(L,D,w,B,(I>>1)+H,(M>>1)+G,!1,v,x)}I=A-(r&1?0:D);M=z-(r&2?L:0);if(m){for(H=0;H<D;H++)if(A=a[M+H]){var N=B[H];var E=Math.min(c-I,L);switch(t){case 0:for(G=0;G<E;G++)A[I+G]|=N[G];break;case 2:for(G=
0;G<E;G++)A[I+G]^=N[G];break;default:n("JBIG2 error: operator "+t+" is not supported")}}z+=D-1}else{for(G=0;G<D;G++)if(A=a[I+G])switch(N=B[G],t){case 0:for(H=0;H<L;H++)A[M+H]|=N[H];break;case 2:for(H=0;H<L;H++)A[M+H]^=N[H];break;default:n("JBIG2 error: operator "+t+" is not supported")}z+=L-1}C++;B=h(e,"IADS",d);if(null===B)break;z+=B+p}while(1)}return a}function r(a,b){return{width:d(a,b),height:d(a,b+4),x:d(a,b+8),y:d(a,b+12),combinationOperator:a[b+16]&7}}function q(){}function t(){}c.prototype=
{getContexts:function(a){return a in this?this[a]:this[a]=new Int8Array(65536)}};f.prototype={get decoder(){var a=new g(this.data,this.start,this.end);return e(this,"decoder",a)},get contextCache(){var a=new c;return e(this,"contextCache",a)}};var C=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"patternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion",
"ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],v=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},
{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],x=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},
{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],E=[39717,1941,229,405],O=[32,8];q.prototype={onPageInformation:function(a){this.currentPageInfo=a;var b=new Uint8Array((a.width+7>>3)*a.height);if(a.defaultPixelValue){a=0;for(var c=b.length;a<c;a++)b[a]=255}this.buffer=b},drawBitmap:function(a,b){var c=this.currentPageInfo,d=a.width,e=a.height,
g=c.width+7>>3,f=c.combinationOperatorOverride?a.combinationOperator:c.combinationOperator;c=this.buffer;var h=128>>(a.x&7);a=a.y*g+(a.x>>3);var q;switch(f){case 0:for(f=0;f<e;f++){var l=h;var k=a;for(q=0;q<d;q++)b[f][q]&&(c[k]|=l),l>>=1,l||(l=128,k++);a+=g}break;case 2:for(f=0;f<e;f++){l=h;k=a;for(q=0;q<d;q++)b[f][q]&&(c[k]^=l),l>>=1,l||(l=128,k++);a+=g}break;default:n("JBIG2 error: operator "+f+" is not supported")}},onImmediateGenericRegion:function(a,b,c,d){var e=a.info;b=new f(b,c,d);a=m(a.mmr,
e.width,e.height,a.template,a.prediction,null,a.at,b);this.drawBitmap(e,a)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(b,c,d,e,g,q){b.huffman&&n("JBIG2 error: huffman is not supported");var k=this.symbols;k||(this.symbols=k={});for(var r=[],t=0,A=d.length;t<A;t++)r=r.concat(k[d[t]]);q=new f(e,g,q);t=b.huffman;A=b.refinement;d=r;r=b.numberOfNewSymbols;var C=b.template,w=b.at,v=b.refinementTemplate,x=b.refinementAt;t&&
n("JBIG2 error: huffman is not supported");b=[];var y=0,B=a(d.length+r);e=q.decoder;for(g=q.contextCache;b.length<r;){var I=h(g,"IADH",e);y+=I;for(I=0;;){var z=h(g,"IADW",e);if(null===z)break;I+=z;if(A)if(z=h(g,"IAAI",e),1<z)z=p(t,A,I,y,0,z,1,d.concat(b),B,0,0,1,0,void 0,v,x,q);else{z=l(g,e,B);var F=h(g,"IARDX",e),L=h(g,"IARDY",e);z=u(I,y,v,z<d.length?d[z]:b[z-d.length],F,L,!1,x,q)}else z=m(!1,I,y,C,!1,null,w,q);b.push(z)}}q=[];t=[];A=!1;for(C=d.length+r;t.length<C;){for(w=h(g,"IAEX",e);w--;)t.push(A);
A=!A}e=0;for(g=d.length;e<g;e++)t[e]&&q.push(d[e]);for(d=0;d<r;e++,d++)t[e]&&q.push(b[d]);k[c]=q},onImmediateTextRegion:function(b,c,d,e,g){for(var h=b.info,q=this.symbols,l=[],k=0,m=c.length;k<m;k++)l=l.concat(q[c[k]]);c=a(l.length);d=new f(d,e,g);b=p(b.huffman,b.refinement,h.width,h.height,b.defaultPixelValue,b.numberOfSymbolInstances,b.stripSize,l,c,b.transposed,b.dsOffset,b.referenceCorner,b.combinationOperator,void 0,b.refinementTemplate,b.refinementAt,d);this.drawBitmap(h,b)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,
arguments)}};t.prototype={parseChunks:function(a){for(var c=new q,e=0,g=a.length;e<g;e++){for(var f=a[e],h={},l=f.data,k=f.end,m=[],u=f.start;u<k;){f=l;var p=u;u={};u.number=d(f,p);var t=f[p+4];var w=t&63;C[w]||n("JBIG2 error: invalid segment type: "+w);u.type=w;u.typeName=C[w];u.deferredNonRetain=!!(t&128);t=!!(t&64);var v=f[p+5],x=v>>5&7;var y=[v&31];p+=6;if(7===v)for(x=d(f,p-1)&536870911,p+=3,v=x+7>>3,y[0]=f[p++];0<--v;)y.push(f[p++]);else 5!==v&&6!==v||n("JBIG2 error: invalid referred-to flags");
u.retainBits=y;v=256>=u.number?1:65536>=u.number?2:4;var z=[];for(y=0;y<x;y++){var I=1===v?f[p]:2===v?b(f,p):d(f,p);z.push(I);p+=v}u.referredTo=z;t?(u.pageAssociation=d(f,p),p+=4):u.pageAssociation=f[p++];u.length=d(f,p);p+=4;if(4294967295===u.length)if(38===w){t=r(f,p);x=!!(f[p+17]&1);w=new Uint8Array(6);x||(w[0]=255,w[1]=172);w[2]=t.height>>>24&255;w[3]=t.height>>16&255;w[4]=t.height>>8&255;w[5]=t.height&255;y=p;for(t=f.length;y<t;y++){for(x=0;6>x&&w[x]===f[y+x];)x++;if(6===x){u.length=y+6;break}}4294967295===
u.length&&n("JBIG2 error: segment end was not found")}else n("JBIG2 error: invalid unknown segment length");u.headerEnd=p;f=u;u=f.headerEnd;p={header:f,data:l};h.randomAccess||(p.start=u,u+=f.length,p.end=u);m.push(p);if(51===f.type)break}if(h.randomAccess)for(h=0,l=m.length;h<l;h++)m[h].start=u,u+=m[h].header.length,m[h].end=u;h=c;l=0;for(k=m.length;l<k;l++){x=void 0;t=m[l];f=h;u=t.header;p=t.data;w=t.start;t=t.end;switch(u.type){case 0:z={};x=b(p,w);z.huffman=!!(x&1);z.refinement=!!(x&2);z.huffmanDHSelector=
x>>2&3;z.huffmanDWSelector=x>>4&3;z.bitmapSizeSelector=x>>6&1;z.aggregationInstancesSelector=x>>7&1;z.bitmapCodingContextUsed=!!(x&256);z.bitmapCodingContextRetained=!!(x&512);z.template=x>>10&3;z.refinementTemplate=x>>12&1;w+=2;if(!z.huffman){v=0===z.template?4:1;y=[];for(x=0;x<v;x++)y.push({x:p[w]<<24>>24,y:p[w+1]<<24>>24}),w+=2;z.at=y}if(z.refinement&&!z.refinementTemplate){y=[];for(x=0;2>x;x++)y.push({x:p[w]<<24>>24,y:p[w+1]<<24>>24}),w+=2;z.refinementAt=y}z.numberOfExportedSymbols=d(p,w);w+=
4;z.numberOfNewSymbols=d(p,w);x=[z,u.number,u.referredTo,p,w+4,t];break;case 6:case 7:v={};v.info=r(p,w);w+=17;x=b(p,w);w+=2;v.huffman=!!(x&1);v.refinement=!!(x&2);v.stripSize=1<<(x>>2&3);v.referenceCorner=x>>4&3;v.transposed=!!(x&64);v.combinationOperator=x>>7&3;v.defaultPixelValue=x>>9&1;v.dsOffset=x<<17>>27;v.refinementTemplate=x>>15&1;v.huffman&&(x=b(p,w),w+=2,v.huffmanFS=x&3,v.huffmanDS=x>>2&3,v.huffmanDT=x>>4&3,v.huffmanRefinementDW=x>>6&3,v.huffmanRefinementDH=x>>8&3,v.huffmanRefinementDX=
x>>10&3,v.huffmanRefinementDY=x>>12&3,v.huffmanRefinementSizeSelector=!!(x&14));if(v.refinement&&!v.refinementTemplate){y=[];for(x=0;2>x;x++)y.push({x:p[w]<<24>>24,y:p[w+1]<<24>>24}),w+=2;v.refinementAt=y}v.numberOfSymbolInstances=d(p,w);w+=4;v.huffman&&n("JBIG2 error: huffman is not supported");x=[v,u.referredTo,p,w,t];break;case 38:case 39:z={};z.info=r(p,w);w+=17;x=p[w++];z.mmr=!!(x&1);z.template=x>>1&3;z.prediction=!!(x&8);if(!z.mmr){v=0===z.template?4:1;y=[];for(x=0;x<v;x++)y.push({x:p[w]<<24>>
24,y:p[w+1]<<24>>24}),w+=2;z.at=y}x=[z,p,w,t];break;case 48:t={width:d(p,w),height:d(p,w+4),resolutionX:d(p,w+8),resolutionY:d(p,w+12)};4294967295===t.height&&delete t.height;x=p[w+16];b(p,w+17);t.lossless=!!(x&1);t.refinement=!!(x&2);t.defaultPixelValue=x>>2&1;t.combinationOperator=x>>3&3;t.requiresBuffer=!!(x&32);t.combinationOperatorOverride=!!(x&64);x=[t];break;case 49:break;case 50:break;case 51:break;case 62:break;default:n("JBIG2 error: segment type "+u.typeName+"("+u.type+") is not implemented")}u=
"on"+u.typeName;u in f&&f[u].apply(f,x)}}return c}};return t}(),n=function(){console.error.apply(console,arguments);throw Error("PDFJS error: "+arguments[0]);},l=function(){console.warn.apply(console,arguments)},v=function(){console.info.apply(console,arguments)};k.prototype.parse=function(a){var b=0,c=a.length;151===a[b]&&74===a[b+1]&&66===a[b+2]&&50===a[b+3]&&13===a[b+4]&&10===a[b+5]&&26===a[b+6]&&10===a[b+7]||n("JBIG2 error: invalid header");b+=8;a[b++]&2||(d(a,b),b+=4);a=this.parseChunks([{data:a,
start:b,end:c}]);b=a.currentPageInfo.width;c=a.currentPageInfo.height;var e=a.buffer;a=new Uint8Array(b*c);for(var g=0,f=0,h=0;h<c;h++)for(var l=0,k,q=0;q<b;q++)l||(l=128,k=e[f++]),a[g++]=k&l?0:255,l>>=1;this.width=b;this.height=c;this.data=a};c.JpegImage=h;c.JpxImage=f;c.Jbig2Image=k})(e||(e={}));n.exports={JpegImage:f,JpegDecoder:e.JpegImage,JpxDecoder:e.JpxImage,Jbig2Decoder:e.Jbig2Image}},function(n,f,k){k.d(f,"a",function(){return e});var g=function(){function c(a,b){for(var c=0;c<b.length;c++){var e=
b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),e=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");}g(c,null,[{key:"stringify",value:function(a){return"ndstore:volume:"+a.baseUrls[0]+"/"+a.key+"/"+(a.channel+"/"+a.resolution+"/"+a.encoding)}}]);return c}();e.RPC_ID="ndstore/VolumeChunkSource"},function(n,f,k){f.a=
function(a){if(147!==a[0]||78!==a[1]||85!==a[2]||77!==a[3]||80!==a[4]||89!==a[5])throw Error("Data does not match npy format.");var b=a[6],d=a[7];if(1!==b||0!==d)throw Error("Unsupported npy version "+b+"."+d);b=(new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint16(8,!0);d=(new TextDecoder("utf-8")).decode(a.subarray(10,b+10));b+=10;try{var g=Object(e.b)(d)}catch(w){throw Error("Failed to parse npy header: "+w);}var f=g.descr;d=g.shape;var h=1;if(!Array.isArray(d))throw Error("Invalid shape ${JSON.stringify(shape)}");
for(var k=$jscomp.makeIterator(d),n=k.next();!n.done;n=k.next()){n=n.value;if("number"!==typeof n)throw Error("Invalid shape ${JSON.stringify(shape)}");h*=n}k=c.get(f);if(void 0===k)throw Error("Unsupported numpy data type "+JSON.stringify(f));f=k.arrayConstructor;h*=k.javascriptElementsPerArrayElement;if(f.BYTES_PER_ELEMENT*h+b!==a.byteLength)throw Error("Expected length does not match length of data");a=new f(a.buffer,a.byteOffset+b,h);k.fixEndianness(a);return new m(a,d,k,!0===g.fortran_order)};
n=k(7);var g=k(9),e=k(5),c=new Map;c.set("|u1",{arrayConstructor:Uint8Array,fixEndianness:function(){},javascriptElementsPerArrayElement:1,elementBytes:1,dataType:n.b.UINT8});c.set("|i1",{arrayConstructor:Uint8Array,fixEndianness:function(){},javascriptElementsPerArrayElement:1,elementBytes:1,dataType:n.b.UINT8});k={};f=$jscomp.makeIterator([["<",g.b.LITTLE],[">",g.b.BIG]]);for(var a=f.next();!a.done;k={endianness:k.endianness},a=f.next()){var b=$jscomp.makeIterator(a.value);a=b.next().value;k.endianness=
b.next().value;b=$jscomp.makeIterator(["u","i"]);for(var d=b.next();!d.done;d=b.next())d=d.value,c.set(""+a+d+"2",{arrayConstructor:Uint16Array,elementBytes:2,fixEndianness:function(a){return function(b){Object(g.c)(b,a.endianness)}}(k),javascriptElementsPerArrayElement:1,dataType:n.b.UINT16}),c.set(""+a+d+"4",{arrayConstructor:Uint32Array,elementBytes:4,fixEndianness:function(a){return function(b){Object(g.d)(b,a.endianness)}}(k),javascriptElementsPerArrayElement:1,dataType:n.b.UINT32}),c.set(""+
a+d+"8",{arrayConstructor:Uint32Array,elementBytes:8,fixEndianness:function(a){return function(b){Object(g.d)(b,a.endianness)}}(k),javascriptElementsPerArrayElement:2,dataType:n.b.UINT64});c.set(a+"f4",{arrayConstructor:Float32Array,elementBytes:4,fixEndianness:function(a){return function(b){Object(g.d)(b,a.endianness)}}(k),javascriptElementsPerArrayElement:1,dataType:n.b.FLOAT32})}var m=function t(a,b,c,d){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.data=
a;this.shape=b;this.dataType=c;this.fortranOrder=d}},function(n,f,k){function g(e){if(!(this instanceof g))return new g(e);e=this.options=a.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&16>e.windowBits&&(e.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new m;this.strm.avail_out=0;var f=c.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,
e.strategy);if(0!==f)throw Error(d[f]);e.header&&c.deflateSetHeader(this.strm,e.header);if(e.dictionary){e="string"===typeof e.dictionary?b.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;f=c.deflateSetDictionary(this.strm,e);if(0!==f)throw Error(d[f]);this._dict_set=!0}}function e(a,b){b=new g(b);b.push(a,!0);if(b.err)throw b.msg||d[b.err];return b.result}var c=k(84),a=k(4),b=k(44),d=k(26),m=k(45),h=Object.prototype.toString;g.prototype.push=
function(d,e){var g=this.strm,f=this.options.chunkSize;if(this.ended)return!1;e=e===~~e?e:!0===e?4:0;"string"===typeof d?g.input=b.string2buf(d):"[object ArrayBuffer]"===h.call(d)?g.input=new Uint8Array(d):g.input=d;g.next_in=0;g.avail_in=g.input.length;do{0===g.avail_out&&(g.output=new a.Buf8(f),g.next_out=0,g.avail_out=f);d=c.deflate(g,e);if(1!==d&&0!==d)return this.onEnd(d),this.ended=!0,!1;if(0===g.avail_out||0===g.avail_in&&(4===e||2===e))if("string"===this.options.to)this.onData(b.buf2binstring(a.shrinkBuf(g.output,
g.next_out)));else this.onData(a.shrinkBuf(g.output,g.next_out))}while((0<g.avail_in||0===g.avail_out)&&1!==d);if(4===e)return d=c.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,0===d;2===e&&(this.onEnd(0),g.avail_out=0);return!0};g.prototype.onData=function(a){this.chunks.push(a)};g.prototype.onEnd=function(b){0===b&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};f.Deflate=g;f.deflate=e;f.deflateRaw=
function(a,b){b=b||{};b.raw=!0;return e(a,b)};f.gzip=function(a,b){b=b||{};b.gzip=!0;return e(a,b)}},function(n,f,k){function g(a,b){a.msg=y[b];return b}function e(a){for(var b=a.length;0<=--b;)a[b]=0}function c(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out);0!==c&&(G.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function a(a,b){z._tr_flush_block(a,0<=a.block_start?
a.block_start:-1,a.strstart-a.block_start,b);a.block_start=a.strstart;c(a.strm)}function b(a,b){a.pending_buf[a.pending++]=b}function d(a,b){a.pending_buf[a.pending++]=b>>>8&255;a.pending_buf[a.pending++]=b&255}function m(a,b){var c=a.max_chain_length,d=a.strstart,e=a.prev_length,g=a.nice_match,f=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,h=a.window,q=a.w_mask,l=a.prev,k=a.strstart+258,u=h[d+e-1],m=h[d+e];a.prev_length>=a.good_match&&(c>>=2);g>a.lookahead&&(g=a.lookahead);do{var p=b;if(h[p+
e]===m&&h[p+e-1]===u&&h[p]===h[d]&&h[++p]===h[d+1]){d+=2;for(p++;h[++d]===h[++p]&&h[++d]===h[++p]&&h[++d]===h[++p]&&h[++d]===h[++p]&&h[++d]===h[++p]&&h[++d]===h[++p]&&h[++d]===h[++p]&&h[++d]===h[++p]&&d<k;);p=258-(k-d);d=k-258;if(p>e){a.match_start=b;e=p;if(p>=g)break;u=h[d+e-1];m=h[d+e]}}}while((b=l[b&q])>f&&0!==--c);return e<=a.lookahead?e:a.lookahead}function h(a){var b=a.w_size,c;do{var d=a.window_size-a.lookahead-a.strstart;if(a.strstart>=b+(b-262)){G.arraySet(a.window,a.window,b,b,0);a.match_start-=
b;a.strstart-=b;a.block_start-=b;var e=c=a.hash_size;do{var g=a.head[--e];a.head[e]=g>=b?g-b:0}while(--c);e=c=b;do g=a.prev[--e],a.prev[e]=g>=b?g-b:0;while(--c);d+=b}if(0===a.strm.avail_in)break;e=a.strm;c=a.window;g=a.strstart+a.lookahead;var f=e.avail_in;f>d&&(f=d);0===f?c=0:(e.avail_in-=f,G.arraySet(c,e.input,e.next_in,f,g),1===e.state.wrap?e.adler=F(e.adler,c,f,g):2===e.state.wrap&&(e.adler=u(e.adler,c,f,g)),e.next_in+=f,e.total_in+=f,c=f);a.lookahead+=c;if(3<=a.lookahead+a.insert)for(d=a.strstart-
a.insert,a.ins_h=a.window[d],a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[d+3-1])&a.hash_mask,a.prev[d&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=d,d++,a.insert--,3>a.lookahead+a.insert););}while(262>a.lookahead&&0!==a.strm.avail_in)}function t(b,c){for(var d;;){if(262>b.lookahead){h(b);if(262>b.lookahead&&0===c)return 1;if(0===b.lookahead)break}d=0;3<=b.lookahead&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,
d=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);0!==d&&b.strstart-d<=b.w_size-262&&(b.match_length=m(b,d));if(3<=b.match_length)if(d=z._tr_tally(b,b.strstart-b.match_start,b.match_length-3),b.lookahead-=b.match_length,b.match_length<=b.max_lazy_match&&3<=b.lookahead){b.match_length--;do b.strstart++,b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart;while(0!==--b.match_length);b.strstart++}else b.strstart+=
b.match_length,b.match_length=0,b.ins_h=b.window[b.strstart],b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+1])&b.hash_mask;else d=z._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=2>b.strstart?b.strstart:2;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function r(b,c){for(var d,e;;){if(262>b.lookahead){h(b);if(262>b.lookahead&&0===c)return 1;if(0===b.lookahead)break}d=0;3<=b.lookahead&&
(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,d=b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);b.prev_length=b.match_length;b.prev_match=b.match_start;b.match_length=2;0!==d&&b.prev_length<b.max_lazy_match&&b.strstart-d<=b.w_size-262&&(b.match_length=m(b,d),5>=b.match_length&&(1===b.strategy||3===b.match_length&&4096<b.strstart-b.match_start)&&(b.match_length=2));if(3<=b.prev_length&&b.match_length<=b.prev_length){e=b.strstart+b.lookahead-3;d=z._tr_tally(b,
b.strstart-1-b.prev_match,b.prev_length-3);b.lookahead-=b.prev_length-1;b.prev_length-=2;do++b.strstart<=e&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[b.strstart+3-1])&b.hash_mask,b.prev[b.strstart&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=b.strstart);while(0!==--b.prev_length);b.match_available=0;b.match_length=2;b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}else if(b.match_available){if((d=z._tr_tally(b,0,b.window[b.strstart-1]))&&a(b,!1),b.strstart++,b.lookahead--,0===b.strm.avail_out)return 1}else b.match_available=
1,b.strstart++,b.lookahead--}b.match_available&&(z._tr_tally(b,0,b.window[b.strstart-1]),b.match_available=0);b.insert=2>b.strstart?b.strstart:2;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function p(b,c){for(var d,e,g,f=b.window;;){if(258>=b.lookahead){h(b);if(258>=b.lookahead&&0===c)return 1;if(0===b.lookahead)break}b.match_length=0;if(3<=b.lookahead&&0<b.strstart&&(e=b.strstart-1,d=f[e],d===f[++e]&&d===f[++e]&&d===f[++e])){for(g=b.strstart+258;d===
f[++e]&&d===f[++e]&&d===f[++e]&&d===f[++e]&&d===f[++e]&&d===f[++e]&&d===f[++e]&&d===f[++e]&&e<g;);b.match_length=258-(g-e);b.match_length>b.lookahead&&(b.match_length=b.lookahead)}3<=b.match_length?(d=z._tr_tally(b,1,b.match_length-3),b.lookahead-=b.match_length,b.strstart+=b.match_length,b.match_length=0):(d=z._tr_tally(b,0,b.window[b.strstart]),b.lookahead--,b.strstart++);if(d&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=0;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),
0===b.strm.avail_out)?1:2}function x(b,c){for(var d;;){if(0===b.lookahead&&(h(b),0===b.lookahead)){if(0===c)return 1;break}b.match_length=0;d=z._tr_tally(b,0,b.window[b.strstart]);b.lookahead--;b.strstart++;if(d&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=0;return 4===c?(a(b,!0),0===b.strm.avail_out?3:4):b.last_lit&&(a(b,!1),0===b.strm.avail_out)?1:2}function l(a,b,c,d,e){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=d;this.func=e}function v(){this.strm=null;this.status=
0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=
this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new G.Buf16(1146);this.dyn_dtree=new G.Buf16(122);this.bl_tree=new G.Buf16(78);e(this.dyn_ltree);e(this.dyn_dtree);e(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new G.Buf16(16);this.heap=new G.Buf16(573);e(this.heap);this.heap_max=this.heap_len=0;this.depth=new G.Buf16(573);e(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=
this.l_buf=0}function H(a){if(!a||!a.state)return g(a,-2);a.total_in=a.total_out=0;a.data_type=2;var b=a.state;b.pending=0;b.pending_out=0;0>b.wrap&&(b.wrap=-b.wrap);b.status=b.wrap?42:113;a.adler=2===b.wrap?0:1;b.last_flush=0;z._tr_init(b);return 0}function w(a){var b=H(a);0===b&&(a=a.state,a.window_size=2*a.w_size,e(a.head),a.max_lazy_match=J[a.level].max_lazy,a.good_match=J[a.level].good_length,a.nice_match=J[a.level].nice_length,a.max_chain_length=J[a.level].max_chain,a.strstart=0,a.block_start=
0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return b}function D(a,b,c,d,e,f){if(!a)return-2;var h=1;-1===b&&(b=6);0>d?(h=0,d=-d):15<d&&(h=2,d-=16);if(1>e||9<e||8!==c||8>d||15<d||0>b||9<b||0>f||4<f)return g(a,-2);8===d&&(d=9);var l=new v;a.state=l;l.strm=a;l.wrap=h;l.gzhead=null;l.w_bits=d;l.w_size=1<<l.w_bits;l.w_mask=l.w_size-1;l.hash_bits=e+7;l.hash_size=1<<l.hash_bits;l.hash_mask=l.hash_size-1;l.hash_shift=~~((l.hash_bits+3-1)/3);l.window=new G.Buf8(2*
l.w_size);l.head=new G.Buf16(l.hash_size);l.prev=new G.Buf16(l.w_size);l.lit_bufsize=1<<e+6;l.pending_buf_size=4*l.lit_bufsize;l.pending_buf=new G.Buf8(l.pending_buf_size);l.d_buf=1*l.lit_bufsize;l.l_buf=3*l.lit_bufsize;l.level=b;l.strategy=f;l.method=c;return w(a)}var G=k(4),z=k(85),F=k(42),u=k(43),y=k(26);var J=[new l(0,0,0,0,function(b,c){var d=65535;for(d>b.pending_buf_size-5&&(d=b.pending_buf_size-5);;){if(1>=b.lookahead){h(b);if(0===b.lookahead&&0===c)return 1;if(0===b.lookahead)break}b.strstart+=
b.lookahead;b.lookahead=0;var e=b.block_start+d;if(0===b.strstart||b.strstart>=e)if(b.lookahead=b.strstart-e,b.strstart=e,a(b,!1),0===b.strm.avail_out)return 1;if(b.strstart-b.block_start>=b.w_size-262&&(a(b,!1),0===b.strm.avail_out))return 1}b.insert=0;if(4===c)return a(b,!0),0===b.strm.avail_out?3:4;b.strstart>b.block_start&&a(b,!1);return 1}),new l(4,4,8,4,t),new l(4,5,16,8,t),new l(4,6,32,32,t),new l(4,4,16,16,r),new l(8,16,32,32,r),new l(8,16,128,128,r),new l(8,32,128,256,r),new l(32,128,258,
1024,r),new l(32,258,258,4096,r)];f.deflateInit=function(a,b){return D(a,b,8,15,8,0)};f.deflateInit2=D;f.deflateReset=w;f.deflateResetKeep=H;f.deflateSetHeader=function(a,b){if(!a||!a.state||2!==a.state.wrap)return-2;a.state.gzhead=b;return 0};f.deflate=function(a,f){if(!a||!a.state||5<f||0>f)return a?g(a,-2):-2;var h=a.state;if(!a.output||!a.input&&0!==a.avail_in||666===h.status&&4!==f)return g(a,0===a.avail_out?-5:-2);h.strm=a;var l=h.last_flush;h.last_flush=f;if(42===h.status)if(2===h.wrap)a.adler=
0,b(h,31),b(h,139),b(h,8),h.gzhead?(b(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),b(h,h.gzhead.time&255),b(h,h.gzhead.time>>8&255),b(h,h.gzhead.time>>16&255),b(h,h.gzhead.time>>24&255),b(h,9===h.level?2:2<=h.strategy||2>h.level?4:0),b(h,h.gzhead.os&255),h.gzhead.extra&&h.gzhead.extra.length&&(b(h,h.gzhead.extra.length&255),b(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=u(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=
69):(b(h,0),b(h,0),b(h,0),b(h,0),b(h,0),b(h,9===h.level?2:2<=h.strategy||2>h.level?4:0),b(h,3),h.status=113);else{var k=8+(h.w_bits-8<<4)<<8;k|=(2<=h.strategy||2>h.level?0:6>h.level?1:6===h.level?2:3)<<6;0!==h.strstart&&(k|=32);h.status=113;d(h,k+(31-k%31));0!==h.strstart&&(d(h,a.adler>>>16),d(h,a.adler&65535));a.adler=1}if(69===h.status)if(h.gzhead.extra){for(k=h.pending;h.gzindex<(h.gzhead.extra.length&65535)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>k&&(a.adler=u(a.adler,h.pending_buf,
h.pending-k,k)),c(a),k=h.pending,h.pending!==h.pending_buf_size));)b(h,h.gzhead.extra[h.gzindex]&255),h.gzindex++;h.gzhead.hcrc&&h.pending>k&&(a.adler=u(a.adler,h.pending_buf,h.pending-k,k));h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=73)}else h.status=73;if(73===h.status)if(h.gzhead.name){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=u(a.adler,h.pending_buf,h.pending-k,k)),c(a),k=h.pending,h.pending===h.pending_buf_size)){var m=1;break}m=h.gzindex<
h.gzhead.name.length?h.gzhead.name.charCodeAt(h.gzindex++)&255:0;b(h,m)}while(0!==m);h.gzhead.hcrc&&h.pending>k&&(a.adler=u(a.adler,h.pending_buf,h.pending-k,k));0===m&&(h.gzindex=0,h.status=91)}else h.status=91;if(91===h.status)if(h.gzhead.comment){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=u(a.adler,h.pending_buf,h.pending-k,k)),c(a),k=h.pending,h.pending===h.pending_buf_size)){m=1;break}m=h.gzindex<h.gzhead.comment.length?h.gzhead.comment.charCodeAt(h.gzindex++)&
255:0;b(h,m)}while(0!==m);h.gzhead.hcrc&&h.pending>k&&(a.adler=u(a.adler,h.pending_buf,h.pending-k,k));0===m&&(h.status=103)}else h.status=103;103===h.status&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&c(a),h.pending+2<=h.pending_buf_size&&(b(h,a.adler&255),b(h,a.adler>>8&255),a.adler=0,h.status=113)):h.status=113);if(0!==h.pending){if(c(a),0===a.avail_out)return h.last_flush=-1,0}else if(0===a.avail_in&&(f<<1)-(4<f?9:0)<=(l<<1)-(4<l?9:0)&&4!==f)return g(a,-5);if(666===h.status&&0!==a.avail_in)return g(a,
-5);if(0!==a.avail_in||0!==h.lookahead||0!==f&&666!==h.status){l=2===h.strategy?x(h,f):3===h.strategy?p(h,f):J[h.level].func(h,f);if(3===l||4===l)h.status=666;if(1===l||3===l)return 0===a.avail_out&&(h.last_flush=-1),0;if(2===l&&(1===f?z._tr_align(h):5!==f&&(z._tr_stored_block(h,0,0,!1),3===f&&(e(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),c(a),0===a.avail_out))return h.last_flush=-1,0}if(4!==f)return 0;if(0>=h.wrap)return 1;2===h.wrap?(b(h,a.adler&255),b(h,a.adler>>8&255),
b(h,a.adler>>16&255),b(h,a.adler>>24&255),b(h,a.total_in&255),b(h,a.total_in>>8&255),b(h,a.total_in>>16&255),b(h,a.total_in>>24&255)):(d(h,a.adler>>>16),d(h,a.adler&65535));c(a);0<h.wrap&&(h.wrap=-h.wrap);return 0!==h.pending?0:1};f.deflateEnd=function(a){if(!a||!a.state)return-2;var b=a.state.status;if(42!==b&&69!==b&&73!==b&&91!==b&&103!==b&&113!==b&&666!==b)return g(a,-2);a.state=null;return 113===b?g(a,-3):0};f.deflateSetDictionary=function(a,b){var c=b.length;if(!a||!a.state)return-2;var d=a.state;
var g=d.wrap;if(2===g||1===g&&42!==d.status||d.lookahead)return-2;1===g&&(a.adler=F(a.adler,b,c,0));d.wrap=0;if(c>=d.w_size){0===g&&(e(d.head),d.strstart=0,d.block_start=0,d.insert=0);var f=new G.Buf8(d.w_size);G.arraySet(f,b,c-d.w_size,d.w_size,0);b=f;c=d.w_size}f=a.avail_in;var l=a.next_in;var k=a.input;a.avail_in=c;a.next_in=0;a.input=b;for(h(d);3<=d.lookahead;){b=d.strstart;c=d.lookahead-2;do d.ins_h=(d.ins_h<<d.hash_shift^d.window[b+3-1])&d.hash_mask,d.prev[b&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=
b,b++;while(--c);d.strstart=b;d.lookahead=2;h(d)}d.strstart+=d.lookahead;d.block_start=d.strstart;d.insert=d.lookahead;d.lookahead=0;d.match_length=d.prev_length=2;d.match_available=0;a.next_in=l;a.input=k;a.avail_in=f;d.wrap=g;return 0};f.deflateInfo="pako deflate (from Nodeca project)"},function(n,f,k){function g(a){for(var b=a.length;0<=--b;)a[b]=0}function e(a,b,c,d,e){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=d;this.max_length=e;this.has_stree=a&&a.length}function c(a,
b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b}function a(a,b){a.pending_buf[a.pending++]=b&255;a.pending_buf[a.pending++]=b>>>8&255}function b(b,c,d){b.bi_valid>16-d?(b.bi_buf|=c<<b.bi_valid&65535,a(b,b.bi_buf),b.bi_buf=c>>16-b.bi_valid,b.bi_valid+=d-16):(b.bi_buf|=c<<b.bi_valid&65535,b.bi_valid+=d)}function d(a,c,d){b(a,d[2*c],d[2*c+1])}function m(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(0<--b);return c>>>1}function h(a,b,c){var d=Array(16),e=0,h;for(h=1;15>=h;h++)d[h]=e=e+c[h-1]<<1;for(c=
0;c<=b;c++)e=a[2*c+1],0!==e&&(a[2*c]=m(d[e]++,e))}function t(a){var b;for(b=0;286>b;b++)a.dyn_ltree[2*b]=0;for(b=0;30>b;b++)a.dyn_dtree[2*b]=0;for(b=0;19>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function r(b){8<b.bi_valid?a(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf);b.bi_buf=0;b.bi_valid=0}function p(a,b,c,d){var e=2*b,h=2*c;return a[e]<a[h]||a[e]===a[h]&&d[b]<=d[c]}function x(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len;){e<
a.heap_len&&p(b,a.heap[e+1],a.heap[e],a.depth)&&e++;if(p(b,d,a.heap[e],a.depth))break;a.heap[c]=a.heap[e];c=e;e<<=1}a.heap[c]=d}function l(a,c,e){var h=0;if(0!==a.last_lit){do{var g=a.pending_buf[a.d_buf+2*h]<<8|a.pending_buf[a.d_buf+2*h+1];var f=a.pending_buf[a.l_buf+h];h++;if(0===g)d(a,f,c);else{var l=L[f];d(a,l+256+1,c);var k=F[l];0!==k&&(f-=B[l],b(a,f,k));g--;l=256>g?C[g]:C[256+(g>>>7)];d(a,l,e);k=u[l];0!==k&&(g-=E[l],b(a,g,k))}}while(h<a.last_lit)}d(a,256,c)}function v(a,b){var c=b.dyn_tree,
d=b.stat_desc.static_tree,e=b.stat_desc.has_stree,g=b.stat_desc.elems,f,l=-1;a.heap_len=0;a.heap_max=573;for(f=0;f<g;f++)0!==c[2*f]?(a.heap[++a.heap_len]=l=f,a.depth[f]=0):c[2*f+1]=0;for(;2>a.heap_len;){var k=a.heap[++a.heap_len]=2>l?++l:0;c[2*k]=1;a.depth[k]=0;a.opt_len--;e&&(a.static_len-=d[2*k+1])}b.max_code=l;for(f=a.heap_len>>1;1<=f;f--)x(a,c,f);k=g;do f=a.heap[1],a.heap[1]=a.heap[a.heap_len--],x(a,c,1),d=a.heap[1],a.heap[--a.heap_max]=f,a.heap[--a.heap_max]=d,c[2*k]=c[2*f]+c[2*d],a.depth[k]=
(a.depth[f]>=a.depth[d]?a.depth[f]:a.depth[d])+1,c[2*f+1]=c[2*d+1]=k,a.heap[1]=k++,x(a,c,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];f=b.dyn_tree;k=b.max_code;d=b.stat_desc.static_tree;e=b.stat_desc.has_stree;g=b.stat_desc.extra_bits;var u=b.stat_desc.extra_base,m=b.stat_desc.max_length,p,n=0;for(p=0;15>=p;p++)a.bl_count[p]=0;f[2*a.heap[a.heap_max]+1]=0;for(b=a.heap_max+1;573>b;b++){var q=a.heap[b];p=f[2*f[2*q+1]+1]+1;p>m&&(p=m,n++);f[2*q+1]=p;if(!(q>k)){a.bl_count[p]++;var r=0;q>=u&&(r=
g[q-u]);var t=f[2*q];a.opt_len+=t*(p+r);e&&(a.static_len+=t*(d[2*q+1]+r))}}if(0!==n){do{for(p=m-1;0===a.bl_count[p];)p--;a.bl_count[p]--;a.bl_count[p+1]+=2;a.bl_count[m]--;n-=2}while(0<n);for(p=m;0!==p;p--)for(q=a.bl_count[p];0!==q;)d=a.heap[--b],d>k||(f[2*d+1]!==p&&(a.opt_len+=(p-f[2*d+1])*f[2*d],f[2*d+1]=p),q--)}h(c,l,a.bl_count)}function H(a,b,c){var d,e=-1,h=b[1],g=0,f=7,l=4;0===h&&(f=138,l=3);b[2*(c+1)+1]=65535;for(d=0;d<=c;d++){var k=h;h=b[2*(d+1)+1];++g<f&&k===h||(g<l?a.bl_tree[2*k]+=g:0!==
k?(k!==e&&a.bl_tree[2*k]++,a.bl_tree[32]++):10>=g?a.bl_tree[34]++:a.bl_tree[36]++,g=0,e=k,0===h?(f=138,l=3):k===h?(f=6,l=3):(f=7,l=4))}}function w(a,c,e){var h,g=-1,f=c[1],l=0,k=7,u=4;0===f&&(k=138,u=3);for(h=0;h<=e;h++){var m=f;f=c[2*(h+1)+1];if(!(++l<k&&m===f)){if(l<u){do d(a,m,a.bl_tree);while(0!==--l)}else 0!==m?(m!==g&&(d(a,m,a.bl_tree),l--),d(a,16,a.bl_tree),b(a,l-3,2)):10>=l?(d(a,17,a.bl_tree),b(a,l-3,3)):(d(a,18,a.bl_tree),b(a,l-11,7));l=0;g=m;0===f?(k=138,u=3):m===f?(k=6,u=3):(k=7,u=4)}}}
function D(a){var b=4093624447,c;for(c=0;31>=c;c++,b>>>=1)if(b&1&&0!==a.dyn_ltree[2*c])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(c=32;256>c;c++)if(0!==a.dyn_ltree[2*c])return 1;return 0}function G(c,d,e,h){b(c,0+(h?1:0),3);r(c);a(c,e);a(c,~e);z.arraySet(c.pending_buf,c.window,d,e,c.pending);c.pending+=e}var z=k(4),F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],y=[0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=Array(576);g(q);var I=Array(60);g(I);var C=Array(512);g(C);var L=Array(256);g(L);var B=Array(29);g(B);var E=Array(30);g(E);var O,N,Q,K=!1;f._tr_init=function(a){if(!K){var b,d,g,f=Array(16);for(g=d=0;28>g;g++)for(B[g]=d,b=0;b<1<<F[g];b++)L[d++]=g;L[d-1]=g;for(g=d=0;16>g;g++)for(E[g]=d,b=0;b<1<<u[g];b++)C[d++]=g;for(d>>=7;30>g;g++)for(E[g]=d<<7,b=0;b<1<<u[g]-7;b++)C[256+d++]=g;for(b=0;15>=b;b++)f[b]=0;for(b=0;143>=
b;)q[2*b+1]=8,b++,f[8]++;for(;255>=b;)q[2*b+1]=9,b++,f[9]++;for(;279>=b;)q[2*b+1]=7,b++,f[7]++;for(;287>=b;)q[2*b+1]=8,b++,f[8]++;h(q,287,f);for(b=0;30>b;b++)I[2*b+1]=5,I[2*b]=m(b,5);O=new e(q,F,257,286,15);N=new e(I,u,0,30,15);Q=new e([],y,0,19,7);K=!0}a.l_desc=new c(a.dyn_ltree,O);a.d_desc=new c(a.dyn_dtree,N);a.bl_desc=new c(a.bl_tree,Q);a.bi_buf=0;a.bi_valid=0;t(a)};f._tr_stored_block=G;f._tr_flush_block=function(a,c,d,e){var h=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=D(a));v(a,
a.l_desc);v(a,a.d_desc);H(a,a.dyn_ltree,a.l_desc.max_code);H(a,a.dyn_dtree,a.d_desc.max_code);v(a,a.bl_desc);for(h=18;3<=h&&0===a.bl_tree[2*J[h]+1];h--);a.opt_len+=3*(h+1)+14;var g=a.opt_len+3+7>>>3;var f=a.static_len+3+7>>>3;f<=g&&(g=f)}else g=f=d+5;if(d+4<=g&&-1!==c)G(a,c,d,e);else if(4===a.strategy||f===g)b(a,2+(e?1:0),3),l(a,q,I);else{b(a,4+(e?1:0),3);c=a.l_desc.max_code+1;d=a.d_desc.max_code+1;h+=1;b(a,c-257,5);b(a,d-1,5);b(a,h-4,4);for(g=0;g<h;g++)b(a,a.bl_tree[2*J[g]+1],3);w(a,a.dyn_ltree,
c-1);w(a,a.dyn_dtree,d-1);l(a,a.dyn_ltree,a.dyn_dtree)}t(a);e&&r(a)};f._tr_tally=function(a,b,c){a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(L[c]+256+1)]++,a.dyn_dtree[2*(256>b?C[b]:C[256+(b>>>7)])]++);return a.last_lit===a.lit_bufsize-1};f._tr_align=function(c){b(c,2,3);d(c,256,q);16===c.bi_valid?(a(c,c.bi_buf),c.bi_buf=0,c.bi_valid=0):8<=c.bi_valid&&
(c.pending_buf[c.pending++]=c.bi_buf&255,c.bi_buf>>=8,c.bi_valid-=8)}},function(n,f,k){function g(b){if(!(this instanceof g))return new g(b);var e=this.options=a.assign({chunkSize:16384,windowBits:0,to:""},b||{});e.raw&&0<=e.windowBits&&16>e.windowBits&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15));!(0<=e.windowBits&&16>e.windowBits)||b&&b.windowBits||(e.windowBits+=32);15<e.windowBits&&48>e.windowBits&&0===(e.windowBits&15)&&(e.windowBits|=15);this.err=0;this.msg="";this.ended=
!1;this.chunks=[];this.strm=new h;this.strm.avail_out=0;b=c.inflateInit2(this.strm,e.windowBits);if(b!==d.Z_OK)throw Error(m[b]);this.header=new t;c.inflateGetHeader(this.strm,this.header)}function e(a,b){b=new g(b);b.push(a,!0);if(b.err)throw b.msg||m[b.err];return b.result}var c=k(87),a=k(4),b=k(44),d=k(46),m=k(26),h=k(45),t=k(90),r=Object.prototype.toString;g.prototype.push=function(e,h){var g=this.strm,f=this.options.chunkSize,k=this.options.dictionary,m=!1;if(this.ended)return!1;h=h===~~h?h:
!0===h?d.Z_FINISH:d.Z_NO_FLUSH;"string"===typeof e?g.input=b.binstring2buf(e):"[object ArrayBuffer]"===r.call(e)?g.input=new Uint8Array(e):g.input=e;g.next_in=0;g.avail_in=g.input.length;do{0===g.avail_out&&(g.output=new a.Buf8(f),g.next_out=0,g.avail_out=f);e=c.inflate(g,d.Z_NO_FLUSH);e===d.Z_NEED_DICT&&k&&(e="string"===typeof k?b.string2buf(k):"[object ArrayBuffer]"===r.call(k)?new Uint8Array(k):k,e=c.inflateSetDictionary(this.strm,e));e===d.Z_BUF_ERROR&&!0===m&&(e=d.Z_OK,m=!1);if(e!==d.Z_STREAM_END&&
e!==d.Z_OK)return this.onEnd(e),this.ended=!0,!1;if(g.next_out&&(0===g.avail_out||e===d.Z_STREAM_END||0===g.avail_in&&(h===d.Z_FINISH||h===d.Z_SYNC_FLUSH)))if("string"===this.options.to){var p=b.utf8border(g.output,g.next_out);var n=g.next_out-p;var t=b.buf2string(g.output,p);g.next_out=n;g.avail_out=f-n;n&&a.arraySet(g.output,g.output,p,n,0);this.onData(t)}else this.onData(a.shrinkBuf(g.output,g.next_out));0===g.avail_in&&0===g.avail_out&&(m=!0)}while((0<g.avail_in||0===g.avail_out)&&e!==d.Z_STREAM_END);
e===d.Z_STREAM_END&&(h=d.Z_FINISH);if(h===d.Z_FINISH)return e=c.inflateEnd(this.strm),this.onEnd(e),this.ended=!0,e===d.Z_OK;h===d.Z_SYNC_FLUSH&&(this.onEnd(d.Z_OK),g.avail_out=0);return!0};g.prototype.onData=function(a){this.chunks.push(a)};g.prototype.onEnd=function(b){b===d.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):a.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};f.Inflate=g;f.inflate=e;f.inflateRaw=function(a,b){b=b||{};b.raw=!0;return e(a,
b)};f.ungzip=e},function(n,f,k){function g(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function e(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new h.Buf16(320);this.work=
new h.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function c(a){if(!a||!a.state)return-2;var b=a.state;a.total_in=a.total_out=b.total=0;a.msg="";b.wrap&&(a.adler=b.wrap&1);b.mode=1;b.last=0;b.havedict=0;b.dmax=32768;b.head=null;b.hold=0;b.bits=0;b.lencode=b.lendyn=new h.Buf32(852);b.distcode=b.distdyn=new h.Buf32(592);b.sane=1;b.back=-1;return 0}function a(a){if(!a||!a.state)return-2;var b=a.state;b.wsize=0;b.whave=0;b.wnext=0;return c(a)}function b(b,c){if(!b||!b.state)return-2;
var d=b.state;if(0>c){var e=0;c=-c}else e=(c>>4)+1,48>c&&(c&=15);if(c&&(8>c||15<c))return-2;null!==d.window&&d.wbits!==c&&(d.window=null);d.wrap=e;d.wbits=c;return a(b)}function d(a,c){if(!a)return-2;var d=new e;a.state=d;d.window=null;c=b(a,c);0!==c&&(a.state=null);return c}function m(a,b,c,d){var e=a.state;null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new h.Buf8(e.wsize));d>=e.wsize?(h.arraySet(e.window,b,c-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(a=e.wsize-e.wnext,a>d&&
(a=d),h.arraySet(e.window,b,c-d,a,e.wnext),(d-=a)?(h.arraySet(e.window,b,c-d,d,0),e.wnext=d,e.whave=e.wsize):(e.wnext+=a,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=a)));return 0}var h=k(4),t=k(42),r=k(43),p=k(88),x=k(89),l=!0,v,H;f.inflateReset=a;f.inflateReset2=b;f.inflateResetKeep=c;f.inflateInit=function(a){return d(a,15)};f.inflateInit2=d;f.inflate=function(a,b){var c,d=new h.Buf8(4),e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;
var f=a.state;12===f.mode&&(f.mode=13);var k=a.next_out;var n=a.output;var q=a.avail_out;var w=a.next_in;var C=a.input;var D=a.avail_in;var B=f.hold;var E=f.bits;var O=D;var N=q;var Q=0;a:for(;;)switch(f.mode){case 1:if(0===f.wrap){f.mode=13;break}for(;16>E;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}if(f.wrap&2&&35615===B){f.check=0;d[0]=B&255;d[1]=B>>>8&255;f.check=r(f.check,d,2,0);E=B=0;f.mode=2;break}f.flags=0;f.head&&(f.head.done=!1);if(!(f.wrap&1)||(((B&255)<<8)+(B>>8))%31){a.msg="incorrect header check";
f.mode=30;break}if(8!==(B&15)){a.msg="unknown compression method";f.mode=30;break}B>>>=4;E-=4;var K=(B&15)+8;if(0===f.wbits)f.wbits=K;else if(K>f.wbits){a.msg="invalid window size";f.mode=30;break}f.dmax=1<<K;a.adler=f.check=1;f.mode=B&512?10:12;E=B=0;break;case 2:for(;16>E;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}f.flags=B;if(8!==(f.flags&255)){a.msg="unknown compression method";f.mode=30;break}if(f.flags&57344){a.msg="unknown header flags set";f.mode=30;break}f.head&&(f.head.text=B>>8&1);f.flags&
512&&(d[0]=B&255,d[1]=B>>>8&255,f.check=r(f.check,d,2,0));E=B=0;f.mode=3;case 3:for(;32>E;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}f.head&&(f.head.time=B);f.flags&512&&(d[0]=B&255,d[1]=B>>>8&255,d[2]=B>>>16&255,d[3]=B>>>24&255,f.check=r(f.check,d,4,0));E=B=0;f.mode=4;case 4:for(;16>E;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}f.head&&(f.head.xflags=B&255,f.head.os=B>>8);f.flags&512&&(d[0]=B&255,d[1]=B>>>8&255,f.check=r(f.check,d,2,0));E=B=0;f.mode=5;case 5:if(f.flags&1024){for(;16>E;){if(0===D)break a;
D--;B+=C[w++]<<E;E+=8}f.length=B;f.head&&(f.head.extra_len=B);f.flags&512&&(d[0]=B&255,d[1]=B>>>8&255,f.check=r(f.check,d,2,0));E=B=0}else f.head&&(f.head.extra=null);f.mode=6;case 6:if(f.flags&1024){var A=f.length;A>D&&(A=D);A&&(f.head&&(K=f.head.extra_len-f.length,f.head.extra||(f.head.extra=Array(f.head.extra_len)),h.arraySet(f.head.extra,C,w,A,K)),f.flags&512&&(f.check=r(f.check,C,A,w)),D-=A,w+=A,f.length-=A);if(f.length)break a}f.length=0;f.mode=7;case 7:if(f.flags&2048){if(0===D)break a;A=0;
do K=C[w+A++],f.head&&K&&65536>f.length&&(f.head.name+=String.fromCharCode(K));while(K&&A<D);f.flags&512&&(f.check=r(f.check,C,A,w));D-=A;w+=A;if(K)break a}else f.head&&(f.head.name=null);f.length=0;f.mode=8;case 8:if(f.flags&4096){if(0===D)break a;A=0;do K=C[w+A++],f.head&&K&&65536>f.length&&(f.head.comment+=String.fromCharCode(K));while(K&&A<D);f.flags&512&&(f.check=r(f.check,C,A,w));D-=A;w+=A;if(K)break a}else f.head&&(f.head.comment=null);f.mode=9;case 9:if(f.flags&512){for(;16>E;){if(0===D)break a;
D--;B+=C[w++]<<E;E+=8}if(B!==(f.check&65535)){a.msg="header crc mismatch";f.mode=30;break}E=B=0}f.head&&(f.head.hcrc=f.flags>>9&1,f.head.done=!0);a.adler=f.check=0;f.mode=12;break;case 10:for(;32>E;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}a.adler=f.check=g(B);E=B=0;f.mode=11;case 11:if(0===f.havedict)return a.next_out=k,a.avail_out=q,a.next_in=w,a.avail_in=D,f.hold=B,f.bits=E,2;a.adler=f.check=1;f.mode=12;case 12:if(5===b||6===b)break a;case 13:if(f.last){B>>>=E&7;E-=E&7;f.mode=27;break}for(;3>E;){if(0===
D)break a;D--;B+=C[w++]<<E;E+=8}f.last=B&1;B>>>=1;--E;switch(B&3){case 0:f.mode=14;break;case 1:K=f;if(l){v=new h.Buf32(512);H=new h.Buf32(32);for(A=0;144>A;)K.lens[A++]=8;for(;256>A;)K.lens[A++]=9;for(;280>A;)K.lens[A++]=7;for(;288>A;)K.lens[A++]=8;x(1,K.lens,0,288,v,0,K.work,{bits:9});for(A=0;32>A;)K.lens[A++]=5;x(2,K.lens,0,32,H,0,K.work,{bits:5});l=!1}K.lencode=v;K.lenbits=9;K.distcode=H;K.distbits=5;f.mode=20;if(6===b){B>>>=2;E-=2;break a}break;case 2:f.mode=17;break;case 3:a.msg="invalid block type",
f.mode=30}B>>>=2;E-=2;break;case 14:B>>>=E&7;for(E-=E&7;32>E;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}if((B&65535)!==(B>>>16^65535)){a.msg="invalid stored block lengths";f.mode=30;break}f.length=B&65535;E=B=0;f.mode=15;if(6===b)break a;case 15:f.mode=16;case 16:if(A=f.length){A>D&&(A=D);A>q&&(A=q);if(0===A)break a;h.arraySet(n,C,w,A,k);D-=A;w+=A;q-=A;k+=A;f.length-=A;break}f.mode=12;break;case 17:for(;14>E;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}f.nlen=(B&31)+257;B>>>=5;E-=5;f.ndist=(B&31)+1;B>>>=
5;E-=5;f.ncode=(B&15)+4;B>>>=4;E-=4;if(286<f.nlen||30<f.ndist){a.msg="too many length or distance symbols";f.mode=30;break}f.have=0;f.mode=18;case 18:for(;f.have<f.ncode;){for(;3>E;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}f.lens[e[f.have++]]=B&7;B>>>=3;E-=3}for(;19>f.have;)f.lens[e[f.have++]]=0;f.lencode=f.lendyn;f.lenbits=7;A={bits:f.lenbits};Q=x(0,f.lens,0,19,f.lencode,0,f.work,A);f.lenbits=A.bits;if(Q){a.msg="invalid code lengths set";f.mode=30;break}f.have=0;f.mode=19;case 19:for(;f.have<f.nlen+
f.ndist;){for(;;){var M=f.lencode[B&(1<<f.lenbits)-1];A=M>>>24;M&=65535;if(A<=E)break;if(0===D)break a;D--;B+=C[w++]<<E;E+=8}if(16>M)B>>>=A,E-=A,f.lens[f.have++]=M;else{if(16===M){for(K=A+2;E<K;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}B>>>=A;E-=A;if(0===f.have){a.msg="invalid bit length repeat";f.mode=30;break}K=f.lens[f.have-1];A=3+(B&3);B>>>=2;E-=2}else if(17===M){for(K=A+3;E<K;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}B>>>=A;E-=A;K=0;A=3+(B&7);B>>>=3;E-=3}else{for(K=A+7;E<K;){if(0===D)break a;D--;
B+=C[w++]<<E;E+=8}B>>>=A;E-=A;K=0;A=11+(B&127);B>>>=7;E-=7}if(f.have+A>f.nlen+f.ndist){a.msg="invalid bit length repeat";f.mode=30;break}for(;A--;)f.lens[f.have++]=K}}if(30===f.mode)break;if(0===f.lens[256]){a.msg="invalid code -- missing end-of-block";f.mode=30;break}f.lenbits=9;A={bits:f.lenbits};Q=x(1,f.lens,0,f.nlen,f.lencode,0,f.work,A);f.lenbits=A.bits;if(Q){a.msg="invalid literal/lengths set";f.mode=30;break}f.distbits=6;f.distcode=f.distdyn;A={bits:f.distbits};Q=x(2,f.lens,f.nlen,f.ndist,
f.distcode,0,f.work,A);f.distbits=A.bits;if(Q){a.msg="invalid distances set";f.mode=30;break}f.mode=20;if(6===b)break a;case 20:f.mode=21;case 21:if(6<=D&&258<=q){a.next_out=k;a.avail_out=q;a.next_in=w;a.avail_in=D;f.hold=B;f.bits=E;p(a,N);k=a.next_out;n=a.output;q=a.avail_out;w=a.next_in;C=a.input;D=a.avail_in;B=f.hold;E=f.bits;12===f.mode&&(f.back=-1);break}for(f.back=0;;){M=f.lencode[B&(1<<f.lenbits)-1];A=M>>>24;K=M>>>16&255;M&=65535;if(A<=E)break;if(0===D)break a;D--;B+=C[w++]<<E;E+=8}if(K&&0===
(K&240)){var R=A;var la=K;for(c=M;;){M=f.lencode[c+((B&(1<<R+la)-1)>>R)];A=M>>>24;K=M>>>16&255;M&=65535;if(R+A<=E)break;if(0===D)break a;D--;B+=C[w++]<<E;E+=8}B>>>=R;E-=R;f.back+=R}B>>>=A;E-=A;f.back+=A;f.length=M;if(0===K){f.mode=26;break}if(K&32){f.back=-1;f.mode=12;break}if(K&64){a.msg="invalid literal/length code";f.mode=30;break}f.extra=K&15;f.mode=22;case 22:if(f.extra){for(K=f.extra;E<K;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}f.length+=B&(1<<f.extra)-1;B>>>=f.extra;E-=f.extra;f.back+=f.extra}f.was=
f.length;f.mode=23;case 23:for(;;){M=f.distcode[B&(1<<f.distbits)-1];A=M>>>24;K=M>>>16&255;M&=65535;if(A<=E)break;if(0===D)break a;D--;B+=C[w++]<<E;E+=8}if(0===(K&240)){R=A;la=K;for(c=M;;){M=f.distcode[c+((B&(1<<R+la)-1)>>R)];A=M>>>24;K=M>>>16&255;M&=65535;if(R+A<=E)break;if(0===D)break a;D--;B+=C[w++]<<E;E+=8}B>>>=R;E-=R;f.back+=R}B>>>=A;E-=A;f.back+=A;if(K&64){a.msg="invalid distance code";f.mode=30;break}f.offset=M;f.extra=K&15;f.mode=24;case 24:if(f.extra){for(K=f.extra;E<K;){if(0===D)break a;
D--;B+=C[w++]<<E;E+=8}f.offset+=B&(1<<f.extra)-1;B>>>=f.extra;E-=f.extra;f.back+=f.extra}if(f.offset>f.dmax){a.msg="invalid distance too far back";f.mode=30;break}f.mode=25;case 25:if(0===q)break a;A=N-q;if(f.offset>A){A=f.offset-A;if(A>f.whave&&f.sane){a.msg="invalid distance too far back";f.mode=30;break}A>f.wnext?(A-=f.wnext,K=f.wsize-A):K=f.wnext-A;A>f.length&&(A=f.length);R=f.window}else R=n,K=k-f.offset,A=f.length;A>q&&(A=q);q-=A;f.length-=A;do n[k++]=R[K++];while(--A);0===f.length&&(f.mode=
21);break;case 26:if(0===q)break a;n[k++]=f.length;q--;f.mode=21;break;case 27:if(f.wrap){for(;32>E;){if(0===D)break a;D--;B|=C[w++]<<E;E+=8}N-=q;a.total_out+=N;f.total+=N;N&&(a.adler=f.check=f.flags?r(f.check,n,N,k-N):t(f.check,n,N,k-N));N=q;if((f.flags?B:g(B))!==f.check){a.msg="incorrect data check";f.mode=30;break}E=B=0}f.mode=28;case 28:if(f.wrap&&f.flags){for(;32>E;){if(0===D)break a;D--;B+=C[w++]<<E;E+=8}if(B!==(f.total&4294967295)){a.msg="incorrect length check";f.mode=30;break}E=B=0}f.mode=
29;case 29:Q=1;break a;case 30:Q=-3;break a;case 31:return-4;default:return-2}a.next_out=k;a.avail_out=q;a.next_in=w;a.avail_in=D;f.hold=B;f.bits=E;if((f.wsize||N!==a.avail_out&&30>f.mode&&(27>f.mode||4!==b))&&m(a,a.output,a.next_out,N-a.avail_out))return f.mode=31,-4;O-=a.avail_in;N-=a.avail_out;a.total_in+=O;a.total_out+=N;f.total+=N;f.wrap&&N&&(a.adler=f.check=f.flags?r(f.check,n,N,a.next_out-N):t(f.check,n,N,a.next_out-N));a.data_type=f.bits+(f.last?64:0)+(12===f.mode?128:0)+(20===f.mode||15===
f.mode?256:0);(0===O&&0===N||4===b)&&0===Q&&(Q=-5);return Q};f.inflateEnd=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};f.inflateGetHeader=function(a,b){if(!a||!a.state)return-2;a=a.state;if(0===(a.wrap&2))return-2;a.head=b;b.done=!1;return 0};f.inflateSetDictionary=function(a,b){var c=b.length;if(!a||!a.state)return-2;var d=a.state;if(0!==d.wrap&&11!==d.mode)return-2;if(11===d.mode){var e=t(1,b,c,0);if(e!==d.check)return-3}if(m(a,b,c,c))return d.mode=
31,-4;d.havedict=1;return 0};f.inflateInfo="pako inflate (from Nodeca project)"},function(n,f,k){n.exports=function(f,e){var c=f.state;var a=f.next_in;var b=f.input;var d=a+(f.avail_in-5);var g=f.next_out;var h=f.output;e=g-(e-f.avail_out);var k=g+(f.avail_out-257);var n=c.dmax;var p=c.wsize;var x=c.whave;var l=c.wnext;var v=c.window;var H=c.hold;var w=c.bits;var D=c.lencode;var G=c.distcode;var z=(1<<c.lenbits)-1;var F=(1<<c.distbits)-1;a:do{15>w&&(H+=b[a++]<<w,w+=8,H+=b[a++]<<w,w+=8);var u=D[H&
z];b:for(;;){var y=u>>>24;H>>>=y;w-=y;y=u>>>16&255;if(0===y)h[g++]=u&65535;else if(y&16){var J=u&65535;if(y&=15)w<y&&(H+=b[a++]<<w,w+=8),J+=H&(1<<y)-1,H>>>=y,w-=y;15>w&&(H+=b[a++]<<w,w+=8,H+=b[a++]<<w,w+=8);u=G[H&F];c:for(;;){y=u>>>24;H>>>=y;w-=y;y=u>>>16&255;if(y&16){u&=65535;y&=15;w<y&&(H+=b[a++]<<w,w+=8,w<y&&(H+=b[a++]<<w,w+=8));u+=H&(1<<y)-1;if(u>n){f.msg="invalid distance too far back";c.mode=30;break a}H>>>=y;w-=y;y=g-e;if(u>y){y=u-y;if(y>x&&c.sane){f.msg="invalid distance too far back";c.mode=
30;break a}var q=0;var I=v;if(0===l){if(q+=p-y,y<J){J-=y;do h[g++]=v[q++];while(--y);q=g-u;I=h}}else if(l<y){if(q+=p+l-y,y-=l,y<J){J-=y;do h[g++]=v[q++];while(--y);q=0;if(l<J){y=l;J-=y;do h[g++]=v[q++];while(--y);q=g-u;I=h}}}else if(q+=l-y,y<J){J-=y;do h[g++]=v[q++];while(--y);q=g-u;I=h}for(;2<J;)h[g++]=I[q++],h[g++]=I[q++],h[g++]=I[q++],J-=3;J&&(h[g++]=I[q++],1<J&&(h[g++]=I[q++]))}else{q=g-u;do h[g++]=h[q++],h[g++]=h[q++],h[g++]=h[q++],J-=3;while(2<J);J&&(h[g++]=h[q++],1<J&&(h[g++]=h[q++]))}}else if(0===
(y&64)){u=G[(u&65535)+(H&(1<<y)-1)];continue c}else{f.msg="invalid distance code";c.mode=30;break a}break}}else if(0===(y&64)){u=D[(u&65535)+(H&(1<<y)-1)];continue b}else{y&32?c.mode=12:(f.msg="invalid literal/length code",c.mode=30);break a}break}}while(a<d&&g<k);J=w>>3;a-=J;w-=J<<3;f.next_in=a;f.next_out=g;f.avail_in=a<d?5+(d-a):5-(a-d);f.avail_out=g<k?257+(k-g):257-(g-k);c.hold=H&(1<<w)-1;c.bits=w}},function(n,f,k){var g=k(4),e=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,
131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(d,f,h,k,n,p,x,l){var m=l.bits,r,t,D,G,z,F,u=0,y=new g.Buf16(16);var J=new g.Buf16(16);var q,I=0;for(r=0;15>=r;r++)y[r]=0;for(t=0;t<k;t++)y[f[h+
t]]++;var C=m;for(D=15;1<=D&&0===y[D];D--);C>D&&(C=D);if(0===D)return n[p++]=20971520,n[p++]=20971520,l.bits=1,0;for(m=1;m<D&&0===y[m];m++);C<m&&(C=m);for(r=G=1;15>=r;r++)if(G<<=1,G-=y[r],0>G)return-1;if(0<G&&(0===d||1!==D))return-1;J[1]=0;for(r=1;15>r;r++)J[r+1]=J[r]+y[r];for(t=0;t<k;t++)0!==f[h+t]&&(x[J[f[h+t]]++]=t);if(0===d){var L=q=x;var B=19}else 1===d?(L=e,u-=257,q=c,I-=257,B=256):(L=a,q=b,B=-1);t=z=0;r=m;var E=p;k=C;J=0;var O=-1;var N=1<<C;var Q=N-1;if(1===d&&852<N||2===d&&592<N)return 1;
for(;;){var K=r-J;if(x[t]<B){var A=0;var M=x[t]}else x[t]>B?(A=q[I+x[t]],M=L[u+x[t]]):(A=96,M=0);G=1<<r-J;m=F=1<<k;do F-=G,n[E+(z>>J)+F]=K<<24|A<<16|M|0;while(0!==F);for(G=1<<r-1;z&G;)G>>=1;0!==G?(z&=G-1,z+=G):z=0;t++;if(0===--y[r]){if(r===D)break;r=f[h+x[t]]}if(r>C&&(z&Q)!==O){0===J&&(J=C);E+=m;k=r-J;for(G=1<<k;k+J<D;){G-=y[k+J];if(0>=G)break;k++;G<<=1}N+=1<<k;if(1===d&&852<N||2===d&&592<N)return 1;O=z&Q;n[O]=C<<24|k<<16|E-p|0}}0!==z&&(n[E+z]=r-J<<24|4194304);l.bits=C;return 0}},function(n,f,k){n.exports=
function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(f,"__esModule",{value:!0});k.d(f,"VolumeChunkSource",function(){return r});k.d(f,"TileChunkSource",function(){return p});n=k(2);var a=k(92),b=k(23),d=k(13);f=k(10);var m=k(8),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in
d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();k=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var g=a.length-1;0<=g;g--)if(h=a[g])f=(3>e?h(f):3<e?h(b,c,f):h(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var t=new Map([[a.b.JPEG,d.a]]),r=
function(f){function k(a,b){g(this,k);a=e(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,a,b));a.parameters=b.parameters;return a}c(k,f);h(k,[{key:"download",value:function(a,b){var c=this.parameters;var d=this.computeChunkBounds(a);d=this.getPath(d,a.chunkDataSize);var e=this.getDecoder(c);return Object(m.e)(Object(m.c)(c.baseUrls,d),"arraybuffer",b).then(function(b){return e(a,b)})}},{key:"getPath",value:function(b,c){var d=this.parameters;return d.encoding===a.c.JPEG?"/api/node/"+d.nodeKey+
"/"+d.dataInstanceKey+"/raw/0_1_2/"+(c[0]+"_"+c[1]+"_"+c[2]+"/")+(b[0]+"_"+b[1]+"_"+b[2]+"/jpeg"):"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/raw/0_1_2/"+(c[0]+"_"+c[1]+"_"+c[2]+"/")+(b[0]+"_"+b[1]+"_"+b[2]+"?compression=googlegzip")}},{key:"getDecoder",value:function(c){return c.encoding===a.c.JPEG?d.a:b.a}}]);return k}(f.a);r=k([Object(n.registerChunkSource)(a.d)],r);var p=function(a){function b(){g(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.chunkDecoder=
t.get(a.parameters.encoding);return a}c(b,a);h(b,[{key:"download",value:function(a,b){var c=this,d=this.parameters,e=a.chunkGridPosition;a.chunkDataSize=this.spec.chunkDataSize;return Object(m.e)(Object(m.c)(d.baseUrls,"/api/node/"+d.nodeKey+"/"+d.dataInstanceKey+"/tile/"+(d.dims+"/"+d.level+"/")+(e[0]+"_"+e[1]+"_"+e[2])),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(f.a);p=k([Object(n.registerChunkSource)(a.a)],p)},function(n,f,k){function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}k.d(f,"c",function(){return b});k.d(f,
"d",function(){return d});k.d(f,"b",function(){return m});k.d(f,"a",function(){return h});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b;(function(a){a[a.JPEG=0]="JPEG";a[a.COMPRESSED_SEGMENTATION=1]="COMPRESSED_SEGMENTATION"})(b||(b={}));n=function r(){c(this,r)};var d=function(b){function d(){c(this,
d);return g(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}e(d,b);a(d,null,[{key:"stringify",value:function(a){return"dvid:volume:"+a.baseUrls[0]+"/"+(a.nodeKey+"/"+a.dataInstanceKey)}}]);return d}(n);d.RPC_ID="dvid/VolumeChunkSource";var m;(function(a){a[a.JPEG=0]="JPEG"})(m||(m={}));var h=function(b){function d(){c(this,d);return g(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}e(d,b);a(d,null,[{key:"stringify",value:function(a){return"dvid:volume:"+a.baseUrls[0]+
"/"+a.nodeKey+"/"+(a.dataInstanceKey+"/"+a.dims+"/"+a.level+"/")+(""+m[a.encoding])}}]);return d}(n);h.RPC_ID="dvid/TileChunkSource"},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a){var b=[];Object(H.a)(a,function(a){Object(H.e)(a);b.push(Object(H.g)(a.sectionId))});return b}function b(a,b,c){return Object(v.d)(Object(v.c)(b.baseUrls,"/render-ws/v1/owner/"+b.owner+"/project/"+b.project+"/"+("stack/"+b.stack+"/local-to-world-coordinates"),"PUT"),a,"json",c)}function d(a,c,d,e){var f=
[];Object(H.a)(c,function(a){var b=Object(H.g)(a.pId),c=Object(H.g)(a.qId),d=Object(H.e)(a.matches);a=d.p;d=d.q;for(var e=0;e<a[0].length;e++)f.push({tileId:b,local:[a[0][e],a[1][e]]}),f.push({tileId:c,local:[d[0][e],d[1][e]]})});return b(f,d,e).then(function(b){for(var c=new x.a,d=0;d<b.length;d++){var e=Object(H.e)(b[d]);e=Object(H.d)(e.world);c.appendArray(e)}a.vertexPositions=c.view})}function m(a,b,c,e){if(1===b.length)b="/render-ws/v1/owner/"+c.owner+"/matchCollection/"+(c.matchCollection+"/group/"+
b[0]+"/matchesWith/"+b[0]);else if(2===b.length)b="/render-ws/v1/owner/"+c.owner+"/matchCollection/"+(c.matchCollection+"/group/"+b[0]+"/matchesWith/"+b[1]);else throw Error("Invalid section Id vector of length: "+JSON.stringify(b.length));return Object(v.e)(Object(v.c)(c.baseUrls,b),"json",e).then(function(b){return d(a,b,c,e)})}function h(b,c,d,e){return Object(v.e)(Object(v.c)(d.baseUrls,c),"json",e).then(function(c){return m(b,a(c),d,e)})}Object.defineProperty(f,"__esModule",{value:!0});k.d(f,
"TileChunkSource",function(){return G});k.d(f,"PointMatchSource",function(){return z});n=k(2);f=k(94);var t=k(13),r=k(95),p=k(10),x=k(97),l=k(1),v=k(8),H=k(5),w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();k=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,
c):d,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var g=a.length-1;0<=g;g--)if(h=a[g])f=(3>e?h(f):3<e?h(b,c,f):h(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var D=new Map;D.set("jpg",t.a);var G=function(a){function b(){g(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));a.chunkDecoder=D.get(a.parameters.encoding);return a}c(b,a);w(b,[{key:"download",value:function(a,b){var c=this,d=this.parameters,
e=a.chunkGridPosition,f=1/Math.pow(2,d.level);a.chunkDataSize=this.spec.chunkDataSize;var h=a.chunkDataSize[0]*Math.pow(2,d.level),g=a.chunkDataSize[1]*Math.pow(2,d.level),k=l.l.create();k[0]=e[0]*h;k[1]=e[1]*g;k[2]=e[2];return Object(v.e)(Object(v.c)(d.baseUrls,"/render-ws/v1/owner/"+d.owner+"/project/"+d.project+"/"+("stack/"+d.stack+"/z/"+k[2]+"/")+("box/"+k[0]+","+k[1]+","+h+","+g+","+f+"/jpeg-image")),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(p.a);G=k([Object(n.registerChunkSource)(f.b)],
G);var z=function(a){function b(){g(this,b);return e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);w(b,[{key:"download",value:function(a,b){var c=this.parameters,d=a.chunkGridPosition,e=l.l.create();e[2]=d[2];return h(a,"/render-ws/v1/owner/"+c.owner+"/project/"+c.project+"/"+("stack/"+c.stack+"/sectionData?minZ="+e[2]+"&")+("maxZ="+(e[2]+c.zoffset)),c,b)}}]);return b}(r.a);z=k([Object(n.registerChunkSource)(f.a)],z)},function(n,f,k){function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}k.d(f,"b",function(){return b});k.d(f,
"a",function(){return d});var a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();n=function h(){c(this,h)};var b=function(b){function d(){c(this,d);return g(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}e(d,b);a(d,null,[{key:"stringify",value:function(a){return"render:tile:"+a.baseUrls[0]+
"/"+a.owner+"/"+a.project+"/"+(a.stack+"/"+a.level+"/"+a.encoding)}}]);return d}(n);b.RPC_ID="render/TileChunkSource";var d=function(b){function d(){c(this,d);return g(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}e(d,b);a(d,null,[{key:"stringify",value:function(a){return"render:pointmatch:"+a.baseUrls[0]+"/"+a.owner+"/"+(a.project+"/"+a.stack+"/"+a.matchCollection)}}]);return d}(n);d.RPC_ID="render/PointMatchSource"},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}k.d(f,"a",function(){return r});
n=k(21);var a=k(96),b=k(1);k=k(0);var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),m=function x(a,b,c){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return x(a,b,c)}else{if("value"in d)return d.value;b=d.get;return void 0===
b?void 0:b.call(c)}};f=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var h=function(a){function b(){g(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));a.source=null;a.vertexPositions=
null;a.vertexNormals=null;return a}c(b,a);d(b,[{key:"initializeVolumeChunk",value:function(a,c){m(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"initializeVolumeChunk",this).call(this,a,c);a=0;this.vertexPositions&&(a+=this.vertexPositions.buffer.byteLength);this.vertexNormals&&(a+=this.vertexNormals.buffer.byteLength);this.gpuMemoryBytes=this.systemMemoryBytes=a;this.vertexPositions=null}},{key:"serialize",value:function(a,c){m(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),
"serialize",this).call(this,a,c);var d=this.vertexPositions,e=this.vertexNormals;a.vertexPositions=d;c.push(d.buffer);e&&(a.vertexNormals=e,c.push(e.buffer));this.vertexNormals=this.vertexPositions=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.vertexPositions.byteLength;m(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){this.vertexNormals=this.vertexPositions=
null}}]);return b}(n.SliceViewChunk),t=function(f){function k(b,c){g(this,k);b=e(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,b,c));b.spec=a.b.fromObject(c.spec);return b}c(k,f);d(k,[{key:"getChunk",value:function(a){var c=Object(b.m)(a),d=this.chunks.get(c);void 0===d&&(d=this.getNewChunk_(h),d.initializeVolumeChunk(c,a),this.addChunk(d));return d}}]);return k}(n.SliceViewChunkSource);n=function(a){function b(){g(this,b);return e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,
arguments))}c(b,a);return b}(n.RenderLayer);n=f([Object(k.g)(a.a)],n);var r=function(a){function b(a,c){g(this,b);a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,c));a.parameters=c.parameters;return a}c(b,a);return b}(t)},function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&
(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}k.d(f,"b",function(){return d});var e=k(12),c=k(1),a=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b;(function(a){a[a.LINE=0]="LINE";a[a.POINT=1]="POINT"})(b||(b={}));var d=function(b){function d(a){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");
a=(d.__proto__||Object.getPrototypeOf(d)).call(this,a);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}g(d,b);a(d,[{key:"toObject",value:function(){return{transform:this.chunkLayout.transform,chunkDataSize:this.chunkDataSize,voxelSize:this.voxelSize,lowerVoxelBound:this.lowerVoxelBound,upperVoxelBound:this.upperVoxelBound,lowerClipBound:this.lowerClipBound,upperClipBound:this.upperClipBound,
baseVoxelOffset:this.baseVoxelOffset}}}],[{key:"make",value:function(a){return new d(Object.assign({},a,{transform:Object(e.f)(a.transform,a.vectorGraphicsSourceOptions)}))}},{key:"fromObject",value:function(a){return new d(a)}},{key:"withDefaults",value:function(a){var b=a.transform,f=a.lowerVoxelBound,g=a.upperVoxelBound,h=a.chunkDataSize;b=Object(e.f)(b,a.vectorGraphicsSourceOptions);if(void 0===h&&(h=c.l.clone(g),void 0!==f))for(g=0;3>g;g++)h[g]+=Math.abs(f[g]);console.log(h);console.log(a);return new d(Object.assign({},
a,{transform:b,chunkDataSize:h}))}}]);return d}(e.d);f.a="vectorgraphics/RenderLayer"},function(n,f,k){k.d(f,"a",function(){return e});var g=function(){function c(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(a,e.key,e)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),e=function(){function c(a){a=void 0===a?16:a;if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
this.length=0;this.data=new Float32Array(a)}g(c,[{key:"resize",value:function(a){var b=this.data;if(a>b.length){var c=new Float32Array(Math.max(a,2*b.length));c.set(b.subarray(0,this.length));this.data=c}this.length=a}},{key:"shrinkToFit",value:function(){this.data=new Float32Array(this.view)}},{key:"clear",value:function(){this.length=0}},{key:"appendArray",value:function(a){var b=this.length;this.resize(b+a.length);this.data.set(a,b)}},{key:"eraseRange",value:function(a,b){this.data.copyWithin(a,
b,this.length);this.length-=b-a}},{key:"view",get:function(){var a=this.data;return new Float32Array(a.buffer,a.byteOffset,this.length)}}]);return c}()},function(n,f,k){Object.defineProperty(f,"__esModule",{value:!0});k(40)},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}
function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){return Object(d.c)(a,b,"fragments")}function b(a,b){var c=(new DataView(b)).getUint32(0,!0);Object(d.d)(a,b,p.b.LITTLE,4,c)}Object.defineProperty(f,"__esModule",{value:!0});
k.d(f,"VolumeChunkSource",function(){return H});f.decodeManifestChunk=a;f.decodeFragmentChunk=b;k.d(f,"MeshSource",function(){return w});n=k(2);f=k(100);var d=k(17),m=k(23),h=k(13),t=k(18),r=k(10),p=k(9),x=k(8),l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();k=this&&this.__decorate||function(a,b,c,d){var e=
arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var v=new Map;v.set(f.b.RAW,t.a);v.set(f.b.JPEG,h.a);v.set(f.b.COMPRESSED_SEGMENTATION,m.a);var H=function(a){function b(){g(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));
a.chunkDecoder=v.get(a.parameters.encoding);return a}c(b,a);l(b,[{key:"download",value:function(a,b){var c=this,d=this.parameters,e=this.computeChunkBounds(a),f=a.chunkDataSize;return Object(x.e)(Object(x.c)(d.baseUrls,d.path+"/"+e[0]+"-"+(e[0]+f[0])+"_"+(e[1]+"-"+(e[1]+f[1])+"_")+(e[2]+"-"+(e[2]+f[2]))),"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return b}(r.a);H=k([Object(n.registerChunkSource)(f.c)],H);var w=function(d){function f(){g(this,f);return e(this,(f.__proto__||
Object.getPrototypeOf(f)).apply(this,arguments))}c(f,d);l(f,[{key:"download",value:function(b,c){var d=this.parameters;return Object(x.e)(Object(x.c)(d.baseUrls,d.path+"/"+b.objectId+":"+d.lod),"json",c).then(function(c){return a(b,c)})}},{key:"downloadFragment",value:function(a,c){var d=this.parameters;return Object(x.e)(Object(x.c)(d.baseUrls,d.path+"/"+a.fragmentId),"arraybuffer",c).then(function(c){return b(a,c)})}}]);return f}(d.a);w=k([Object(n.registerChunkSource)(f.a)],w)},function(n,f,k){function g(a,
b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}k.d(f,"b",function(){return c});k.d(f,"c",function(){return a});k.d(f,"a",function(){return b});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),c;(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=
2]="COMPRESSED_SEGMENTATION"})(c||(c={}));var a=function(){function a(){g(this,a)}e(a,null,[{key:"stringify",value:function(a){return"precomputed:volume:"+a.baseUrls[0]+"/"+a.path}}]);return a}();a.RPC_ID="precomputed/VolumeChunkSource";var b=function(){function a(){g(this,a)}e(a,null,[{key:"stringify",value:function(a){return"precomputed:mesh:"+a.baseUrls[0]+"/"+a.path+"/"+a.lod}}]);return a}();b.RPC_ID="precomputed/MeshSource"},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){var c=
(new DataView(b)).getUint32(0,!0);Object(d.d)(a,b,x.b.LITTLE,4,c)}Object.defineProperty(f,"__esModule",{value:!0});k.d(f,"VolumeChunkSource",function(){return w});f.decodeFragmentChunk=a;k.d(f,"MeshSource",function(){return D});k.d(f,"SkeletonSource",function(){return G});n=k(2);var b=k(102),d=k(17),m=k(38);f=k(13);var h=k(41),t=k(18),r=k(10),p=k(7),x=k(9),l=k(8),v=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=
!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();k=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var H=new Map;H.set(b.c.NPZ,h.a);H.set(b.c.JPEG,
f.a);H.set(b.c.RAW,t.a);var w=function(a){function d(){g(this,d);var a=e(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments));a.chunkDecoder=H.get(a.parameters.encoding);a.encoding=b.c[a.parameters.encoding].toLowerCase();return a}c(d,a);v(d,[{key:"download",value:function(a,b){for(var c=this,d=this.parameters,e="/neuroglancer/"+this.encoding+"/"+d.key,f=this.computeChunkBounds(a),g=a.chunkDataSize,h=0;3>h;++h)e+="/"+f[h]+","+(f[h]+g[h]);return Object(l.e)(Object(l.c)(d.baseUrls,e),
"arraybuffer",b).then(function(b){return c.chunkDecoder(a,b)})}}]);return d}(r.a);w=k([Object(n.registerChunkSource)(b.d)],w);var D=function(b){function d(){g(this,d);return e(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}c(d,b);v(d,[{key:"download",value:function(a){a.fragmentIds=[""];return Promise.resolve(void 0)}},{key:"downloadFragment",value:function(b,c){var d=this.parameters;return Object(l.e)(Object(l.c)(d.baseUrls,"/neuroglancer/mesh/"+d.key+"/"+b.manifestChunk.objectId),
"arraybuffer",c).then(function(c){return a(b,c)})}}]);return d}(d.a);D=k([Object(n.registerChunkSource)(b.a)],D);var G=function(a){function b(){g(this,b);return e(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}c(b,a);v(b,[{key:"download",value:function(a,b){var c=this.parameters;return Object(l.e)(Object(l.c)(c.baseUrls,"/neuroglancer/skeleton/"+c.key+"/"+a.objectId),"arraybuffer",b).then(function(b){var d=c.vertexAttributes,e=new DataView(b),f=e.getUint32(0,!0);e=e.getUint32(4,
!0);var g=8+12*f,h=[];d=$jscomp.makeIterator(d.values());for(var k=d.next();!k.done;k=d.next()){k=k.value;k=p.a[k.dataType]*k.numComponents;var l=k*f,n=new Uint8Array(b,g,l);switch(k){case 2:Object(x.c)(n,x.b.LITTLE);break;case 4:case 8:Object(x.d)(n,x.b.LITTLE)}h.push(n);g+=l}a.vertexAttributes=h;Object(m.b)(a,b,x.b.LITTLE,8,f,g,e)})}}]);return b}(m.a);G=k([Object(n.registerChunkSource)(b.b)],G)},function(n,f,k){function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}k.d(f,"c",function(){return c});k.d(f,"d",function(){return a});k.d(f,"a",function(){return b});k.d(f,"b",function(){return d});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),c;(function(a){a[a.JPEG=0]="JPEG";a[a.NPZ=1]="NPZ";a[a.RAW=2]="RAW"})(c||(c={}));var a=function(){function a(){g(this,a)}e(a,
null,[{key:"stringify",value:function(a){return"python:volume:"+a.baseUrls[0]+"/"+a.key+"/"+(""+c[a.encoding])}}]);return a}();a.RPC_ID="python/VolumeChunkSource";var b=function(){function a(){g(this,a)}e(a,null,[{key:"stringify",value:function(a){return"python:mesh:"+a.baseUrls[0]+"/"+a.key}}]);return a}();b.RPC_ID="python/MeshSource";var d=function(){function a(){g(this,a)}e(a,null,[{key:"stringify",value:function(a){return"python:skeleton:"+a.baseUrls[0]+"/"+a.key}}]);return a}();d.RPC_ID="python/SkeletonSource"},
function(n,f,k){function g(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a){Object(v.isCompressed)(a)&&(a=Object(v.decompress)(a));var b=
new w;b.uncompressedData=a;a=Object(v.readHeader)(a);if(null===a)throw Error("Failed to parse NIFTI header.");b.header=a;return b}function a(a,b,d,e){return m.a.getData(a,c,b,d,e)}function b(b,c,e){return a(b,c,function(){return{priorityTier:d.d.VISIBLE,priority:1E3}},e).then(function(a){return a.header})}Object.defineProperty(f,"__esModule",{value:!0});k.d(f,"NiftiFileData",function(){return w});k.d(f,"VolumeChunkSource",function(){return G});n=k(2);var d=k(11),m=k(27),h=k(105),t=k(18);f=k(10);var r=
k(39),p=k(9),x=k(1),l=k(0),v=k(106);k.n(v);var H=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();k=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,
b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var w=function F(){e(this,F)},D=new Map([[h.b.INT8,{dataType:r.a.UINT8,volumeType:r.d.IMAGE}],[h.b.UINT8,{dataType:r.a.UINT8,volumeType:r.d.IMAGE}],[h.b.INT16,{dataType:r.a.UINT16,volumeType:r.d.IMAGE}],[h.b.UINT16,{dataType:r.a.UINT16,volumeType:r.d.IMAGE}],[h.b.INT32,{dataType:r.a.UINT32,volumeType:r.d.SEGMENTATION}],[h.b.UINT32,{dataType:r.a.UINT32,volumeType:r.d.SEGMENTATION}],
[h.b.INT64,{dataType:r.a.UINT64,volumeType:r.d.SEGMENTATION}],[h.b.UINT64,{dataType:r.a.UINT64,volumeType:r.d.SEGMENTATION}],[h.b.FLOAT32,{dataType:r.a.FLOAT32,volumeType:r.d.IMAGE}]]);Object(l.e)(h.a,function(a,c){return b(this.getRef(a.chunkManager),a.url,c).then(function(a){var b=D.get(a.datatypeCode);if(void 0===b)throw Error("Unsupported data type: "+((h.b[a.datatypeCode]||a.datatypeCode)+"."));if(1!==a.dims[4])throw Error("Time series data not supported.");var c=1;switch(a.xyzt_units&v.NIFTI1.SPATIAL_UNITS_MASK){case v.NIFTI1.UNITS_METER:c=
1E9;break;case v.NIFTI1.UNITS_MM:c=1E6;break;case v.NIFTI1.UNITS_MICRON:c=1E3}var d=a.quatern_b,e=a.quatern_c,f=a.quatern_d,g=Math.sqrt(1-d*d-e*e-f*f),k=-1===a.pixDims[0]?-1:1,l=a.description;var m=a.affine;m=x.g.fromValues(m[0][0],m[1][0],m[2][0],m[3][0],m[0][1],m[1][1],m[2][1],m[3][1],m[0][2],m[1][2],m[2][2],m[3][2],m[0][3],m[1][3],m[2][3],m[3][3]);return{value:{description:l,affine:m,dataType:b.dataType,numChannels:a.dims[5],volumeType:b.volumeType,voxelSize:x.l.fromValues(c*a.pixDims[1],c*a.pixDims[2],
c*a.pixDims[3]),volumeSize:x.l.fromValues(a.dims[1],a.dims[2],a.dims[3]),qoffset:x.l.fromValues(c*a.qoffset_x,c*a.qoffset_y,c*a.qoffset_z),qform_code:a.qform_code,sform_code:a.sform_code,qfac:k,quatern:x.i.fromValues(d,e,f,g)}}})});var G=function(b){function c(){e(this,c);var a=(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?this:a}g(c,b);
H(c,[{key:"download",value:function(b,c){b.chunkDataSize=this.spec.chunkDataSize;return a(this.chunkManager.addRef(),this.parameters.url,function(){return{priorityTier:b.priorityTier,priority:b.priority}},c).then(function(a){var c=Object(v.readImage)(a.header,a.uncompressedData);Object(t.a)(b,c,a.header.littleEndian?p.b.LITTLE:p.b.BIG)})}}]);return c}(f.a);G=k([Object(n.registerChunkSource)(h.c)],G)},function(n,f,k){f.a=function(c){if(c instanceof Object){var a=c[g];void 0===a&&(a=c[g]=e++);return"o"+
a}return""+JSON.stringify(c)};$jscomp.initSymbol();var g=Symbol("objectId"),e=0},function(n,f,k){k.d(f,"b",function(){return e});k.d(f,"c",function(){return c});var g=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}();f.a="nifti/getNiftiVolumeInfo";var e;(function(a){a[a.NONE=0]="NONE";a[a.BINARY=1]="BINARY";
a[a.UINT8=2]="UINT8";a[a.INT16=4]="INT16";a[a.INT32=8]="INT32";a[a.FLOAT32=16]="FLOAT32";a[a.COMPLEX64=32]="COMPLEX64";a[a.FLOAT64=64]="FLOAT64";a[a.RGB24=128]="RGB24";a[a.INT8=256]="INT8";a[a.UINT16=512]="UINT16";a[a.UINT32=768]="UINT32";a[a.INT64=1024]="INT64";a[a.UINT64=1280]="UINT64";a[a.FLOAT128=1536]="FLOAT128";a[a.COMPLEX128=1792]="COMPLEX128";a[a.COMPLEX256=2048]="COMPLEX256"})(e||(e={}));var c=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
}g(a,null,[{key:"stringify",value:function(a){return"nifti:"+a.url}}]);return a}();c.RPC_ID="nifti/VolumeChunkSource"},function(n,f,k){var g=g||{};g.NIFTI1=g.NIFTI1||k(47);g.NIFTI2=g.NIFTI2||k(107);g.Utils=g.Utils||k(28);var e=e||k(25);g.isNIFTI1=function(c){if(c.byteLength<g.NIFTI1.STANDARD_HEADER_SIZE)return!1;var a=new DataView(c);c=a.getUint8(g.NIFTI1.MAGIC_NUMBER_LOCATION);var b=a.getUint8(g.NIFTI1.MAGIC_NUMBER_LOCATION+1);a=a.getUint8(g.NIFTI1.MAGIC_NUMBER_LOCATION+2);return!(c!==g.NIFTI1.MAGIC_NUMBER[0]||
b!==g.NIFTI1.MAGIC_NUMBER[1]||a!==g.NIFTI1.MAGIC_NUMBER[2])};g.isNIFTI2=function(c){if(c.byteLength<g.NIFTI1.STANDARD_HEADER_SIZE)return!1;var a=new DataView(c);c=a.getUint8(g.NIFTI2.MAGIC_NUMBER_LOCATION);var b=a.getUint8(g.NIFTI2.MAGIC_NUMBER_LOCATION+1);a=a.getUint8(g.NIFTI2.MAGIC_NUMBER_LOCATION+2);return!(c!==g.NIFTI2.MAGIC_NUMBER[0]||b!==g.NIFTI2.MAGIC_NUMBER[1]||a!==g.NIFTI2.MAGIC_NUMBER[2])};g.isNIFTI=function(c){return g.isNIFTI1(c)||g.isNIFTI2(c)};g.isCompressed=function(c){if(c){var a=
new DataView(c);c=a.getUint8(0);a=a.getUint8(1);if(c===g.Utils.GUNZIP_MAGIC_COOKIE1||a===g.Utils.GUNZIP_MAGIC_COOKIE2)return!0}return!1};g.decompress=function(c){return e.inflate(c).buffer};g.readHeader=function(c){var a=null;g.isCompressed(c)&&(c=g.decompress(c));g.isNIFTI1(c)?a=new g.NIFTI1:g.isNIFTI2(c)&&(a=new g.NIFTI2);a?a.readHeader(c):console.error("That file does not appear to be NIFTI!");return a};g.hasExtension=function(c){return 0!=c.extensionFlag[0]};g.readImage=function(c,a){var b=c.vox_offset,
d=1,e=1;c.dims[4]&&(d=c.dims[4]);c.dims[5]&&(e=c.dims[5]);return a.slice(b,b+c.numBitsPerVoxel/8*c.dims[2]*c.dims[3]*d*e*c.dims[1])};g.readExtension=function(c,a){var b=c.getExtensionLocation();return a.slice(b,b+c.extensionSize)};g.readExtensionData=function(c,a){var b=c.getExtensionLocation();return a.slice(b+8,b+c.extensionSize-8)};"undefined"!==typeof n&&n.exports&&(n.exports=g)},function(n,f,k){var g=g||{};g.Utils=g.Utils||k(28);g.NIFTI1=g.NIFTI1||k(47);g.NIFTI2=g.NIFTI2||function(){this.littleEndian=
!1;this.dim_info=0;this.dims=[];this.slice_code=this.slice_end=this.slice_start=this.numBitsPerVoxel=this.datatypeCode=this.intent_code=this.intent_p3=this.intent_p2=this.intent_p1=0;this.pixDims=[];this.vox_offset=0;this.scl_slope=1;this.toffset=this.slice_duration=this.cal_min=this.cal_max=this.xyzt_units=this.scl_inter=0;this.intent_name=this.aux_file=this.description="";this.qoffset_z=this.qoffset_y=this.qoffset_x=this.quatern_d=this.quatern_c=this.quatern_b=this.sform_code=this.qform_code=0;
this.affine=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.magic=0;this.extensionFlag=[0,0,0,0]};g.NIFTI2.MAGIC_COOKIE=540;g.NIFTI2.MAGIC_NUMBER_LOCATION=4;g.NIFTI2.MAGIC_NUMBER=[110,43,50,0,13,10,26,10];g.NIFTI2.prototype.readHeader=function(e){e=new DataView(e);var c=g.Utils.getIntAt(e,0,this.littleEndian),a,b;c!==g.NIFTI2.MAGIC_COOKIE&&(this.littleEndian=!0,c=g.Utils.getIntAt(e,0,this.littleEndian));if(c!==g.NIFTI2.MAGIC_COOKIE)throw Error("This does not appear to be a NIFTI file!");this.datatypeCode=
g.Utils.getShortAt(e,12,this.littleEndian);this.numBitsPerVoxel=g.Utils.getShortAt(e,14,this.littleEndian);for(a=0;8>a;a+=1)c=16+8*a,this.dims[a]=g.Utils.getLongAt(e,c,this.littleEndian);this.intent_p1=g.Utils.getDoubleAt(e,80,this.littleEndian);this.intent_p2=g.Utils.getDoubleAt(e,88,this.littleEndian);this.intent_p3=g.Utils.getDoubleAt(e,96,this.littleEndian);for(a=0;8>a;a+=1)c=104+8*a,this.pixDims[a]=g.Utils.getDoubleAt(e,c,this.littleEndian);this.vox_offset=g.Utils.getLongAt(e,168,this.littleEndian);
this.scl_slope=g.Utils.getDoubleAt(e,176,this.littleEndian);this.scl_inter=g.Utils.getDoubleAt(e,184,this.littleEndian);this.cal_max=g.Utils.getDoubleAt(e,192,this.littleEndian);this.cal_min=g.Utils.getDoubleAt(e,200,this.littleEndian);this.slice_duration=g.Utils.getDoubleAt(e,208,this.littleEndian);this.toffset=g.Utils.getDoubleAt(e,216,this.littleEndian);this.slice_start=g.Utils.getLongAt(e,224,this.littleEndian);this.slice_end=g.Utils.getLongAt(e,232,this.littleEndian);this.description=g.Utils.getStringAt(e,
240,320);this.aux_file=g.Utils.getStringAt(e,320,344);this.qform_code=g.Utils.getIntAt(e,344,this.littleEndian);this.sform_code=g.Utils.getIntAt(e,348,this.littleEndian);this.quatern_b=g.Utils.getDoubleAt(e,352,this.littleEndian);this.quatern_c=g.Utils.getDoubleAt(e,360,this.littleEndian);this.quatern_d=g.Utils.getDoubleAt(e,368,this.littleEndian);this.qoffset_x=g.Utils.getDoubleAt(e,376,this.littleEndian);this.qoffset_y=g.Utils.getDoubleAt(e,384,this.littleEndian);this.qoffset_z=g.Utils.getDoubleAt(e,
392,this.littleEndian);for(a=0;3>a;a+=1)for(b=0;4>b;b+=1)c=400+8*(4*a+b),this.affine[a][b]=g.Utils.getDoubleAt(e,c,this.littleEndian);this.affine[3][0]=0;this.affine[3][1]=0;this.affine[3][2]=0;this.affine[3][3]=1;this.slice_code=g.Utils.getIntAt(e,496,this.littleEndian);this.xyzt_units=g.Utils.getIntAt(e,500,this.littleEndian);this.intent_code=g.Utils.getIntAt(e,504,this.littleEndian);this.intent_name=g.Utils.getStringAt(e,508,524);this.dim_info=g.Utils.getByteAt(e,524);e.byteLength>g.NIFTI2.MAGIC_COOKIE&&
(this.extensionFlag[0]=g.Utils.getByteAt(e,540),this.extensionFlag[1]=g.Utils.getByteAt(e,541),this.extensionFlag[2]=g.Utils.getByteAt(e,542),this.extensionFlag[3]=g.Utils.getByteAt(e,543),this.extensionFlag[0]&&(this.extensionSize=this.getExtensionSize(e),this.extensionCode=this.getExtensionCode(e)))};g.NIFTI2.prototype.toFormattedString=function(){var e=g.Utils.formatNumber;var c=""+("Datatype = "+ +this.datatypeCode+" ("+this.getDatatypeCodeString(this.datatypeCode)+")\n");c+="Bits Per Voxel =  = "+
this.numBitsPerVoxel+"\n";c+="Image Dimensions (1-8): "+this.dims[0]+", "+this.dims[1]+", "+this.dims[2]+", "+this.dims[3]+", "+this.dims[4]+", "+this.dims[5]+", "+this.dims[6]+", "+this.dims[7]+"\n";c+="Intent Parameters (1-3): "+this.intent_p1+", "+this.intent_p2+", "+this.intent_p3+"\n";c+="Voxel Dimensions (1-8): "+e(this.pixDims[0])+", "+e(this.pixDims[1])+", "+e(this.pixDims[2])+", "+e(this.pixDims[3])+", "+e(this.pixDims[4])+", "+e(this.pixDims[5])+", "+e(this.pixDims[6])+", "+e(this.pixDims[7])+
"\n";c+="Image Offset = "+this.vox_offset+"\n";c+="Data Scale:  Slope = "+e(this.scl_slope)+"  Intercept = "+e(this.scl_inter)+"\n";c+="Display Range:  Max = "+e(this.cal_max)+"  Min = "+e(this.cal_min)+"\n";c+="Slice Duration = "+this.slice_duration+"\n";c+="Time Axis Shift = "+this.toffset+"\n";c+="Slice Start = "+this.slice_start+"\n";c+="Slice End = "+this.slice_end+"\n";c+='Description: "'+this.description+'"\n';c+='Auxiliary File: "'+this.aux_file+'"\n';c+="Q-Form Code = "+this.qform_code+" ("+
this.getTransformCodeString(this.qform_code)+")\n";c+="S-Form Code = "+this.sform_code+" ("+this.getTransformCodeString(this.sform_code)+")\n";c+="Quaternion Parameters:  b = "+e(this.quatern_b)+"  c = "+e(this.quatern_c)+"  d = "+e(this.quatern_d)+"\n";c+="Quaternion Offsets:  x = "+this.qoffset_x+"  y = "+this.qoffset_y+"  z = "+this.qoffset_z+"\n";c+="S-Form Parameters X: "+e(this.affine[0][0])+", "+e(this.affine[0][1])+", "+e(this.affine[0][2])+", "+e(this.affine[0][3])+"\n";c+="S-Form Parameters Y: "+
e(this.affine[1][0])+", "+e(this.affine[1][1])+", "+e(this.affine[1][2])+", "+e(this.affine[1][3])+"\n";c+="S-Form Parameters Z: "+e(this.affine[2][0])+", "+e(this.affine[2][1])+", "+e(this.affine[2][2])+", "+e(this.affine[2][3])+"\n";c+="Slice Code = "+this.slice_code+"\n";c+="Units Code = "+this.xyzt_units+" ("+this.getUnitsCodeString(g.NIFTI1.SPATIAL_UNITS_MASK&this.xyzt_units)+", "+this.getUnitsCodeString(g.NIFTI1.TEMPORAL_UNITS_MASK&this.xyzt_units)+")\n";c+="Intent Code = "+this.intent_code+
"\n";c+='Intent Name: "'+this.intent_name+'"\n';return c+="Dim Info = "+this.dim_info+"\n"};g.NIFTI2.prototype.getExtensionLocation=function(){return g.NIFTI2.MAGIC_COOKIE+4};g.NIFTI2.prototype.getExtensionSize=g.NIFTI1.prototype.getExtensionSize;g.NIFTI2.prototype.getExtensionCode=g.NIFTI1.prototype.getExtensionCode;g.NIFTI2.prototype.getDatatypeCodeString=g.NIFTI1.prototype.getDatatypeCodeString;g.NIFTI2.prototype.getTransformCodeString=g.NIFTI1.prototype.getTransformCodeString;g.NIFTI2.prototype.getUnitsCodeString=
g.NIFTI1.prototype.getUnitsCodeString;g.NIFTI2.prototype.getQformMat=g.NIFTI1.prototype.getQformMat;g.NIFTI2.prototype.convertNiftiQFormToNiftiSForm=g.NIFTI1.prototype.convertNiftiQFormToNiftiSForm;g.NIFTI2.prototype.convertNiftiSFormToNEMA=g.NIFTI1.prototype.convertNiftiSFormToNEMA;g.NIFTI2.prototype.nifti_mat33_mul=g.NIFTI1.prototype.nifti_mat33_mul;g.NIFTI2.prototype.nifti_mat33_determ=g.NIFTI1.prototype.nifti_mat33_determ;"undefined"!==typeof n&&n.exports&&(n.exports=g.NIFTI2)},function(n,f,k){function g(a){return Object(c.a)(Object(b.a)(a))}
Object.defineProperty(f,"__esModule",{value:!0});var e=k(27),c=k(109);n=k(48);var a=k(7),b=k(49);Object(n.a)("vtk",{description:"VTK",getMesh:function(b,c,f,k){return e.a.getData(b.addRef(),g,c,f,k).then(function(b){var c={info:{numTriangles:b.numTriangles,numVertices:b.numVertices,vertexAttributes:[]},indices:b.indices,vertexPositions:b.vertexPositions,vertexAttributes:[]};b=$jscomp.makeIterator(b.vertexAttributes);for(var d=b.next();!d.done;d=b.next())d=d.value,c.info.vertexAttributes.push({name:d.name,
dataType:a.b.FLOAT32,numComponents:d.numComponents}),c.vertexAttributes.push(d.data);return c})}})},function(n,f,k){f.a=function(a){var b=(new TextDecoder).decode(new Uint8Array(a.buffer,a.byteOffset,Math.min(a.byteLength,1E3))).match(g);if(null===b)throw Error("Failed to parse VTK file header.");var c=b[0].length,d=b[4],e=b[3];b={version:b[1],comment:b[2],datasetType:d,dataFormat:e};a=new Uint8Array(a.buffer,a.byteOffset+c,a.byteLength-c);if("ASCII"===e){e=r.get(d);if(void 0===e)throw Error("VTK dataset type "+
JSON.stringify(d)+" is not supported.");return e(b,a)}throw Error("VTK data format "+JSON.stringify(e)+" is not supported.");};var g=/^[ \t]*#[ \t]+vtk[ \t]+DataFile[ \t]+Version[ \t]+([^\s]+)[ \t]*\n(.*)\n[ \t]*(ASCII|BINARY)[ \t]*\n[ \t]*DATASET[ \t]+([^ ]+)[ \t]*\n/,e=/^[ \t]*POINT_DATA[ \t]+([0-9]+)[ \t]*$/,c=/^[ \t]*POINTS[ \t]+([0-9]+)[ \t]+([^\s]+)[ \t]*$/,a=/^[ \t]*SCALARS[ \t]+([^\s]+)[ \t]+([^\s]+)(?:[ \t]+([0-9]+))?[ \t]*$/,b=/^[ \t]*LOOKUP_TABLE[ \t]+([^\s]+)[ \t]*$/,d=/^[ \t]*POLYGONS[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,
m=/^[ \t]*3[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]+([0-9]+)[ \t]*$/,h=/^[ \t]*$/,t=function x(a,b,c,d,e,f){if(!(this instanceof x))throw new TypeError("Cannot call a class as a function");this.header=a;this.numVertices=b;this.vertexPositions=c;this.numTriangles=d;this.indices=e;this.vertexAttributes=f},r=new Map([["POLYDATA",function(f,g){function k(a,b,c,d){d=RegExp("^[ \t]*"+"([^s]+)[ \t]+".repeat(c-1)+"([^s]+)[ \t]*$");if(z-F<b)throw Error("VTK data ended unexpectedly while parsing "+a+".");for(var e=
new Float32Array(b*c),f=0,g=0;g<b;++g){var h=x[F++],k=h.match(d);if(null===k)throw Error("Failed to parse "+a+" line "+g+": "+JSON.stringify(h)+".");for(h=0;h<c;++h)e[f++]=parseFloat(k[h+1])}return e}function l(a,b){if(void 0!==q)throw Error("POINTS specified more than once.");u=a;y=k("POINTS",a,3,b)}function n(a,b){if(void 0!==q)throw Error("VERTICES specified more than once.");if(z-F<a)throw Error("VTK data ended unexpectedly");if(b!==4*a)throw Error("Only triangular faces are supported.");J=a;
q=new Uint32Array(3*a);for(var c=b=0;c<a;++c){var d=x[F++].match(m);if(null===d)throw Error("Failed to parse indices for face "+c);q[b++]=parseInt(d[1],10);q[b++]=parseInt(d[2],10);q[b++]=parseInt(d[3],10)}}function r(c){if(u!==c)throw Error("Number of vertices specified in POINT_DATA section ("+c+") "+("must match number of points ("+u+")."));for(;F<z;)if(c=x[F],c.match(h))++F;else{var d=c.match(a);if(null!==d){var e=void 0===d[3]?1:parseInt(d[3],10);++F;c=d[1];d=d[2];if(F===z)throw Error("Expected LOOKUP_TABLE directive.");
var f=x[F++],g=f.match(b);if(null===g)throw Error("Expected LOOKUP_TABLE directive in "+JSON.stringify(f)+".");f=g[1];g=k("SCALARS("+c+")",u,e,d);I.push({name:c,data:g,numComponents:e,dataType:d,tableName:f})}}}for(var x=(new TextDecoder).decode(g).split("\n"),z=x.length,F=0,u=-1,y=void 0,J=-1,q=void 0,I=[];F<z;)if(g=x[F],g.match(h))++F;else{var C=void 0;C=g.match(c);if(null!==C)++F,l(parseInt(C[1],10),C[2]);else if(C=g.match(d),null!==C)++F,n(parseInt(C[1],10),parseInt(C[2],10));else{C=g.match(e);
if(null!==C){++F;r(parseInt(C[1],10));break}throw Error("Failed to parse VTK line "+JSON.stringify(g)+".");}}if(void 0===y)throw Error("Vertex positions not specified.");if(void 0===q)throw Error("Indices not specified.");return new t(f,u,y,J,q,I)}]])},function(n,f,k){var g=function(){function e(c,a){for(var b=0;b<a.length;b++){var d=a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&e(c.prototype,a);b&&e(c,
b);return c}}();f.c="single_mesh/SingleMeshLayer";f.d="single_mesh/SingleMeshSource";f.a="single_mesh/getSingleMeshInfo";f.b="";(function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");}g(e,null,[{key:"stringify",value:function(c){return"single_mesh:"+JSON.stringify(c)}}]);return e})().RPC_ID="single_mesh/SingleMeshSource"},function(n,f,k){function g(b){b=(new TextDecoder).decode(Object(a.a)(b)).trim().split(/\n+/);if(!b)throw Error("CSV file is empty.");
var d=b[0].split(","),e=d.map(function(a){return{name:a.trim(),dataType:c.b.FLOAT32,numComponents:1}}),f=b.length-1,g=d.length;d=d.map(function(){return new Float32Array(f)});for(var k=0;k<f;++k)for(var n=b[k+1].split(","),x=0;x<g;++x)d[x][k]=parseFloat(n[x]);return{numVertices:f,attributeInfo:e,attributes:d}}Object.defineProperty(f,"__esModule",{value:!0});var e=k(27);n=k(48);var c=k(7),a=k(49);Object(n.b)("csv",{description:"Comma separated value text file",getMeshVertexAttributes:function(a,c,
f,h){return e.a.getData(a.addRef(),g,c,f,h)}})}]);
