/*

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 JS Signals <http://millermedeiros.github.com/js-signals/>
 Released under the MIT license
 Author: Miller Medeiros
 Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2015 Mozilla Foundation

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 Copyright 2016 Google Inc.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
var $jscomp={scope:{},getGlobal:function(k){return"undefined"!=typeof window&&window===k?k:"undefined"!=typeof global?global:k}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(k){return"jscomp_symbol_"+k+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};
$jscomp.makeIterator=function(k){$jscomp.initSymbolIterator();if(k[$jscomp.global.Symbol.iterator])return k[$jscomp.global.Symbol.iterator]();if(!(k instanceof Array||"string"==typeof k||k instanceof String))throw new TypeError(k+" is not iterable");var d=0;return{next:function(){return d==k.length?{done:!0}:{done:!1,value:k[d++]}}}};$jscomp.arrayFromIterator=function(k){for(var d,g=[];!(d=k.next()).done;)g.push(d.value);return g};
$jscomp.arrayFromIterable=function(k){return k instanceof Array?k:$jscomp.arrayFromIterator($jscomp.makeIterator(k))};$jscomp.arrayFromArguments=function(k){for(var d=[],g=0;g<k.length;g++)d.push(k[g]);return d};$jscomp.inherits=function(k,d){function g(){}g.prototype=d.prototype;k.prototype=new g;k.prototype.constructor=k;for(var m in d)if($jscomp.global.Object.defineProperties){var c=$jscomp.global.Object.getOwnPropertyDescriptor(d,m);$jscomp.global.Object.defineProperty(k,m,c)}else k[m]=d[m]};
$jscomp.array=$jscomp.array||{};$jscomp.array.done_=function(){return{done:!0,value:void 0}};$jscomp.array.arrayIterator_=function(k,d){k instanceof String&&(k=String(k));var g=0;$jscomp.initSymbol();$jscomp.initSymbolIterator();var m={},c=(m.next=function(){if(g<k.length){var a=g++;return{value:d(a,k[a]),done:!1}}c.next=$jscomp.array.done_;return $jscomp.array.done_()},m[Symbol.iterator]=function(){return c},m);return c};
$jscomp.array.findInternal_=function(k,d,g){k instanceof String&&(k=String(k));for(var m=k.length,c=0;c<m;c++){var a=k[c];if(d.call(g,a,c,k))return{i:c,v:a}}return{i:-1,v:void 0}};
$jscomp.array.from=function(k,d,g){d=void 0===d?function(a){return a}:d;var m=[];$jscomp.initSymbol();$jscomp.initSymbolIterator();if(k[Symbol.iterator]){$jscomp.initSymbol();$jscomp.initSymbolIterator();k=k[Symbol.iterator]();for(var c;!(c=k.next()).done;)m.push(d.call(g,c.value))}else{c=k.length;for(var a=0;a<c;a++)m.push(d.call(g,k[a]))}return m};$jscomp.array.of=function(k){for(var d=[],g=0;g<arguments.length;++g)d[g-0]=arguments[g];return $jscomp.array.from(d)};
$jscomp.array.entries=function(){return $jscomp.array.arrayIterator_(this,function(k,d){return[k,d]})};$jscomp.array.entries$install=function(){Array.prototype.entries||(Array.prototype.entries=$jscomp.array.entries)};$jscomp.array.keys=function(){return $jscomp.array.arrayIterator_(this,function(k){return k})};$jscomp.array.keys$install=function(){Array.prototype.keys||(Array.prototype.keys=$jscomp.array.keys)};$jscomp.array.values=function(){return $jscomp.array.arrayIterator_(this,function(k,d){return d})};
$jscomp.array.values$install=function(){Array.prototype.values||(Array.prototype.values=$jscomp.array.values)};$jscomp.array.copyWithin=function(k,d,g){var m=this.length;k=Number(k);d=Number(d);g=Number(null!=g?g:m);if(k<d)for(g=Math.min(g,m);d<g;)d in this?this[k++]=this[d++]:(delete this[k++],d++);else for(g=Math.min(g,m+d-k),k+=g-d;g>d;)--g in this?this[--k]=this[g]:delete this[k];return this};$jscomp.array.copyWithin$install=function(){Array.prototype.copyWithin||(Array.prototype.copyWithin=$jscomp.array.copyWithin)};
$jscomp.array.fill=function(k,d,g){null!=g&&k.length||(g=this.length||0);g=Number(g);for(d=Number((void 0===d?0:d)||0);d<g;d++)this[d]=k;return this};$jscomp.array.fill$install=function(){Array.prototype.fill||(Array.prototype.fill=$jscomp.array.fill)};$jscomp.array.find=function(k,d){return $jscomp.array.findInternal_(this,k,d).v};$jscomp.array.find$install=function(){Array.prototype.find||(Array.prototype.find=$jscomp.array.find)};
$jscomp.array.findIndex=function(k,d){return $jscomp.array.findInternal_(this,k,d).i};$jscomp.array.findIndex$install=function(){Array.prototype.findIndex||(Array.prototype.findIndex=$jscomp.array.findIndex)};$jscomp.Map=function(k){k=void 0===k?[]:k;this.data_={};this.head_=$jscomp.Map.createHead_();this.size=0;if(k){k=$jscomp.makeIterator(k);for(var d=k.next();!d.done;d=k.next())d=d.value,this.set(d[0],d[1])}};
$jscomp.Map.checkBrowserConformance_=function(){var k=$jscomp.global.Map;if(!k||!k.prototype.entries||!Object.seal)return!1;try{var d=Object.seal({x:4}),g=new k($jscomp.makeIterator([[d,"s"]]));if("s"!=g.get(d)||1!=g.size||g.get({x:4})||g.set({x:4},"t")!=g||2!=g.size)return!1;var m=g.entries(),c=m.next();if(c.done||c.value[0]!=d||"s"!=c.value[1])return!1;c=m.next();return c.done||4!=c.value[0].x||"t"!=c.value[1]||!m.next().done?!1:!0}catch(a){return!1}};
$jscomp.Map.createHead_=function(){var k={};return k.previous=k.next=k.head=k};$jscomp.Map.getId_=function(k){if(!(k instanceof Object))return String(k);$jscomp.Map.key_ in k||k instanceof Object&&Object.isExtensible&&Object.isExtensible(k)&&$jscomp.Map.defineProperty_(k,$jscomp.Map.key_,++$jscomp.Map.index_);return $jscomp.Map.key_ in k?k[$jscomp.Map.key_]:" "+k};
$jscomp.Map.prototype.set=function(k,d){var g=this.maybeGetEntry_(k),m=g.id,c=g.list,g=g.entry;c||(c=this.data_[m]=[]);g?g.value=d:(g={next:this.head_,previous:this.head_.previous,head:this.head_,key:k,value:d},c.push(g),this.head_.previous.next=g,this.head_.previous=g,this.size++);return this};
$jscomp.Map.prototype["delete"]=function(k){var d=this.maybeGetEntry_(k);k=d.id;var g=d.list,m=d.index;return(d=d.entry)&&g?(g.splice(m,1),g.length||delete this.data_[k],d.previous.next=d.next,d.next.previous=d.previous,d.head=null,this.size--,!0):!1};$jscomp.Map.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=$jscomp.Map.createHead_();this.size=0};$jscomp.Map.prototype.has=function(k){return!!this.maybeGetEntry_(k).entry};
$jscomp.Map.prototype.get=function(k){return(k=this.maybeGetEntry_(k).entry)&&k.value};$jscomp.Map.prototype.maybeGetEntry_=function(k){var d=$jscomp.Map.getId_(k),g=this.data_[d];if(g)for(var m=0;m<g.length;m++){var c=g[m];if(k!==k&&c.key!==c.key||k===c.key)return{id:d,list:g,index:m,entry:c}}return{id:d,list:g,index:-1,entry:void 0}};$jscomp.Map.prototype.entries=function(){return this.iter_(function(k){return[k.key,k.value]})};$jscomp.Map.prototype.keys=function(){return this.iter_(function(k){return k.key})};
$jscomp.Map.prototype.values=function(){return this.iter_(function(k){return k.value})};$jscomp.Map.prototype.forEach=function(k,d){for(var g=$jscomp.makeIterator(this.entries()),m=g.next();!m.done;m=g.next())m=m.value,k.call(d,m[1],m[0],this)};
$jscomp.Map.prototype.iter_=function(k){var d=this,g=this.head_;$jscomp.initSymbol();$jscomp.initSymbolIterator();var m={};return m.next=function(){if(g){for(;g.head!=d.head_;)g=g.previous;for(;g.next!=g.head;)return g=g.next,{done:!1,value:k(g)};g=null}return{done:!0,value:void 0}},m[Symbol.iterator]=function(){return this},m};$jscomp.Map.index_=0;$jscomp.Map.defineProperty_=Object.defineProperty?function(k,d,g){Object.defineProperty(k,d,{value:String(g)})}:function(k,d,g){k[d]=String(g)};
$jscomp.Map.Entry_=function(){};$jscomp.Map.ASSUME_NO_NATIVE=!1;$jscomp.Map$install=function(){$jscomp.initSymbol();$jscomp.initSymbolIterator();!$jscomp.Map.ASSUME_NO_NATIVE&&$jscomp.Map.checkBrowserConformance_()?$jscomp.Map=$jscomp.global.Map:($jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Map.prototype[Symbol.iterator]=$jscomp.Map.prototype.entries,$jscomp.initSymbol(),$jscomp.Map.key_=Symbol("map-id-key"));$jscomp.Map$install=function(){}};$jscomp.math=$jscomp.math||{};
$jscomp.math.clz32=function(k){k=Number(k)>>>0;if(0===k)return 32;var d=0;0===(k&4294901760)&&(k<<=16,d+=16);0===(k&4278190080)&&(k<<=8,d+=8);0===(k&4026531840)&&(k<<=4,d+=4);0===(k&3221225472)&&(k<<=2,d+=2);0===(k&2147483648)&&d++;return d};$jscomp.math.imul=function(k,d){k=Number(k);d=Number(d);var g=k&65535,m=d&65535;return g*m+((k>>>16&65535)*m+g*(d>>>16&65535)<<16>>>0)|0};$jscomp.math.sign=function(k){k=Number(k);return 0===k||isNaN(k)?k:0<k?1:-1};
$jscomp.math.log10=function(k){return Math.log(k)/Math.LN10};$jscomp.math.log2=function(k){return Math.log(k)/Math.LN2};$jscomp.math.log1p=function(k){k=Number(k);if(.25>k&&-.25<k){for(var d=k,g=1,m=k,c=0,a=1;c!=m;)d*=k,a*=-1,m=(c=m)+a*d/++g;return m}return Math.log(1+k)};$jscomp.math.expm1=function(k){k=Number(k);if(.25>k&&-.25<k){for(var d=k,g=1,m=k,c=0;c!=m;)d*=k/++g,m=(c=m)+d;return m}return Math.exp(k)-1};$jscomp.math.cosh=function(k){k=Number(k);return(Math.exp(k)+Math.exp(-k))/2};
$jscomp.math.sinh=function(k){k=Number(k);return 0===k?k:(Math.exp(k)-Math.exp(-k))/2};$jscomp.math.tanh=function(k){k=Number(k);if(0===k)return k;var d=Math.exp(2*-Math.abs(k)),d=(1-d)/(1+d);return 0>k?-d:d};$jscomp.math.acosh=function(k){k=Number(k);return Math.log(k+Math.sqrt(k*k-1))};$jscomp.math.asinh=function(k){k=Number(k);if(0===k)return k;var d=Math.log(Math.abs(k)+Math.sqrt(k*k+1));return 0>k?-d:d};
$jscomp.math.atanh=function(k){k=Number(k);return($jscomp.math.log1p(k)-$jscomp.math.log1p(-k))/2};
$jscomp.math.hypot=function(k,d,g){for(var m=[],c=2;c<arguments.length;++c)m[c-2]=arguments[c];k=Number(k);d=Number(d);for(var a=Math.max(Math.abs(k),Math.abs(d)),b=$jscomp.makeIterator(m),c=b.next();!c.done;c=b.next())a=Math.max(a,Math.abs(c.value));if(1E100<a||1E-100>a){k/=a;d/=a;b=k*k+d*d;m=$jscomp.makeIterator(m);for(c=m.next();!c.done;c=m.next())c=c.value,c=Number(c)/a,b+=c*c;return Math.sqrt(b)*a}a=k*k+d*d;m=$jscomp.makeIterator(m);for(c=m.next();!c.done;c=m.next())c=c.value,a+=c*c;return Math.sqrt(a)};
$jscomp.math.trunc=function(k){k=Number(k);if(isNaN(k)||Infinity===k||-Infinity===k||0===k)return k;var d=Math.floor(Math.abs(k));return 0>k?-d:d};$jscomp.math.cbrt=function(k){if(0===k)return k;k=Number(k);var d=Math.pow(Math.abs(k),1/3);return 0>k?-d:d};$jscomp.number=$jscomp.number||{};$jscomp.number.isFinite=function(k){return"number"!==typeof k?!1:!isNaN(k)&&Infinity!==k&&-Infinity!==k};$jscomp.number.isInteger=function(k){return $jscomp.number.isFinite(k)?k===Math.floor(k):!1};
$jscomp.number.isNaN=function(k){return"number"===typeof k&&isNaN(k)};$jscomp.number.isSafeInteger=function(k){return $jscomp.number.isInteger(k)&&Math.abs(k)<=$jscomp.number.MAX_SAFE_INTEGER};$jscomp.number.EPSILON=Math.pow(2,-52);$jscomp.number.MAX_SAFE_INTEGER=9007199254740991;$jscomp.number.MIN_SAFE_INTEGER=-9007199254740991;$jscomp.object=$jscomp.object||{};
$jscomp.object.assign=function(k,d){for(var g=[],m=1;m<arguments.length;++m)g[m-1]=arguments[m];g=$jscomp.makeIterator(g);for(m=g.next();!m.done;m=g.next()){var m=m.value,c;for(c in m)Object.prototype.hasOwnProperty.call(m,c)&&(k[c]=m[c])}return k};$jscomp.object.is=function(k,d){return k===d?0!==k||1/k===1/d:k!==k&&d!==d};$jscomp.Set=function(k){k=void 0===k?[]:k;this.map_=new $jscomp.Map;if(k){k=$jscomp.makeIterator(k);for(var d=k.next();!d.done;d=k.next())this.add(d.value)}this.size=this.map_.size};
$jscomp.Set.checkBrowserConformance_=function(){var k=$jscomp.global.Set;if(!k||!k.prototype.entries||!Object.seal)return!1;var d=Object.seal({x:4}),k=new k($jscomp.makeIterator([d]));if(k.has(d)||1!=k.size||k.add(d)!=k||1!=k.size||k.add({x:4})!=k||2!=k.size)return!1;var k=k.entries(),g=k.next();if(g.done||g.value[0]!=d||g.value[1]!=d)return!1;g=k.next();return g.done||g.value[0]==d||4!=g.value[0].x||g.value[1]!=g.value[0]?!1:k.next().done};
$jscomp.Set.prototype.add=function(k){this.map_.set(k,k);this.size=this.map_.size;return this};$jscomp.Set.prototype["delete"]=function(k){k=this.map_["delete"](k);this.size=this.map_.size;return k};$jscomp.Set.prototype.clear=function(){this.map_.clear();this.size=0};$jscomp.Set.prototype.has=function(k){return this.map_.has(k)};$jscomp.Set.prototype.entries=function(){return this.map_.entries()};$jscomp.Set.prototype.values=function(){return this.map_.values()};
$jscomp.Set.prototype.forEach=function(k,d){var g=this;this.map_.forEach(function(m){return k.call(d,m,m,g)})};$jscomp.Set.ASSUME_NO_NATIVE=!1;$jscomp.Set$install=function(){!$jscomp.Set.ASSUME_NO_NATIVE&&$jscomp.Set.checkBrowserConformance_()?$jscomp.Set=$jscomp.global.Set:($jscomp.Map$install(),$jscomp.initSymbol(),$jscomp.initSymbolIterator(),$jscomp.Set.prototype[Symbol.iterator]=$jscomp.Set.prototype.values);$jscomp.Set$install=function(){}};$jscomp.string=$jscomp.string||{};
$jscomp.string.noRegExp_=function(k,d){if(k instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");};
$jscomp.string.fromCodePoint=function(k){for(var d=[],g=0;g<arguments.length;++g)d[g-0]=arguments[g];for(var g="",d=$jscomp.makeIterator(d),m=d.next();!m.done;m=d.next()){m=m.value;m=+m;if(0>m||1114111<m||m!==Math.floor(m))throw new RangeError("invalid_code_point "+m);65535>=m?g+=String.fromCharCode(m):(m-=65536,g+=String.fromCharCode(m>>>10&1023|55296),g+=String.fromCharCode(m&1023|56320))}return g};
$jscomp.string.repeat=function(k){var d=this.toString();if(0>k||1342177279<k)throw new RangeError("Invalid count value");k|=0;for(var g="";k;)if(k&1&&(g+=d),k>>>=1)d+=d;return g};$jscomp.string.repeat$install=function(){String.prototype.repeat||(String.prototype.repeat=$jscomp.string.repeat)};
$jscomp.string.codePointAt=function(k){var d=this.toString(),g=d.length;k=Number(k)||0;if(0<=k&&k<g){k|=0;var m=d.charCodeAt(k);if(55296>m||56319<m||k+1===g)return m;k=d.charCodeAt(k+1);return 56320>k||57343<k?m:1024*(m-55296)+k+9216}};$jscomp.string.codePointAt$install=function(){String.prototype.codePointAt||(String.prototype.codePointAt=$jscomp.string.codePointAt)};
$jscomp.string.includes=function(k,d){d=void 0===d?0:d;$jscomp.string.noRegExp_(k,"includes");return-1!==this.toString().indexOf(k,d)};$jscomp.string.includes$install=function(){String.prototype.includes||(String.prototype.includes=$jscomp.string.includes)};
$jscomp.string.startsWith=function(k,d){d=void 0===d?0:d;$jscomp.string.noRegExp_(k,"startsWith");var g=this.toString();k+="";for(var m=g.length,c=k.length,a=Math.max(0,Math.min(d|0,g.length)),b=0;b<c&&a<m;)if(g[a++]!=k[b++])return!1;return b>=c};$jscomp.string.startsWith$install=function(){String.prototype.startsWith||(String.prototype.startsWith=$jscomp.string.startsWith)};
$jscomp.string.endsWith=function(k,d){$jscomp.string.noRegExp_(k,"endsWith");var g=this.toString();k+="";void 0===d&&(d=g.length);for(var m=Math.max(0,Math.min(d|0,g.length)),c=k.length;0<c&&0<m;)if(g[--m]!=k[--c])return!1;return 0>=c};$jscomp.string.endsWith$install=function(){String.prototype.endsWith||(String.prototype.endsWith=$jscomp.string.endsWith)};
(function(k){function d(m){if(g[m])return g[m].exports;var c=g[m]={exports:{},id:m,loaded:!1};k[m].call(c.exports,c,c.exports,d);c.loaded=!0;return c.exports}var g={};d.m=k;d.c=g;d.p="";return d(0)})([function(k,d,g){g(1);g(4);g(12);g(29);g(74);g(78);g(80);g(81);k.exports=g(83)},function(k,d,g){k=g(2);d.rpc=new k.RPC(self)},function(k,d,g){function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?
a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function b(a,b){f.set(a,b)}var e=function w(a,b,e){null===a&&(a=Function.prototype);var c=
Object.getOwnPropertyDescriptor(a,b);if(void 0===c)return a=Object.getPrototypeOf(a),null===a?void 0:w(a,b,e);if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(e)},n=function(){function a(b,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(b,n.key,n)}}return function(b,e,c){e&&a(b.prototype,e);c&&a(b,c);return b}}();k=g(3);var f=new Map;d.registerRPC=b;g=function(){function b(e){var c=this;
a(this,b);this.target=e;this.objects=new Map;this.nextId=-1;e.onmessage=function(a){a=a.data;f.get(a.functionName).call(c,a)}}n(b,[{key:"set",value:function(a,b){this.objects.set(a,b)}},{key:"delete",value:function(a){this.objects.delete(a)}},{key:"get",value:function(a){return this.objects.get(a)}},{key:"getRef",value:function(a){var b=this.get(a.id);b.referencedGeneration=a.gen;b.addRef();return b}},{key:"invoke",value:function(a,b,e){b.functionName=a;this.target.postMessage(b,e)}},{key:"newId",
value:function(){return this.nextId--}},{key:"numObjects",get:function(){return this.objects.size}}]);return b}();d.RPC=g;k=function(b){function f(){a(this,f);for(var b=arguments.length,e=Array(b),c=0;c<b;c++)e[c]=arguments[c];var n,b=m(this,(n=Object.getPrototypeOf(f)).call.apply(n,[].concat([this],$jscomp.arrayFromIterable(e))));b.rpc=null;b.rpcId=null;return b}c(f,b);n(f,[{key:"initializeSharedObject",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?a.newId():arguments[1];this.rpc=
a;this.rpcId=b;this.isOwner=!1;a.set(b,this)}},{key:"initializeCounterpart",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];this.initializeSharedObject(a);this.referencedGeneration=this.unreferencedGeneration=0;this.isOwner=!0;b.id=this.rpcId;b.type=this.RPC_TYPE_ID;a.invoke("SharedObject.new",b)}},{key:"dispose",value:function(){e(Object.getPrototypeOf(f.prototype),"dispose",this).call(this)}},{key:"addCounterpartRef",value:function(){return{id:this.rpcId,gen:++this.referencedGeneration}}},
{key:"refCountReachedZero",value:function(){!0===this.isOwner?this.referencedGeneration===this.unreferencedGeneration&&this.ownerDispose():!1===this.isOwner?this.rpc.invoke("SharedObject.refCountReachedZero",{id:this.rpcId,gen:this.referencedGeneration}):e(Object.getPrototypeOf(f.prototype),"refCountReachedZero",this).call(this)}},{key:"ownerDispose",value:function(){var a=this.rpc,b=this.rpcId;e(Object.getPrototypeOf(f.prototype),"refCountReachedZero",this).call(this);a.delete(b);a.invoke("SharedObject.dispose",
{id:b})}},{key:"counterpartRefCountReachedZero",value:function(a){this.unreferencedGeneration=a;0===this.refCount&&a===this.referencedGeneration&&this.ownerDispose()}}]);return f}(k.RefCounted);d.SharedObject=k;k=function(b){function e(b){var c=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];a(this,e);var n=m(this,Object.getPrototypeOf(e).call(this));null!=b&&n.initializeSharedObject(b,c.id);return n}c(e,b);return e}(k);d.SharedObjectCounterpart=k;b("SharedObject.dispose",function(a){a=
this.get(a.id);if(0!==a.refCount)throw Error("Attempted to dispose object with non-zero reference count.");a.disposed();this.delete(a.rpcId);a.rpcId=null;a.rpc=null});b("SharedObject.refCountReachedZero",function(a){this.get(a.id).counterpartRefCountReachedZero(a.gen)});var h=new Map;d.registerSharedObjectOwner=function(a){return function(b){b.prototype.RPC_TYPE_ID=a}};d.registerSharedObject=function(a){return function(b){h.set(a,b);b.prototype.RPC_TYPE_ID=a}};b("SharedObject.new",function(a){--(new (h.get(a.type))(this,
a)).refCount})},function(k,d){var g=function(){function c(a,b){for(var e=0;e<b.length;e++){var c=b[e];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}(),m=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.refCount=1}g(c,[{key:"addRef",value:function(){++this.refCount;return this}},{key:"dispose",value:function(){0===
--this.refCount&&this.refCountReachedZero()}},{key:"refCountReachedZero",value:function(){this.disposed();var a=this.disposers;if(null!=a){for(var b=a.length;0<b;--b){var e=a[b-1];"object"===typeof e?e.dispose():e.call(this)}this.disposers=void 0}}},{key:"disposed",value:function(){}},{key:"registerDisposer",value:function(a){var b=this.disposers;null==b?this.disposers=[a]:b.push(a);return a}},{key:"unregisterDisposer",value:function(a){var b=this.disposers;if(null!=b){var e=b.indexOf(a);-1!==e&&
b.splice(e,1)}return a}},{key:"registerSignalBinding",value:function(a){this.registerDisposer(function(){return a.detach()})}},{key:"registerEventListener",value:function(a,b,e,c){a.addEventListener(b,e,c);this.registerDisposer(function(){return a.removeEventListener(b,e,c)})}},{key:"registerCancellable",value:function(a){this.registerDisposer(function(){a.cancel()});return a}}]);return c}();d.RefCounted=m},function(k,d,g){function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function b(a){return new t(new p.default(a),
r.default)}function e(a,b,e,c,n,u){for(;1>b.availableItems||b.availableSize<a;){var f=n.next().value;if(void 0===f)return!1;var h=f.priorityTier;if(h<e||h===e&&f.priority>=c)return!1;u(f)}return!0}var n=function(){function a(b,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(b,n.key,n)}}return function(b,e,c){e&&a(b.prototype,e);c&&a(b,c);return b}}();k=this&&this.__decorate||function(a,b,e,c){var n=arguments.length,
u=3>n?b:null===c?c=Object.getOwnPropertyDescriptor(b,e):c,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)u=Reflect.decorate(a,b,e,c);else for(var h=a.length-1;0<=h;h--)if(f=a[h])u=(3>n?f(u):3<n?f(b,e,u):f(b,e))||u;return 3<n&&u&&Object.defineProperty(b,e,u),u};var f=g(5),h=g(2),l=g(6),w=g(7),p=g(8),C=g(9),r=g(10),A=g(1),q=g(11),y=function(){function b(){a(this,b);this.key=this.source=this.prev1=this.next1=this.child1=this.prev0=this.next0=this.child0=null;this.state=f.ChunkState.NEW;
this.newPriority=this.priority=0;this.newPriorityTier=this.priorityTier=f.ChunkPriorityTier.RECENT;this.backendOnly=!1;this.cancelDownload=null}n(b,[{key:"initialize",value:function(a){this.key=a;this.state=f.ChunkState.NEW;this.priority=Number.NEGATIVE_INFINITY;this.priorityTier=f.ChunkPriorityTier.RECENT;this.newPriority=Number.NEGATIVE_INFINITY;this.newPriorityTier=f.ChunkPriorityTier.RECENT}},{key:"updatePriorityProperties",value:function(){this.priorityTier=this.newPriorityTier;this.priority=
this.newPriority;this.newPriorityTier=f.ChunkPriorityTier.RECENT;this.newPriority=Number.NEGATIVE_INFINITY}},{key:"dispose",value:function(){this.source=null}},{key:"downloadFailed",value:function(){this.queueManager.updateChunkState(this,f.ChunkState.FAILED)}},{key:"downloadSucceeded",value:function(){this.queueManager.updateChunkState(this,f.ChunkState.SYSTEM_MEMORY_WORKER)}},{key:"freeSystemMemory",value:function(){}},{key:"serialize",value:function(a,b){a.id=this.key;a.source=this.source.rpcId;
a["new"]=!0}},{key:"toString",value:function(){return this.key}},{key:"chunkManager",get:function(){return this.source.chunkManager}},{key:"queueManager",get:function(){return this.source.chunkManager.queueManager}}],[{key:"priorityLess",value:function(a,b){return a.priority<b.priority}},{key:"priorityGreater",value:function(a,b){return a.priority>b.priority}}]);return b}();d.Chunk=y;g=function(b){function e(b,c){a(this,e);var n=m(this,Object.getPrototypeOf(e).call(this,b,c));n.chunks=new Map;n.freeChunks=
[];n.chunkManager=b.get(c.chunkManager);return n}c(e,b);n(e,[{key:"getNewChunk_",value:function(a){var b=this.freeChunks,e=b.length;if(0<e)return a=b[e-1],b.length=e-1,a.source=this,a;b=new a;b.source=this;return b}},{key:"download",value:function(a){}},{key:"addChunk",value:function(a){var b=this.chunks;0===b.size&&this.addRef();b.set(a.key,a)}},{key:"removeChunk",value:function(a){var b=this.chunks,e=this.freeChunks;b.delete(a.key);a.dispose();e[e.length]=a;0===b.size&&this.dispose()}}]);return e}(h.SharedObjectCounterpart);
d.ChunkSource=g;d.handleChunkDownloadPromise=function(a,b,e){a.cancelDownload=function(){a.cancelDownload=null;q.cancelPromise(b)};b.then(function(b){if(null!==a.cancelDownload){a.cancelDownload=null;try{e.call(void 0,a,b),a.downloadSucceeded()}catch(c){console.log("Failed to decode chunk "+a+": "+c),a.downloadFailed()}}},function(b){null!==a.cancelDownload&&(a.cancelDownload=null,a.downloadFailed(),console.log("Download failed for chunk "+a))})};var E;(function(a){a[a.MIN=0]="MIN";a[a.MAX=1]="MAX"})(E||
(E={}));var t=function(){function b(e,c){a(this,b);this.heapOperations=e;this.linkedListOperations=c;this.heapRoots=[null,null];this.recentHead=new y;c.initializeHead(this.recentHead)}n(b,[{key:"add",value:function(a){var b=a.priorityTier;if(b===f.ChunkPriorityTier.RECENT)this.linkedListOperations.insertAfter(this.recentHead,a);else{var e=this.heapRoots;e[b]=this.heapOperations.meld(e[b],a)}}},{key:"candidates",value:function(){function a(x,k){for(;;)switch(b){case 0:if(K.heapOperations.compare!==
y.priorityLess){b=1;break}g=K.linkedListOperations;r=K.recentHead;case 3:C=g.back(r);if(null!=C){b=5;break}b=4;break;case 5:return b=7,{value:C,done:!1};case 7:if(void 0===k){b=8;break}b=-1;throw k;case 8:case 6:b=3;break;case 4:d=K.heapRoots,w=f.ChunkPriorityTier.LAST_ORDERED_TIER;case 9:if(!(w>=f.ChunkPriorityTier.FIRST_ORDERED_TIER)){b=11;break}case 12:p=d[w];if(null!=p){b=14;break}b=13;break;case 14:return b=16,{value:p,done:!1};case 16:if(void 0===k){b=17;break}b=-1;throw k;case 17:case 15:b=
12;break;case 13:case 10:--w;b=9;break;case 11:b=2;break;case 1:t=K.heapRoots,l=f.ChunkPriorityTier.FIRST_ORDERED_TIER;case 18:if(!(l<=f.ChunkPriorityTier.LAST_ORDERED_TIER)){b=20;break}case 21:h=t[l];if(null!=h){b=23;break}b=22;break;case 23:return b=25,{value:h,done:!1};case 25:if(void 0===k){b=26;break}b=-1;throw k;case 26:case 24:b=21;break;case 22:case 19:++l;b=18;break;case 20:n=K.linkedListOperations,c=K.recentHead;case 27:e=n.front(c);if(null!=e){b=29;break}b=28;break;case 29:return b=31,
{value:e,done:!1};case 31:if(void 0===k){b=32;break}b=-1;throw k;case 32:case 30:b=27;break;case 28:case 2:b=-1;default:return{value:void 0,done:!0}}}var b=0,e,c,n,h,l,t,p,w,d,C,r,g,K=this,x={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();x[Symbol.iterator]=function(){return this};return x}},{key:"delete",value:function(a){var b=a.priorityTier;if(b===f.ChunkPriorityTier.RECENT)this.linkedListOperations.pop(a);
else{var e=this.heapRoots;e[b]=this.heapOperations.remove(e[b],a)}}}]);return b}();E=function(h){function l(e,c){a(this,l);var n=m(this,Object.getPrototypeOf(l).call(this,e,c));n.queuedPromotionQueue=b(y.priorityGreater);n.downloadEvictionQueue=b(y.priorityLess);n.systemMemoryEvictionQueue=new t(new w.default(y.priorityLess),C.default);n.gpuMemoryPromotionQueue=b(y.priorityGreater);n.gpuMemoryEvictionQueue=b(y.priorityLess);n.updatePending=null;n.numQueued=0;n.numFailed=0;n.gpuMemoryCapacity=f.AvailableCapacity.fromObject(c.gpuMemoryCapacity);
n.systemMemoryCapacity=f.AvailableCapacity.fromObject(c.systemMemoryCapacity);n.downloadCapacity=f.AvailableCapacity.fromObject(c.downloadCapacity);return n}c(l,h);n(l,[{key:"scheduleUpdate",value:function(){null===this.updatePending&&(this.updatePending=setTimeout(this.process.bind(this),0))}},{key:"chunkQueuesForChunk",value:function(a){function b(l,t){for(;;)switch(e){case 0:n=!1;c=a.state;if(!n&&c!==f.ChunkState.QUEUED){e=2;break}n=!0;e=3;return{value:h.queuedPromotionQueue,done:!1};case 3:if(void 0===
t){e=4;break}e=-1;throw t;case 4:e=1;break;case 2:if(!n&&c!==f.ChunkState.DOWNLOADING){e=5;break}n=!0;e=6;return{value:h.downloadEvictionQueue,done:!1};case 6:if(void 0===t){e=7;break}e=-1;throw t;case 7:return e=8,{value:h.systemMemoryEvictionQueue,done:!1};case 8:if(void 0===t){e=9;break}e=-1;throw t;case 9:e=1;break;case 5:if(n||c===f.ChunkState.SYSTEM_MEMORY_WORKER)n=!0;if(!n&&c!==f.ChunkState.SYSTEM_MEMORY){e=10;break}n=!0;e=11;return{value:h.systemMemoryEvictionQueue,done:!1};case 11:if(void 0===
t){e=12;break}e=-1;throw t;case 12:if(a.priorityTier===f.ChunkPriorityTier.RECENT||a.backendOnly){e=13;break}e=14;return{value:h.gpuMemoryPromotionQueue,done:!1};case 14:if(void 0===t){e=15;break}e=-1;throw t;case 15:case 13:e=1;break;case 10:if(!n&&c!==f.ChunkState.GPU_MEMORY){e=16;break}n=!0;e=17;return{value:h.systemMemoryEvictionQueue,done:!1};case 17:if(void 0===t){e=18;break}e=-1;throw t;case 18:return e=19,{value:h.gpuMemoryEvictionQueue,done:!1};case 19:if(void 0===t){e=20;break}e=-1;throw t;
case 20:e=1;break;case 16:case 1:e=-1;default:return{value:void 0,done:!0}}}var e=0,c,n,h=this,l={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();l[Symbol.iterator]=function(){return this};return l}},{key:"adjustCapacitiesForChunk",value:function(a,b){var e=b?-1:1;switch(a.state){case f.ChunkState.FAILED:this.numFailed-=e;break;case f.ChunkState.QUEUED:this.numQueued-=e;break;case f.ChunkState.DOWNLOADING:this.downloadCapacity.adjust(e,
0);this.systemMemoryCapacity.adjust(e,0);break;case f.ChunkState.SYSTEM_MEMORY:case f.ChunkState.SYSTEM_MEMORY_WORKER:this.systemMemoryCapacity.adjust(e,e*a.systemMemoryBytes);break;case f.ChunkState.GPU_MEMORY:this.systemMemoryCapacity.adjust(e,e*a.systemMemoryBytes),this.gpuMemoryCapacity.adjust(e,e*a.gpuMemoryBytes)}}},{key:"removeChunkFromQueues_",value:function(a){for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),e=b.next();!e.done;e=b.next())e.value.delete(a)}},{key:"addChunkToQueues_",
value:function(a){if(a.state===f.ChunkState.QUEUED&&a.priorityTier===f.ChunkPriorityTier.RECENT)return a.source.removeChunk(a),this.adjustCapacitiesForChunk(a,!1),!1;for(var b=$jscomp.makeIterator(this.chunkQueuesForChunk(a)),e=b.next();!e.done;e=b.next())e.value.add(a);return!0}},{key:"performChunkPriorityUpdate",value:function(a){a.priorityTier===a.newPriorityTier&&a.priority===a.newPriority?(a.newPriorityTier=f.ChunkPriorityTier.RECENT,a.newPriority=Number.NEGATIVE_INFINITY):(this.removeChunkFromQueues_(a),
a.updatePriorityProperties(),a.state===f.ChunkState.NEW&&(a.state=f.ChunkState.QUEUED,this.adjustCapacitiesForChunk(a,!0)),this.addChunkToQueues_(a))}},{key:"updateChunkState",value:function(a,b){b!==a.state&&(this.adjustCapacitiesForChunk(a,!1),this.removeChunkFromQueues_(a),a.state=b,this.adjustCapacitiesForChunk(a,!0),this.addChunkToQueues_(a),this.scheduleUpdate())}},{key:"processGPUPromotions_",value:function(){function a(e){b.freeChunkGPUMemory(e);e.source.chunkManager.queueManager.updateChunkState(e,
f.ChunkState.SYSTEM_MEMORY)}for(var b=this,c=this.gpuMemoryPromotionQueue.candidates(),n=this.gpuMemoryEvictionQueue.candidates(),h=this.gpuMemoryCapacity;;){var l=c.next().value;if(void 0===l)break;else{if(!e(l.gpuMemoryBytes,h,l.priorityTier,l.priority,n,a))break;this.copyChunkToGPU(l);this.updateChunkState(l,f.ChunkState.GPU_MEMORY)}}}},{key:"freeChunkGPUMemory",value:function(a){A.rpc.invoke("Chunk.update",{id:a.key,state:f.ChunkState.SYSTEM_MEMORY,source:a.source.rpcId})}},{key:"freeChunkSystemMemory",
value:function(a){a.state===f.ChunkState.SYSTEM_MEMORY_WORKER?A.rpc.invoke("Chunk.update",{id:a.key,state:f.ChunkState.EXPIRED,source:a.source.rpcId}):a.freeSystemMemory()}},{key:"copyChunkToGPU",value:function(a){if(a.state===f.ChunkState.SYSTEM_MEMORY)A.rpc.invoke("Chunk.update",{id:a.key,source:a.source.rpcId,state:f.ChunkState.GPU_MEMORY});else{var b={},e=[];a.serialize(b,e);b.state=f.ChunkState.GPU_MEMORY;A.rpc.invoke("Chunk.update",b,e)}}},{key:"processQueuePromotions_",value:function(){function a(e){switch(e.state){case f.ChunkState.DOWNLOADING:e.cancelDownload();
break;case f.ChunkState.GPU_MEMORY:b.freeChunkGPUMemory(e);case f.ChunkState.SYSTEM_MEMORY_WORKER:case f.ChunkState.SYSTEM_MEMORY:b.freeChunkSystemMemory(e)}e.source.chunkManager.queueManager.updateChunkState(e,f.ChunkState.QUEUED)}for(var b=this,c=this.queuedPromotionQueue.candidates(),n=this.downloadEvictionQueue.candidates(),h=this.systemMemoryEvictionQueue.candidates(),l=this.downloadCapacity,t=this.systemMemoryCapacity;;){var p=c.next();if(p.done)break;var p=p.value,w=p.priorityTier,d=p.priority;
if(!e(0,l,w,d,n,a))break;if(!e(0,t,w,d,h,a))break;this.updateChunkState(p,f.ChunkState.DOWNLOADING);p.source.download(p)}}},{key:"process",value:function(){this.updatePending&&(this.updatePending=null,this.processGPUPromotions_(),this.processQueuePromotions_(),this.logStatistics())}},{key:"logStatistics",value:function(){}}]);return l}(h.SharedObjectCounterpart);E=k([h.registerSharedObject(f.CHUNK_QUEUE_MANAGER_RPC_ID)],E);d.ChunkQueueManager=E;E=function(b){function e(b,c){a(this,e);var n=m(this,
Object.getPrototypeOf(e).call(this,b,c));n.existingTierChunks=[];n.newTierChunks=[];n.updatePending=null;n.recomputeChunkPriorities=new l.Signal;n.queueManager=b.get(c.chunkQueueManager).addRef();for(var u=f.ChunkPriorityTier.FIRST_TIER;u<=f.ChunkPriorityTier.LAST_TIER;++u)u!==f.ChunkPriorityTier.RECENT&&(n.existingTierChunks[u]=[]);return n}c(e,b);n(e,[{key:"scheduleUpdateChunkPriorities",value:function(){null===this.updatePending&&(this.updatePending=setTimeout(this.recomputeChunkPriorities_.bind(this),
0))}},{key:"recomputeChunkPriorities_",value:function(){this.updatePending=null;this.recomputeChunkPriorities.dispatch();this.updateQueueState([f.ChunkPriorityTier.VISIBLE])}},{key:"requestChunk",value:function(a,b,e){a.newPriorityTier===f.ChunkPriorityTier.RECENT&&this.newTierChunks.push(a);a.newPriorityTier=b;a.newPriority=e}},{key:"updateQueueState",value:function(a){var b=this.existingTierChunks,e=this.queueManager;a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){for(var c=b[c.value],
n=$jscomp.makeIterator(c),h=n.next();!h.done;h=n.next())h=h.value,h.newPriorityTier===f.ChunkPriorityTier.RECENT&&e.performChunkPriorityUpdate(h);c.length=0}a=this.newTierChunks;c=$jscomp.makeIterator(a);for(n=c.next();!n.done;n=c.next())n=n.value,e.performChunkPriorityUpdate(n),b[n.priorityTier].push(n);a.length=0;this.queueManager.scheduleUpdate()}}]);return e}(h.SharedObjectCounterpart);E=k([h.registerSharedObject(f.CHUNK_MANAGER_RPC_ID)],E);d.ChunkManager=E;d.registerChunkSource=function(a){return function(b){h.registerSharedObject(a.RPC_ID)(b);
b.prototype.toString=function(){return a.stringify(this.parameters)}}}},function(k,d){var g=function(){function c(a,b){for(var e=0;e<b.length;e++){var c=b[e];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}();(function(c){c[c.GPU_MEMORY=0]="GPU_MEMORY";c[c.SYSTEM_MEMORY=1]="SYSTEM_MEMORY";c[c.SYSTEM_MEMORY_WORKER=2]="SYSTEM_MEMORY_WORKER";c[c.DOWNLOADING=3]="DOWNLOADING";c[c.QUEUED=
4]="QUEUED";c[c.NEW=5]="NEW";c[c.FAILED=6]="FAILED";c[c.EXPIRED=7]="EXPIRED"})(d.ChunkState||(d.ChunkState={}));(function(c){c[c.FIRST_TIER=0]="FIRST_TIER";c[c.FIRST_ORDERED_TIER=0]="FIRST_ORDERED_TIER";c[c.VISIBLE=0]="VISIBLE";c[c.PREFETCH=1]="PREFETCH";c[c.LAST_ORDERED_TIER=1]="LAST_ORDERED_TIER";c[c.RECENT=2]="RECENT";c[c.LAST_TIER=2]="LAST_TIER"})(d.ChunkPriorityTier||(d.ChunkPriorityTier={}));var m=function(){function c(a,b){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
this.itemCapacity=this.availableItems=a;this.sizeCapacity=this.availableSize=b}g(c,[{key:"adjust",value:function(a,b){this.availableItems+=a;this.availableSize+=b}},{key:"toString",value:function(){return this.availableItems+"/"+this.itemCapacity+" items, "+this.availableSize+"/"+this.sizeCapacity+" size"}},{key:"toObject",value:function(){return{itemCapacity:this.itemCapacity,sizeCapacity:this.sizeCapacity}}}],[{key:"fromObject",value:function(a){return new c(a.itemCapacity,a.sizeCapacity)}}]);return c}();
m.INFINITE=new m(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);d.AvailableCapacity=m;d.CHUNK_QUEUE_MANAGER_RPC_ID="ChunkQueueManager";d.CHUNK_MANAGER_RPC_ID="ChunkManager"},function(k,d,g){var m;(function(c){function a(a,b,e,c,w){this._listener=b;this._isOnce=e;this.context=c;this._signal=a;this._priority=w||0}function b(a,b){if("function"!==typeof a)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b));}function e(){this._bindings=[];this._prevParams=
null;var a=this;this.dispatch=function(){e.prototype.dispatch.apply(a,arguments)}}a.prototype={active:!0,params:null,execute:function(a){var b;this.active&&this._listener&&(a=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,a),this._isOnce&&this.detach());return b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},
getSignal:function(){return this._signal},_destroy:function(){delete this._signal;delete this._listener;delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};e.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(b,e,c,l){var w=this._indexOfListener(b,c);if(-1!==w){if(b=this._bindings[w],b.isOnce()!==e)throw Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":
"")+"() the same listener without removing the relationship first.");}else b=new a(this,b,e,c,l),this._addBinding(b);this.memorize&&this._prevParams&&b.execute(this._prevParams);return b},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var e=this._bindings.length,c;e--;)if(c=this._bindings[e],c._listener===a&&c.context===b)return e;return-1},has:function(a,
b){return-1!==this._indexOfListener(a,b)},add:function(a,e,c){b(a,"add");return this._registerListener(a,!1,e,c)},addOnce:function(a,e,c){b(a,"addOnce");return this._registerListener(a,!0,e,c)},remove:function(a,e){b(a,"remove");var c=this._indexOfListener(a,e);-1!==c&&(this._bindings[c]._destroy(),this._bindings.splice(c,1));return a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},
halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var b=Array.prototype.slice.call(arguments),e=this._bindings.length,c;this.memorize&&(this._prevParams=b);if(e){c=this._bindings.slice();this._shouldPropagate=!0;do e--;while(c[e]&&this._shouldPropagate&&!1!==c[e].execute(b))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+
this.getNumListeners()+"]"}};e.Signal=e;!(m=function(){return e}.call(d,g,d,k),void 0!==m&&(k.exports=m))})(this)},function(k,d){var g=function(){function c(a,b){for(var e=0;e<b.length;e++){var c=b[e];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}(),m=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.compare=a}
g(c,[{key:"meld",value:function(a,b){if(null===b)return a;if(null===a)return b;var e=this.compare;e(b,a)&&(e=a,a=b,b=e);e=a.child0;b.next0=e;b.prev0=a;null!==e&&(e.prev0=b);a.child0=b;return a}},{key:"combineChildren",value:function(a){var b=a.child0;if(null===b)return null;for(a=null;;){var e=b.next0,c=void 0,f=void 0;null===e?(c=null,f=b):(c=e.next0,f=this.meld(b,e));f.next0=a;a=f;if(null===c)break;b=c}b=a;for(a=a.next0;null!==a;)e=a.next0,b=this.meld(b,a),a=e;b.prev0=null;b.next0=null;return b}},
{key:"removeMin",value:function(a){var b=this.combineChildren(a);a.next0=null;a.prev0=null;a.child0=null;return b}},{key:"remove",value:function(a,b){if(a===b)return this.removeMin(a);var e=b.prev0,c=b.next0;e.child0===b?e.child0=c:e.next0=c;null!==c&&(c.prev0=e);e=this.meld(a,this.combineChildren(b));b.next0=null;b.prev0=null;b.child0=null;return e}},{key:"entries",value:function(a){function b(b,p){for(;;)switch(e){case 0:if(null===a){e=1;break}l=a.child0;e=2;return{value:a,done:!1};case 2:if(void 0===
p){e=3;break}e=-1;throw p;case 3:case 4:if(null===l){e=5;break}h=l.next0;f=$jscomp.makeIterator(w.entries(l));case 6:if((c=f.next(b)).done){e=7;break}e=8;return{value:c.value,done:!1};case 8:if(void 0===p){e=9;break}e=-1;throw p;case 9:e=6;break;case 7:l=h;e=4;break;case 5:case 1:e=-1;default:return{value:void 0,done:!0}}}var e=0,c,f,h,l,w=this,p={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();
p[Symbol.iterator]=function(){return this};return p}},{key:"removedEntries",value:function(a){function b(b,p){for(;;)switch(e){case 0:if(null===a){e=1;break}l=a.child0;a.child0=null;a.next0=null;a.prev0=null;e=2;return{value:a,done:!1};case 2:if(void 0===p){e=3;break}e=-1;throw p;case 3:case 4:if(null===l){e=5;break}h=l.next0;l.child0=null;l.next0=null;l.prev0=null;f=$jscomp.makeIterator(w.entries(l));case 6:if((c=f.next(b)).done){e=7;break}e=8;return{value:c.value,done:!1};case 8:if(void 0===p){e=
9;break}e=-1;throw p;case 9:e=6;break;case 7:l=h;e=4;break;case 5:case 1:e=-1;default:return{value:void 0,done:!0}}}var e=0,c,f,h,l,w=this,p={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();p[Symbol.iterator]=function(){return this};return p}}]);return c}();Object.defineProperty(d,"__esModule",{value:!0});d.default=m},function(k,d){var g=function(){function c(a,b){for(var e=0;e<b.length;e++){var c=
b[e];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}(),m=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.compare=a}g(c,[{key:"meld",value:function(a,b){if(null===b)return a;if(null===a)return b;var e=this.compare;e(b,a)&&(e=a,a=b,b=e);e=a.child1;b.next1=e;b.prev1=a;null!==e&&(e.prev1=b);a.child1=b;return a}},{key:"combineChildren",
value:function(a){var b=a.child1;if(null===b)return null;for(a=null;;){var e=b.next1,c=void 0,f=void 0;null===e?(c=null,f=b):(c=e.next1,f=this.meld(b,e));f.next1=a;a=f;if(null===c)break;b=c}b=a;for(a=a.next1;null!==a;)e=a.next1,b=this.meld(b,a),a=e;b.prev1=null;b.next1=null;return b}},{key:"removeMin",value:function(a){var b=this.combineChildren(a);a.next1=null;a.prev1=null;a.child1=null;return b}},{key:"remove",value:function(a,b){if(a===b)return this.removeMin(a);var e=b.prev1,c=b.next1;e.child1===
b?e.child1=c:e.next1=c;null!==c&&(c.prev1=e);e=this.meld(a,this.combineChildren(b));b.next1=null;b.prev1=null;b.child1=null;return e}},{key:"entries",value:function(a){function b(b,p){for(;;)switch(e){case 0:if(null===a){e=1;break}l=a.child1;e=2;return{value:a,done:!1};case 2:if(void 0===p){e=3;break}e=-1;throw p;case 3:case 4:if(null===l){e=5;break}h=l.next1;f=$jscomp.makeIterator(w.entries(l));case 6:if((c=f.next(b)).done){e=7;break}e=8;return{value:c.value,done:!1};case 8:if(void 0===p){e=9;break}e=
-1;throw p;case 9:e=6;break;case 7:l=h;e=4;break;case 5:case 1:e=-1;default:return{value:void 0,done:!0}}}var e=0,c,f,h,l,w=this,p={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();p[Symbol.iterator]=function(){return this};return p}},{key:"removedEntries",value:function(a){function b(b,p){for(;;)switch(e){case 0:if(null===a){e=1;break}l=a.child1;a.child1=null;a.next1=null;a.prev1=null;
e=2;return{value:a,done:!1};case 2:if(void 0===p){e=3;break}e=-1;throw p;case 3:case 4:if(null===l){e=5;break}h=l.next1;l.child1=null;l.next1=null;l.prev1=null;f=$jscomp.makeIterator(w.entries(l));case 6:if((c=f.next(b)).done){e=7;break}e=8;return{value:c.value,done:!1};case 8:if(void 0===p){e=9;break}e=-1;throw p;case 9:e=6;break;case 7:l=h;e=4;break;case 5:case 1:e=-1;default:return{value:void 0,done:!0}}}var e=0,c,f,h,l,w=this,p={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,
a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();p[Symbol.iterator]=function(){return this};return p}}]);return c}();Object.defineProperty(d,"__esModule",{value:!0});d.default=m},function(k,d){var g=function(){function c(a,b){for(var e=0;e<b.length;e++){var c=b[e];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}(),m=function(){function c(){if(!(this instanceof
c))throw new TypeError("Cannot call a class as a function");}g(c,null,[{key:"insertAfter",value:function(a,b){var e=a.next0;b.next0=e;b.prev0=a;a.next0=b;e.prev0=b}},{key:"insertBefore",value:function(a,b){var e=a.prev0;b.prev0=e;b.next0=a;a.prev0=b;e.next0=b}},{key:"front",value:function(a){var b=a.next0;return b===a?null:b}},{key:"back",value:function(a){var b=a.prev0;return b===a?null:b}},{key:"pop",value:function(a){var b=a.next0,e=a.prev0;b.prev0=e;e.next0=b;a.next0=null;a.prev0=null;return a}},
{key:"iterator",value:function(a){function b(b,f){for(;;)switch(e){case 0:c=a.next0;case 1:if(c===a){e=3;break}e=4;return{value:c,done:!1};case 4:if(void 0===f){e=5;break}e=-1;throw f;case 5:case 2:c=c.next0;e=1;break;case 3:e=-1;default:return{value:void 0,done:!0}}}var e=0,c,f={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();f[Symbol.iterator]=function(){return this};return f}},{key:"reverseIterator",
value:function(a){function b(b,f){for(;;)switch(e){case 0:c=a.prev0;case 1:if(c===a){e=3;break}e=4;return{value:c,done:!1};case 4:if(void 0===f){e=5;break}e=-1;throw f;case 5:case 2:c=c.prev0;e=1;break;case 3:e=-1;default:return{value:void 0,done:!0}}}var e=0,c,f={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();f[Symbol.iterator]=function(){return this};return f}},{key:"initializeHead",
value:function(a){a.next0=a.prev0=a}}]);return c}();Object.defineProperty(d,"__esModule",{value:!0});d.default=m},function(k,d){var g=function(){function c(a,b){for(var e=0;e<b.length;e++){var c=b[e];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}(),m=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");}g(c,null,[{key:"insertAfter",
value:function(a,b){var e=a.next1;b.next1=e;b.prev1=a;a.next1=b;e.prev1=b}},{key:"insertBefore",value:function(a,b){var e=a.prev1;b.prev1=e;b.next1=a;a.prev1=b;e.next1=b}},{key:"front",value:function(a){var b=a.next1;return b===a?null:b}},{key:"back",value:function(a){var b=a.prev1;return b===a?null:b}},{key:"pop",value:function(a){var b=a.next1,e=a.prev1;b.prev1=e;e.next1=b;a.next1=null;a.prev1=null;return a}},{key:"iterator",value:function(a){function b(b,f){for(;;)switch(e){case 0:c=a.next1;case 1:if(c===
a){e=3;break}e=4;return{value:c,done:!1};case 4:if(void 0===f){e=5;break}e=-1;throw f;case 5:case 2:c=c.next1;e=1;break;case 3:e=-1;default:return{value:void 0,done:!0}}}var e=0,c,f={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();f[Symbol.iterator]=function(){return this};return f}},{key:"reverseIterator",value:function(a){function b(b,f){for(;;)switch(e){case 0:c=a.prev1;case 1:if(c===
a){e=3;break}e=4;return{value:c,done:!1};case 4:if(void 0===f){e=5;break}e=-1;throw f;case 5:case 2:c=c.prev1;e=1;break;case 3:e=-1;default:return{value:void 0,done:!0}}}var e=0,c,f={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();f[Symbol.iterator]=function(){return this};return f}},{key:"initializeHead",value:function(a){a.next1=a.prev1=a}}]);return c}();Object.defineProperty(d,"__esModule",
{value:!0});d.default=m},function(k,d){function g(a){var e=!1,c=void 0,f=void 0,h=new Promise(function(l,h){function p(a){e||(e=!0,c=void 0,l(a))}function C(a){e||(e=!0,c=void 0,h(a))}function r(a){if(e)try{void 0!==a&&a()}catch(b){}else c=a}try{a(p,C,r)}catch(g){C(g)}f=function(){if(!e){e=!0;if(void 0!==c){try{c()}catch(a){}c=void 0}h(d.CANCELLED)}}});h.cancel=f;return h}function m(a){if(null!=a){var e=a.cancel;void 0!==e&&e.call(a)}}var c=function(){function a(b,c){for(var f=0;f<c.length;f++){var h=
c[f];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(b,h.key,h)}}return function(e,c,f){c&&a(e.prototype,c);f&&a(e,f);return e}}(),a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");}c(a,[{key:"toString",value:function(){return"CancellationError"}}]);return a}();d.CancellationError=a;d.CANCELLED=new a;d.makeCancellablePromise=g;d.cancelPromise=m;d.callFinally=function(a,e){return g(function(c,
f,h){h(function(){m(a)});a.then(function(a){h(void 0);Promise.resolve(e(h)).then(function(){c(a)})},function(a){h(void 0);try{Promise.resolve(e(h)).then(function(){f(a)},f)}catch(b){f(b)}})})};d.cancellableThen=function(a,e){return g(function(c,f,h){var l=!1;h(function(){l=!0;m(a)});a.then(function(a){l?f(d.CANCELLED):(h(void 0),c(e(a,h)))})})}},function(k,d,g){function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var b=function(){function a(b,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in
n&&(n.writable=!0);Object.defineProperty(b,n.key,n)}}return function(b,e,c){e&&a(b.prototype,e);c&&a(b,c);return b}}(),e=function y(a,b,e){null===a&&(a=Function.prototype);var c=Object.getOwnPropertyDescriptor(a,b);if(void 0===c)return a=Object.getPrototypeOf(a),null===a?void 0:y(a,b,e);if("value"in c)return c.value;b=c.get;return void 0===b?void 0:b.call(e)};k=this&&this.__decorate||function(a,b,e,c){var n=arguments.length,f=3>n?b:null===c?c=Object.getOwnPropertyDescriptor(b,e):c,h;if("object"===
typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,e,c);else for(var l=a.length-1;0<=l;l--)if(h=a[l])f=(3>n?h(f):3<n?h(b,e,f):h(b,e))||f;return 3<n&&f&&Object.defineProperty(b,e,f),f};var n=g(4),f=g(5),h=g(13),l=g(15),w=g(2),p=g(6),C=l.vec3.create(),r=l.vec3.create();g=function(n){function h(a,b){m(this,h);var e=c(this,Object.getPrototypeOf(h).call(this));e.initializeSharedObject(a,b.id);e.chunkManager=e.registerDisposer(a.get(b.chunkManager).addRef());e.registerSignalBinding(e.chunkManager.recomputeChunkPriorities.add(e.updateVisibleChunks,
e));return e}a(h,n);b(h,[{key:"onViewportChanged",value:function(){this.chunkManager.scheduleUpdateChunkPriorities()}},{key:"handleLayerChanged",value:function(){this.hasValidViewport&&this.chunkManager.scheduleUpdateChunkPriorities()}},{key:"updateVisibleChunks",value:function(){var a=this,b=this.centerDataPosition,e=this.chunkManager;this.computeVisibleChunks(function(b){return a.visibleChunkLayouts.get(b)},function(a,c,n,u){l.vec3.multiply(C,n,a.size);l.vec3.add(C,C,a.offset);a=-l.vec3.distance(b,
C);u=$jscomp.makeIterator(u);for(var h=u.next();!h.done;h=u.next()){var p=h.value,h=c.get(p),p=p.getChunk(n);e.requestChunk(p,f.ChunkPriorityTier.VISIBLE,a-1E5*h)}})}},{key:"removeVisibleLayer",value:function(a){this.visibleLayers.delete(a);a.layerChanged.remove(this.handleLayerChanged,this);this.visibleSourcesStale=!0;this.hasValidViewport&&this.chunkManager.scheduleUpdateChunkPriorities()}},{key:"disposed",value:function(){for(var a=$jscomp.makeIterator(this.visibleLayers.keys()),b=a.next();!b.done;b=
a.next())this.removeVisibleLayer(b.value);e(Object.getPrototypeOf(h.prototype),"disposed",this).call(this)}}]);return h}(h.SliceViewBase);g=k([w.registerSharedObject(h.SLICEVIEW_RPC_ID)],g);d.SliceView=g;w.registerRPC("SliceView.updateView",function(a){var b=this.get(a.id);a.width&&b.setViewportSize(a.width,a.height);a.viewportToData&&b.setViewportToDataMatrix(a.viewportToData)});w.registerRPC("SliceView.addVisibleLayer",function(a){var b=this.get(a.id);a=this.get(a.layerId);b.visibleLayers.set(a,
[]);a.layerChanged.add(b.handleLayerChanged,b);b.visibleSourcesStale=!0;b.hasValidViewport&&b.chunkManager.scheduleUpdateChunkPriorities()});w.registerRPC("SliceView.removeVisibleLayer",function(a){var b=this.get(a.id);a=this.get(a.layerId);b.removeVisibleLayer(a)});var A=function(n){function f(){m(this,f);var a=c(this,Object.getPrototypeOf(f).call(this));a.source=null;a.chunkGridPosition=l.vec3.create();return a}a(f,n);b(f,[{key:"initializeVolumeChunk",value:function(a,b){e(Object.getPrototypeOf(f.prototype),
"initialize",this).call(this,a);var c=this.source;l.vec3.copy(this.chunkGridPosition,b);this.gpuMemoryBytes=this.systemMemoryBytes=c.spec.chunkBytes;this.data=this.chunkDataSize=null}},{key:"serialize",value:function(a,b){e(Object.getPrototypeOf(f.prototype),"serialize",this).call(this,a,b);var c=a.data=this.data,n=this.chunkDataSize;n!==this.source.spec.chunkDataSize&&(a.chunkDataSize=n);a.chunkGridPosition=this.chunkGridPosition;b.push(c.buffer);this.data=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=
this.gpuMemoryBytes=this.data.byteLength;e(Object.getPrototypeOf(f.prototype),"downloadSucceeded",this).call(this)}},{key:"freeSystemMemory",value:function(){this.data=null}},{key:"toString",value:function(){return this.source.toString()+":"+l.vec3Key(this.chunkGridPosition)}}]);return f}(n.Chunk);d.VolumeChunk=A;g=function(e){function n(a,b){m(this,n);var e=c(this,Object.getPrototypeOf(n).call(this,a,b));e.spec=h.VolumeChunkSpecification.fromObject(b.spec);return e}a(n,e);b(n,[{key:"getChunk",value:function(a){var b=
l.vec3Key(a),e=this.chunks.get(b);void 0===e&&(e=this.getNewChunk_(A),e.initializeVolumeChunk(b,a),this.addChunk(e));return e}},{key:"computeChunkBounds",value:function(a){var b=this.spec,e=b.upperVoxelBound,b=b.chunkDataSize,c=l.vec3.multiply(C,a.chunkGridPosition,b);l.vec3.add(c,c,this.spec.baseVoxelOffset);for(var n=!1,f=0;3>f;++f)(r[f]=Math.min(e[f],c[f]+b[f])-c[f])!==b[f]&&(n=!0);a.chunkDataSize=n?l.vec3.clone(r):b;return c}}]);return n}(n.ChunkSource);d.VolumeChunkSource=g;n=function(b){function e(a,
b){m(this,e);var n=c(this,Object.getPrototypeOf(e).call(this,a,b));n.layerChanged=new p.Signal;for(var f=n.sources=[],h=$jscomp.makeIterator(b.sources),l=h.next();!l.done;l=h.next()){var u=l.value,l=[];f.push(l);for(var u=$jscomp.makeIterator(u),v=u.next();!v.done;v=u.next())v=a.get(v.value),n.registerDisposer(v.addRef()),l.push(v)}return n}a(e,b);return e}(w.SharedObjectCounterpart);n=k([w.registerSharedObject("sliceview/RenderLayer")],n);d.RenderLayer=n;k=function(b){function e(a,b){m(this,e);var n=
c(this,Object.getPrototypeOf(e).call(this,a,b));n.parameters=b.parameters;return n}a(e,b);return e}(g);d.ParameterizedVolumeChunkSource=k},function(k,d,g){function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&
(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b,e){for(var c=0;3>c;++c)a[c]=Number.POSITIVE_INFINITY,b[c]=Number.NEGATIVE_INFINITY;e=$jscomp.makeIterator(e);for(c=e.next();!c.done;c=e.next())for(var n=c.value.spec,c=n.lowerChunkBound,n=n.upperChunkBound,f=0;3>f;++f)a[f]=Math.min(a[f],c[f]),b[f]=Math.max(b[f],n[f])}function b(a,b,e,c){for(var n=A.FULLY_INSIDE,f=0;3>f;++f){var h;h=a[f];var u=b[f],l=e[f],p=c[f];h=h>=p||u<=l?A.FULLY_OUTSIDE:h>=l&&u<=p?A.FULLY_INSIDE:A.PARTIALLY_INSIDE;
switch(h){case A.FULLY_OUTSIDE:return h;case A.PARTIALLY_INSIDE:n=h}}return n}function e(a,b,e){var c=e.length,n=0;if(1<c)for(var f=0,h=0;h<c;++h){for(var u=e[h],l=0,p=l,w=0;3>w;++w)var d=u.spec.chunkLayout.size[w],l=Math.max(l,d*Math.abs(a[w])),p=Math.max(p,d*Math.abs(b[w]));u=l*p;u>f&&(f=u,n=h)}return e[n]}function n(a){var b=a.voxelSize,e=a.lowerVoxelBound,c=void 0===e?r.kZeroVec:e,n=a.upperVoxelBound;a=a.maxVoxelsPerChunkLog2;a=void 0===a?d.DEFAULT_MAX_VOXELS_PER_CHUNK_LOG2:a;var e=r.vec3.fromValues(1,
1,1),f=void 0;if(void 0===n)f=r.kInfinityVec;else for(var f=r.vec3.create(),h=0;3>h;++h)f[h]=Math.pow(2,Math.floor(Math.log2(n[h]-c[h])));for(c=0;c<a;++c){for(var n=Infinity,h=-1,u=0;3>u;++u)if(!(e[u]>=f[u])){var l=e[u]*b[u];l<n&&(n=l,h=u)}n=h;if(-1===n)break;e[n]*=2}return e}var f=function(){return function(a,b){if(Array.isArray(a))return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();if(Symbol.iterator in Object(a)){var e=[],c=!0,n=!1,f=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();
for(var h=a[Symbol.iterator](),u;!(c=(u=h.next()).done)&&(e.push(u.value),!b||e.length!==b);c=!0);}catch(l){n=!0,f=l}finally{try{if(!c&&h["return"])h["return"]()}finally{if(n)throw f;}}return e}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),h=function(){function a(b,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1;n.configurable=!0;"value"in n&&(n.writable=!0);Object.defineProperty(b,n.key,n)}}return function(b,e,c){e&&a(b.prototype,e);c&&a(b,
c);return b}}(),l=g(14),w=g(26),p=g(27),C=g(28);d.DATA_TYPE_BYTES=C.DATA_TYPE_BYTES;d.DataType=C.DataType;var r=g(15);k=g(2);var A;(function(a){a[a.FULLY_OUTSIDE=0]="FULLY_OUTSIDE";a[a.FULLY_INSIDE=1]="FULLY_INSIDE";a[a.PARTIALLY_INSIDE=2]="PARTIALLY_INSIDE"})(A||(A={}));k=function(n){function l(){m(this,l);var a;a=Object.getPrototypeOf(l).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");a=!a||"object"!==typeof a&&"function"!==typeof a?this:
a;a.width=-1;a.height=-1;a.hasViewportToData=!1;a.hasValidViewport=!1;a.viewportToData=r.mat4.create();a.viewportAxes=[r.vec4.create(),r.vec4.create(),r.vec4.create()];a.previousViewportAxes=[r.vec3.create(),r.vec3.create()];a.centerDataPosition=r.vec3.create();a.viewportPlaneDistanceToOrigin=0;a.visibleChunkLayouts=new Map;a.visibleLayers=new Map;a.visibleSourcesStale=!0;a.pixelSize=0;r.mat4.identity(a.viewportToData);return a}c(l,n);h(l,[{key:"onViewportChanged",value:function(){}},{key:"maybeSetHasValidViewport",
value:function(){!this.hasValidViewport&&-1!==this.width&&-1!==this.height&&this.hasViewportToData&&(this.hasValidViewport=!0,this.onHasValidViewport());if(this.hasValidViewport)this.onViewportChanged()}},{key:"onHasValidViewport",value:function(){}},{key:"setViewportSize",value:function(a,b){return a!==this.width||b!==this.height?(this.width=a,this.height=b,this.maybeSetHasValidViewport(),!0):!1}},{key:"setViewportToDataMatrix",value:function(a){if(this.hasViewportToData&&r.mat4.equals(this.viewportToData,
a))return!1;this.hasViewportToData=!0;var b=this.viewportToData;r.mat4.copy(b,a);r.rectifyTransformMatrixIfAxisAligned(b);r.vec3.transformMat4(this.centerDataPosition,r.kZeroVec,a);a=0;for(var e=this.viewportAxes,c=this.previousViewportAxes,n=0;3>n;++n){var u=e[n];r.vec4.transformMat4(u,r.kAxes[n],b);0===n&&(a=r.vec3.length(u));r.vec4.normalize(u,u)}this.viewportAxes=e;this.previousViewportAxes=c;if(!p.approxEqual(a,this.pixelSize)||.95>r.vec3.dot(e[0],c[0])||.95>r.vec3.dot(e[1],c[1]))r.vec3.copy(c[0],
e[0]),r.vec3.copy(c[1],e[1]),this.visibleSourcesStale=!0,this.pixelSize=a;this.viewportPlaneDistanceToOrigin=r.vec3.dot(this.centerDataPosition,this.viewportAxes[2]);this.onViewportToDataMatrixChanged();this.maybeSetHasValidViewport();return!0}},{key:"onViewportToDataMatrixChanged",value:function(){}},{key:"updateVisibleSources",value:function(){if(this.visibleSourcesStale){this.visibleSourcesStale=!1;var a=1.1*this.pixelSize,b=this.visibleChunkLayouts,c=f(this.viewportAxes,2),n=c[0],h=c[1],u=this.visibleLayers;
b.clear();for(var c=function(c){p=f(c,2);c=p[0];var u=p[1];u.length=0;c=c.sources;for(var l=c.length,v=void 0,w=c[0][0].spec.voxelSize,d=function(b){for(var e=0;3>e;++e){var c=b[e];if(c>a&&c>w[e])return!0}return!1},t=function(a,e){u[u.length++]=a;var c=a.spec.chunkLayout,n=b.get(c);void 0===n&&(n=new Map,b.set(c,n));n.set(a,l-e-1)},v=l-1;;){var K=e(n,h,c[v]);t(K,v);if(0===v||!d(K.spec.voxelSize))break;--v}u.reverse()},u=$jscomp.makeIterator(u),l=u.next();!l.done;l=u.next()){var p;c(l.value)}}}},{key:"computeVisibleChunks",
value:function(e,c){var n=this;this.updateVisibleSources();for(var f=this.centerDataPosition,h=r.vec3.clone(f),u=r.vec3.clone(f),f=r.vec3.create(),l=$jscomp.makeIterator([-this.width/2,this.width/2]),p=l.next();!p.done;p=l.next())for(var p=p.value,d=$jscomp.makeIterator([-this.height/2,this.height/2]),t=d.next();!t.done;t=d.next())t=t.value,r.vec3.scale(f,r.kAxes[0],p),r.vec3.scaleAndAdd(f,f,r.kAxes[1],t),r.vec3.transformMat4(f,f,this.viewportToData),r.vec3.min(h,h,f),r.vec3.max(u,u,f);for(var C=
r.vec3.create(),g=r.vec3.create(),k=r.vec3.create(),q=this.viewportAxes[2],f=0;3>f;++f)0<q[f]&&(k[f]=1);var y=[],K=[];this.visibleChunkLayouts.forEach(function(f,l){function p(){for(var a=0,b=0,e=0;3>e;++e)var c=d[e],n=q[e],u=C[e],f=g[e]-u,h=k[e]*f,a=a+n*c*(u+h),b=b+n*c*(u+f-h);return a<z?!1:b<=z}function v(a){function e(){E=w.partitionArray(y,0,r,function(a){var e=a.spec;switch(b(C,g,e.lowerChunkBound,e.upperChunkBound)){case A.PARTIALLY_INSIDE:return!0;case A.FULLY_INSIDE:K.push(a);default:return!1}})}
if(0!==K.length||0!==E){for(var n=1,u=0;3>u;++u)n*=Math.max(0,g[u]-C[u]);if(0!==n&&p())if(1===n)c(l,t,C,K);else{for(var f;;)if(n=C[a],u=g[a],f=u-n,1===f)a=(a+1)%3;else break;f=n+Math.floor(.5*f);var h=(a+1)%3,d=K.length;g[a]=f;var r=E;e();v(h);K.length=d;E=r;g[a]=u;C[a]=f;e();v(h);C[a]=n;K.length=d;E=r}}}var t=e(l),d=l.size,B=l.offset,z=n.viewportPlaneDistanceToOrigin-r.vec3.dot(B,n.viewportAxes[2]);a(C,g,f.keys());for(var G=0;3>G;++G)C[G]=Math.max(C[G],Math.floor((h[G]-B[G])/d[G])),g[G]=Math.min(g[G],
Math.floor((u[G]-B[G])/d[G]+1));K.length=0;y.length=0;B=$jscomp.makeIterator(f.keys());for(G=B.next();!G.done;G=B.next()){var G=G.value,m=G.spec;switch(b(C,g,m.lowerChunkBound,m.upperChunkBound)){case A.FULLY_INSIDE:K.push(G);break;case A.PARTIALLY_INSIDE:y.push(G)}}var E=y.length;v(0)})}}]);return l}(k.SharedObject);d.SliceViewBase=k;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.IMAGE=1]="IMAGE";a[a.SEGMENTATION=2]="SEGMENTATION"})(d.VolumeType||(d.VolumeType={}));var q=d.VolumeType;d.DEFAULT_MAX_VOXELS_PER_CHUNK_LOG2=
18;d.getNearIsotropicBlockSize=n;var y=r.vec3.create();d.getTwoDimensionalBlockSize=function(a){var b=a.lowerVoxelBound,e=a.upperVoxelBound,c=a.flatDimension,f=a.voxelSize;a=a.maxVoxelsPerChunkLog2;r.vec3.subtract(y,void 0===e?r.kInfinityVec:e,void 0===b?r.kZeroVec:b);y[c]=1;return n({voxelSize:f,upperVoxelBound:y,maxVoxelsPerChunkLog2:a})};k=function(){function a(b){m(this,a);var e=b.dataType,c=b.lowerVoxelBound,c=void 0===c?r.kZeroVec:c,n=b.upperVoxelBound,f=b.chunkDataSize,h=b.chunkLayoutOffset,
h=void 0===h?r.kZeroVec:h,u=b.voxelSize,p=b.baseVoxelOffset,p=void 0===p?r.kZeroVec:p,w=b.numChannels,d=b.lowerClipBound,d=void 0===d?r.vec3.multiply(r.vec3.create(),u,c):d,g=b.upperClipBound,g=void 0===g?r.vec3.multiply(r.vec3.create(),u,n):g;this.dataType=b.dataType;this.numChannels=w;this.voxelSize=u;this.chunkDataSize=f;this.chunkLayout=l.ChunkLayout.get(r.vec3.multiply(r.vec3.create(),b.chunkDataSize,u),h);this.chunkBytes=r.prod3(b.chunkDataSize)*C.DATA_TYPE_BYTES[e]*w;this.lowerClipBound=d;
this.upperClipBound=g;this.lowerVoxelBound=c;this.upperVoxelBound=n;this.baseVoxelOffset=p;e=this.lowerChunkBound=r.vec3.create();h=this.upperChunkBound=r.vec3.create();for(u=0;3>u;++u)e[u]=Math.floor(c[u]/f[u]),h[u]=Math.floor((n[u]-1)/f[u]+1);this.compressedSegmentationBlockSize=b.compressedSegmentationBlockSize}h(a,[{key:"toObject",value:function(){return{chunkLayoutOffset:this.chunkLayout.offset,numChannels:this.numChannels,chunkDataSize:this.chunkDataSize,voxelSize:this.voxelSize,dataType:this.dataType,
lowerVoxelBound:this.lowerVoxelBound,upperVoxelBound:this.upperVoxelBound,lowerClipBound:this.lowerClipBound,upperClipBound:this.upperClipBound,baseVoxelOffset:this.baseVoxelOffset,compressedSegmentationBlockSize:this.compressedSegmentationBlockSize}}}],[{key:"fromObject",value:function(b){return new a(b)}},{key:"withDefaultCompression",value:function(b){var e=b.compressedSegmentationBlockSize,c=b.dataType,f=b.voxelSize,h=b.lowerVoxelBound,l=b.upperVoxelBound;void 0!==e||b.volumeType!==q.SEGMENTATION||
c!==C.DataType.UINT32&&c!==C.DataType.UINT64||(e=n({voxelSize:f,lowerVoxelBound:h,upperVoxelBound:l,maxVoxelsPerChunkLog2:9}));return new a(Object.assign({},b,{compressedSegmentationBlockSize:e}))}},{key:"getDefaults",value:function(b){var e=b.chunkDataSizes;return(void 0===e?[n(b)]:e).map(function(e){return a.withDefaultCompression(Object.assign({},b,{chunkDataSize:e}))})}}]);return a}();d.VolumeChunkSpecification=k;d.SLICEVIEW_RPC_ID="SliceView";d.SLICEVIEW_RENDERLAYER_RPC_ID="sliceview/RenderLayer"},
function(k,d,g){var m=function(){function a(a,e){for(var c=0;c<e.length;c++){var f=e[c];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}return function(b,e,c){e&&a(b.prototype,e);c&&a(b,c);return b}}(),c=g(15);k=function(){function a(b,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.size=c.vec3.clone(b);this.offset=void 0===e?c.vec3.create():c.vec3.clone(e)}m(a,[{key:"toObject",value:function(a){a.size=
this.size;a.offset=this.offset}}],[{key:"get",value:function(b){var e=1>=arguments.length||void 0===arguments[1]?c.kZeroVec:arguments[1],n=a.cache,f=c.vec3Key(b)+"+"+c.vec3Key(e),h=n.get(f);void 0===h&&(h=new a(b,e),n.set(f,h));return h}},{key:"fromObject",value:function(b){return a.get(b.size,b.offset)}}]);return a}();k.cache=new Map;d.ChunkLayout=k},function(k,d,g){function m(c,a){var b=Math.abs(c[a]),e=Math.abs(c[a+1]),n=Math.abs(c[a+2]),f=Math.max(b,e,n);1E-4>b/f&&(c[a]=0);1E-4>e/f&&(c[a+1]=0);
1E-4>n/f&&(c[a+2]=0)}k=g(16);g=g(16);d.mat2=g.mat2;d.mat3=g.mat3;d.mat4=g.mat4;d.quat=g.quat;d.vec2=g.vec2;d.vec3=g.vec3;d.vec4=g.vec4;d.identityMat4=k.mat4.create();d.AXES_NAMES=["x","y","z"];d.BoundingBox=function a(b,e){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.lower=b;this.upper=e};d.kAxes=[k.vec4.fromValues(1,0,0,0),k.vec4.fromValues(0,1,0,0),k.vec4.fromValues(0,0,1,0)];d.kZeroVec=k.vec3.fromValues(0,0,0);d.kInfinityVec=k.vec3.fromValues(Infinity,Infinity,
Infinity);d.prod3=function(a){return a[0]*a[1]*a[2]};d.prod4=function(a){return a[0]*a[1]*a[2]*a[3]};d.vec3Key=function(a){return a[0]+","+a[1]+","+a[2]};d.rectifyVec3IfAxisAligned=m;d.rectifyTransformMatrixIfAxisAligned=function(a){m(a,0);m(a,4);m(a,8)}},function(k,d,g){d.glMatrix=g(17);d.mat2=g(18);d.mat2d=g(19);d.mat3=g(20);d.mat4=g(21);d.quat=g(22);d.vec2=g(25);d.vec3=g(23);d.vec4=g(24)},function(k,d){var g={EPSILON:1E-6};g.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;g.RANDOM=
Math.random;g.ENABLE_SIMD=!1;g.SIMD_AVAILABLE=g.ARRAY_TYPE===Float32Array&&"SIMD"in this;g.USE_SIMD=g.ENABLE_SIMD&&g.SIMD_AVAILABLE;g.setMatrixArrayType=function(c){g.ARRAY_TYPE=c};var m=Math.PI/180;g.toRadian=function(c){return c*m};g.equals=function(c,a){return Math.abs(c-a)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(a))};k.exports=g},function(k,d,g){var m=g(17);d={create:function(){var c=new m.ARRAY_TYPE(4);c[0]=1;c[1]=0;c[2]=0;c[3]=1;return c},clone:function(c){var a=new m.ARRAY_TYPE(4);a[0]=
c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a},copy:function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c},identity:function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;return c},fromValues:function(c,a,b,e){var n=new m.ARRAY_TYPE(4);n[0]=c;n[1]=a;n[2]=b;n[3]=e;return n},set:function(c,a,b,e,n){c[0]=a;c[1]=b;c[2]=e;c[3]=n;return c},transpose:function(c,a){if(c===a){var b=a[1];c[1]=a[2];c[2]=b}else c[0]=a[0],c[1]=a[2],c[2]=a[1],c[3]=a[3];return c},invert:function(c,a){var b=a[0],e=a[1],n=a[2],f=a[3],h=b*
f-n*e;if(!h)return null;h=1/h;c[0]=f*h;c[1]=-e*h;c[2]=-n*h;c[3]=b*h;return c},adjoint:function(c,a){var b=a[0];c[0]=a[3];c[1]=-a[1];c[2]=-a[2];c[3]=b;return c},determinant:function(c){return c[0]*c[3]-c[2]*c[1]},multiply:function(c,a,b){var e=a[0],n=a[1],f=a[2];a=a[3];var h=b[0],l=b[1],w=b[2];b=b[3];c[0]=e*h+f*l;c[1]=n*h+a*l;c[2]=e*w+f*b;c[3]=n*w+a*b;return c}};d.mul=d.multiply;d.rotate=function(c,a,b){var e=a[0],n=a[1],f=a[2];a=a[3];var h=Math.sin(b);b=Math.cos(b);c[0]=e*b+f*h;c[1]=n*b+a*h;c[2]=
e*-h+f*b;c[3]=n*-h+a*b;return c};d.scale=function(c,a,b){var e=a[1],n=a[2],f=a[3],h=b[0];b=b[1];c[0]=a[0]*h;c[1]=e*h;c[2]=n*b;c[3]=f*b;return c};d.fromRotation=function(c,a){var b=Math.sin(a),e=Math.cos(a);c[0]=e;c[1]=b;c[2]=-b;c[3]=e;return c};d.fromScaling=function(c,a){c[0]=a[0];c[1]=0;c[2]=0;c[3]=a[1];return c};d.str=function(c){return"mat2("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2))};d.LDU=
function(c,a,b,e){c[2]=e[2]/e[0];b[0]=e[0];b[1]=e[1];b[3]=e[3]-c[2]*b[1];return[c,a,b]};d.add=function(c,a,b){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};d.subtract=function(c,a,b){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c};d.sub=d.subtract;d.exactEquals=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]};d.equals=function(c,a){var b=c[0],e=c[1],n=c[2],f=c[3],h=a[0],l=a[1],w=a[2],p=a[3];return Math.abs(b-h)<=m.EPSILON*Math.max(1,
Math.abs(b),Math.abs(h))&&Math.abs(e-l)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-w)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(f-p)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))};d.multiplyScalar=function(c,a,b){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};d.multiplyScalarAndAdd=function(c,a,b,e){c[0]=a[0]+b[0]*e;c[1]=a[1]+b[1]*e;c[2]=a[2]+b[2]*e;c[3]=a[3]+b[3]*e;return c};k.exports=d},function(k,d,g){var m=g(17);d={create:function(){var c=new m.ARRAY_TYPE(6);
c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c},clone:function(c){var a=new m.ARRAY_TYPE(6);a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];return a},copy:function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];return c},identity:function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c},fromValues:function(c,a,b,e,n,f){var h=new m.ARRAY_TYPE(6);h[0]=c;h[1]=a;h[2]=b;h[3]=e;h[4]=n;h[5]=f;return h},set:function(c,a,b,e,n,f,h){c[0]=a;c[1]=b;c[2]=e;c[3]=n;c[4]=f;
c[5]=h;return c},invert:function(c,a){var b=a[0],e=a[1],n=a[2],f=a[3],h=a[4],l=a[5],w=b*f-e*n;if(!w)return null;w=1/w;c[0]=f*w;c[1]=-e*w;c[2]=-n*w;c[3]=b*w;c[4]=(n*l-f*h)*w;c[5]=(e*h-b*l)*w;return c},determinant:function(c){return c[0]*c[3]-c[1]*c[2]},multiply:function(c,a,b){var e=a[0],n=a[1],f=a[2],h=a[3],l=a[4];a=a[5];var w=b[0],p=b[1],d=b[2],r=b[3],g=b[4];b=b[5];c[0]=e*w+f*p;c[1]=n*w+h*p;c[2]=e*d+f*r;c[3]=n*d+h*r;c[4]=e*g+f*b+l;c[5]=n*g+h*b+a;return c}};d.mul=d.multiply;d.rotate=function(c,a,
b){var e=a[0],n=a[1],f=a[2],h=a[3],l=a[4];a=a[5];var w=Math.sin(b);b=Math.cos(b);c[0]=e*b+f*w;c[1]=n*b+h*w;c[2]=e*-w+f*b;c[3]=n*-w+h*b;c[4]=l;c[5]=a;return c};d.scale=function(c,a,b){var e=a[1],n=a[2],f=a[3],h=a[4],l=a[5],w=b[0];b=b[1];c[0]=a[0]*w;c[1]=e*w;c[2]=n*b;c[3]=f*b;c[4]=h;c[5]=l;return c};d.translate=function(c,a,b){var e=a[0],n=a[1],f=a[2],h=a[3],l=a[4];a=a[5];var w=b[0];b=b[1];c[0]=e;c[1]=n;c[2]=f;c[3]=h;c[4]=e*w+f*b+l;c[5]=n*w+h*b+a;return c};d.fromRotation=function(c,a){var b=Math.sin(a),
e=Math.cos(a);c[0]=e;c[1]=b;c[2]=-b;c[3]=e;c[4]=0;c[5]=0;return c};d.fromScaling=function(c,a){c[0]=a[0];c[1]=0;c[2]=0;c[3]=a[1];c[4]=0;c[5]=0;return c};d.fromTranslation=function(c,a){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=a[0];c[5]=a[1];return c};d.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};d.add=function(c,a,b){c[0]=
a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];return c};d.subtract=function(c,a,b){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];return c};d.sub=d.subtract;d.multiplyScalar=function(c,a,b){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;c[4]=a[4]*b;c[5]=a[5]*b;return c};d.multiplyScalarAndAdd=function(c,a,b,e){c[0]=a[0]+b[0]*e;c[1]=a[1]+b[1]*e;c[2]=a[2]+b[2]*e;c[3]=a[3]+b[3]*e;c[4]=a[4]+b[4]*e;c[5]=a[5]+b[5]*e;return c};
d.exactEquals=function(c,a){return c[0]===a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]&&c[4]===a[4]&&c[5]===a[5]};d.equals=function(c,a){var b=c[0],e=c[1],n=c[2],f=c[3],h=c[4],l=c[5],w=a[0],p=a[1],d=a[2],r=a[3],g=a[4],k=a[5];return Math.abs(b-w)<=m.EPSILON*Math.max(1,Math.abs(b),Math.abs(w))&&Math.abs(e-p)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(n-d)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(f-r)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(r))&&Math.abs(h-g)<=m.EPSILON*
Math.max(1,Math.abs(h),Math.abs(g))&&Math.abs(l-k)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(k))};k.exports=d},function(k,d,g){var m=g(17);d={create:function(){var c=new m.ARRAY_TYPE(9);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c},fromMat4:function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[4];c[4]=a[5];c[5]=a[6];c[6]=a[8];c[7]=a[9];c[8]=a[10];return c},clone:function(c){var a=new m.ARRAY_TYPE(9);a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=
c[7];a[8]=c[8];return a},copy:function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c},fromValues:function(c,a,b,e,n,f,h,l,w){var p=new m.ARRAY_TYPE(9);p[0]=c;p[1]=a;p[2]=b;p[3]=e;p[4]=n;p[5]=f;p[6]=h;p[7]=l;p[8]=w;return p},set:function(c,a,b,e,n,f,h,l,w,p){c[0]=a;c[1]=b;c[2]=e;c[3]=n;c[4]=f;c[5]=h;c[6]=l;c[7]=w;c[8]=p;return c},identity:function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c},transpose:function(c,
a){if(c===a){var b=a[1],e=a[2],n=a[5];c[1]=a[3];c[2]=a[6];c[3]=b;c[5]=a[7];c[6]=e;c[7]=n}else c[0]=a[0],c[1]=a[3],c[2]=a[6],c[3]=a[1],c[4]=a[4],c[5]=a[7],c[6]=a[2],c[7]=a[5],c[8]=a[8];return c},invert:function(c,a){var b=a[0],e=a[1],n=a[2],f=a[3],h=a[4],l=a[5],w=a[6],p=a[7],d=a[8],r=d*h-l*p,g=-d*f+l*w,k=p*f-h*w,y=b*r+e*g+n*k;if(!y)return null;y=1/y;c[0]=r*y;c[1]=(-d*e+n*p)*y;c[2]=(l*e-n*h)*y;c[3]=g*y;c[4]=(d*b-n*w)*y;c[5]=(-l*b+n*f)*y;c[6]=k*y;c[7]=(-p*b+e*w)*y;c[8]=(h*b-e*f)*y;return c},adjoint:function(c,
a){var b=a[0],e=a[1],n=a[2],f=a[3],h=a[4],l=a[5],w=a[6],p=a[7],d=a[8];c[0]=h*d-l*p;c[1]=n*p-e*d;c[2]=e*l-n*h;c[3]=l*w-f*d;c[4]=b*d-n*w;c[5]=n*f-b*l;c[6]=f*p-h*w;c[7]=e*w-b*p;c[8]=b*h-e*f;return c},determinant:function(c){var a=c[3],b=c[4],e=c[5],n=c[6],f=c[7],h=c[8];return c[0]*(h*b-e*f)+c[1]*(-h*a+e*n)+c[2]*(f*a-b*n)},multiply:function(c,a,b){var e=a[0],n=a[1],f=a[2],h=a[3],l=a[4],w=a[5],p=a[6],d=a[7];a=a[8];var r=b[0],g=b[1],k=b[2],y=b[3],m=b[4],t=b[5],x=b[6],F=b[7];b=b[8];c[0]=r*e+g*h+k*p;c[1]=
r*n+g*l+k*d;c[2]=r*f+g*w+k*a;c[3]=y*e+m*h+t*p;c[4]=y*n+m*l+t*d;c[5]=y*f+m*w+t*a;c[6]=x*e+F*h+b*p;c[7]=x*n+F*l+b*d;c[8]=x*f+F*w+b*a;return c}};d.mul=d.multiply;d.translate=function(c,a,b){var e=a[0],n=a[1],f=a[2],h=a[3],l=a[4],d=a[5],p=a[6],g=a[7];a=a[8];var r=b[0];b=b[1];c[0]=e;c[1]=n;c[2]=f;c[3]=h;c[4]=l;c[5]=d;c[6]=r*e+b*h+p;c[7]=r*n+b*l+g;c[8]=r*f+b*d+a;return c};d.rotate=function(c,a,b){var e=a[0],n=a[1],f=a[2],h=a[3],l=a[4],d=a[5],p=a[6],g=a[7];a=a[8];var r=Math.sin(b);b=Math.cos(b);c[0]=b*e+
r*h;c[1]=b*n+r*l;c[2]=b*f+r*d;c[3]=b*h-r*e;c[4]=b*l-r*n;c[5]=b*d-r*f;c[6]=p;c[7]=g;c[8]=a;return c};d.scale=function(c,a,b){var e=b[0];b=b[1];c[0]=e*a[0];c[1]=e*a[1];c[2]=e*a[2];c[3]=b*a[3];c[4]=b*a[4];c[5]=b*a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c};d.fromTranslation=function(c,a){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=a[0];c[7]=a[1];c[8]=1;return c};d.fromRotation=function(c,a){var b=Math.sin(a),e=Math.cos(a);c[0]=e;c[1]=b;c[2]=0;c[3]=-b;c[4]=e;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};d.fromScaling=
function(c,a){c[0]=a[0];c[1]=0;c[2]=0;c[3]=0;c[4]=a[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};d.fromMat2d=function(c,a){c[0]=a[0];c[1]=a[1];c[2]=0;c[3]=a[2];c[4]=a[3];c[5]=0;c[6]=a[4];c[7]=a[5];c[8]=1;return c};d.fromQuat=function(c,a){var b=a[0],e=a[1],n=a[2],f=a[3],h=b+b,l=e+e,d=n+n,b=b*h,p=e*h,e=e*l,g=n*h,r=n*l,n=n*d,h=f*h,l=f*l,f=f*d;c[0]=1-e-n;c[3]=p-f;c[6]=g+l;c[1]=p+f;c[4]=1-b-n;c[7]=r-h;c[2]=g-l;c[5]=r+h;c[8]=1-b-e;return c};d.normalFromMat4=function(c,a){var b=a[0],e=a[1],n=a[2],f=a[3],h=
a[4],l=a[5],d=a[6],p=a[7],g=a[8],r=a[9],k=a[10],q=a[11],y=a[12],m=a[13],t=a[14],x=a[15],F=b*l-e*h,I=b*d-n*h,G=b*p-f*h,J=e*d-n*l,u=e*p-f*l,v=n*p-f*d,z=g*m-r*y,B=g*t-k*y,g=g*x-q*y,L=r*t-k*m,r=r*x-q*m,k=k*x-q*t,q=F*k-I*r+G*L+J*g-u*B+v*z;if(!q)return null;q=1/q;c[0]=(l*k-d*r+p*L)*q;c[1]=(d*g-h*k-p*B)*q;c[2]=(h*r-l*g+p*z)*q;c[3]=(n*r-e*k-f*L)*q;c[4]=(b*k-n*g+f*B)*q;c[5]=(e*g-b*r-f*z)*q;c[6]=(m*v-t*u+x*J)*q;c[7]=(t*G-y*v-x*I)*q;c[8]=(y*u-m*G+x*F)*q;return c};d.str=function(c){return"mat3("+c[0]+", "+c[1]+
", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};d.add=function(c,a,b){c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];return c};d.subtract=function(c,a,b){c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];
c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];return c};d.sub=d.subtract;d.multiplyScalar=function(c,a,b){c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;c[4]=a[4]*b;c[5]=a[5]*b;c[6]=a[6]*b;c[7]=a[7]*b;c[8]=a[8]*b;return c};d.multiplyScalarAndAdd=function(c,a,b,e){c[0]=a[0]+b[0]*e;c[1]=a[1]+b[1]*e;c[2]=a[2]+b[2]*e;c[3]=a[3]+b[3]*e;c[4]=a[4]+b[4]*e;c[5]=a[5]+b[5]*e;c[6]=a[6]+b[6]*e;c[7]=a[7]+b[7]*e;c[8]=a[8]+b[8]*e;return c};d.exactEquals=function(c,a){return c[0]===
a[0]&&c[1]===a[1]&&c[2]===a[2]&&c[3]===a[3]&&c[4]===a[4]&&c[5]===a[5]&&c[6]===a[6]&&c[7]===a[7]&&c[8]===a[8]};d.equals=function(c,a){var b=c[0],e=c[1],n=c[2],f=c[3],h=c[4],l=c[5],d=c[6],p=c[7],g=c[8],r=a[0],k=a[1],q=a[2],y=a[3],E=a[4],t=a[5],x=c[6],F=a[7],I=a[8];return Math.abs(b-r)<=m.EPSILON*Math.max(1,Math.abs(b),Math.abs(r))&&Math.abs(e-k)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(k))&&Math.abs(n-q)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(q))&&Math.abs(f-y)<=m.EPSILON*Math.max(1,Math.abs(f),
Math.abs(y))&&Math.abs(h-E)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(l-t)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(t))&&Math.abs(d-x)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(x))&&Math.abs(p-F)<=m.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(g-I)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))};k.exports=d},function(k,d,g){var m=g(17),c={scalar:{},SIMD:{},create:function(){var a=new m.ARRAY_TYPE(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;
a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new m.ARRAY_TYPE(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},fromValues:function(a,
b,e,c,f,h,l,d,p,g,r,k,q,y,E,t){var x=new m.ARRAY_TYPE(16);x[0]=a;x[1]=b;x[2]=e;x[3]=c;x[4]=f;x[5]=h;x[6]=l;x[7]=d;x[8]=p;x[9]=g;x[10]=r;x[11]=k;x[12]=q;x[13]=y;x[14]=E;x[15]=t;return x},set:function(a,b,e,c,f,h,l,d,p,g,r,k,q,m,E,t,x){a[0]=b;a[1]=e;a[2]=c;a[3]=f;a[4]=h;a[5]=l;a[6]=d;a[7]=p;a[8]=g;a[9]=r;a[10]=k;a[11]=q;a[12]=m;a[13]=E;a[14]=t;a[15]=x;return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;
return a}};c.scalar.transpose=function(a,b){if(a===b){var e=b[1],c=b[2],f=b[3],h=b[6],l=b[7],d=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=e;a[6]=b[9];a[7]=b[13];a[8]=c;a[9]=h;a[11]=b[14];a[12]=f;a[13]=l;a[14]=d}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a};c.SIMD.transpose=function(a,b){var e,c,f,h,l,d,p;e=SIMD.Float32x4.load(b,0);c=SIMD.Float32x4.load(b,4);f=
SIMD.Float32x4.load(b,8);h=SIMD.Float32x4.load(b,12);l=SIMD.Float32x4.shuffle(e,c,0,1,4,5);d=SIMD.Float32x4.shuffle(f,h,0,1,4,5);p=SIMD.Float32x4.shuffle(l,d,0,2,4,6);l=SIMD.Float32x4.shuffle(l,d,1,3,5,7);SIMD.Float32x4.store(a,0,p);SIMD.Float32x4.store(a,4,l);l=SIMD.Float32x4.shuffle(e,c,2,3,6,7);d=SIMD.Float32x4.shuffle(f,h,2,3,6,7);e=SIMD.Float32x4.shuffle(l,d,0,2,4,6);c=SIMD.Float32x4.shuffle(l,d,1,3,5,7);SIMD.Float32x4.store(a,8,e);SIMD.Float32x4.store(a,12,c);return a};c.transpose=m.USE_SIMD?
c.SIMD.transpose:c.scalar.transpose;c.scalar.invert=function(a,b){var e=b[0],c=b[1],f=b[2],h=b[3],l=b[4],d=b[5],p=b[6],g=b[7],r=b[8],k=b[9],q=b[10],m=b[11],E=b[12],t=b[13],x=b[14],F=b[15],I=e*d-c*l,G=e*p-f*l,J=e*g-h*l,u=c*p-f*d,v=c*g-h*d,z=f*g-h*p,B=r*t-k*E,L=r*x-q*E,D=r*F-m*E,H=k*x-q*t,P=k*F-m*t,O=q*F-m*x,T=I*O-G*P+J*H+u*D-v*L+z*B;if(!T)return null;T=1/T;a[0]=(d*O-p*P+g*H)*T;a[1]=(f*P-c*O-h*H)*T;a[2]=(t*z-x*v+F*u)*T;a[3]=(q*v-k*z-m*u)*T;a[4]=(p*D-l*O-g*L)*T;a[5]=(e*O-f*D+h*L)*T;a[6]=(x*J-E*z-F*G)*
T;a[7]=(r*z-q*J+m*G)*T;a[8]=(l*P-d*D+g*B)*T;a[9]=(c*D-e*P-h*B)*T;a[10]=(E*v-t*J+F*I)*T;a[11]=(k*J-r*v-m*I)*T;a[12]=(d*L-l*H-p*B)*T;a[13]=(e*H-c*L+f*B)*T;a[14]=(t*G-E*u-x*I)*T;a[15]=(r*u-k*G+q*I)*T;return a};c.SIMD.invert=function(a,b){var e,c,f,h,l,d,p,g,r;d=SIMD.Float32x4.load(b,0);p=SIMD.Float32x4.load(b,4);g=SIMD.Float32x4.load(b,8);r=SIMD.Float32x4.load(b,12);l=SIMD.Float32x4.shuffle(d,p,0,1,4,5);c=SIMD.Float32x4.shuffle(g,r,0,1,4,5);e=SIMD.Float32x4.shuffle(l,c,0,2,4,6);c=SIMD.Float32x4.shuffle(c,
l,1,3,5,7);l=SIMD.Float32x4.shuffle(d,p,2,3,6,7);h=SIMD.Float32x4.shuffle(g,r,2,3,6,7);f=SIMD.Float32x4.shuffle(l,h,0,2,4,6);h=SIMD.Float32x4.shuffle(h,l,1,3,5,7);l=SIMD.Float32x4.mul(f,h);l=SIMD.Float32x4.swizzle(l,1,0,3,2);d=SIMD.Float32x4.mul(c,l);p=SIMD.Float32x4.mul(e,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,l),d);p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);l=SIMD.Float32x4.mul(c,f);l=SIMD.Float32x4.swizzle(l,1,0,
3,2);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,l),d);r=SIMD.Float32x4.mul(e,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(h,l));r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),r);r=SIMD.Float32x4.swizzle(r,2,3,0,1);l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,3,0,1),h);l=SIMD.Float32x4.swizzle(l,1,0,3,2);f=SIMD.Float32x4.swizzle(f,2,3,0,1);d=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,l),d);g=SIMD.Float32x4.mul(e,l);l=SIMD.Float32x4.swizzle(l,2,3,0,1);d=SIMD.Float32x4.sub(d,
SIMD.Float32x4.mul(f,l));g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);l=SIMD.Float32x4.mul(e,c);l=SIMD.Float32x4.swizzle(l,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,l),g);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,l),r);l=SIMD.Float32x4.swizzle(l,2,3,0,1);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(h,l),g);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(f,l));l=SIMD.Float32x4.mul(e,h);l=SIMD.Float32x4.swizzle(l,1,0,3,2);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(f,
l));g=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),g);l=SIMD.Float32x4.swizzle(l,2,3,0,1);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(f,l),p);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(c,l));l=SIMD.Float32x4.mul(e,f);l=SIMD.Float32x4.swizzle(l,1,0,3,2);p=SIMD.Float32x4.add(SIMD.Float32x4.mul(h,l),p);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(c,l));l=SIMD.Float32x4.swizzle(l,2,3,0,1);p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(h,l));r=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),r);e=SIMD.Float32x4.mul(e,d);e=
SIMD.Float32x4.add(SIMD.Float32x4.swizzle(e,2,3,0,1),e);e=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(e,1,0,3,2),e);l=SIMD.Float32x4.reciprocalApproximation(e);e=SIMD.Float32x4.sub(SIMD.Float32x4.add(l,l),SIMD.Float32x4.mul(e,SIMD.Float32x4.mul(l,l)));e=SIMD.Float32x4.swizzle(e,0,0,0,0);if(!e)return null;SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(e,d));SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(e,p));SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(e,g));SIMD.Float32x4.store(a,12,SIMD.Float32x4.mul(e,
r));return a};c.invert=m.USE_SIMD?c.SIMD.invert:c.scalar.invert;c.scalar.adjoint=function(a,b){var e=b[0],c=b[1],f=b[2],h=b[3],l=b[4],d=b[5],p=b[6],g=b[7],r=b[8],k=b[9],q=b[10],m=b[11],E=b[12],t=b[13],x=b[14],F=b[15];a[0]=d*(q*F-m*x)-k*(p*F-g*x)+t*(p*m-g*q);a[1]=-(c*(q*F-m*x)-k*(f*F-h*x)+t*(f*m-h*q));a[2]=c*(p*F-g*x)-d*(f*F-h*x)+t*(f*g-h*p);a[3]=-(c*(p*m-g*q)-d*(f*m-h*q)+k*(f*g-h*p));a[4]=-(l*(q*F-m*x)-r*(p*F-g*x)+E*(p*m-g*q));a[5]=e*(q*F-m*x)-r*(f*F-h*x)+E*(f*m-h*q);a[6]=-(e*(p*F-g*x)-l*(f*F-h*x)+
E*(f*g-h*p));a[7]=e*(p*m-g*q)-l*(f*m-h*q)+r*(f*g-h*p);a[8]=l*(k*F-m*t)-r*(d*F-g*t)+E*(d*m-g*k);a[9]=-(e*(k*F-m*t)-r*(c*F-h*t)+E*(c*m-h*k));a[10]=e*(d*F-g*t)-l*(c*F-h*t)+E*(c*g-h*d);a[11]=-(e*(d*m-g*k)-l*(c*m-h*k)+r*(c*g-h*d));a[12]=-(l*(k*x-q*t)-r*(d*x-p*t)+E*(d*q-p*k));a[13]=e*(k*x-q*t)-r*(c*x-f*t)+E*(c*q-f*k);a[14]=-(e*(d*x-p*t)-l*(c*x-f*t)+E*(c*p-f*d));a[15]=e*(d*q-p*k)-l*(c*q-f*k)+r*(c*p-f*d);return a};c.SIMD.adjoint=function(a,b){var e,c,f,h,l,d,p,g,k;e=SIMD.Float32x4.load(b,0);c=SIMD.Float32x4.load(b,
4);f=SIMD.Float32x4.load(b,8);h=SIMD.Float32x4.load(b,12);p=SIMD.Float32x4.shuffle(e,c,0,1,4,5);d=SIMD.Float32x4.shuffle(f,h,0,1,4,5);l=SIMD.Float32x4.shuffle(p,d,0,2,4,6);d=SIMD.Float32x4.shuffle(d,p,1,3,5,7);p=SIMD.Float32x4.shuffle(e,c,2,3,6,7);c=SIMD.Float32x4.shuffle(f,h,2,3,6,7);e=SIMD.Float32x4.shuffle(p,c,0,2,4,6);c=SIMD.Float32x4.shuffle(c,p,1,3,5,7);p=SIMD.Float32x4.mul(e,c);p=SIMD.Float32x4.swizzle(p,1,0,3,2);f=SIMD.Float32x4.mul(d,p);h=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,
2,3,0,1);f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(d,p),f);h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),h);h=SIMD.Float32x4.swizzle(h,2,3,0,1);p=SIMD.Float32x4.mul(d,e);p=SIMD.Float32x4.swizzle(p,1,0,3,2);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,p),f);k=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(c,p));k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),k);k=SIMD.Float32x4.swizzle(k,2,3,0,1);p=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,3,0,1),c);
p=SIMD.Float32x4.swizzle(p,1,0,3,2);e=SIMD.Float32x4.swizzle(e,2,3,0,1);f=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,p),f);g=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(e,p));g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),g);g=SIMD.Float32x4.swizzle(g,2,3,0,1);p=SIMD.Float32x4.mul(l,d);p=SIMD.Float32x4.swizzle(p,1,0,3,2);g=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,p),g);k=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,p),k);p=SIMD.Float32x4.swizzle(p,2,
3,0,1);g=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,p),g);k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(e,p));p=SIMD.Float32x4.mul(l,c);p=SIMD.Float32x4.swizzle(p,1,0,3,2);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,p));g=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,p),g);p=SIMD.Float32x4.swizzle(p,2,3,0,1);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,p),h);g=SIMD.Float32x4.sub(g,SIMD.Float32x4.mul(d,p));p=SIMD.Float32x4.mul(l,e);p=SIMD.Float32x4.swizzle(p,1,0,3,2);h=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,p),h);
k=SIMD.Float32x4.sub(k,SIMD.Float32x4.mul(d,p));p=SIMD.Float32x4.swizzle(p,2,3,0,1);h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(c,p));k=SIMD.Float32x4.add(SIMD.Float32x4.mul(d,p),k);SIMD.Float32x4.store(a,0,f);SIMD.Float32x4.store(a,4,h);SIMD.Float32x4.store(a,8,g);SIMD.Float32x4.store(a,12,k);return a};c.adjoint=m.USE_SIMD?c.SIMD.adjoint:c.scalar.adjoint;c.determinant=function(a){var b=a[0],e=a[1],c=a[2],f=a[3],h=a[4],l=a[5],d=a[6],p=a[7],g=a[8],k=a[9],m=a[10],q=a[11],y=a[12],E=a[13],t=a[14];a=a[15];
return(b*l-e*h)*(m*a-q*t)-(b*d-c*h)*(k*a-q*E)+(b*p-f*h)*(k*t-m*E)+(e*d-c*l)*(g*a-q*y)-(e*p-f*l)*(g*t-m*y)+(c*p-f*d)*(g*E-k*y)};c.SIMD.multiply=function(a,b,e){var c=SIMD.Float32x4.load(b,0),f=SIMD.Float32x4.load(b,4),h=SIMD.Float32x4.load(b,8);b=SIMD.Float32x4.load(b,12);var l=SIMD.Float32x4.load(e,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,
2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),b))));SIMD.Float32x4.store(a,0,l);l=SIMD.Float32x4.load(e,4);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),b))));SIMD.Float32x4.store(a,4,l);l=SIMD.Float32x4.load(e,8);l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,
0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),b))));SIMD.Float32x4.store(a,8,l);e=SIMD.Float32x4.load(e,12);c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,0,0,0,0),c),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,1,1,1,1),f),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,2,2,2),
h),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,3,3,3,3),b))));SIMD.Float32x4.store(a,12,c);return a};c.scalar.multiply=function(a,b,e){var c=b[0],f=b[1],h=b[2],l=b[3],d=b[4],p=b[5],g=b[6],k=b[7],m=b[8],q=b[9],y=b[10],E=b[11],t=b[12],x=b[13],F=b[14];b=b[15];var I=e[0],G=e[1],J=e[2],u=e[3];a[0]=I*c+G*d+J*m+u*t;a[1]=I*f+G*p+J*q+u*x;a[2]=I*h+G*g+J*y+u*F;a[3]=I*l+G*k+J*E+u*b;I=e[4];G=e[5];J=e[6];u=e[7];a[4]=I*c+G*d+J*m+u*t;a[5]=I*f+G*p+J*q+u*x;a[6]=I*h+G*g+J*y+u*F;a[7]=I*l+G*k+J*E+u*b;I=e[8];G=e[9];J=
e[10];u=e[11];a[8]=I*c+G*d+J*m+u*t;a[9]=I*f+G*p+J*q+u*x;a[10]=I*h+G*g+J*y+u*F;a[11]=I*l+G*k+J*E+u*b;I=e[12];G=e[13];J=e[14];u=e[15];a[12]=I*c+G*d+J*m+u*t;a[13]=I*f+G*p+J*q+u*x;a[14]=I*h+G*g+J*y+u*F;a[15]=I*l+G*k+J*E+u*b;return a};c.multiply=m.USE_SIMD?c.SIMD.multiply:c.scalar.multiply;c.mul=c.multiply;c.scalar.translate=function(a,b,e){var c=e[0],f=e[1];e=e[2];var h,l,d,p,g,k,m,q,y,E,t,x;b===a?(a[12]=b[0]*c+b[4]*f+b[8]*e+b[12],a[13]=b[1]*c+b[5]*f+b[9]*e+b[13],a[14]=b[2]*c+b[6]*f+b[10]*e+b[14],a[15]=
b[3]*c+b[7]*f+b[11]*e+b[15]):(h=b[0],l=b[1],d=b[2],p=b[3],g=b[4],k=b[5],m=b[6],q=b[7],y=b[8],E=b[9],t=b[10],x=b[11],a[0]=h,a[1]=l,a[2]=d,a[3]=p,a[4]=g,a[5]=k,a[6]=m,a[7]=q,a[8]=y,a[9]=E,a[10]=t,a[11]=x,a[12]=h*c+g*f+y*e+b[12],a[13]=l*c+k*f+E*e+b[13],a[14]=d*c+m*f+t*e+b[14],a[15]=p*c+q*f+x*e+b[15]);return a};c.SIMD.translate=function(a,b,e){var c=SIMD.Float32x4.load(b,0),f=SIMD.Float32x4.load(b,4),h=SIMD.Float32x4.load(b,8),l=SIMD.Float32x4.load(b,12);e=SIMD.Float32x4(e[0],e[1],e[2],0);b!==a&&(a[0]=
b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11]);c=SIMD.Float32x4.mul(c,SIMD.Float32x4.swizzle(e,0,0,0,0));f=SIMD.Float32x4.mul(f,SIMD.Float32x4.swizzle(e,1,1,1,1));h=SIMD.Float32x4.mul(h,SIMD.Float32x4.swizzle(e,2,2,2,2));b=SIMD.Float32x4.add(c,SIMD.Float32x4.add(f,SIMD.Float32x4.add(h,l)));SIMD.Float32x4.store(a,12,b);return a};c.translate=m.USE_SIMD?c.SIMD.translate:c.scalar.translate;c.scalar.scale=function(a,b,e){var c=e[0],
f=e[1];e=e[2];a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*f;a[5]=b[5]*f;a[6]=b[6]*f;a[7]=b[7]*f;a[8]=b[8]*e;a[9]=b[9]*e;a[10]=b[10]*e;a[11]=b[11]*e;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};c.SIMD.scale=function(a,b,e){var c;e=SIMD.Float32x4(e[0],e[1],e[2],0);c=SIMD.Float32x4.load(b,0);SIMD.Float32x4.store(a,0,SIMD.Float32x4.mul(c,SIMD.Float32x4.swizzle(e,0,0,0,0)));c=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,4,SIMD.Float32x4.mul(c,SIMD.Float32x4.swizzle(e,1,1,
1,1)));c=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,8,SIMD.Float32x4.mul(c,SIMD.Float32x4.swizzle(e,2,2,2,2)));a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};c.scale=m.USE_SIMD?c.SIMD.scale:c.scalar.scale;c.rotate=function(a,b,e,c){var f=c[0],h=c[1];c=c[2];var l=Math.sqrt(f*f+h*h+c*c),d,p,g,k,A,q,y,E,t,x,F,I,G,J,u,v,z,B,L,D;if(Math.abs(l)<m.EPSILON)return null;l=1/l;f*=l;h*=l;c*=l;d=Math.sin(e);p=Math.cos(e);g=1-p;e=b[0];l=b[1];k=b[2];A=b[3];q=b[4];y=b[5];E=b[6];t=b[7];x=b[8];F=b[9];
I=b[10];G=b[11];J=f*f*g+p;u=h*f*g+c*d;v=c*f*g-h*d;z=f*h*g-c*d;B=h*h*g+p;L=c*h*g+f*d;D=f*c*g+h*d;f=h*c*g-f*d;h=c*c*g+p;a[0]=e*J+q*u+x*v;a[1]=l*J+y*u+F*v;a[2]=k*J+E*u+I*v;a[3]=A*J+t*u+G*v;a[4]=e*z+q*B+x*L;a[5]=l*z+y*B+F*L;a[6]=k*z+E*B+I*L;a[7]=A*z+t*B+G*L;a[8]=e*D+q*f+x*h;a[9]=l*D+y*f+F*h;a[10]=k*D+E*f+I*h;a[11]=A*D+t*f+G*h;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};c.scalar.rotateX=function(a,b,e){var c=Math.sin(e);e=Math.cos(e);var f=b[4],h=b[5],l=b[6],d=b[7],p=b[8],g=b[9],
k=b[10],m=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=f*e+p*c;a[5]=h*e+g*c;a[6]=l*e+k*c;a[7]=d*e+m*c;a[8]=p*e-f*c;a[9]=g*e-h*c;a[10]=k*e-l*c;a[11]=m*e-d*c;return a};c.SIMD.rotateX=function(a,b,e){var c=SIMD.Float32x4.splat(Math.sin(e));e=SIMD.Float32x4.splat(Math.cos(e));b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,4);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,
4,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(b,c)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,e),SIMD.Float32x4.mul(f,c)));return a};c.rotateX=m.USE_SIMD?c.SIMD.rotateX:c.scalar.rotateX;c.scalar.rotateY=function(a,b,e){var c=Math.sin(e);e=Math.cos(e);var f=b[0],h=b[1],l=b[2],d=b[3],p=b[8],g=b[9],k=b[10],m=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*e-p*c;a[1]=h*e-g*c;a[2]=l*e-k*c;a[3]=d*e-m*
c;a[8]=f*c+p*e;a[9]=h*c+g*e;a[10]=l*c+k*e;a[11]=d*c+m*e;return a};c.SIMD.rotateY=function(a,b,e){var c=SIMD.Float32x4.splat(Math.sin(e));e=SIMD.Float32x4.splat(Math.cos(e));b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,8);SIMD.Float32x4.store(a,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(b,c)));SIMD.Float32x4.store(a,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,c),SIMD.Float32x4.mul(b,
e)));return a};c.rotateY=m.USE_SIMD?c.SIMD.rotateY:c.scalar.rotateY;c.scalar.rotateZ=function(a,b,e){var c=Math.sin(e);e=Math.cos(e);var f=b[0],h=b[1],l=b[2],d=b[3],p=b[4],g=b[5],k=b[6],m=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*e+p*c;a[1]=h*e+g*c;a[2]=l*e+k*c;a[3]=d*e+m*c;a[4]=p*e-f*c;a[5]=g*e-h*c;a[6]=k*e-l*c;a[7]=m*e-d*c;return a};c.SIMD.rotateZ=function(a,b,e){var c=SIMD.Float32x4.splat(Math.sin(e));e=SIMD.Float32x4.splat(Math.cos(e));
b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);var f=SIMD.Float32x4.load(b,0);b=SIMD.Float32x4.load(b,4);SIMD.Float32x4.store(a,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(f,e),SIMD.Float32x4.mul(b,c)));SIMD.Float32x4.store(a,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(b,e),SIMD.Float32x4.mul(f,c)));return a};c.rotateZ=m.USE_SIMD?c.SIMD.rotateZ:c.scalar.rotateZ;c.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=
0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};c.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.fromRotation=function(a,b,e){var c=e[0],f=e[1];e=e[2];var h=Math.sqrt(c*c+f*f+e*e),l;if(Math.abs(h)<m.EPSILON)return null;h=1/h;c*=h;f*=h;e*=h;h=Math.sin(b);b=Math.cos(b);l=1-b;a[0]=c*c*l+b;a[1]=f*c*l+e*h;a[2]=e*c*l-f*h;a[3]=0;a[4]=c*f*l-e*h;a[5]=f*f*l+b;a[6]=
e*f*l+c*h;a[7]=0;a[8]=c*e*l+f*h;a[9]=f*e*l-c*h;a[10]=e*e*l+b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.fromXRotation=function(a,b){var e=Math.sin(b),c=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=e;a[7]=0;a[8]=0;a[9]=-e;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.fromYRotation=function(a,b){var e=Math.sin(b),c=Math.cos(b);a[0]=c;a[1]=0;a[2]=-e;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=e;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.fromZRotation=
function(a,b){var e=Math.sin(b),c=Math.cos(b);a[0]=c;a[1]=e;a[2]=0;a[3]=0;a[4]=-e;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.fromRotationTranslation=function(a,b,e){var c=b[0],f=b[1],h=b[2],l=b[3],d=c+c,p=f+f,g=h+h;b=c*d;var k=c*p,c=c*g,m=f*p,f=f*g,h=h*g,d=l*d,p=l*p,l=l*g;a[0]=1-(m+h);a[1]=k+l;a[2]=c-p;a[3]=0;a[4]=k-l;a[5]=1-(b+h);a[6]=f+d;a[7]=0;a[8]=c+p;a[9]=f-d;a[10]=1-(b+m);a[11]=0;a[12]=e[0];a[13]=e[1];a[14]=e[2];a[15]=1;return a};c.getTranslation=
function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};c.getRotation=function(a,b){var e=b[0]+b[5]+b[10],c=0;0<e?(c=2*Math.sqrt(e+1),a[3]=.25*c,a[0]=(b[6]-b[9])/c,a[1]=(b[8]-b[2])/c,a[2]=(b[1]-b[4])/c):b[0]>b[5]&b[0]>b[10]?(c=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/c,a[0]=.25*c,a[1]=(b[1]+b[4])/c,a[2]=(b[8]+b[2])/c):b[5]>b[10]?(c=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/c,a[0]=(b[1]+b[4])/c,a[1]=.25*c,a[2]=(b[6]+b[9])/c):(c=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/c,a[0]=(b[8]+
b[2])/c,a[1]=(b[6]+b[9])/c,a[2]=.25*c);return a};c.fromRotationTranslationScale=function(a,b,e,c){var f=b[0],h=b[1],l=b[2],d=b[3],p=f+f,g=h+h,k=l+l;b=f*p;var m=f*g,f=f*k,q=h*g,h=h*k,l=l*k,p=d*p,g=d*g,d=d*k,k=c[0],y=c[1];c=c[2];a[0]=(1-(q+l))*k;a[1]=(m+d)*k;a[2]=(f-g)*k;a[3]=0;a[4]=(m-d)*y;a[5]=(1-(b+l))*y;a[6]=(h+p)*y;a[7]=0;a[8]=(f+g)*c;a[9]=(h-p)*c;a[10]=(1-(b+q))*c;a[11]=0;a[12]=e[0];a[13]=e[1];a[14]=e[2];a[15]=1;return a};c.fromRotationTranslationScaleOrigin=function(a,b,e,c,f){var h=b[0],l=b[1],
d=b[2],p=b[3],g=h+h,k=l+l,m=d+d;b=h*g;var q=h*k,h=h*m,y=l*k,l=l*m,d=d*m,g=p*g,k=p*k,p=p*m,m=c[0],E=c[1];c=c[2];var t=f[0],x=f[1];f=f[2];a[0]=(1-(y+d))*m;a[1]=(q+p)*m;a[2]=(h-k)*m;a[3]=0;a[4]=(q-p)*E;a[5]=(1-(b+d))*E;a[6]=(l+g)*E;a[7]=0;a[8]=(h+k)*c;a[9]=(l-g)*c;a[10]=(1-(b+y))*c;a[11]=0;a[12]=e[0]+t-(a[0]*t+a[4]*x+a[8]*f);a[13]=e[1]+x-(a[1]*t+a[5]*x+a[9]*f);a[14]=e[2]+f-(a[2]*t+a[6]*x+a[10]*f);a[15]=1;return a};c.fromQuat=function(a,b){var e=b[0],c=b[1],f=b[2],h=b[3],l=e+e,d=c+c,p=f+f,e=e*l,g=c*l,
c=c*d,k=f*l,m=f*d,f=f*p,l=h*l,d=h*d,h=h*p;a[0]=1-c-f;a[1]=g+h;a[2]=k-d;a[3]=0;a[4]=g-h;a[5]=1-e-f;a[6]=m+l;a[7]=0;a[8]=k+d;a[9]=m-l;a[10]=1-e-c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};c.frustum=function(a,b,e,c,f,h,l){var d=1/(e-b),p=1/(f-c),g=1/(h-l);a[0]=2*h*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*h*p;a[6]=0;a[7]=0;a[8]=(e+b)*d;a[9]=(f+c)*p;a[10]=(l+h)*g;a[11]=-1;a[12]=0;a[13]=0;a[14]=l*h*2*g;a[15]=0;return a};c.perspective=function(a,b,e,c,f){b=1/Math.tan(b/2);var h=1/(c-f);a[0]=b/e;a[1]=
0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(f+c)*h;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*f*c*h;a[15]=0;return a};c.perspectiveFromFieldOfView=function(a,b,e,c){var f=Math.tan(b.upDegrees*Math.PI/180),h=Math.tan(b.downDegrees*Math.PI/180),l=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);var d=2/(l+b),p=2/(f+h);a[0]=d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=p;a[6]=0;a[7]=0;a[8]=-((l-b)*d*.5);a[9]=(f-h)*p*.5;a[10]=c/(e-c);a[11]=-1;a[12]=0;a[13]=0;a[14]=c*e/(e-c);
a[15]=0;return a};c.ortho=function(a,b,e,c,f,h,l){var d=1/(b-e),p=1/(c-f),g=1/(h-l);a[0]=-2*d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*p;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*g;a[11]=0;a[12]=(b+e)*d;a[13]=(f+c)*p;a[14]=(l+h)*g;a[15]=1;return a};c.lookAt=function(a,b,e,n){var f,h,l,d,p,g,k,A,q=b[0],y=b[1];b=b[2];l=n[0];d=n[1];h=n[2];k=e[0];n=e[1];f=e[2];if(Math.abs(q-k)<m.EPSILON&&Math.abs(y-n)<m.EPSILON&&Math.abs(b-f)<m.EPSILON)return c.identity(a);e=q-k;n=y-n;k=b-f;A=1/Math.sqrt(e*e+n*n+k*k);e*=A;n*=A;
k*=A;f=d*k-h*n;h=h*e-l*k;l=l*n-d*e;(A=Math.sqrt(f*f+h*h+l*l))?(A=1/A,f*=A,h*=A,l*=A):l=h=f=0;d=n*l-k*h;p=k*f-e*l;g=e*h-n*f;(A=Math.sqrt(d*d+p*p+g*g))?(A=1/A,d*=A,p*=A,g*=A):g=p=d=0;a[0]=f;a[1]=d;a[2]=e;a[3]=0;a[4]=h;a[5]=p;a[6]=n;a[7]=0;a[8]=l;a[9]=g;a[10]=k;a[11]=0;a[12]=-(f*q+h*y+l*b);a[13]=-(d*q+p*y+g*b);a[14]=-(e*q+n*y+k*b);a[15]=1;return a};c.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+
a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};c.add=function(a,b,e){a[0]=b[0]+e[0];a[1]=b[1]+e[1];a[2]=b[2]+e[2];a[3]=b[3]+e[3];a[4]=b[4]+e[4];a[5]=b[5]+e[5];a[6]=b[6]+e[6];a[7]=b[7]+e[7];
a[8]=b[8]+e[8];a[9]=b[9]+e[9];a[10]=b[10]+e[10];a[11]=b[11]+e[11];a[12]=b[12]+e[12];a[13]=b[13]+e[13];a[14]=b[14]+e[14];a[15]=b[15]+e[15];return a};c.subtract=function(a,b,e){a[0]=b[0]-e[0];a[1]=b[1]-e[1];a[2]=b[2]-e[2];a[3]=b[3]-e[3];a[4]=b[4]-e[4];a[5]=b[5]-e[5];a[6]=b[6]-e[6];a[7]=b[7]-e[7];a[8]=b[8]-e[8];a[9]=b[9]-e[9];a[10]=b[10]-e[10];a[11]=b[11]-e[11];a[12]=b[12]-e[12];a[13]=b[13]-e[13];a[14]=b[14]-e[14];a[15]=b[15]-e[15];return a};c.sub=c.subtract;c.multiplyScalar=function(a,b,e){a[0]=b[0]*
e;a[1]=b[1]*e;a[2]=b[2]*e;a[3]=b[3]*e;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*e;a[9]=b[9]*e;a[10]=b[10]*e;a[11]=b[11]*e;a[12]=b[12]*e;a[13]=b[13]*e;a[14]=b[14]*e;a[15]=b[15]*e;return a};c.multiplyScalarAndAdd=function(a,b,e,c){a[0]=b[0]+e[0]*c;a[1]=b[1]+e[1]*c;a[2]=b[2]+e[2]*c;a[3]=b[3]+e[3]*c;a[4]=b[4]+e[4]*c;a[5]=b[5]+e[5]*c;a[6]=b[6]+e[6]*c;a[7]=b[7]+e[7]*c;a[8]=b[8]+e[8]*c;a[9]=b[9]+e[9]*c;a[10]=b[10]+e[10]*c;a[11]=b[11]+e[11]*c;a[12]=b[12]+e[12]*c;a[13]=b[13]+e[13]*c;a[14]=
b[14]+e[14]*c;a[15]=b[15]+e[15]*c;return a};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};c.equals=function(a,b){var e=a[0],c=a[1],f=a[2],h=a[3],l=a[4],d=a[5],p=a[6],g=a[7],k=a[8],A=a[9],q=a[10],y=a[11],E=a[12],t=a[13],x=a[14],F=a[15],I=b[0],G=b[1],J=b[2],u=b[3],v=b[4],z=b[5],B=b[6],L=b[7],D=
b[8],H=b[9],P=b[10],O=b[11],T=b[12],K=b[13],R=b[14],S=b[15];return Math.abs(e-I)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(I))&&Math.abs(c-G)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(f-J)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(J))&&Math.abs(h-u)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(l-v)<=m.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(d-z)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(p-B)<=m.EPSILON*Math.max(1,Math.abs(p),Math.abs(B))&&
Math.abs(g-L)<=m.EPSILON*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(k-D)<=m.EPSILON*Math.max(1,Math.abs(k),Math.abs(D))&&Math.abs(A-H)<=m.EPSILON*Math.max(1,Math.abs(A),Math.abs(H))&&Math.abs(q-P)<=m.EPSILON*Math.max(1,Math.abs(q),Math.abs(P))&&Math.abs(y-O)<=m.EPSILON*Math.max(1,Math.abs(y),Math.abs(O))&&Math.abs(E-T)<=m.EPSILON*Math.max(1,Math.abs(E),Math.abs(T))&&Math.abs(t-K)<=m.EPSILON*Math.max(1,Math.abs(t),Math.abs(K))&&Math.abs(x-R)<=m.EPSILON*Math.max(1,Math.abs(x),Math.abs(R))&&Math.abs(F-
S)<=m.EPSILON*Math.max(1,Math.abs(F),Math.abs(S))};k.exports=c},function(k,d,g){var m=g(17),c=g(20),a=g(23);d=g(24);var b={create:function(){var a=new m.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}};b.rotationTo=function(){var e=a.create(),c=a.fromValues(1,0,0),f=a.fromValues(0,1,0);return function(h,d,g){var p=a.dot(d,g);if(-.999999>p)return a.cross(e,c,d),1E-6>a.length(e)&&a.cross(e,f,d),a.normalize(e,e),b.setAxisAngle(h,e,Math.PI),h;if(.999999<p)return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h;a.cross(e,
d,g);h[0]=e[0];h[1]=e[1];h[2]=e[2];h[3]=1+p;return b.normalize(h,h)}}();b.setAxes=function(){var a=c.create();return function(c,f,h,d){a[0]=h[0];a[3]=h[1];a[6]=h[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=-f[0];a[5]=-f[1];a[8]=-f[2];return b.normalize(c,b.fromMat3(c,a))}}();b.clone=d.clone;b.fromValues=d.fromValues;b.copy=d.copy;b.set=d.set;b.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};b.setAxisAngle=function(a,b,c){c*=.5;var h=Math.sin(c);a[0]=h*b[0];a[1]=h*b[1];a[2]=h*b[2];a[3]=Math.cos(c);
return a};b.getAxisAngle=function(a,b){var c=2*Math.acos(b[3]),h=Math.sin(c/2);0!=h?(a[0]=b[0]/h,a[1]=b[1]/h,a[2]=b[2]/h):(a[0]=1,a[1]=0,a[2]=0);return c};b.add=d.add;b.multiply=function(a,b,c){var h=b[0],d=b[1],g=b[2];b=b[3];var p=c[0],k=c[1],m=c[2];c=c[3];a[0]=h*c+b*p+d*m-g*k;a[1]=d*c+b*k+g*p-h*m;a[2]=g*c+b*m+h*k-d*p;a[3]=b*c-h*p-d*k-g*m;return a};b.mul=b.multiply;b.scale=d.scale;b.rotateX=function(a,b,c){c*=.5;var h=b[0],d=b[1],g=b[2];b=b[3];var p=Math.sin(c);c=Math.cos(c);a[0]=h*c+b*p;a[1]=d*
c+g*p;a[2]=g*c-d*p;a[3]=b*c-h*p;return a};b.rotateY=function(a,b,c){c*=.5;var h=b[0],d=b[1],g=b[2];b=b[3];var p=Math.sin(c);c=Math.cos(c);a[0]=h*c-g*p;a[1]=d*c+b*p;a[2]=g*c+h*p;a[3]=b*c-d*p;return a};b.rotateZ=function(a,b,c){c*=.5;var h=b[0],d=b[1],g=b[2];b=b[3];var p=Math.sin(c);c=Math.cos(c);a[0]=h*c+d*p;a[1]=d*c-h*p;a[2]=g*c+b*p;a[3]=b*c-g*p;return a};b.calculateW=function(a,b){var c=b[0],h=b[1],d=b[2];a[0]=c;a[1]=h;a[2]=d;a[3]=Math.sqrt(Math.abs(1-c*c-h*h-d*d));return a};b.dot=d.dot;b.lerp=d.lerp;
b.slerp=function(a,b,c,d){var l=b[0],g=b[1],p=b[2];b=b[3];var k=c[0],m=c[1],A=c[2];c=c[3];var q,y,E;y=l*k+g*m+p*A+b*c;0>y&&(y=-y,k=-k,m=-m,A=-A,c=-c);1E-6<1-y?(q=Math.acos(y),E=Math.sin(q),y=Math.sin((1-d)*q)/E,d=Math.sin(d*q)/E):y=1-d;a[0]=y*l+d*k;a[1]=y*g+d*m;a[2]=y*p+d*A;a[3]=y*b+d*c;return a};b.sqlerp=function(){var a=b.create(),c=b.create();return function(f,d,l,g,p,k){b.slerp(a,d,p,k);b.slerp(c,l,g,k);b.slerp(f,a,c,2*k*(1-k));return f}}();b.invert=function(a,b){var c=b[0],d=b[1],l=b[2],g=b[3],
p=c*c+d*d+l*l+g*g,p=p?1/p:0;a[0]=-c*p;a[1]=-d*p;a[2]=-l*p;a[3]=g*p;return a};b.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};b.length=d.length;b.len=b.length;b.squaredLength=d.squaredLength;b.sqrLen=b.squaredLength;b.normalize=d.normalize;b.fromMat3=function(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=.5*c,c=.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var l=(d+1)%3,g=(d+2)%3,c=Math.sqrt(b[3*
d+d]-b[3*l+l]-b[3*g+g]+1);a[d]=.5*c;c=.5/c;a[3]=(b[3*l+g]-b[3*g+l])*c;a[l]=(b[3*l+d]+b[3*d+l])*c;a[g]=(b[3*g+d]+b[3*d+g])*c}return a};b.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};b.exactEquals=d.exactEquals;b.equals=d.equals;k.exports=b},function(k,d,g){var m=g(17),c={create:function(){var a=new m.ARRAY_TYPE(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var b=new m.ARRAY_TYPE(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,b,c){var d=new m.ARRAY_TYPE(3);
d[0]=a;d[1]=b;d[2]=c;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}};c.sub=c.subtract;c.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a};c.mul=c.multiply;c.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a};c.div=
c.divide;c.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};c.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};c.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};c.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};c.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);
return a};c.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};c.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;return a};c.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],f=b[2]-a[2];return Math.sqrt(c*c+d*d+f*f)};c.dist=c.distance;c.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],f=b[2]-a[2];return c*c+d*d+f*f};c.sqrDist=c.squaredDistance;c.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};c.len=c.length;c.squaredLength=
function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a};c.sqrLen=c.squaredLength;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};c.normalize=function(a,b){var c=b[0],d=b[1],f=b[2],c=c*c+d*d+f*f;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};c.cross=function(a,b,c){var d=b[0],f=b[1];b=b[2];var h=c[0],l=c[1];c=c[2];a[0]=f*c-b*l;a[1]=
b*h-d*c;a[2]=d*l-f*h;return a};c.lerp=function(a,b,c,d){var f=b[0],h=b[1];b=b[2];a[0]=f+d*(c[0]-f);a[1]=h+d*(c[1]-h);a[2]=b+d*(c[2]-b);return a};c.hermite=function(a,b,c,d,f,h){var l=h*h,g=l*(2*h-3)+1,p=l*(h-2)+h,k=l*(h-1);h=l*(3-2*h);a[0]=b[0]*g+c[0]*p+d[0]*k+f[0]*h;a[1]=b[1]*g+c[1]*p+d[1]*k+f[1]*h;a[2]=b[2]*g+c[2]*p+d[2]*k+f[2]*h;return a};c.bezier=function(a,b,c,d,f,h){var l=1-h,g=l*l,p=h*h,k=g*l,g=3*h*g,l=3*p*l;h*=p;a[0]=b[0]*k+c[0]*g+d[0]*l+f[0]*h;a[1]=b[1]*k+c[1]*g+d[1]*l+f[1]*h;a[2]=b[2]*k+
c[2]*g+d[2]*l+f[2]*h;return a};c.random=function(a,b){b=b||1;var c=2*m.RANDOM()*Math.PI,d=2*m.RANDOM()-1,f=Math.sqrt(1-d*d)*b;a[0]=Math.cos(c)*f;a[1]=Math.sin(c)*f;a[2]=d*b;return a};c.transformMat4=function(a,b,c){var d=b[0],f=b[1];b=b[2];var h=c[3]*d+c[7]*f+c[11]*b+c[15],h=h||1;a[0]=(c[0]*d+c[4]*f+c[8]*b+c[12])/h;a[1]=(c[1]*d+c[5]*f+c[9]*b+c[13])/h;a[2]=(c[2]*d+c[6]*f+c[10]*b+c[14])/h;return a};c.transformMat3=function(a,b,c){var d=b[0],f=b[1];b=b[2];a[0]=d*c[0]+f*c[3]+b*c[6];a[1]=d*c[1]+f*c[4]+
b*c[7];a[2]=d*c[2]+f*c[5]+b*c[8];return a};c.transformQuat=function(a,b,c){var d=b[0],f=b[1],h=b[2];b=c[0];var l=c[1],g=c[2];c=c[3];var p=c*d+l*h-g*f,k=c*f+g*d-b*h,m=c*h+b*f-l*d,d=-b*d-l*f-g*h;a[0]=p*c+d*-b+k*-g-m*-l;a[1]=k*c+d*-l+m*-b-p*-g;a[2]=m*c+d*-g+p*-l-k*-b;return a};c.rotateX=function(a,b,c,d){var f=[],h=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];h[0]=f[0];h[1]=f[1]*Math.cos(d)-f[2]*Math.sin(d);h[2]=f[1]*Math.sin(d)+f[2]*Math.cos(d);a[0]=h[0]+c[0];a[1]=h[1]+c[1];a[2]=h[2]+c[2];return a};
c.rotateY=function(a,b,c,d){var f=[],h=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];h[0]=f[2]*Math.sin(d)+f[0]*Math.cos(d);h[1]=f[1];h[2]=f[2]*Math.cos(d)-f[0]*Math.sin(d);a[0]=h[0]+c[0];a[1]=h[1]+c[1];a[2]=h[2]+c[2];return a};c.rotateZ=function(a,b,c,d){var f=[],h=[];f[0]=b[0]-c[0];f[1]=b[1]-c[1];f[2]=b[2]-c[2];h[0]=f[0]*Math.cos(d)-f[1]*Math.sin(d);h[1]=f[0]*Math.sin(d)+f[1]*Math.cos(d);h[2]=f[2];a[0]=h[0]+c[0];a[1]=h[1]+c[1];a[2]=h[2]+c[2];return a};c.forEach=function(){var a=c.create();return function(b,
c,d,f,h,l){c||(c=3);d||(d=0);for(f=f?Math.min(f*c+d,b.length):b.length;d<f;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],h(a,a,l),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2];return b}}();c.angle=function(a,b){var e=c.fromValues(a[0],a[1],a[2]),d=c.fromValues(b[0],b[1],b[2]);c.normalize(e,e);c.normalize(d,d);e=c.dot(e,d);return 1<e?0:Math.acos(e)};c.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};c.equals=function(a,b){var c=a[0],
d=a[1],f=a[2],h=b[0],l=b[1],g=b[2];return Math.abs(c-h)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(d-l)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(l))&&Math.abs(f-g)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))};k.exports=c},function(k,d,g){var m=g(17),c={create:function(){var a=new m.ARRAY_TYPE(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new m.ARRAY_TYPE(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,c,d){var f=new m.ARRAY_TYPE(4);
f[0]=a;f[1]=b;f[2]=c;f[3]=d;return f},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,b,c,d,f){a[0]=b;a[1]=c;a[2]=d;a[3]=f;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];return a}};c.sub=c.subtract;c.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];a[3]=b[3]*c[3];return a};c.mul=c.multiply;c.divide=function(a,
b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];a[3]=b[3]/c[3];return a};c.div=c.divide;c.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);a[3]=Math.ceil(b[3]);return a};c.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);a[3]=Math.floor(b[3]);return a};c.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);a[3]=Math.min(b[3],c[3]);return a};c.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);
a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);a[3]=Math.max(b[3],c[3]);return a};c.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);a[3]=Math.round(b[3]);return a};c.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;return a};c.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d;a[3]=b[3]+c[3]*d;return a};c.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],f=b[2]-a[2],h=b[3]-a[3];return Math.sqrt(c*c+d*d+f*
f+h*h)};c.dist=c.distance;c.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],f=b[2]-a[2],h=b[3]-a[3];return c*c+d*d+f*f+h*h};c.sqrDist=c.squaredDistance;c.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};c.len=c.length;c.squaredLength=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a};c.sqrLen=c.squaredLength;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=
1/b[2];a[3]=1/b[3];return a};c.normalize=function(a,b){var c=b[0],d=b[1],f=b[2],h=b[3],l=c*c+d*d+f*f+h*h;0<l&&(l=1/Math.sqrt(l),a[0]=c*l,a[1]=d*l,a[2]=f*l,a[3]=h*l);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};c.lerp=function(a,b,c,d){var f=b[0],h=b[1],l=b[2];b=b[3];a[0]=f+d*(c[0]-f);a[1]=h+d*(c[1]-h);a[2]=l+d*(c[2]-l);a[3]=b+d*(c[3]-b);return a};c.random=function(a,b){b=b||1;a[0]=m.RANDOM();a[1]=m.RANDOM();a[2]=m.RANDOM();a[3]=m.RANDOM();c.normalize(a,a);c.scale(a,
a,b);return a};c.transformMat4=function(a,b,c){var d=b[0],f=b[1],h=b[2];b=b[3];a[0]=c[0]*d+c[4]*f+c[8]*h+c[12]*b;a[1]=c[1]*d+c[5]*f+c[9]*h+c[13]*b;a[2]=c[2]*d+c[6]*f+c[10]*h+c[14]*b;a[3]=c[3]*d+c[7]*f+c[11]*h+c[15]*b;return a};c.transformQuat=function(a,b,c){var d=b[0],f=b[1],h=b[2],l=c[0],g=c[1],p=c[2];c=c[3];var k=c*d+g*h-p*f,m=c*f+p*d-l*h,A=c*h+l*f-g*d,d=-l*d-g*f-p*h;a[0]=k*c+d*-l+m*-p-A*-g;a[1]=m*c+d*-g+A*-l-k*-p;a[2]=A*c+d*-p+k*-g-m*-l;a[3]=b[3];return a};c.forEach=function(){var a=c.create();
return function(b,c,d,f,h,l){c||(c=4);d||(d=0);for(f=f?Math.min(f*c+d,b.length):b.length;d<f;d+=c)a[0]=b[d],a[1]=b[d+1],a[2]=b[d+2],a[3]=b[d+3],h(a,a,l),b[d]=a[0],b[d+1]=a[1],b[d+2]=a[2],b[d+3]=a[3];return b}}();c.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};c.equals=function(a,b){var c=a[0],d=a[1],f=a[2],h=a[3],l=b[0],g=b[1],p=b[2],k=b[3];return Math.abs(c-l)<=m.EPSILON*Math.max(1,Math.abs(c),
Math.abs(l))&&Math.abs(d-g)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(f-p)<=m.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(h-k)<=m.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))};k.exports=c},function(k,d,g){var m=g(17),c={create:function(){var a=new m.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new m.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var c=new m.ARRAY_TYPE(2);c[0]=a;c[1]=b;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},
set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};c.sub=c.subtract;c.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};c.mul=c.multiply;c.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a};c.div=c.divide;c.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};c.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};c.min=
function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};c.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};c.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};c.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};c.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;return a};c.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)};c.dist=c.distance;c.squaredDistance=function(a,b){var c=
b[0]-a[0],d=b[1]-a[1];return c*c+d*d};c.sqrDist=c.squaredDistance;c.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};c.len=c.length;c.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};c.sqrLen=c.squaredLength;c.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};c.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};c.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};c.dot=function(a,b){return a[0]*b[0]+a[1]*
b[1]};c.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};c.lerp=function(a,b,c,d){var f=b[0];b=b[1];a[0]=f+d*(c[0]-f);a[1]=b+d*(c[1]-b);return a};c.random=function(a,b){b=b||1;var c=2*m.RANDOM()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};c.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a};c.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a};c.transformMat3=function(a,
b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};c.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};c.forEach=function(){var a=c.create();return function(b,c,d,f,h,l){c||(c=2);d||(d=0);for(f=f?Math.min(f*c+d,b.length):b.length;d<f;d+=c)a[0]=b[d],a[1]=b[d+1],h(a,a,l),b[d]=a[0],b[d+1]=a[1];return b}}();c.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};c.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};
c.equals=function(a,b){var c=a[0],d=a[1],f=b[0],h=b[1];return Math.abs(c-f)<=m.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(d-h)<=m.EPSILON*Math.max(1,Math.abs(d),Math.abs(h))};k.exports=c},function(k,d){d.partitionArray=function(d,k,c,a){for(;k<c;){var b=d[k];a(b)?++k:(--c,d[k]=d[c],d[c]=b)}return c};d.maybePadArray=function(d,k){if(d.length===k)return d;var c=new d.constructor(k);c.set(d);return c};d.getFortranOrderStrides=function(d){for(var k=d.length,c=Array(k),a=c[0]=1>=arguments.length||
void 0===arguments[1]?1:arguments[1],b=1;b<k;++b)a*=d[b-1],c[b]=a;return c}},function(k,d){d.approxEqual=function(d,k){return d===k?!0:1E-6>Math.abs(d-k)/Math.min(Math.abs(d),Math.abs(k))}},function(k,d){var g=d.DataType||(d.DataType={});g[g.UINT8=0]="UINT8";g[g.UINT16=1]="UINT16";g[g.UINT32=2]="UINT32";g[g.UINT64=3]="UINT64";g[g.FLOAT32=4]="FLOAT32";g=d.DataType;d.DATA_TYPE_BYTES=[];d.DATA_TYPE_BYTES[g.UINT8]=1;d.DATA_TYPE_BYTES[g.UINT16]=2;d.DATA_TYPE_BYTES[g.UINT32]=4;d.DATA_TYPE_BYTES[g.UINT64]=
8;d.DATA_TYPE_BYTES[g.FLOAT32]=4},function(k,d,g){function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,
enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function b(a,b){y.decodeRawChunk(a,x.inflate(new Uint8Array(b)).buffer)}function e(a,b){A.decodeCompressedSegmentationChunk(a,x.inflate(new Uint8Array(b)).buffer)}function n(a,b){return C.decodeJsonManifestChunk(a,b,"fragmentKey")}function f(a,b){var c=new DataView(b),e=c.getUint32(0,!0);if(0!==c.getUint32(4,!0))throw Error("The number of vertices should not exceed 2^32-1.");C.decodeVertexPositionsAndIndices(a,
b,E.Endianness.LITTLE,8,e)}var h=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}();k=this&&this.__decorate||function(a,b,c,e){var d=arguments.length,f=3>d?b:null===e?e=Object.getOwnPropertyDescriptor(b,c):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,e);else for(var l=
a.length-1;0<=l;l--)if(h=a[l])f=(3>d?h(f):3<d?h(b,c,f):h(b,c))||f;return 3<d&&f&&Object.defineProperty(b,c,f),f};g(30);var l=g(4),w=g(32),p=g(35),C=g(36),r=g(12),A=g(48),q=g(49),y=g(57),E=g(47),t=g(15),x=g(58);d.decodeGzippedRawChunk=b;d.decodeGzippedCompressedSegmentationChunk=e;var F=new Map([[p.VolumeChunkEncoding.RAW,b],[p.VolumeChunkEncoding.JPEG,q.decodeJpegChunk],[p.VolumeChunkEncoding.COMPRESSED_SEGMENTATION,e]]);d=function(b){function e(){m(this,e);for(var a=arguments.length,b=Array(a),d=
0;d<a;d++)b[d]=arguments[d];var f,a=c(this,(f=Object.getPrototypeOf(e)).call.apply(f,[].concat([this],$jscomp.arrayFromIterable(b))));a.encodingParams=a.getEncodingParams();a.chunkDecoder=F.get(a.parameters.encoding);return a}a(e,b);h(e,[{key:"getEncodingParams",value:function(){var a=this.parameters.encoding;switch(a){case p.VolumeChunkEncoding.RAW:return"/subvolume_format=RAW/image_format_options.gzip_compression_level=6";case p.VolumeChunkEncoding.JPEG:return"/subvolume_format=SINGLE_IMAGE/image_format_options.image_format=JPEG";
case p.VolumeChunkEncoding.COMPRESSED_SEGMENTATION:return"/subvolume_format=RAW/image_format_options.compressed_segmentation_block_size="+t.vec3Key(this.spec.compressedSegmentationBlockSize)+"/image_format_options.gzip_compression_level=6";default:throw Error("Invalid encoding: "+a);}}},{key:"download",value:function(a){var b=this.parameters,c=void 0,c=this.computeChunkBounds(a),e=a.chunkDataSize,c="/v1beta2/binary/volumes/binary/volumes/subvolume/header.volume_id="+b.volume_id+"/geometry.corner="+
t.vec3Key(c)+"/geometry.size="+t.vec3Key(e)+"/geometry.scale="+b.scaleIndex+this.encodingParams+"?alt=media";l.handleChunkDownloadPromise(a,w.makeRequest(b.instance,"GET",c,"arraybuffer"),this.chunkDecoder)}}]);return e}(r.ParameterizedVolumeChunkSource);d=k([l.registerChunkSource(p.VolumeSourceParameters)],d);d=function(b){function e(){m(this,e);return c(this,Object.getPrototypeOf(e).apply(this,arguments))}a(e,b);h(e,[{key:"download",value:function(a){var b=this.parameters;l.handleChunkDownloadPromise(a,
w.makeRequest(b.instance,"GET","/v1beta2/objects/"+b.volume_id+"/meshes/"+b.mesh_name+":listfragments?object_id="+a.objectId,"json"),n)}},{key:"downloadFragment",value:function(a){var b=this.parameters;l.handleChunkDownloadPromise(a,w.makeRequest(b.instance,"GET","/v1beta2/binary/objects/binary/objects/fragment/header.volume_id="+b.volume_id+"/mesh_name="+b.mesh_name+"/fragment_key="+a.fragmentId+"/object_id="+a.manifestChunk.objectId+"?alt=media","arraybuffer"),f)}}]);return e}(C.ParameterizedMeshSource);
d=k([l.registerChunkSource(p.MeshSourceParameters)],d)},function(k,d,g){k=g(31);d=g(2);var m=g(1),c=null;k.implementation.getNewTokenPromise=function(a){var b={};null!=a&&(b.invalidToken=a);a=new Promise(function(a,b){c=a});m.rpc.invoke("brainmaps.requestToken",b);return a};d.registerRPC("brainmaps.receiveToken",function(a){c(a.authResult)})},function(k,d){var g=function b(){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");};d.Implementation=g;d.implementation=new g;
var m=null,c=null;d.getToken=function(b){if(null!==m&&(null===c||null==b||b.generationId!==c.generationId))return m;c=null;m=d.implementation.getNewTokenPromise(b);m.then(function(b){c=b});return m}},function(k,d,g){function m(a,b,c,h){d.INSTANCE_IDENTIFIERS[a]=c;d.INSTANCE_NAMES[a]=h;c=["https://"+b];for(h=0;9>=h;++h)c.push("https://s"+h+"-"+b);d.INSTANCE_BASE_URLS[a]=c}var c=g(31),a=g(33),b=g(11);d.numPendingRequests=0;d.PRODUCTION_INSTANCE=0;d.INSTANCE_NAMES=[];d.INSTANCE_BASE_URLS=[];d.INSTANCE_IDENTIFIERS=
[];d.brainmapsInstanceKey=function(a){return d.INSTANCE_IDENTIFIERS[a]};d.setupBrainmapsInstance=m;m(d.PRODUCTION_INSTANCE,"brainmaps.googleapis.com","prod","Brain Maps");d.makeRequest=function(e,g,f,h){var l=void 0;return b.makeCancellablePromise(function(b,p,k){function m(k){null===l?--d.numPendingRequests:(l=a.openShardedHttpRequest(d.INSTANCE_BASE_URLS[e],f,g),l.responseType=h,l.setRequestHeader("Authorization",k.tokenType+" "+k.accessToken),l.onloadend=function(){if(null===l)--d.numPendingRequests;
else{var e=this.status;200<=e&&300>e?(--d.numPendingRequests,b(this.response)):403===e||401===e?c.getToken(k).then(m):(--d.numPendingRequests,p(a.HttpError.fromXhr(this)))}},l.send())}k(function(){var a=l;l=null;null!=a&&a.abort()});c.getToken().then(m)})}},function(k,d,g){function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,c){if(Array.isArray(a)){var e=a.length,e=1===e?0:Math.abs(b.simpleStringHash(c))%e;return a[e]+c}return a+c}var a=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),b=g(34),e=g(11);$jscomp.initSymbol();d.URL_SYMBOL=
Symbol("url");$jscomp.initSymbol();d.METHOD_SYMBOL=Symbol("method");var n=function(b){function c(a,b,e,d){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");var f=a+" "+JSON.stringify(b)+" resulted in HTTP error "+e;d&&(f+=": "+d);var f=f+".",g;g=Object.getPrototypeOf(c).call(this,f);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==typeof g&&"function"!==typeof g?this:g;g.name="HttpError";g.message=f;g.method=
a;g.url=b;g.code=e;g.statusMessage=d;return g}m(c,b);a(c,null,[{key:"fromXhr",value:function(a){return new c(a[d.METHOD_SYMBOL],a[d.URL_SYMBOL],a.status,a.statusText)}}]);return c}(Error);d.HttpError=n;d.openHttpRequest=function(a){var b=1>=arguments.length||void 0===arguments[1]?"GET":arguments[1],c=new XMLHttpRequest;c[d.METHOD_SYMBOL]=b;c[d.URL_SYMBOL]=a;c.open(b,a);return c};d.pickShard=c;d.openShardedHttpRequest=function(a,b){var e=2>=arguments.length||void 0===arguments[2]?"GET":arguments[2],
g=new XMLHttpRequest,p=c(a,b);g[d.METHOD_SYMBOL]=e;g[d.URL_SYMBOL]=p;g.open(e,p);return g};d.sendHttpRequest=function(a,b){a.responseType=b;return e.makeCancellablePromise(function(b,c,e){a.onloadend=function(){var e=this.status;200<=e&&300>e?b(this.response):c(n.fromXhr(a))};e(function(){a.abort()});a.send()})};d.parseSpecialUrl=function(a){var b=a.match(/^([^:\/]+):\/\/([^\/]+)(\/.*)?$/);if(null===b)throw Error("Invalid URL: "+JSON.stringify(a));return"gs"===b[1]?(a=b[2],[["https://"+a+".storage.googleapis.com",
"https://storage.googleapis.com/"+a],b[3]]):[[a],""]}},function(k,d){d.simpleStringHash=function(d){for(var k=0,c=d.length,a=0;a<c;++a)k=31*k+d.charCodeAt(a)|0;return k}},function(k,d,g){function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}var c=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}(),a=g(32);(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION"})(d.VolumeChunkEncoding||(d.VolumeChunkEncoding={}));var b=d.VolumeChunkEncoding;k=function(){function e(){m(this,e)}c(e,null,[{key:"stringify",value:function(c){return"brainmaps-"+a.brainmapsInstanceKey(c.instance)+":volume/"+c.volume_id+"/"+c.scaleIndex+"/"+b[c.encoding]}}]);return e}();k.RPC_ID="brainmaps/VolumeChunkSource";d.VolumeSourceParameters=k;k=function(){function b(){m(this,
b)}c(b,null,[{key:"stringify",value:function(b){return"brainmaps:"+a.brainmapsInstanceKey(b.instance)+":mesh/"+b.volume_id+"/"+b.mesh_name}}]);return b}();k.RPC_ID="brainmaps/MeshSource";d.MeshSourceParameters=k},function(k,d,g){function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,
b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function b(a,b){for(var c=A.vec3.create(),e=A.vec3.create(),d=A.vec3.create(),f=new Float32Array(a.length),h=new Float32Array(a.length/3),l=b.length,g=0;g<l;g+=3)for(var p=0;3>p;++p)h[b[g+p]]+=1;for(g=
0;g<l;g+=3){for(var p=3*b[g],k=3*b[g+1],t=3*b[g+2],n=0;3>n;++n)e[n]=a[k+n]-a[p+n],d[n]=a[t+n]-a[k+n];A.vec3.cross(c,e,d);A.vec3.normalize(c,c);for(p=0;3>p;++p)for(t=b[g+p],k=1/h[t],t*=3,n=0;3>n;++n)f[t+n]+=k*c[n]}c=f.length;for(e=0;e<c;e+=3)d=f.subarray(e,3),A.vec3.normalize(d,d);return f}var e=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){c&&a(b.prototype,
c);e&&a(b,e);return b}}(),n=function I(a,b,c){null===a&&(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,b);if(void 0===e)return a=Object.getPrototypeOf(a),null===a?void 0:I(a,b,c);if("value"in e)return e.value;b=e.get;return void 0===b?void 0:b.call(c)};k=this&&this.__decorate||function(a,b,c,e){var d=arguments.length,f=3>d?b:null===e?e=Object.getOwnPropertyDescriptor(b,c):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,e);else for(var g=
a.length-1;0<=g;g--)if(h=a[g])f=(3>d?h(f):3<d?h(b,c,f):h(b,c))||f;return 3<d&&f&&Object.defineProperty(b,c,f),f};var f=g(4),h=g(5),l=g(37),w=g(38),p=g(46),C=g(46),r=g(47),A=g(15),q=g(42),y=g(41);g=g(2);var E=function(b){function d(){m(this,d);var a=c(this,Object.getPrototypeOf(d).call(this));a.backendOnly=!0;a.objectId=new y.Uint64;return a}a(d,b);e(d,[{key:"initializeManifestChunk",value:function(a,b){n(Object.getPrototypeOf(d.prototype),"initialize",this).call(this,a);this.objectId.assign(b)}},
{key:"freeSystemMemory",value:function(){this.fragmentIds=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=100;n(Object.getPrototypeOf(d.prototype),"downloadSucceeded",this).call(this);this.priorityTier===h.ChunkPriorityTier.VISIBLE&&this.source.chunkManager.scheduleUpdateChunkPriorities()}},{key:"toString",value:function(){return this.objectId.toString()}}]);return d}(f.Chunk);d.ManifestChunk=E;var t=function(b){function d(){m(this,d);var a=c(this,Object.getPrototypeOf(d).call(this));
a.manifestChunk=null;a.fragmentId=null;a.vertexPositions=null;a.indices=null;a.vertexNormals=null;return a}a(d,b);e(d,[{key:"initializeFragmentChunk",value:function(a,b,c){n(Object.getPrototypeOf(d.prototype),"initialize",this).call(this,a);this.manifestChunk=b;this.fragmentId=c}},{key:"freeSystemMemory",value:function(){this.fragmentId=this.vertexPositions=this.indices=this.vertexNormals=this.manifestChunk=null}},{key:"serialize",value:function(a,b){n(Object.getPrototypeOf(d.prototype),"serialize",
this).call(this,a,b);a.objectKey=this.manifestChunk.key;var c=this.vertexPositions,e=this.indices,f=this.vertexNormals;a.vertexPositions=c;a.indices=e;a.vertexNormals=f;c=c.buffer;b.push(c);e=e.buffer;e!==c&&b.push(e);f=f.buffer;f!==c&&f!==e&&b.push(f);this.vertexPositions=this.indices=this.vertexNormals=null}},{key:"downloadSucceeded",value:function(){this.systemMemoryBytes=this.gpuMemoryBytes=this.vertexPositions.byteLength+this.indices.byteLength+this.vertexNormals.byteLength;n(Object.getPrototypeOf(d.prototype),
"downloadSucceeded",this).call(this)}}]);return d}(f.Chunk);d.FragmentChunk=t;d.decodeJsonManifestChunk=function(a,b,c){q.verifyObject(b);a.fragmentIds=q.verifyObjectProperty(b,c,function(a){if(!Array.isArray(a))throw Error("Expected array, received: "+JSON.stringify(a)+".");for(var b=$jscomp.makeIterator(a),c=b.next();!c.done;c=b.next())if(c=c.value,"string"!==typeof c)throw Error("Expected string fragment key, received: "+JSON.stringify(c)+".");return a})};d.computeVertexNormals=b;d.decodeVertexPositionsAndIndices=
function(a,c,e,d,f,h,g){var l=new Float32Array(c,d,3*f);r.convertEndian32(l,e);void 0===h&&(h=d+12*f);d=void 0;void 0!==g&&(d=3*g);c=void 0===d?new Uint32Array(c,h):new Uint32Array(c,h,d);if(0!==c.length%3)throw Error("Number of indices is not a multiple of 3: "+c.length+".");r.convertEndian32(c,e);a.vertexPositions=l;a.indices=c;a.vertexNormals=b(l,c)};var x=function(b){function d(a,b){m(this,d);var e=c(this,Object.getPrototypeOf(d).call(this,a,b));return(e.fragmentSource=e.registerDisposer(a.getRef(b.fragmentSource))).meshSource=
e}a(d,b);e(d,[{key:"getChunk",value:function(a){var b=p.getObjectKey(a),c=this.chunks.get(b);void 0===c&&(c=this.getNewChunk_(E),c.initializeManifestChunk(b,a),this.addChunk(c));return c}},{key:"getFragmentChunk",value:function(a,b){var c=a.key+"/"+b,e=this.fragmentSource,d=e.chunks.get(c);void 0===d&&(d=e.getNewChunk_(t),d.initializeFragmentChunk(c,a,b),e.addChunk(d));return d}}]);return d}(f.ChunkSource);d.MeshSource=x;x=function(b){function e(a,b){m(this,e);var d=c(this,Object.getPrototypeOf(e).call(this,
a,b));d.parameters=b.parameters;return d}a(e,b);return e}(x);d.ParameterizedMeshSource=x;f=function(b){function d(){m(this,d);for(var a=arguments.length,b=Array(a),e=0;e<a;e++)b[e]=arguments[e];var f,a=c(this,(f=Object.getPrototypeOf(d)).call.apply(f,[].concat([this],$jscomp.arrayFromIterable(b))));a.meshSource=null;return a}a(d,b);e(d,[{key:"download",value:function(a){this.meshSource.downloadFragment(a)}}]);return d}(f.ChunkSource);f=k([g.registerSharedObject(l.FRAGMENT_SOURCE_RPC_ID)],f);d.FragmentSource=
f;d=function(b){function d(a,b){m(this,d);var e=c(this,Object.getPrototypeOf(d).call(this,a,b));e.source=e.registerDisposer(a.getRef(b.source));e.registerSignalBinding(e.chunkManager.recomputeChunkPriorities.add(e.updateChunkPriorities,e));return e}a(d,b);e(d,[{key:"updateChunkPriorities",value:function(){var a=this.source,b=this.chunkManager;C.forEachVisibleSegment(this,function(c){c=a.getChunk(c);b.requestChunk(c,h.ChunkPriorityTier.VISIBLE,100);if(c.state===h.ChunkState.SYSTEM_MEMORY_WORKER)for(var e=
$jscomp.makeIterator(c.fragmentIds),d=e.next();!d.done;d=e.next())d=a.getFragmentChunk(c,d.value),b.requestChunk(d,h.ChunkPriorityTier.VISIBLE,50)})}}]);return d}(w.SegmentationLayerSharedObjectCounterpart);d=k([g.registerSharedObject(l.MESH_LAYER_RPC_ID)],d)},function(k,d){d.MESH_LAYER_RPC_ID="mesh/MeshLayer";d.FRAGMENT_SOURCE_RPC_ID="mesh/FragmentSource"},function(k,d,g){function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==
typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}g(39);g(43);k=function(a){function b(a,c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d=m(this,Object.getPrototypeOf(b).call(this,
a,c));d.chunkManager=a.get(c.chunkManager);d.visibleSegments=a.get(c.visibleSegments);d.segmentEquivalences=a.get(c.segmentEquivalences);var h=function(){d.chunkManager.scheduleUpdateChunkPriorities()};d.registerSignalBinding(d.visibleSegments.changed.add(h));d.registerSignalBinding(d.segmentEquivalences.changed.add(h));return d}c(b,a);return b}(g(2).SharedObjectCounterpart);d.SegmentationLayerSharedObjectCounterpart=k},function(k,d,g){function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+
typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var c=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),a=function C(a,b,c){null===a&&(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,
b);if(void 0===e)return a=Object.getPrototypeOf(a),null===a?void 0:C(a,b,c);if("value"in e)return e.value;b=e.get;return void 0===b?void 0:b.call(c)};k=this&&this.__decorate||function(a,b,c,e){var d=arguments.length,f=3>d?b:null===e?e=Object.getOwnPropertyDescriptor(b,c):e,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,e);else for(var g=a.length-1;0<=g;g--)if(h=a[g])f=(3>d?h(f):3<d?h(b,c,f):h(b,c))||f;return 3<d&&f&&Object.defineProperty(b,c,f),f};var b=
g(40),e=g(42),n=g(41),f=g(2),h=g(6);g=function(d){function f(){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");for(var a=arguments.length,c=Array(a),e=0;e<a;e++)c[e]=arguments[e];var d,a=(d=Object.getPrototypeOf(f)).call.apply(d,[].concat([this],$jscomp.arrayFromIterable(c)));if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!a||"object"!==typeof a&&"function"!==typeof a?this:a;d.disjointSets=new b.DisjointUint64Sets;
d.changed=new h.Signal;return d}m(f,d);c(f,[{key:"disposed",value:function(){this.changed=this.disjointSets=void 0;a(Object.getPrototypeOf(f.prototype),"disposed",this).call(this)}},{key:"link",value:function(a,b){if(this.disjointSets.link(a,b)){var c=this.rpc;c&&c.invoke("DisjointUint64Sets.add",{id:this.rpcId,al:a.low,ah:a.high,bl:b.low,bh:b.high});this.changed.dispatch()}}},{key:"get",value:function(a){return this.disjointSets.get(a)}},{key:"clear",value:function(){if(this.disjointSets.clear()){var a=
this.rpc;a&&a.invoke("DisjointUint64Sets.clear",{id:this.rpcId});this.changed.dispatch()}}},{key:"setElements",value:function(a){return this.disjointSets.setElements(a)}},{key:"toJSON",value:function(){return this.disjointSets.toJSON()}},{key:"restoreState",value:function(a){var b=this;this.clear();void 0!==a&&function(){var c=[new n.Uint64,new n.Uint64];e.parseArray(a,function(a){e.parseArray(a,function(a,e){c[e%2].parseString(String(a),10);0!==e&&b.link(c[0],c[1])})})}()}},{key:"size",get:function(){return this.disjointSets.size}}],
[{key:"makeWithCounterpart",value:function(a){var b=new this;b.initializeCounterpart(a);return b}}]);return f}(f.SharedObjectCounterpart);g=k([f.registerSharedObject("DisjointUint64Sets")],g);d.SharedDisjointUint64Sets=g;var l=new n.Uint64,w=new n.Uint64;f.registerRPC("DisjointUint64Sets.add",function(a){var b=this.get(a.id);l.low=a.al;l.high=a.ah;w.low=a.bl;w.high=a.bh;b.disjointSets.link(l,w)&&b.changed.dispatch()});f.registerRPC("DisjointUint64Sets.clear",function(a){a=this.get(a.id);a.disjointSets.clear()&&
a.changed.dispatch()})},function(k,d,g){function m(a){for(var b=a,c=a[n];c!==a;)a=c,c=a[n];for(a=b[n];c!==a;)b[n]=c,b=a,a=b[n];return c}function c(a){function b(h,g){for(;;)switch(c){case 0:d=!0,e=a;case 1:if(!d&&e===a){c=3;break}c=4;return{value:e,done:!1};case 4:if(void 0===g){c=5;break}c=-1;throw g;case 5:e=e[f];case 2:d=!1;c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=0,e,d,h={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");
}};$jscomp.initSymbolIterator();h[Symbol.iterator]=function(){return this};return h}var a=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),b=g(41);$jscomp.initSymbol();var e=Symbol("disjoint_sets:rank");$jscomp.initSymbol();var n=Symbol("disjoint_sets:parent");$jscomp.initSymbol();var f=Symbol("disjoint_sets:next");
$jscomp.initSymbol();var h=Symbol("disjoint_sets:prev");$jscomp.initSymbol();var l=Symbol("disjoint_sets:min");k=function(){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");this.map=new Map;this.generation=0}$jscomp.initSymbol();$jscomp.initSymbolIterator();a(d,[{key:"get",value:function(a){var b=this.map.get(a.toString());return void 0===b?a:m(b)[l]}},{key:"isMinElement",value:function(a){var c=this.get(a);return c===a||b.Uint64.equal(c,a)}},{key:"makeSet",
value:function(a){var b=a.toString(),c=this.map,d=c.get(b);return void 0===d?(a=d=a.clone(),a[n]=a,a[e]=0,a[f]=a[h]=a,d[l]=d,c.set(b,d),d):m(d)}},{key:"link",value:function(a,c){a=this.makeSet(a);c=this.makeSet(c);if(a===c)return!1;this.generation++;var d;d=a;var g=c,k=d[e],m=g[e];k>m?g[n]=d:(d[n]=g,k===m&&(g[e]=m+1),d=g);var g=a,k=c,m=g[h],w=k[h];k[h]=m;m[f]=k;g[h]=w;w[f]=g;g=a[l];k=c[l];d[l]=b.Uint64.less(g,k)?g:k;return!0}},{key:"setElements",value:function(a){function b(k,n){for(;;)switch(e){case 0:g=
a.toString();h=l.map.get(g);if(void 0!==h){e=1;break}e=3;return{value:a,done:!1};case 3:if(void 0===n){e=4;break}e=-1;throw n;case 4:e=2;break;case 1:f=$jscomp.makeIterator(c(h));case 5:if((d=f.next(k)).done){e=6;break}e=7;return{value:d.value,done:!1};case 7:if(void 0===n){e=8;break}e=-1;throw n;case 8:e=5;break;case 6:case 2:e=-1;default:return{value:void 0,done:!0}}}var e=0,d,f,h,g,l=this,k={next:function(a){return b(a,void 0)},throw:function(a){return b(void 0,a)},return:function(a){throw Error("Not yet implemented");
}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}},{key:"clear",value:function(){var a=this.map;if(0===a.size)return!1;++this.generation;a.clear();return!0}},{key:"mappings",value:function(){function a(k,p){for(;;)switch(b){case 0:f=0>=g.length||void 0===g[0]?Array(2):g[0],d=$jscomp.makeIterator(h.map.values()),e=d.next();case 1:if(e.done){b=3;break}c=e.value;f[0]=c;f[1]=m(c)[l];b=4;return{value:f,done:!1};case 4:if(void 0===p){b=5;break}b=-1;throw p;case 5:case 2:e=
d.next();b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,c,e,d,f,h=this,g=arguments,k={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();k[Symbol.iterator]=function(){return this};return k}},{key:Symbol.iterator,value:function(){return this.mappings()}},{key:"toJSON",value:function(){for(var a=[],e=$jscomp.makeIterator(this.map.values()),d=e.next();!d.done;d=e.next()){var f=
d.value;if(f[n]===f){for(var d=[],f=$jscomp.makeIterator(c(f)),h=f.next();!h.done;h=f.next())d.push(h.value);d.sort(b.Uint64.compare);a.push(d)}}a.sort(function(a,c){return b.Uint64.compare(a[0],c[0])});return a.map(function(a){return a.map(function(a){return a.toString()})})}},{key:"size",get:function(){return this.map.size}}]);return d}();d.DisjointUint64Sets=k},function(k,d){var g=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;
"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),m=new Uint32Array(2),c=[],a=2;for(;36>=a;++a){var b=Math.floor(32/Math.log2(a)),e=Math.pow(a,b),n=Math.floor(b/2),f=Math.pow(a,n),n=Math.pow(a,b-n),h="^[0-"+String.fromCharCode(48+Math.min(9,a-1));10<a&&(h+="a-"+String.fromCharCode(97+a-11),h+="A-"+String.fromCharCode(65+a-11));h+="]{1,"+Math.ceil(64/Math.log2(a))+"}$";c[a]={lowDigits:b,lowBase:e,lowBase1:f,lowBase2:n,pattern:new RegExp(h)}}a=
function(){function a(){var b=0>=arguments.length||void 0===arguments[0]?0:arguments[0],c=1>=arguments.length||void 0===arguments[1]?0:arguments[1];if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.low=b;this.high=c}g(a,[{key:"clone",value:function(){return new a(this.low,this.high)}},{key:"assign",value:function(a){this.low=a.low;this.high=a.high}},{key:"toString",value:function(){var a=0>=arguments.length||void 0===arguments[0]?10:arguments[0],b=this.low,e=this.high;
if(0===e)return b.toString(a);var e=4294967296*e,d=c[a],f=d.lowBase,d=d.lowDigits,h=e%f,e=Math.floor(e/f),b=b+h,e=e+Math.floor(b/f),b=(b%f).toString(a);return e.toString(a)+"0".repeat(d-b.length)+b}},{key:"tryParseString",value:function(a){var b=1>=arguments.length||void 0===arguments[1]?10:arguments[1],e=c[b],d=e.lowDigits,f=e.lowBase,h=e.lowBase1,g=e.lowBase2;if(!e.pattern.test(a))return!1;if(a.length<=d)return this.low=parseInt(a,b),this.high=0,!0;d=a.length-d;e=parseInt(a.substr(d),b);b=parseInt(a.substr(0,
d),b);f=Math.floor(b*f/4294967296);h=e+b%4294967296*h%4294967296*g%4294967296;4294967296<h&&(++f,h-=4294967296);if(h>>>0!==h||f>>>0!==f)return!1;this.low=h;this.high=f;return!0}},{key:"parseString",value:function(a){if(!this.tryParseString(a,1>=arguments.length||void 0===arguments[1]?10:arguments[1]))throw Error("Failed to parse string as uint64 value: "+JSON.stringify(a)+".");return this}},{key:"valid",value:function(){var a=this.low,b=this.high;return a>>>0===a&&b>>>0===b}},{key:"toJSON",value:function(){return this.toString()}}],
[{key:"less",value:function(a,b){return a.high<b.high||a.high===b.high&&a.low<b.low}},{key:"compare",value:function(a,b){return a.high-b.high||a.low-b.low}},{key:"equal",value:function(a,b){return a.low===b.low&&a.high===b.high}},{key:"min",value:function(b,c){return a.less(b,c)?b:c}},{key:"random",value:function(){crypto.getRandomValues(m);return new a(m[0],m[1])}},{key:"parseString",value:function(b){var c=1>=arguments.length||void 0===arguments[1]?10:arguments[1];return(new a).parseString(b,c)}}]);
return a}();a.ZERO=new a(0,0);d.Uint64=a},function(k,d,g){function m(a){var b=typeof a;if("number"===b||"string"===b)if(b=parseFloat(""+a),!Number.isNaN(b))return b;throw Error("Expected floating-point number, but received: "+JSON.stringify(a)+".");}function c(a){a=m(a);if(Number.isFinite(a))return a;throw Error("Expected finite floating-point number, but received: "+a+".");}function a(a){a=c(a);if(0<a)return a;throw Error("Expected positive finite floating-point number, but received: "+a+".");}function b(a){if("object"===
typeof a){if(null===a)return"null";if(Array.isArray(a)){var c="[",e=a.length,d=0;if(d<e)for(c+=b(a[d]);++d<e;)c+=",",c+=b(a[d]);return c+"]"}var c="{",e=Object.keys(a).sort(),d=0,f=e.length;if(d<f)for(var h=e[d],c=c+JSON.stringify(h),c=c+":"+b(a[h]);++d<f;)c+=",",h=e[d],c+=JSON.stringify(h),c+=":",c+=b(a[h]);return c+="}"}return JSON.stringify(a)}function e(a){return a.replace(/['"]/g,function(a){return'"'===a?"'":'"'})}function n(a){return e(JSON.stringify(e(a)))}function f(a){if("object"===typeof a){if(null===
a)return"null";var b=a.toJSON;if("function"===typeof b)return f(b.call(a));if(Array.isArray(a)){var b="[",c=a.length,e=0;if(e<c)for(b+=f(a[e]);++e<c;)b+="_",b+=f(a[e]);return b+"]"}for(var b="{",e=Object.keys(a),c=!0,e=$jscomp.makeIterator(e),d=e.next();!d.done;d=e.next()){var d=d.value,h=a[d];void 0!==h&&(h=f(h))&&(c?c=!1:b+="_",b+=n(d),b+=":",b+=h)}return b+"}"}return"string"===typeof a?n(a):JSON.stringify(a)}function h(a,b,c,e){if(2<=a.length&&a.charAt(0)===b&&a.charAt(a.length-1)===b){a=a.substr(1,
a.length-2);for(b=c;0<a.length;){var d=a.match(e);if(null===d){b+=a;break}b+=d[1];b+="\\";b+=c;a=a.substr(d.index+d[0].length)}return b+c}return a}function l(a){return h(a,"'",'"',G)}function w(a,b,c){var e=/[&_,]/g,d=void 0,f=void 0,g=void 0;'"'===c?(d="'",f=G,g=F):(d='"',f=J,g=I);for(var l="";0<a.length;){var k=a.match(g),p=void 0,t=void 0;null===k?(p=a,t=a=""):(p=a.substr(0,k.index),a=a.substr(k.index+k[0].length),t=k[1],t=void 0!==t?h(t,d,c,f):k[2]);l+=p.replace(e,b);l+=t}return l}function p(a){return w(a,
",",'"')}function C(a){return JSON.parse(p(a))}function r(a){for(var b="";0<a.length;){var c=a.match(F),e=void 0,d=void 0;null===c?(e=a,d=a=""):(e=a.substr(0,c.index),a=a.substr(c.index+c[0].length),d=c[1],d=void 0!==d?l(d):c[2]);b+=e.replace(/\(/g,"[").replace(/\)/g,"]").replace("True","true").replace("False","false").replace(/,\s*([\}\]])/g,"$1");b+=d}return b}function A(a,b,c){var e=a.length;if(!Array.isArray(b)||b.length!==e)throw Error("Expected length "+e+" array, but received: "+JSON.stringify(b)+
".");for(var d=0;d<e;++d)a[d]=c(b[d],d);return a}function q(a){if("object"!==typeof a||null==a||Array.isArray(a))throw Error("Expected JSON object, but received: "+JSON.stringify(a)+".");return a}function y(a){var b=parseInt(a,10);if(!Number.isInteger(b))throw Error("Expected integer, but received: "+JSON.stringify(a)+".");return b}function E(a){a=y(a);if(0>=a)throw Error("Expected positive integer, but received: "+a+".");return a}function t(a){if("string"!==typeof a)throw Error("Expected string, but received: "+
JSON.stringify(a)+".");return a}var x=g(15);d.verifyFloat=m;d.verifyFiniteFloat=c;d.verifyFinitePositiveFloat=a;d.parseXYZ=function(a,b){var c=2>=arguments.length||void 0===arguments[2]?m:arguments[2];q(b);var e=Object.keys(b);e.sort();if(3!==e.length||"x"!==e[0]||"y"!==e[1]||"z"!==e[2])throw Error("Expected object to have keys ['x', 'y', 'z'], but received: "+JSON.stringify(b)+".");a[0]=c(b.x);a[1]=c(b.y);a[2]=c(b.z);return a};d.parseFiniteVec=function(a,b){var c=a.length;if(!Array.isArray(b)||b.length!==
c)throw Error("Incompatible sizes");for(var e=0;e<c;++e)if(!Number.isFinite(parseFloat(b[e])))throw Error("Non-finite value.");for(e=0;e<c;++e)a[e]=parseFloat(b[e]);return a};d.parseIntVec=function(a,b){var c=a.length;if(!Array.isArray(b)||b.length!==c)throw Error("Incompatible sizes.");for(var e=0;e<c;++e){var d=parseInt(b[e],void 0);if(!Number.isInteger(d))throw Error("Non-integer value.");}for(e=0;e<c;++e)a[e]=parseInt(b[e],void 0);return a};d.stableStringify=b;d.urlSafeStringifyString=n;d.urlSafeStringify=
f;k=/('(?:[^'\\]|(?:\\.))*')/;g=/("(?:[^'\\]|(?:\\.))*")/;var F=new RegExp(k.source+"|"+g.source),I=new RegExp(g.source+"|"+k.source),G=/^((?:[^"'\\]|(?:\\.))*)"/,J=/^((?:[^"'\\]|(?:\\.))*)'/;d.normalizeStringLiteral=l;d.urlSafeToJSON=p;d.jsonToUrlSafe=function(a){return w(a,"_","'")};d.urlSafeParse=C;d.pythonLiteralToJSON=r;d.pythonLiteralParse=function(a){return JSON.parse(r(a))};d.parseArray=function(a,b){if(!Array.isArray(a))throw Error("Expected array, but received: "+JSON.stringify(a)+".");
return a.map(b)};d.parseFixedLengthArray=A;d.verifyObject=q;d.verifyInt=y;d.verifyPositiveInt=E;d.verifyMapKey=function(a,b){var c=b.get(a);if(void 0===c)throw Error("Expected one of "+JSON.stringify(Array.from(b.keys()))+", but received: "+JSON.stringify(a)+".");return c};d.verifyString=t;d.verifyOptionalString=function(a){return void 0===a?void 0:t(a)};d.verifyObjectProperty=function(a,b,c){a=a.hasOwnProperty(b)?a[b]:void 0;try{return c(a)}catch(e){throw Error("Error parsing "+JSON.stringify(b)+
" property: "+e.message);}};d.verifyObjectAsMap=function(a,b){q(a);for(var c=new Map,e=$jscomp.makeIterator(Object.keys(a)),d=e.next();!d.done;d=e.next()){d=d.value;try{c.set(d,b(a[d]))}catch(f){throw Error("Error parsing value associated with key "+JSON.stringify(d)+": "+f.message);}}return c};d.verifyFloat01=function(a){if("number"!==typeof a||!Number.isFinite(a)||0>a||1<a)throw Error("Expected floating point number in [0,1], but received: "+JSON.stringify(a)+".");return a};d.parseQueryStringParameters=
function(a){if(""===a)return{};if(a.startsWith("{"))return C(a);var b={};a=a.split(/[&;]/);a=$jscomp.makeIterator(a);for(var c=a.next();!c.done;c=a.next()){var c=c.value,e=c.match(/^([^=&;]+)=([^&;]*)$/);if(null===e)throw Error("Invalid query string part: "+JSON.stringify(c)+".");b[e[1]]=e[2]}return b};d.verifyEnumString=function(a,b){if("string"===typeof a&&null!==a.match(/^[a-zA-Z]/)&&(a=a.toUpperCase(),b.hasOwnProperty(a)))return b[a];throw Error("Invalid enum value: "+JSON.stringify(a)+".");};
d.verify3dVec=function(a){return A(x.vec3.create(),a,c)};d.verify3dScale=function(b){return A(x.vec3.create(),b,a)};d.verify3dDimensions=function(a){return A(x.vec3.create(),a,E)}},function(k,d,g){function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=
b)}var c=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),a=function l(a,b,c){null===a&&(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,b);if(void 0===e)return a=Object.getPrototypeOf(a),null===a?void 0:l(a,b,c);if("value"in e)return e.value;b=e.get;return void 0===b?void 0:b.call(c)};k=this&&
this.__decorate||function(a,b,c,e){var d=arguments.length,f=3>d?b:null===e?e=Object.getOwnPropertyDescriptor(b,c):e,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,e);else for(var k=a.length-1;0<=k;k--)if(g=a[k])f=(3>d?g(f):3<d?g(b,c,f):g(b,c))||f;return 3<d&&f&&Object.defineProperty(b,c,f),f};var b=g(44),e=g(2),n=g(6),f=function(e){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");for(var a=arguments.length,
c=Array(a),e=0;e<a;e++)c[e]=arguments[e];var f,a=(f=Object.getPrototypeOf(d)).call.apply(f,[].concat([this],$jscomp.arrayFromIterable(c)));if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");f=!a||"object"!==typeof a&&"function"!==typeof a?this:a;f.hashTable=new b.HashSetUint64;f.changed=new n.Signal;return f}m(d,e);$jscomp.initSymbol();$jscomp.initSymbolIterator();c(d,[{key:"disposed",value:function(){a(Object.getPrototypeOf(d.prototype),"disposed",this).call(this);
this.changed=this.hashTable=void 0}},{key:"add_",value:function(a){return this.hashTable.add(a)}},{key:"add",value:function(a){if(this.add_(a)){var b=this.rpc;b&&b.invoke("Uint64Set.add",{id:this.rpcId,value:a});this.changed.dispatch(a,!0)}}},{key:"has",value:function(a){return this.hashTable.has(a)}},{key:Symbol.iterator,value:function(){return this.hashTable.keys()}},{key:"delete_",value:function(a){return this.hashTable.delete(a)}},{key:"delete",value:function(a){if(this.delete_(a)){var b=this.rpc;
b&&b.invoke("Uint64Set.delete",{id:this.rpcId,value:a});this.changed.dispatch(a,!1)}}},{key:"clear",value:function(){if(this.hashTable.clear()){var a=this.rpc;a&&a.invoke("Uint64Set.clear",{id:this.rpcId});this.changed.dispatch(null,!1)}}},{key:"toJSON",value:function(){for(var a=[],b=$jscomp.makeIterator(this),c=b.next();!c.done;c=b.next())a.push(c.value.toString());return a}},{key:"size",get:function(){return this.hashTable.size}}],[{key:"makeWithCounterpart",value:function(a){var b=new f;b.initializeCounterpart(a);
return b}}]);return d}(e.SharedObjectCounterpart);g=f;g=f=k([e.registerSharedObject("Uint64Set")],g);d.Uint64Set=g;e.registerRPC("Uint64Set.add",function(a){var b=this.get(a.id);b.add_(a.value)&&b.changed.dispatch()});e.registerRPC("Uint64Set.delete",function(a){var b=this.get(a.id);b.delete_(a.value)&&b.changed.dispatch()});e.registerRPC("Uint64Set.clear",function(a){a=this.get(a.id);a.hashTable.clear()&&a.changed.dispatch()})},function(k,d,g){function m(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function c(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function a(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}var b=function(){return function(a,
b){if(Array.isArray(a))return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();if(Symbol.iterator in Object(a)){var c=[],e=!0,d=!1,f=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var h=a[Symbol.iterator](),g;!(e=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);e=!0);}catch(l){d=!0,f=l}finally{try{if(!e&&h["return"])h["return"]()}finally{if(d)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),e=function t(a,b,c){null===a&&
(a=Function.prototype);var e=Object.getOwnPropertyDescriptor(a,b);if(void 0===e)return a=Object.getPrototypeOf(a),null===a?void 0:t(a,b,c);if("value"in e)return e.value;b=e.get;return void 0===b?void 0:b.call(c)},n=function(){function a(b,c){for(var e=0;e<c.length;e++){var d=c[e];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(b,d.key,d)}}return function(b,c,e){c&&a(b.prototype,c);e&&a(b,e);return b}}(),f=g(45),h=g(41);d.NUM_ALTERNATIVES=3;var l=
0,w=0,p=0,C=0;k=function(){function b(){var c=0>=arguments.length||void 0===arguments[0]?b.generateHashFunctions(d.NUM_ALTERNATIVES):arguments[0];a(this,b);this.loadFactor=.9;this.size=0;this.growFactor=1.2;this.maxHeight=8192;this.emptyHigh=this.emptyLow=4294967295;this.maxAttempts=this.maxRehashAttempts=5;this.maxWidth=4096/this.entryStride;this.generation=0;this.mungedEmptyKey=-1;this.hashFunctions=c;this.allocate(4,1)}n(b,[{key:"updateHashFunctions",value:function(a){this.hashFunctions=b.generateHashFunctions(a);
this.mungedEmptyKey=-1}},{key:"tableWithMungedEmptyKey",value:function(a){for(var b=this.hashFunctions.length,c=Array(b),e=0;e<b;++e)c[e]=this.getHash(e,this.emptyLow,this.emptyHigh);e=this.mungedEmptyKey;if(-1===e)a:for(;;){for(var e=16777216*Math.random()>>>0,d=0;d<b;++d)for(var f=this.getHash(d,e,e),h=0;h<b;++h)if(c[h]===f)continue a;this.mungedEmptyKey=e;break}for(var d=this.table,f=this.emptyLow,h=this.emptyHigh,g=0;g<b;++g){var l=c[g];d[l]===f&&d[l+1]===h&&(d[l]=e,d[l+1]=e)}try{a(d)}finally{for(a=
0;a<b;++a)g=c[a],d[g]===e&&d[g+1]===e&&(d[g]=f,d[g+1]=h)}}},{key:"getHash",value:function(a,b,c){a=this.hashFunctions[a];var e=this.width,d=this.height,e=a[0].compute(b,c)%e;b=a[1].compute(b,c)%d;return this.entryStride*(b*this.width+e)}},{key:"keys",value:function(){function a(q,K){for(;;)switch(b){case 0:p=0>=m.length||void 0===m[0]?new h.Uint64:m[0],n=t.emptyLow,k=t.emptyHigh,l=t.entryStride,g=t.table,f=0,d=g.length;case 1:if(!(f<d)){b=3;break}e=g[f];c=g[f+1];if(e===n&&c===k){b=4;break}p.low=e;
p.high=c;b=5;return{value:p,done:!1};case 5:if(void 0===K){b=6;break}b=-1;throw K;case 6:case 4:case 2:f+=l;b=1;break;case 3:b=-1;default:return{value:void 0,done:!0}}}var b=0,c,e,d,f,g,l,k,n,p,t=this,m=arguments,q={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();q[Symbol.iterator]=function(){return this};return q}},{key:"indexOfPair",value:function(a,b){var c=this.table,e=this.emptyHigh;
if(a===this.emptyLow&&b===e)return-1;for(var e=0,d=this.hashFunctions.length;e<d;++e){var f=this.getHash(e,a,b);if(c[f]===a&&c[f+1]===b)return f}return-1}},{key:"indexOf",value:function(a){return this.indexOfPair(a.low,a.high)}},{key:"chooseAnotherEmptyKey",value:function(){for(var a=this.emptyLow,b=this.emptyHigh,c=this.table,e=this.entryStride,d=void 0,f=void 0;d=4294967296*Math.random()>>>0,f=4294967296*Math.random()>>>0,d===a&&f===b||this.hasPair(d,f););this.emptyLow=d;this.emptyHigh=f;for(var h=
0,g=c.length;h<g;h+=e)c[h]===a&&c[h+1]===b&&(c[h]=d,c[h+1]=f)}},{key:"has",value:function(a){return-1!==this.indexOf(a)}},{key:"hasPair",value:function(a,b){return-1!==this.indexOfPair(a,b)}},{key:"delete",value:function(a){a=this.indexOf(a);if(-1!==a){var b=this.table;b[a]=this.emptyLow;b[a+1]=this.emptyHigh;++this.generation;this.size--;return!0}return!1}},{key:"clearTable",value:function(){for(var a=this.table,b=this.entryStride,c=this.emptyLow,e=this.emptyHigh,d=a.length,f=0;f<d;f+=b)a[f]=c,a[f+
1]=e}},{key:"clear",value:function(){if(0===this.size)return!1;this.size=0;++this.generation;this.clearTable();return!0}},{key:"swapPending",value:function(a,b){var c=l,e=w;this.storePending(a,b);a[b]=c;a[b+1]=e}},{key:"storePending",value:function(a,b){l=a[b];w=a[b+1]}},{key:"backupPending",value:function(){p=l;C=w}},{key:"restorePending",value:function(){l=p;w=C}},{key:"tryToInsert",value:function(){for(var a=0,b=this.emptyLow,c=this.emptyHigh,e=this.maxAttempts,d=this.table,f=this.hashFunctions.length,
h=Math.floor(Math.random()*f);;){var g=this.getHash(h,l,w);this.swapPending(d,g);if(l===b&&w===c)return!0;if(++a===e)break;h=(h+Math.floor(Math.random()*(f-1))+1)%f}return!1}},{key:"allocate",value:function(a,b){var c=a*b;this.width=a;this.height=b;this.table=new Uint32Array(c*this.entryStride);this.maxAttempts=c;this.clearTable();this.capacity=c*this.loadFactor;this.mungedEmptyKey=-1}},{key:"rehash",value:function(a,b,c){this.allocate(b,c);this.updateHashFunctions(this.hashFunctions.length);b=this.emptyLow;
c=this.emptyHigh;for(var e=this.entryStride,d=0,f=a.length;d<f;d+=e){var h=a[d+1];if(a[d]!==b||h!==c)if(this.storePending(a,d),!this.tryToInsert())return!1}return!0}},{key:"grow",value:function(a){for(var b=this.table,c=this.width,e=this.height,d=this.maxWidth,f=this.maxHeight;;){var h=c*e,c=Math.min(d,Math.ceil(a/this.height));c*e<a&&(e=Math.min(f,Math.ceil(a/c)));var g=c*e;if(g<a&&g===h)throw Error("Maximum table size exceeded");for(h=0;h<this.maxRehashAttempts;++h)if(this.rehash(b,c,e))return;
a=Math.ceil(this.growFactor*a)}}},{key:"insertInternal",value:function(){++this.generation;l===this.emptyLow&&w===this.emptyHigh&&this.chooseAnotherEmptyKey();++this.size>this.capacity&&(this.backupPending(),this.grow(Math.ceil(this.growFactor*this.width*this.height)),this.restorePending());for(;!this.tryToInsert();)this.backupPending(),this.grow(this.width*this.height),this.restorePending()}}],[{key:"generateHashFunctions",value:function(){for(var a=0>=arguments.length||void 0===arguments[0]?d.NUM_ALTERNATIVES:
arguments[0],b=[],c=0;c<a;++c){var e=[f.HashFunction.generate(),f.HashFunction.generate()];b.push(e)}return b}}]);return b}();d.HashTableBase=k;g=function(b){function e(){a(this,e);return m(this,Object.getPrototypeOf(e).apply(this,arguments))}c(e,b);$jscomp.initSymbol();$jscomp.initSymbolIterator();n(e,[{key:"add",value:function(a){var b=a.low;a=a.high;if(this.hasPair(b,a))return!1;l=b;w=a;this.insertInternal();return!0}},{key:Symbol.iterator,value:function(){return this.keys()}}]);return e}(k);d.HashSetUint64=
g;g.prototype.entryStride=2;var r=0,A=0,q=0,y=0;k=function(d){function f(){a(this,f);return m(this,Object.getPrototypeOf(f).apply(this,arguments))}c(f,d);$jscomp.initSymbol();$jscomp.initSymbolIterator();n(f,[{key:"set",value:function(a,b){var c=a.low,e=a.high;if(this.hasPair(c,e))return!1;l=c;w=e;r=b.low;A=b.high;this.insertInternal();return!0}},{key:"get",value:function(a,b){var c=this.indexOf(a);if(-1===c)return!1;var e=this.table;b.low=e[c+2];b.high=e[c+3];return!0}},{key:"swapPending",value:function(a,
b){var c=r,d=A;e(Object.getPrototypeOf(f.prototype),"swapPending",this).call(this,a,b);a[b+2]=c;a[b+3]=d}},{key:"storePending",value:function(a,b){e(Object.getPrototypeOf(f.prototype),"storePending",this).call(this,a,b);r=a[b+2];A=a[b+3]}},{key:"backupPending",value:function(){e(Object.getPrototypeOf(f.prototype),"backupPending",this).call(this);q=r;y=A}},{key:"restorePending",value:function(){e(Object.getPrototypeOf(f.prototype),"restorePending",this).call(this);r=q;A=y}},{key:Symbol.iterator,value:function(){return this.entries()}},
{key:"entries",value:function(){function a(N,r){for(;;)switch(c){case 0:w=0>=R.length||void 0===R[0]?[new h.Uint64,new h.Uint64]:R[0],q=K.emptyLow,m=K.emptyHigh,t=K.entryStride,n=K.table,p=b(w,2),k=p[0],l=p[1],g=0,f=n.length;case 1:if(!(g<f)){c=3;break}d=n[g];e=n[g+1];if(d===q&&e===m){c=4;break}k.low=d;k.high=e;l.low=n[g+2];l.high=n[g+3];c=5;return{value:w,done:!1};case 5:if(void 0===r){c=6;break}c=-1;throw r;case 6:case 4:case 2:g+=t;c=1;break;case 3:c=-1;default:return{value:void 0,done:!0}}}var c=
0,e,d,f,g,l,k,p,n,t,m,q,w,K=this,R=arguments,r={next:function(b){return a(b,void 0)},throw:function(b){return a(void 0,b)},return:function(a){throw Error("Not yet implemented");}};$jscomp.initSymbolIterator();r[Symbol.iterator]=function(){return this};return r}}]);return f}(k);d.HashMapUint64=k;k.prototype.entryStride=4},function(k,d){var g=function(){function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}();d.PRIME_MODULUS=4093;var m=function(){function c(a,b,e,d){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.a0=a;this.a1=b;this.b=e;this.c=d}g(c,[{key:"computeDotProduct",value:function(a,b){var c=this.a0,d=this.a1;return c[0]*(a&255)+c[1]*(a>>8&255)+c[2]*(a>>16&255)+c[3]*(a>>24&255)+(d[0]*(b&255)+d[1]*(b>>8&255)+d[2]*(b>>16&255)+d[3]*(b>>24&255))}},{key:"compute",value:function(a,b){var c=
this.b,g=this.c,f=this.computeDotProduct(a,b);return(f+f*f%d.PRIME_MODULUS*g+c)%d.PRIME_MODULUS}},{key:"toString",value:function(){return"new HashFunction(Float32Array.of("+this.a0+"), Float32Array.of("+this.a1+"), "+this.b+", "+this.c+")"}}],[{key:"generate",value:function(){function a(){return Math.floor(Math.random()*d.PRIME_MODULUS)}return new c(Float32Array.of(a(),a(),a(),a()),Float32Array.of(a(),a(),a(),a()),a(),a())}}]);return c}();d.HashFunction=m},function(k,d){d.getObjectKey=function(d){return d.low+
","+d.high};d.forEachVisibleSegment=function(d,k){for(var c=d.segmentEquivalences,a=$jscomp.makeIterator(d.visibleSegments),b=a.next();!b.done;b=a.next())if(b=b.value,c.disjointSets.isMinElement(b))for(var e=$jscomp.makeIterator(c.setElements(b)),n=e.next();!n.done;n=e.next())k(n.value,b)}},function(k,d){function g(){var b=Uint16Array.of(4386);return 17===(new Uint8Array(b.buffer))[0]?a.BIG:a.LITTLE}function m(a){a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(var c=0,d=a.length;c<d;c+=2){var f=
a[c];a[c]=a[c+1];a[c+1]=f}}function c(a){a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);for(var c=0,d=a.length;c<d;c+=4){var f=a[c];a[c]=a[c+3];a[c+3]=f;f=a[c+1];a[c+1]=a[c+2];a[c+2]=f}}(function(a){a[a.LITTLE=0]="LITTLE";a[a.BIG=1]="BIG"})(d.Endianness||(d.Endianness={}));var a=d.Endianness;d.determineEndianness=g;d.ENDIANNESS=g();d.swapEndian16=m;d.swapEndian32=c;d.convertEndian16=function(a,c){c!==(2>=arguments.length||void 0===arguments[2]?d.ENDIANNESS:arguments[2])&&m(a)};d.nativeToLittle16=
function(b){d.ENDIANNESS!==a.LITTLE&&m(b)};d.convertEndian32=function(a,e){e!==(2>=arguments.length||void 0===arguments[2]?d.ENDIANNESS:arguments[2])&&c(a)};d.nativeToLittle32=function(b){d.ENDIANNESS!==a.LITTLE&&c(b)}},function(k,d){d.decodeCompressedSegmentationChunk=function(d,k){d.data=new Uint32Array(k)}},function(k,d,g){var m=g(50),c=g(55);d.decodeJpegChunk=function(a,b){m.postProcessRawData(a,c.decodeJpegStack(new Uint8Array(b),a.chunkDataSize))}},function(k,d,g){var m=g(13),c=g(51),a=g(53),
b=new (g(54).Uint32ArrayBuilder)(2E4),e=Array(4);d.postProcessRawData=function(d,f){var h=d.source.spec;if(h.compressedSegmentationBlockSize){var g=h.dataType;b.clear();var k=d.chunkDataSize;e[0]=k[0];e[1]=k[1];e[2]=k[2];e[3]=h.numChannels;switch(g){case m.DataType.UINT32:c.encodeChannels(b,h.compressedSegmentationBlockSize,f,e);break;case m.DataType.UINT64:a.encodeChannels(b,h.compressedSegmentationBlockSize,f,e);break;default:throw Error("Unsupported data type for compressed segmentation: "+m.DataType[g]);
}d.data=new Uint32Array(b.view)}else d.data=f}},function(k,d,g){function m(a,d,g,k,m,A,q,y){var E=m[0],t=m[1],x=m[2];m=k[0];var F=k[1];k=k[2];var I=g[0],G=g[1],J=g[2],J=J-G*t,G=G-I*E;if(0===E*t*x)return[0,0];g=m*F*k+31;if(void 0===b||b.length<g)b=new Uint32Array(g),e=new Uint32Array(1*g),n=new Uint32Array(1*g),f=new Uint32Array(g),h=new Uint32Array(g);g=b.subarray(0,g);g.fill(0);for(var u=e,v=n,z=f,B=h,L=0,D=a[d]+1>>>0,H=0,P=m-E,O=m*F-m*t,T=0;T<x;++T,d+=J,H+=O)for(var K=0;K<t;++K,d+=G,H+=P)for(var R=
0;R<E;++R,d+=I){var S=a[d];S!==D&&(D=u[1*L]=S,z[L]=L++);g[H++]=L}z.subarray(0,L).sort(function(a,b){return u[a]-u[b]});a=-1;E=u[1*z[0]]+1>>>0;for(t=0;t<L;++t)x=z[t],I=u[1*x],I!==E&&(++a,E=v[1*a]=I),B[x+1]=a;++a;return c.writeBlock(y,A,q,m*F*k,a,v,g,B,1)}var c=g(52),a=g(26);k=g(52);d.newCache=k.newCache;var b=void 0,e=void 0,n=void 0,f=void 0,h=void 0;d.encodeBlock=m;d.encodeChannel=function(b,e,d,f){var g=4>=arguments.length||void 0===arguments[4]?0:arguments[4],h=5>=arguments.length||void 0===arguments[5]?
a.getFortranOrderStrides(f,1):arguments[5];return c.encodeChannel(b,e,d,f,g,h,m)};d.encodeChannels=function(b,e,d,f){var g=4>=arguments.length||void 0===arguments[4]?0:arguments[4],h=5>=arguments.length||void 0===arguments[5]?a.getFortranOrderStrides(f,1):arguments[5];return c.encodeChannels(b,e,d,f,g,h,m)}},function(k,d){function g(){return new Map}function m(a,b,e,k,f,h,l){for(var m=g(),p=Array(3),C=d.BLOCK_HEADER_SIZE,r=0;3>r;++r)var A=p[r]=Math.ceil(k[r]/b[r]),C=C*A;var r=p[0],A=p[1],p=p[2],q=
k[0],y=k[1];k=k[2];var E=b[0],t=b[1],x=b[2],F=a.length,I=F,G=[0,0,0];a.resize(F+C);for(var C=h[0],J=h[1],u=h[2],v=0;v<p;++v){G[2]=Math.min(x,k-v*x);for(var z=0;z<A;++z){G[1]=Math.min(t,y-z*t);for(var B=0;B<r;++B){G[0]=Math.min(E,q-B*E);var L=a.length-F,D=l(e,f+(v*x*u+z*t*J+B*E*C),h,b,G,F,m,a),H=c(D,2),D=H[0],H=H[1],P=a.data;P[I++]=H|D<<24;P[I++]=L}}}}var c=function(){return function(a,b){if(Array.isArray(a))return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();if(Symbol.iterator in Object(a)){var c=
[],d=!0,f=!1,g=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var k=a[Symbol.iterator](),m;!(d=(m=k.next()).done)&&(c.push(m.value),!b||c.length!==b);d=!0);}catch(p){f=!0,g=p}finally{try{if(!d&&k["return"])k["return"]()}finally{if(f)throw g;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}();d.BLOCK_HEADER_SIZE=2;d.newCache=g;d.writeBlock=function(a,b,c,d,f,g,k,m,p){var C=void 0;if(1===f)C=0;else for(C=1;1<<C<f;)C*=2;var r=Math.ceil(C*d/32),
A=a.length,q=r,y=!1,E=Array.prototype.join.call(g.subarray(0,f*p),",");d=c.get(E);void 0===d&&(y=!0,q+=f*p,d=A+r-b,c.set(E,d));a.resize(A+q);a=a.data;if(0<C)switch(C){case 1:for(c=b=0;b<r;++b)q=0,q|=m[k[c+0]]<<0,q|=m[k[c+1]]<<1,q|=m[k[c+2]]<<2,q|=m[k[c+3]]<<3,q|=m[k[c+4]]<<4,q|=m[k[c+5]]<<5,q|=m[k[c+6]]<<6,q|=m[k[c+7]]<<7,q|=m[k[c+8]]<<8,q|=m[k[c+9]]<<9,q|=m[k[c+10]]<<10,q|=m[k[c+11]]<<11,q|=m[k[c+12]]<<12,q|=m[k[c+13]]<<13,q|=m[k[c+14]]<<14,q|=m[k[c+15]]<<15,q|=m[k[c+16]]<<16,q|=m[k[c+17]]<<17,q|=
m[k[c+18]]<<18,q|=m[k[c+19]]<<19,q|=m[k[c+20]]<<20,q|=m[k[c+21]]<<21,q|=m[k[c+22]]<<22,q|=m[k[c+23]]<<23,q|=m[k[c+24]]<<24,q|=m[k[c+25]]<<25,q|=m[k[c+26]]<<26,q|=m[k[c+27]]<<27,q|=m[k[c+28]]<<28,q|=m[k[c+29]]<<29,q|=m[k[c+30]]<<30,q|=m[k[c+31]]<<31,a[A+b]=q,c+=32;break;case 2:for(c=b=0;b<r;++b)q=0,q|=m[k[c+0]]<<0,q|=m[k[c+1]]<<2,q|=m[k[c+2]]<<4,q|=m[k[c+3]]<<6,q|=m[k[c+4]]<<8,q|=m[k[c+5]]<<10,q|=m[k[c+6]]<<12,q|=m[k[c+7]]<<14,q|=m[k[c+8]]<<16,q|=m[k[c+9]]<<18,q|=m[k[c+10]]<<20,q|=m[k[c+11]]<<22,q|=
m[k[c+12]]<<24,q|=m[k[c+13]]<<26,q|=m[k[c+14]]<<28,q|=m[k[c+15]]<<30,a[A+b]=q,c+=16;break;case 4:for(c=b=0;b<r;++b)q=0,q|=m[k[c+0]]<<0,q|=m[k[c+1]]<<4,q|=m[k[c+2]]<<8,q|=m[k[c+3]]<<12,q|=m[k[c+4]]<<16,q|=m[k[c+5]]<<20,q|=m[k[c+6]]<<24,q|=m[k[c+7]]<<28,a[A+b]=q,c+=8;break;case 8:for(c=b=0;b<r;++b)q=0,q|=m[k[c+0]]<<0,q|=m[k[c+1]]<<8,q|=m[k[c+2]]<<16,q|=m[k[c+3]]<<24,a[A+b]=q,c+=4;break;case 16:for(c=b=0;b<r;++b)q=0,q|=m[k[c+0]]<<0,q|=m[k[c+1]]<<16,a[A+b]=q,c+=2;break;case 32:for(c=b=0;b<r;++b)q=0,q|=
m[k[c+0]]<<0,a[A+b]=q,c+=1}if(y)for(k=A+r,m=0,f*=p;m<f;++m)a[k++]=g[m];return[C,d]};d.encodeChannel=m;d.encodeChannels=function(a,b,c,d,f,g,k){var w=a.length,p=d[3];a.resize(w+p);for(var C=0;C<p;++C)a.data[w+C]=a.length,m(a,b,c,d,f+g[3]*C,g,k)}},function(k,d,g){function m(a,d,g,k,m,A,q,y){var E=m[0],t=m[1],x=m[2];m=k[0];var F=k[1];k=k[2];var I=g[0],G=g[1],J=g[2],J=J-G*t,G=G-I*E;if(0===E*t*x)return[0,0];g=m*F*k+31;if(void 0===b||b.length<g)b=new Uint32Array(g),e=new Uint32Array(2*g),n=new Uint32Array(2*
g),f=new Uint32Array(g),h=new Uint32Array(g);g=b.subarray(0,g);g.fill(0);for(var u=e,v=n,z=f,B=h,L=0,D=a[d]+1>>>0,H=0,P=0,O=m-E,T=m*F-m*t,K=0;K<x;++K,d+=J,P+=T)for(var R=0;R<t;++R,d+=G,P+=O)for(var S=0;S<E;++S,d+=I){var N=a[d],Q=a[d+1];if(N!==D||Q!==H)D=u[2*L]=N,H=u[2*L+1]=Q,z[L]=L++;g[P++]=L}z.subarray(0,L).sort(function(a,b){var c=u[2*a],e=u[2*b];return u[2*a+1]-u[2*b+1]||c-e});a=-1;E=u[2*z[0]]+1>>>0;for(t=G=0;t<L;++t){x=z[t];J=2*x;I=u[J];J=u[J+1];if(I!==E||J!==G)++a,G=2*a,E=v[G]=I,G=v[G+1]=J;B[x+
1]=a}++a;return c.writeBlock(y,A,q,m*F*k,a,v,g,B,2)}var c=g(52),a=g(26);k=g(52);d.newCache=k.newCache;var b=void 0,e=void 0,n=void 0,f=void 0,h=void 0;d.encodeBlock=m;d.encodeChannel=function(b,e,d,f){var g=4>=arguments.length||void 0===arguments[4]?0:arguments[4],h=5>=arguments.length||void 0===arguments[5]?a.getFortranOrderStrides(f,2):arguments[5];return c.encodeChannel(b,e,d,f,g,h,m)};d.encodeChannels=function(b,e,d,f){var g=4>=arguments.length||void 0===arguments[4]?0:arguments[4],h=5>=arguments.length||
void 0===arguments[5]?a.getFortranOrderStrides(f,2):arguments[5];return c.encodeChannels(b,e,d,f,g,h,m)}},function(k,d){var g=function(){function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,b,e){b&&c(a.prototype,b);e&&c(a,e);return a}}(),m=function(){function c(){var a=0>=arguments.length||void 0===arguments[0]?16:arguments[0];if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");
this.length=0;this.data=new Uint32Array(a)}g(c,[{key:"resize",value:function(a){var b=this.data;if(a>b.length){var c=new Uint32Array(Math.max(a,2*b.length));c.set(b.subarray(0,this.length));this.data=c}this.length=a}},{key:"shrinkToFit",value:function(){this.data=new Uint32Array(this.view)}},{key:"clear",value:function(){this.length=0}},{key:"appendArray",value:function(a){var b=this.length;this.resize(b+a.length);this.data.set(a,b)}},{key:"view",get:function(){var a=this.data;return new Uint32Array(a.buffer,
a.byteOffset,this.length)}}]);return c}();d.Uint32ArrayBuilder=m},function(k,d,g){var m=g(56),c=g(15);d.decodeJpegStack=function(a,b){var e=new m.JpegDecoder;e.parse(a);if(1!==e.numComponents)throw Error("JPEG data does not have the expected number of components");if(e.width*e.height!==b[0]*b[1]*b[2])throw Error("JPEG data does not have the expected dimensions: width="+e.width+", height="+e.height+", chunkDataSize="+c.vec3.str(b));return e.getData(e.width,e.height,!1)}},function(k,d,g){function m(a,
b){if(0===a.indexOf("data:")){for(var c=a.indexOf("base64,")+7,c=atob(a.substring(c)),d=new Uint8Array(c.length),f=c.length-1;0<=f;f--)d[f]=c.charCodeAt(f);b(d.buffer)}else{var g=new XMLHttpRequest;g.open("GET",a,!0);g.responseType="arraybuffer";g.onload=function(){b(g.response)};g.send(null)}}d=function(){function a(){this._src=null;this._parser=new c.JpegImage;this.onload=null}a.prototype={get src(){return this._src},set src(a){this.load(a)},get width(){return this._parser.width},get height(){return this._parser.height},
load:function(a){this._src=a;m(a,function(a){this.parse(new Uint8Array(a));if(this.onload)this.onload()}.bind(this))},parse:function(a){this._parser.parse(a)},getData:function(a,c){return this._parser.getData(a,c,!1)},copyToImageData:function(a){if(2===this._parser.numComponents||4<this._parser.numComponents)throw Error("Unsupported amount of components");var c=a.width,d=a.height,f=c*d*4;a=a.data;if(1===this._parser.numComponents)for(var g=this._parser.getData(c,d,!1),d=c=0;c<f;){var k=g[d++];a[c++]=
k;a[c++]=k;a[c++]=k;a[c++]=255}else for(g=this._parser.getData(c,d,!0),d=c=0;c<f;)a[c++]=g[d++],a[c++]=g[d++],a[c++]=g[d++],a[c++]=255}};return a}();var c;(function(a){function b(a){for(var b=1,c=0;a>b;)b<<=1,c++;return c}function c(a,b){return a[b]<<8|a[b+1]}function d(a,b){return(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0}function f(a,b,c){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!1});return c}var g=function(){function a(){}function b(a,c){for(var e=0,d=[],f,g,h=
16;0<h&&!a[h-1];)h--;d.push({children:[],index:0});var k=d[0],l;for(f=0;f<h;f++){for(g=0;g<a[f];g++){k=d.pop();for(k.children[k.index]=c[e];0<k.index;)k=d.pop();k.index++;for(d.push(k);d.length<=f;)d.push(l={children:[],index:0}),k.children[k.index]=l.children,k=l;e++}f+1<h&&(d.push(l={children:[],index:0}),k.children[k.index]=l.children,k=l)}return d[0].children}function c(a,b,e,d,g,h,k,l,t){function m(){if(0<E)return E--,x>>E&1;x=a[b++];if(255===x){var c=a[b++];if(c)throw"unexpected marker: "+(x<<
8|c).toString(16);}E=7;return x>>>7}function p(a){for(;;){a=a[m()];if("number"===typeof a)return a;if("object"!==typeof a)throw"invalid huffman sequence";}}function n(a){for(var b=0;0<a;)b=b<<1|m(),a--;return b}function q(a){if(1===a)return 1===m()?1:-1;var b=n(a);return b>=1<<a-1?b:b+(-1<<a)+1}function K(a,b){var c=p(a.huffmanTableDC),c=0===c?0:q(c);a.blockData[b]=a.pred+=c;for(c=1;64>c;){var e=p(a.huffmanTableAC),d=e&15,e=e>>4;if(0===d){if(15>e)break;c+=16}else c+=e,a.blockData[b+f[c]]=q(d),c++}}
function R(a,b){var c=p(a.huffmanTableDC),c=0===c?0:q(c)<<t;a.blockData[b]=a.pred+=c}function r(a,b){a.blockData[b]|=m()<<t}function N(a,b){if(0<w)w--;else for(var c=h;c<=k;){var e=p(a.huffmanTableAC),d=e&15,e=e>>4;if(0===d){if(15>e){w=n(e)+(1<<e)-1;break}c+=16}else c+=e,a.blockData[b+f[c]]=q(d)*(1<<t),c++}}function Q(a,b){for(var c=h,e=0,d;c<=k;){d=f[c];switch(C){case 0:e=p(a.huffmanTableAC);d=e&15;e>>=4;if(0===d)15>e?(w=n(e)+(1<<e),C=4):(e=16,C=1);else{if(1!==d)throw"invalid ACn encoding";A=q(d);
C=e?2:3}continue;case 1:case 2:a.blockData[b+d]?a.blockData[b+d]+=m()<<t:(e--,0===e&&(C=2===C?3:0));break;case 3:a.blockData[b+d]?a.blockData[b+d]+=m()<<t:(a.blockData[b+d]=A<<t,C=0);break;case 4:a.blockData[b+d]&&(a.blockData[b+d]+=m()<<t)}c++}4===C&&(w--,0===w&&(C=0))}var y=e.mcusPerLine,M=b,x=0,E=0,w=0,C=0,A,eb=d.length,W,la,za,ta,ua;l=e.progressive?0===h?0===l?R:r:0===l?N:Q:K;var ba=0;e=1===eb?d[0].blocksPerLine*d[0].blocksPerColumn:y*e.mcusPerColumn;g||(g=e);for(var Ia,ab;ba<e;){for(la=0;la<
eb;la++)d[la].pred=0;w=0;if(1===eb)for(W=d[0],ua=0;ua<g;ua++)l(W,64*((W.blocksPerLine+1)*(ba/W.blocksPerLine|0)+ba%W.blocksPerLine)),ba++;else for(ua=0;ua<g;ua++){for(la=0;la<eb;la++)for(W=d[la],Ia=W.h,ab=W.v,za=0;za<ab;za++)for(ta=0;ta<Ia;ta++)l(W,64*((W.blocksPerLine+1)*((ba/y|0)*W.v+za)+(ba%y*W.h+ta)));ba++}E=0;W=a[b]<<8|a[b+1];if(65280>=W)throw"marker was not found";if(65488<=W&&65495>=W)b+=2;else break}return b-M}function e(a,b){for(var c=b.blocksPerLine,d=b.blocksPerColumn,f=new Int16Array(64),
g=0;g<d;g++)for(var h=0;h<c;h++){for(var k=64*((b.blocksPerLine+1)*g+h),l=f,t=b.quantizationTable,m=b.blockData,p=void 0,n=void 0,K=void 0,q=void 0,y=void 0,N=void 0,Q=void 0,r=void 0,M=void 0,x=r=void 0,E=Q=n=N=void 0,w=void 0,M=void 0,C=0;64>C;C+=8)M=m[k+C],r=m[k+C+1],x=m[k+C+2],N=m[k+C+3],n=m[k+C+4],Q=m[k+C+5],E=m[k+C+6],w=m[k+C+7],M*=t[C],0===(r|x|N|n|Q|E|w)?(M=5793*M+512>>10,l[C]=M,l[C+1]=M,l[C+2]=M,l[C+3]=M,l[C+4]=M,l[C+5]=M,l[C+6]=M,l[C+7]=M):(r*=t[C+1],x*=t[C+2],N*=t[C+3],n*=t[C+4],Q*=t[C+
5],E*=t[C+6],w*=t[C+7],p=5793*M+128>>8,n=5793*n+128>>8,K=x,q=E,y=2896*(r-w)+128>>8,r=2896*(r+w)+128>>8,N<<=4,Q<<=4,p=p+n+1>>1,n=p-n,M=3784*K+1567*q+128>>8,K=1567*K-3784*q+128>>8,q=M,y=y+Q+1>>1,Q=y-Q,r=r+N+1>>1,N=r-N,p=p+q+1>>1,q=p-q,n=n+K+1>>1,K=n-K,M=2276*y+3406*r+2048>>12,y=3406*y-2276*r+2048>>12,r=M,M=799*N+4017*Q+2048>>12,N=4017*N-799*Q+2048>>12,Q=M,l[C]=p+r,l[C+7]=p-r,l[C+1]=n+Q,l[C+6]=n-Q,l[C+2]=K+N,l[C+5]=K-N,l[C+3]=q+y,l[C+4]=q-y);for(t=0;8>t;++t)M=l[t],r=l[t+8],x=l[t+16],N=l[t+24],n=l[t+
32],Q=l[t+40],E=l[t+48],w=l[t+56],0===(r|x|N|n|Q|E|w)?(M=5793*M+8192>>14,M=-2040>M?0:2024<=M?255:M+2056>>4,m[k+t]=M,m[k+t+8]=M,m[k+t+16]=M,m[k+t+24]=M,m[k+t+32]=M,m[k+t+40]=M,m[k+t+48]=M,m[k+t+56]=M):(p=5793*M+2048>>12,n=5793*n+2048>>12,K=x,q=E,y=2896*(r-w)+2048>>12,r=2896*(r+w)+2048>>12,p=(p+n+1>>1)+4112,n=p-n,M=3784*K+1567*q+2048>>12,K=1567*K-3784*q+2048>>12,q=M,y=y+Q+1>>1,Q=y-Q,r=r+N+1>>1,N=r-N,p=p+q+1>>1,q=p-q,n=n+K+1>>1,K=n-K,M=2276*y+3406*r+2048>>12,y=3406*y-2276*r+2048>>12,r=M,M=799*N+4017*
Q+2048>>12,N=4017*N-799*Q+2048>>12,Q=M,M=p+r,w=p-r,r=n+Q,E=n-Q,x=K+N,Q=K-N,N=q+y,n=q-y,M=16>M?0:4080<=M?255:M>>4,r=16>r?0:4080<=r?255:r>>4,x=16>x?0:4080<=x?255:x>>4,N=16>N?0:4080<=N?255:N>>4,n=16>n?0:4080<=n?255:n>>4,Q=16>Q?0:4080<=Q?255:Q>>4,E=16>E?0:4080<=E?255:E>>4,w=16>w?0:4080<=w?255:w>>4,m[k+t]=M,m[k+t+8]=r,m[k+t+16]=x,m[k+t+24]=N,m[k+t+32]=n,m[k+t+40]=Q,m[k+t+48]=E,m[k+t+56]=w)}return b.blockData}function d(a){return 0>=a?0:255<=a?255:a}var f=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,
11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);a.prototype={parse:function(a){function d(){var b=a[h]<<8|a[h+1];h+=2;return b}function g(){var b=d(),b=a.subarray(h,h+b-2);h+=b.length;return b}function k(a){for(var b=Math.ceil(a.samplesPerLine/8/a.maxH),c=Math.ceil(a.scanLines/8/a.maxV),e=0;e<a.components.length;e++){M=a.components[e];var d=Math.ceil(Math.ceil(a.samplesPerLine/8)*M.h/a.maxH),f=Math.ceil(Math.ceil(a.scanLines/
8)*M.v/a.maxV);M.blockData=new Int16Array(64*c*M.v*(b*M.h+1));M.blocksPerLine=d;M.blocksPerColumn=f}a.mcusPerLine=b;a.mcusPerColumn=c}var h=0,l=null,m=null,p,n,q=[],r=[],x=[],w=d();if(65496!==w)throw"SOI not found";for(w=d();65497!==w;){var K,R;switch(w){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:K=g();65504===w&&74===K[0]&&70===K[1]&&73===K[2]&&70===K[3]&&
0===K[4]&&(l={version:{major:K[5],minor:K[6]},densityUnits:K[7],xDensity:K[8]<<8|K[9],yDensity:K[10]<<8|K[11],thumbWidth:K[12],thumbHeight:K[13],thumbData:K.subarray(14,14+3*K[12]*K[13])});65518===w&&65===K[0]&&100===K[1]&&111===K[2]&&98===K[3]&&101===K[4]&&0===K[5]&&(m={version:K[6],flags0:K[7]<<8|K[8],flags1:K[9]<<8|K[10],transformCode:K[11]});break;case 65499:for(var w=d()+h-2,S;h<w;){var N=a[h++],Q=new Uint16Array(64);if(0===N>>4)for(K=0;64>K;K++)S=f[K],Q[S]=a[h++];else if(1===N>>4)for(K=0;64>
K;K++)S=f[K],Q[S]=d();else throw"DQT: invalid table spec";q[N&15]=Q}break;case 65472:case 65473:case 65474:if(p)throw"Only single frame JPEGs supported";d();p={};p.extended=65473===w;p.progressive=65474===w;p.precision=a[h++];p.scanLines=d();p.samplesPerLine=d();p.components=[];p.componentIds={};K=a[h++];for(w=Q=N=0;w<K;w++){S=a[h];R=a[h+1]>>4;var C=a[h+1]&15;N<R&&(N=R);Q<C&&(Q=C);R=p.components.push({h:R,v:C,quantizationTable:q[a[h+2]]});p.componentIds[S]=R-1;h+=3}p.maxH=N;p.maxV=Q;k(p);break;case 65476:S=
d();for(w=2;w<S;){N=a[h++];Q=new Uint8Array(16);for(K=R=0;16>K;K++,h++)R+=Q[K]=a[h];C=new Uint8Array(R);for(K=0;K<R;K++,h++)C[K]=a[h];w+=17+R;(0===N>>4?x:r)[N&15]=b(Q,C)}break;case 65501:d();n=d();break;case 65498:d();S=a[h++];K=[];for(var M,w=0;w<S;w++)N=p.componentIds[a[h++]],M=p.components[N],N=a[h++],M.huffmanTableDC=x[N>>4],M.huffmanTableAC=r[N&15],K.push(M);w=a[h++];S=a[h++];N=a[h++];w=c(a,h,p,K,n,w,S,N>>4,N&15);h+=w;break;case 65535:255!==a[h]&&h--;break;default:if(255===a[h-3]&&192<=a[h-2]&&
254>=a[h-2])h-=3;else throw"unknown JPEG marker "+w.toString(16);}w=d()}this.width=p.samplesPerLine;this.height=p.scanLines;this.jfif=l;this.adobe=m;this.components=[];for(w=0;w<p.components.length;w++)M=p.components[w],this.components.push({output:e(p,M),scaleX:M.h/p.maxH,scaleY:M.v/p.maxV,blocksPerLine:M.blocksPerLine,blocksPerColumn:M.blocksPerColumn});this.numComponents=this.components.length},_getLinearizedBlockData:function(a,b){var c=this.width/a,e=this.height/b,d,f,g,h,k,l,t=0,m,p=this.components.length,
K=a*b*p,n=new Uint8Array(K),q=new Uint32Array(a);for(l=0;l<p;l++){d=this.components[l];f=d.scaleX*c;g=d.scaleY*e;t=l;m=d.output;h=d.blocksPerLine+1<<3;for(k=0;k<a;k++)d=0|k*f,q[k]=(d&4294967288)<<3|d&7;for(f=0;f<b;f++)for(d=0|f*g,d=h*(d&4294967288)|(d&7)<<3,k=0;k<a;k++)n[t]=m[d+q[k]],t+=p}if(e=this.decodeTransform)for(l=0;l<K;)for(c=d=0;d<p;d++,l++,c+=2)n[l]=(n[l]*e[c]>>8)+e[c+1];return n},_isColorConversionNeeded:function(){return this.adobe&&this.adobe.transformCode?!0:3===this.numComponents?!0:
!1},_convertYccToRgb:function(a){for(var b,c,e,f=0,g=a.length;f<g;f+=3)b=a[f],c=a[f+1],e=a[f+2],a[f]=d(b-179.456+1.402*e),a[f+1]=d(b+135.459-.344*c-.714*e),a[f+2]=d(b-226.816+1.772*c);return a},_convertYcckToRgb:function(a){for(var b,c,e,f,g=0,h=0,k=a.length;h<k;h+=4){b=a[h];c=a[h+1];e=a[h+2];f=a[h+3];var l=-122.67195406894+c*(-6.60635669420364E-5*c+4.37130475926232E-4*e-5.4080610064599E-5*b+4.8449797120281E-4*f-.154362151871126)+e*(-9.57964378445773E-4*e+8.17076911346625E-4*b-.00477271405408747*
f+1.53380253221734)+b*(9.61250184130688E-4*b-.00266257332283933*f+.48357088451265)+f*(-3.36197177618394E-4*f+.484791561490776),t=107.268039397724+c*(2.19927104525741E-5*c-6.40992018297945E-4*e+6.59397001245577E-4*b+4.26105652938837E-4*f-.176491792462875)+e*(-7.78269941513683E-4*e+.00130872261408275*b+7.70482631801132E-4*f-.151051492775562)+b*(.00126935368114843*b-.00265090189010898*f+.25802910206845)+f*(-3.18913117588328E-4*f-.213742400323665);b=-20.810012546947+c*(-5.70115196973677E-4*c-2.63409051004589E-5*
e+.0020741088115012*b-.00288260236853442*f+.814272968359295)+e*(-1.53496057440975E-5*e-1.32689043961446E-4*b+5.60833691242812E-4*f-.195152027534049)+b*(.00174418132927582*b-.00255243321439347*f+.116935020465145)+f*(-3.43531996510555E-4*f+.24165260232407);a[g++]=d(l);a[g++]=d(t);a[g++]=d(b)}return a},_convertYcckToCmyk:function(a){for(var b,c,e,f=0,g=a.length;f<g;f+=4)b=a[f],c=a[f+1],e=a[f+2],a[f]=d(434.456-b-1.402*e),a[f+1]=d(119.541-b+.344*c+.714*e),a[f+2]=d(481.816-b-1.772*c);return a},_convertCmykToRgb:function(a){for(var b,
c,e,d,f=0,g=1/255/255,h=0,k=a.length;h<k;h+=4){b=a[h];c=a[h+1];e=a[h+2];d=a[h+3];var l=b*(-4.387332384609988*b+54.48615194189176*c+18.82290502165302*e+212.25662451639585*d-72734.4411664936)+c*(1.7149763477362134*c-5.6096736904047315*e-17.873870861415444*d-1401.7366389350734)+e*(-2.5217340131683033*e-21.248923337353073*d+4465.541406466231)-d*(21.86122147463605*d+48317.86113160301),t=b*(8.841041422036149*b+60.118027045597366*c+6.871425592049007*e+31.159100130055922*d-20220.756542821975)+c*(-15.310361306967817*
c+17.575251261109482*e+131.35250912493976*d-48691.05921601825)+e*(4.444339102852739*e+9.8632861493405*d-6341.191035517494)-d*(20.737325471181034*d+47890.15695978492);b=b*(.8842522430003296*b+8.078677503112928*c+30.89978309703729*e-.23883238689178934*d-3616.812083916688)+c*(10.49593273432072*c+63.02378494754052*e+50.606957656360734*d-28620.90484698408)+e*(.03296041114873217*e+115.60384449646641*d-49363.43385999684)-d*(22.33816807309886*d+45932.16563550634);a[f++]=0<=l?255:-16581375>=l?0:255+l*g|0;
a[f++]=0<=t?255:-16581375>=t?0:255+t*g|0;a[f++]=0<=b?255:-16581375>=b?0:255+b*g|0}return a},getData:function(a,b,c){if(4<this.numComponents)throw"Unsupported color mode";a=this._getLinearizedBlockData(a,b);if(3===this.numComponents)return this._convertYccToRgb(a);if(4===this.numComponents){if(this._isColorConversionNeeded())return c?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(c)return this._convertCmykToRgb(a)}return a}};return a}();"use strict";var k=function(){function a(b,c,e){this.data=
b;this.bp=c;this.dataEnd=e;this.chigh=b[c];this.clow=0;this.byteIn();this.chigh=this.chigh<<7&65535|this.clow>>9&127;this.clow=this.clow<<7&65535;this.ct-=7;this.a=32768}var b=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,
switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,
nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,
nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];a.prototype={byteIn:function(){var a=
this.data,b=this.bp;255===a[b]?143<a[b+1]?(this.clow+=65280,this.ct=8):(b++,this.clow+=a[b]<<9,this.ct=7,this.bp=b):(b++,this.clow+=b<this.dataEnd?a[b]<<8:65280,this.ct=8,this.bp=b);65535<this.clow&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(a,c){var e=a[c]>>1,d=a[c]&1,e=b[e],f=e.qe,g=this.a-f;if(this.chigh<f)g<f?(g=f,f=d,e=e.nmps):(g=f,f=1^d,1===e.switchFlag&&(d=f),e=e.nlps);else{this.chigh-=f;if(0!==(g&32768))return this.a=g,d;g<f?(f=1^d,1===e.switchFlag&&(d=f),e=e.nlps):(f=
d,e=e.nmps)}do 0===this.ct&&this.byteIn(),g<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--;while(0===(g&32768));this.a=g;a[c]=e<<1|d;return f}};return a}();"use strict";var m=function(){function a(){this.failOnCorruptedImage=!1}function f(a,b,c){a=c.xcb_;c=c.ycb_;var e=1<<a,d=1<<c,g=b.tbx0>>a,h=b.tby0>>c,k=b.tbx1+e-1>>a,l=b.tby1+d-1>>c,u=b.resolution.precinctParameters,t=[],m=[],p,n,q,r;for(n=h;n<l;n++)for(p=g;p<k;p++)if(q={cbx:p,cby:n,tbx0:e*p,tby0:d*n,
tbx1:e*(p+1),tby1:d*(n+1)},q.tbx0_=Math.max(b.tbx0,q.tbx0),q.tby0_=Math.max(b.tby0,q.tby0),q.tbx1_=Math.min(b.tbx1,q.tbx1),q.tby1_=Math.min(b.tby1,q.tby1),r=Math.floor((q.tbx0_-b.tbx0)/u.precinctWidthInSubband)+Math.floor((q.tby0_-b.tby0)/u.precinctHeightInSubband)*u.numprecinctswide,q.precinctNumber=r,q.subbandType=b.type,q.Lblock=3,!(q.tbx1_<=q.tbx0_||q.tby1_<=q.tby0_)){t.push(q);var y=m[r];void 0!==y?(p<y.cbxMin?y.cbxMin=p:p>y.cbxMax&&(y.cbxMax=p),n<y.cbyMin?y.cbxMin=n:n>y.cbyMax&&(y.cbyMax=n)):
m[r]=y={cbxMin:p,cbyMin:n,cbxMax:p,cbyMax:n};q.precinct=y}b.codeblockParameters={codeblockWidth:a,codeblockHeight:c,numcodeblockwide:k-g+1,numcodeblockhigh:l-h+1};b.codeblocks=t;b.precincts=m}function g(a,b,c){var e=[];a=a.subbands;for(var d=0,f=a.length;d<f;d++)for(var h=a[d].codeblocks,k=0,l=h.length;k<l;k++){var u=h[k];u.precinctNumber===b&&e.push(u)}return{layerNumber:c,codeblocks:e}}function h(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,e=a.SIZ.Csiz,d=0;
for(a=0;a<e;a++)d=Math.max(d,b.components[a].codingStyleParameters.decompositionLevelsCount);var f=0,k=0,l=0,u=0;this.nextPacket=function(){for(;f<c;f++){for(;k<=d;k++){for(;l<e;l++){var a=b.components[l];if(!(k>a.codingStyleParameters.decompositionLevelsCount)){for(var a=a.resolutions[k],h=a.precinctParameters.numprecincts;u<h;)return a=g(a,u,f),u++,a;u=0}}l=0}k=0}throw Error("JPX Error: Out of packets");}}function m(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,
e=a.SIZ.Csiz,d=0;for(a=0;a<e;a++)d=Math.max(d,b.components[a].codingStyleParameters.decompositionLevelsCount);var f=0,h=0,k=0,l=0;this.nextPacket=function(){for(;f<=d;f++){for(;h<c;h++){for(;k<e;k++){var a=b.components[k];if(!(f>a.codingStyleParameters.decompositionLevelsCount)){for(var a=a.resolutions[f],u=a.precinctParameters.numprecincts;l<u;)return a=g(a,l,h),l++,a;l=0}}k=0}h=0}throw Error("JPX Error: Out of packets");}}function p(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,
e=a.SIZ.Csiz,d,f,h,k,l=0;for(h=0;h<e;h++)l=Math.max(l,b.components[h].codingStyleParameters.decompositionLevelsCount);var u=new Int32Array(l+1);for(f=0;f<=l;++f){for(h=a=0;h<e;++h){var t=b.components[h].resolutions;f<t.length&&(a=Math.max(a,t[f].precinctParameters.numprecincts))}u[f]=a}k=h=f=d=0;this.nextPacket=function(){for(;f<=l;f++){for(;k<u[f];k++){for(;h<e;h++){var a=b.components[h];if(!(f>a.codingStyleParameters.decompositionLevelsCount||(a=a.resolutions[f],k>=a.precinctParameters.numprecincts))){for(;d<
c;)return a=g(a,k,d),d++,a;d=0}}h=0}k=0}throw Error("JPX Error: Out of packets");}}function w(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,e=a.SIZ.Csiz,d=u(b),f=0,h=0,k=0,l=0,t=0;this.nextPacket=function(){for(;t<d.maxNumHigh;t++){for(;l<d.maxNumWide;l++){for(;k<e;k++){for(var a=b.components[k],u=a.codingStyleParameters.decompositionLevelsCount;h<=u;h++){var p=a.resolutions[h],m=J(l,t,d.components[k].resolutions[h],d,p);if(null!==m){for(;f<c;)return a=g(p,m,f),
f++,a;f=0}}h=0}k=0}l=0}throw Error("JPX Error: Out of packets");}}function C(a){var b=a.tiles[a.currentTile.index],c=b.codingStyleDefaultParameters.layersCount,e=a.SIZ.Csiz,d=u(b),f=0,h=0,k=0,l=0,t=0;this.nextPacket=function(){for(;k<e;++k){for(var a=b.components[k],u=d.components[k],p=a.codingStyleParameters.decompositionLevelsCount;t<u.maxNumHigh;t++){for(;l<u.maxNumWide;l++){for(;h<=p;h++){var m=a.resolutions[h],n=J(l,t,u.resolutions[h],u,m);if(null!==n){for(;f<c;)return a=g(m,n,f),f++,a;f=0}}h=
0}l=0}t=0}throw Error("JPX Error: Out of packets");}}function J(a,b,c,e,d){a*=e.minWidth;b*=e.minHeight;return 0!==a%c.width||0!==b%c.height?null:a/c.height+b/c.width*d.precinctParameters.numprecinctswide}function u(a){for(var b=a.components.length,c=Number.MAX_VALUE,e=Number.MAX_VALUE,d=0,f=0,g=Array(b),h=0;h<b;h++){for(var k=a.components[h],l=k.codingStyleParameters.decompositionLevelsCount,u=Array(l+1),t=Number.MAX_VALUE,p=Number.MAX_VALUE,m=0,n=0,q=1;0<=l;--l){var r=k.resolutions[l],y=q*r.precinctParameters.precinctWidth,
v=q*r.precinctParameters.precinctHeight,t=Math.min(t,y),p=Math.min(p,v),m=Math.max(m,r.precinctParameters.numprecinctswide),n=Math.max(n,r.precinctParameters.numprecinctshigh);u[l]={width:y,height:v};q<<=1}c=Math.min(c,t);e=Math.min(e,p);d=Math.max(d,m);f=Math.max(f,n);g[h]={resolutions:u,minWidth:t,minHeight:p,maxNumWide:m,maxNumHigh:n}}return{components:g,minWidth:c,minHeight:e,maxNumWide:d,maxNumHigh:f}}function v(a,c,e,d){function f(a){for(;u<a;){var b=c[e+k];k++;t?(l=l<<7|b,u+=7,t=!1):(l=l<<
8|b,u+=8);255===b&&(t=!0)}u-=a;return l>>>u&(1<<a)-1}function g(a){return 255===c[e+k-1]&&c[e+k]===a?(k+=1,!0):255===c[e+k]&&c[e+k+1]===a?(k+=2,!0):!1}function h(){if(0===f(1))return 1;if(0===f(1))return 2;var a=f(2);if(3>a)return a+3;a=f(5);if(31>a)return a+6;a=f(7);return a+37}var k=0,l,u=0,t=!1,p=a.COD.sopMarkerUsed,m=a.COD.ephMarkerUsed;for(a=a.tiles[a.currentTile.index].packetsIterator;k<d;){u=0;t&&(k++,t=!1);p&&g(145)&&(k+=4);var n=a.nextPacket();if(f(1)){for(var q=n.layerNumber,r=[],y,v=0,
w=n.codeblocks.length;v<w;v++){y=n.codeblocks[v];var x=y.precinct,z=y.cbx-x.cbxMin,E=y.cby-x.cbyMin,C=!1,F=!1,A;if(void 0!==y.included)C=!!f(1);else{var x=y.precinct,I,D;void 0!==x.inclusionTree?I=x.inclusionTree:(A=x.cbxMax-x.cbxMin+1,D=x.cbyMax-x.cbyMin+1,I=new L(A,D,q),D=new B(A,D),x.inclusionTree=I,x.zeroBitPlanesTree=D);if(I.reset(z,E,q))for(;;)if(f(1)){if(A=!I.nextLevel()){C=F=y.included=!0;break}}else{I.incrementValue(q);break}}if(C){if(F){D=x.zeroBitPlanesTree;for(D.reset(z,E);;)if(f(1)){if(A=
!D.nextLevel())break}else D.incrementValue();y.zeroBitPlanes=D.value}for(x=h();f(1);)y.Lblock++;z=b(x);z=f((x<1<<z?z-1:z)+y.Lblock);r.push({codeblock:y,codingpasses:x,dataLength:z})}}u=0;t&&(k++,t=!1);for(m&&g(146);0<r.length;)n=r.shift(),y=n.codeblock,void 0===y.data&&(y.data=[]),y.data.push({data:c,start:e+k,end:e+k+n.dataLength,codingpasses:n.codingpasses}),k+=n.dataLength}}return k}var z={LL:0,LH:1,HL:1,HH:2};a.prototype={parse:function(a){if(65359===c(a,0))this.parseCodestream(a,0,a.length);
else for(var b=0,f=a.length;b<f;){var g=8,h=d(a,b),k=d(a,b+4),b=b+g;1===h&&(h=4294967296*d(a,b)+d(a,b+4),b+=8,g+=8);0===h&&(h=f-b+g);if(h<g)throw Error("JPX Error: Invalid box field size");g=h-g;h=!0;switch(k){case 1785737832:h=!1;break;case 1668246642:k=a[b];if(1===k)switch(k=d(a,b+3),k){case 16:case 17:case 18:break;default:r("Unknown colorspace "+k)}else 2===k&&A("ICC profile not supported");break;case 1785737827:this.parseCodestream(a,b,b+g);break;case 1783636E3:218793738!==d(a,b)&&r("Invalid JP2 signature");
break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:var l=String.fromCharCode(k>>24&255,k>>16&255,k>>8&255,k&255);r("Unsupported header type "+k+" ("+l+")")}h&&(b+=g)}},parseImageProperties:function(a){for(var b=a.getByte();0<=b;){var c=b,b=a.getByte();if(65361===(c<<8|b)){a.skip(4);var b=a.getInt32()>>>0,c=a.getInt32()>>>0,e=a.getInt32()>>>0,d=a.getInt32()>>>0;a.skip(16);a=a.getUint16();this.width=b-e;this.height=c-d;this.componentsCount=a;this.bitsPerComponent=
8;return}}throw Error("JPX Error: No size marker found in JPX stream");},parseCodestream:function(a,b,g){var u={};try{for(var q=!1,B=b;B+1<g;){var E=c(a,B),B=B+2,M=0,A,J,L,qa,Aa,H;switch(E){case 65359:u.mainHeader=!0;break;case 65497:break;case 65361:var M=c(a,B),W={};W.Xsiz=d(a,B+4);W.Ysiz=d(a,B+8);W.XOsiz=d(a,B+12);W.YOsiz=d(a,B+16);W.XTsiz=d(a,B+20);W.YTsiz=d(a,B+24);W.XTOsiz=d(a,B+28);W.YTOsiz=d(a,B+32);var la=c(a,B+36);W.Csiz=la;var za=[];A=B+38;for(var ta=0;ta<la;ta++){var ua={precision:(a[A]&
127)+1,isSigned:!!(a[A]&128),XRsiz:a[A+1],YRsiz:a[A+1]},ba=ua,Ia=W;ba.x0=Math.ceil(Ia.XOsiz/ba.XRsiz);ba.x1=Math.ceil(Ia.Xsiz/ba.XRsiz);ba.y0=Math.ceil(Ia.YOsiz/ba.YRsiz);ba.y1=Math.ceil(Ia.Ysiz/ba.YRsiz);ba.width=ba.x1-ba.x0;ba.height=ba.y1-ba.y0;za.push(ua)}u.SIZ=W;u.components=za;for(var ab=u,vc=za,X=ab.SIZ,U=void 0,Y=[],fa=Math.ceil((X.Xsiz-X.XTOsiz)/X.XTsiz),fb=Math.ceil((X.Ysiz-X.YTOsiz)/X.YTsiz),gb=0;gb<fb;gb++)for(var hb=0;hb<fa;hb++)U={},U.tx0=Math.max(X.XTOsiz+hb*X.XTsiz,X.XOsiz),U.ty0=
Math.max(X.YTOsiz+gb*X.YTsiz,X.YOsiz),U.tx1=Math.min(X.XTOsiz+(hb+1)*X.XTsiz,X.Xsiz),U.ty1=Math.min(X.YTOsiz+(gb+1)*X.YTsiz,X.Ysiz),U.width=U.tx1-U.tx0,U.height=U.ty1-U.ty0,U.components=[],Y.push(U);ab.tiles=Y;for(var ib=0,wc=X.Csiz;ib<wc;ib++)for(var jb=vc[ib],yb=0,xc=Y.length;yb<xc;yb++){var ma={},U=Y[yb];ma.tcx0=Math.ceil(U.tx0/jb.XRsiz);ma.tcy0=Math.ceil(U.ty0/jb.YRsiz);ma.tcx1=Math.ceil(U.tx1/jb.XRsiz);ma.tcy1=Math.ceil(U.ty1/jb.YRsiz);ma.width=ma.tcx1-ma.tcx0;ma.height=ma.tcy1-ma.tcy0;U.components[ib]=
ma}u.QCC=[];u.COC=[];break;case 65372:var M=c(a,B),Qa={};A=B+2;J=a[A++];switch(J&31){case 0:qa=8;Aa=!0;break;case 1:qa=16;Aa=!1;break;case 2:qa=16;Aa=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+J);}Qa.noQuantization=8===qa;Qa.scalarExpounded=Aa;Qa.guardBits=J>>5;for(L=[];A<M+B;){var na={};8===qa?(na.epsilon=a[A++]>>3,na.mu=0):(na.epsilon=a[A]>>3,na.mu=(a[A]&7)<<8|a[A+1],A+=2);L.push(na)}Qa.SPqcds=L;u.mainHeader?u.QCD=Qa:(u.currentTile.QCD=Qa,u.currentTile.QCC=[]);break;case 65373:var M=
c(a,B),Ra={};A=B+2;var kb;257>u.SIZ.Csiz?kb=a[A++]:(kb=c(a,A),A+=2);J=a[A++];switch(J&31){case 0:qa=8;Aa=!0;break;case 1:qa=16;Aa=!1;break;case 2:qa=16;Aa=!0;break;default:throw Error("JPX Error: Invalid SQcd value "+J);}Ra.noQuantization=8===qa;Ra.scalarExpounded=Aa;Ra.guardBits=J>>5;for(L=[];A<M+B;)na={},8===qa?(na.epsilon=a[A++]>>3,na.mu=0):(na.epsilon=a[A]>>3,na.mu=(a[A]&7)<<8|a[A+1],A+=2),L.push(na);Ra.SPqcds=L;u.mainHeader?u.QCC[kb]=Ra:u.currentTile.QCC[kb]=Ra;break;case 65362:var M=c(a,B),
Z={};A=B+2;var zb=a[A++];Z.entropyCoderWithCustomPrecincts=!!(zb&1);Z.sopMarkerUsed=!!(zb&2);Z.ephMarkerUsed=!!(zb&4);Z.progressionOrder=a[A++];Z.layersCount=c(a,A);A+=2;Z.multipleComponentTransform=a[A++];Z.decompositionLevelsCount=a[A++];Z.xcb=(a[A++]&15)+2;Z.ycb=(a[A++]&15)+2;var Sa=a[A++];Z.selectiveArithmeticCodingBypass=!!(Sa&1);Z.resetContextProbabilities=!!(Sa&2);Z.terminationOnEachCodingPass=!!(Sa&4);Z.verticalyStripe=!!(Sa&8);Z.predictableTermination=!!(Sa&16);Z.segmentationSymbolUsed=!!(Sa&
32);Z.reversibleTransformation=a[A++];if(Z.entropyCoderWithCustomPrecincts){for(var Wb=[];A<M+B;){var Xb=a[A++];Wb.push({PPx:Xb&15,PPy:Xb>>4})}Z.precinctsSizes=Wb}var Ja=[];Z.selectiveArithmeticCodingBypass&&Ja.push("selectiveArithmeticCodingBypass");Z.resetContextProbabilities&&Ja.push("resetContextProbabilities");Z.terminationOnEachCodingPass&&Ja.push("terminationOnEachCodingPass");Z.verticalyStripe&&Ja.push("verticalyStripe");Z.predictableTermination&&Ja.push("predictableTermination");if(0<Ja.length)throw q=
!0,Error("JPX Error: Unsupported COD options ("+Ja.join(", ")+")");u.mainHeader?u.COD=Z:(u.currentTile.COD=Z,u.currentTile.COC=[]);break;case 65424:M=c(a,B);H={};H.index=c(a,B+2);H.length=d(a,B+4);H.dataEnd=H.length+B-2;H.partIndex=a[B+8];H.partsCount=a[B+9];u.mainHeader=!1;0===H.partIndex&&(H.COD=u.COD,H.COC=u.COC.slice(0),H.QCD=u.QCD,H.QCC=u.QCC.slice(0));u.currentTile=H;break;case 65427:H=u.currentTile;if(0===H.partIndex){for(var va=u,yc=va.SIZ.Csiz,Yb=va.tiles[H.index],Ka=0;Ka<yc;Ka++){var Zb=
Yb.components[Ka];Zb.quantizationParameters=void 0!==va.currentTile.QCC[Ka]?va.currentTile.QCC[Ka]:va.currentTile.QCD;Zb.codingStyleParameters=void 0!==va.currentTile.COC[Ka]?va.currentTile.COC[Ka]:va.currentTile.COD}Yb.codingStyleDefaultParameters=va.currentTile.COD;for(var ia=u,La=ia.tiles[ia.currentTile.index],zc=ia.SIZ.Csiz,Ab=0;Ab<zc;Ab++){for(var aa=La.components[Ab],Bb=aa.codingStyleParameters.decompositionLevelsCount,$b=[],bb=[],Ma=0;Ma<=Bb;Ma++){var wa,lb=Ma,Na=aa.codingStyleParameters,oa=
{};Na.entropyCoderWithCustomPrecincts?(oa.PPx=Na.precinctsSizes[lb].PPx,oa.PPy=Na.precinctsSizes[lb].PPy):(oa.PPx=15,oa.PPy=15);oa.xcb_=0<lb?Math.min(Na.xcb,oa.PPx-1):Math.min(Na.xcb,oa.PPx);oa.ycb_=0<lb?Math.min(Na.ycb,oa.PPy-1):Math.min(Na.ycb,oa.PPy);wa=oa;var ca={},Ba=1<<Bb-Ma;ca.trx0=Math.ceil(aa.tcx0/Ba);ca.try0=Math.ceil(aa.tcy0/Ba);ca.trx1=Math.ceil(aa.tcx1/Ba);ca.try1=Math.ceil(aa.tcy1/Ba);ca.resLevel=Ma;var Cb=1<<wa.PPx,Db=1<<wa.PPy,ac=0===ca.resLevel,bc=ca.trx1>ca.trx0?Math.ceil(ca.trx1/
Cb)-Math.floor(ca.trx0/Cb):0,cc=ca.try1>ca.try0?Math.ceil(ca.try1/Db)-Math.floor(ca.try0/Db):0;ca.precinctParameters={precinctWidth:Cb,precinctHeight:Db,numprecinctswide:bc,numprecinctshigh:cc,numprecincts:bc*cc,precinctWidthInSubband:1<<wa.PPx+(ac?0:-1),precinctHeightInSubband:1<<wa.PPy+(ac?0:-1)};$b.push(ca);var V;if(0===Ma)V={type:"LL"},V.tbx0=Math.ceil(aa.tcx0/Ba),V.tby0=Math.ceil(aa.tcy0/Ba),V.tbx1=Math.ceil(aa.tcx1/Ba),V.tby1=Math.ceil(aa.tcy1/Ba),V.resolution=ca,f(ia,V,wa),bb.push(V),ca.subbands=
[V];else{var ja=1<<Bb-Ma+1,mb=[];V={type:"HL"};V.tbx0=Math.ceil(aa.tcx0/ja-.5);V.tby0=Math.ceil(aa.tcy0/ja);V.tbx1=Math.ceil(aa.tcx1/ja-.5);V.tby1=Math.ceil(aa.tcy1/ja);V.resolution=ca;f(ia,V,wa);bb.push(V);mb.push(V);V={type:"LH"};V.tbx0=Math.ceil(aa.tcx0/ja);V.tby0=Math.ceil(aa.tcy0/ja-.5);V.tbx1=Math.ceil(aa.tcx1/ja);V.tby1=Math.ceil(aa.tcy1/ja-.5);V.resolution=ca;f(ia,V,wa);bb.push(V);mb.push(V);V={type:"HH"};V.tbx0=Math.ceil(aa.tcx0/ja-.5);V.tby0=Math.ceil(aa.tcy0/ja-.5);V.tbx1=Math.ceil(aa.tcx1/
ja-.5);V.tby1=Math.ceil(aa.tcy1/ja-.5);V.resolution=ca;f(ia,V,wa);bb.push(V);mb.push(V);ca.subbands=mb}}aa.resolutions=$b;aa.subbands=bb}var dc=La.codingStyleDefaultParameters.progressionOrder;switch(dc){case 0:La.packetsIterator=new h(ia);break;case 1:La.packetsIterator=new m(ia);break;case 2:La.packetsIterator=new p(ia);break;case 3:La.packetsIterator=new w(ia);break;case 4:La.packetsIterator=new C(ia);break;default:throw Error("JPX Error: Unsupported progression order "+dc);}}M=H.dataEnd-B;v(u,
a,B,M);break;case 65365:case 65367:case 65368:case 65380:M=c(a,B);break;case 65363:throw Error("JPX Error: Codestream code 0xFF53 (COC) is not implemented");default:throw Error("JPX Error: Unknown codestream code: "+E.toString(16));}B+=M}}catch(ec){if(q||this.failOnCorruptedImage)throw ec;r("Trying to recover from "+ec.message)}for(var fc=u.components,Ta=u.SIZ.Csiz,gc=[],Eb=0,Ac=u.tiles.length;Eb<Ac;Eb++){var Fb=u.tiles[Eb],Oa=[],ka;for(ka=0;ka<Ta;ka++){for(var Bc=Oa,Cc=ka,Pa=Fb.components[ka],Gb=
Pa.codingStyleParameters,Hb=Pa.quantizationParameters,Dc=Gb.decompositionLevelsCount,nb=Hb.SPqcds,Ec=Hb.scalarExpounded,Fc=Hb.guardBits,Gc=Gb.segmentationSymbolUsed,Hc=u.components[ka].precision,Ib=Gb.reversibleTransformation,Ic=Ib?new O:new P,hc=[],Jb=0,cb=0;cb<=Dc;cb++){for(var Ua=Pa.resolutions[cb],Kb=Ua.trx1-Ua.trx0,ic=Ua.try1-Ua.try0,jc=new Float32Array(Kb*ic),Lb=0,Jc=Ua.subbands.length;Lb<Jc;Lb++){var Mb,ob;Ec?(Mb=nb[Jb].mu,ob=nb[Jb].epsilon,Jb++):(Mb=nb[0].mu,ob=nb[0].epsilon+(0<cb?1-cb:0));
for(var kc=Ua.subbands[Lb],Kc=z[kc.type],Lc=jc,lc=Kb,Ca=kc,Mc=Ib?1:Math.pow(2,Hc+Kc-ob)*(1+Mb/2048),Nb=Fc+ob-1,mc=Ib,Nc=Gc,Oc=Ca.tbx0,Pc=Ca.tby0,pb=Ca.tbx1-Ca.tbx0,nc=Ca.codeblocks,Qc="H"===Ca.type.charAt(0)?1:0,Rc="H"===Ca.type.charAt(1)?lc:0,Ob=0,Sc=nc.length;Ob<Sc;++Ob){var ra=nc[Ob],qb=ra.tbx1_-ra.tbx0_,Pb=ra.tby1_-ra.tby0_;if(0!==qb&&0!==Pb&&void 0!==ra.data){var xa,rb;xa=new D(qb,Pb,ra.subbandType,ra.zeroBitPlanes,Nb);rb=2;var sb=ra.data,tb=0,Qb=0,ga,ub,Da;ga=0;for(ub=sb.length;ga<ub;ga++)Da=
sb[ga],tb+=Da.end-Da.start,Qb+=Da.codingpasses;var oc=new Uint8Array(tb),Ea=0;ga=0;for(ub=sb.length;ga<ub;ga++){Da=sb[ga];var pc=Da.data.subarray(Da.start,Da.end);oc.set(pc,Ea);Ea+=pc.length}var Tc=new k(oc,0,tb);xa.setDecoder(Tc);for(ga=0;ga<Qb;ga++){switch(rb){case 0:xa.runSignificancePropogationPass();break;case 1:xa.runMagnitudeRefinementPass();break;case 2:xa.runCleanupPass(),Nc&&xa.checkSegmentationSymbol()}rb=(rb+1)%3}var Va=ra.tbx0_-Oc+(ra.tby0_-Pc)*pb,Uc=xa.coefficentsSign,Vc=xa.coefficentsMagnitude,
Wc=xa.bitsDecoded,Xc=mc?0:.5,Rb,Fa,Sb,Ea=0,Yc="LL"!==Ca.type;for(ga=0;ga<Pb;ga++){var Zc=2*(Va/pb|0)*(lc-pb)+Qc+Rc;for(Rb=0;Rb<qb;Rb++)Fa=Vc[Ea],0!==Fa&&(Fa=(Fa+Xc)*Mc,0!==Uc[Ea]&&(Fa=-Fa),Sb=Wc[Ea],Lc[Yc?Zc+(Va<<1):Va]=mc&&Sb>=Nb?Fa:Fa*(1<<Nb-Sb)),Va++,Ea++;Va+=pb-qb}}}}hc.push({width:Kb,height:ic,items:jc})}var Tb=Ic.calculate(hc,Pa.tcx0,Pa.tcy0);Bc[Cc]={left:Pa.tcx0,top:Pa.tcy0,width:Tb.width,height:Tb.height,items:Tb.items}}var db=Oa[0],ya=new Uint8Array(db.items.length*Ta),$c={left:db.left,top:db.top,
width:db.width,height:db.height,items:ya},ha,Wa,pa,vb,Ub,ea=0,da,Xa,Ya,Za,$a,Ga,sa,Ha,wb,xb;if(Fb.codingStyleDefaultParameters.multipleComponentTransform){var qc=4===Ta,Vb=Oa[0].items,rc=Oa[1].items,sc=Oa[2].items,ad=qc?Oa[3].items:null;ha=fc[0].precision-8;Wa=(128<<ha)+.5;pa=255*(1<<ha);Ub=.5*pa;vb=-Ub;var bd=Fb.components[0],tc=Ta-3;Xa=Vb.length;if(bd.codingStyleParameters.reversibleTransformation)for(da=0;da<Xa;da++,ea+=tc)Ya=Vb[da]+Wa,Za=rc[da],$a=sc[da],sa=Ya-($a+Za>>2),Ga=sa+$a,Ha=sa+Za,ya[ea++]=
0>=Ga?0:Ga>=pa?255:Ga>>ha,ya[ea++]=0>=sa?0:sa>=pa?255:sa>>ha,ya[ea++]=0>=Ha?0:Ha>=pa?255:Ha>>ha;else for(da=0;da<Xa;da++,ea+=tc)Ya=Vb[da]+Wa,Za=rc[da],$a=sc[da],Ga=Ya+1.402*$a,sa=Ya-.34413*Za-.71414*$a,Ha=Ya+1.772*Za,ya[ea++]=0>=Ga?0:Ga>=pa?255:Ga>>ha,ya[ea++]=0>=sa?0:sa>=pa?255:sa>>ha,ya[ea++]=0>=Ha?0:Ha>=pa?255:Ha>>ha;if(qc)for(da=0,ea=3;da<Xa;da++,ea+=4)wb=ad[da],ya[ea]=wb<=vb?0:wb>=Ub?255:wb+Wa>>ha}else for(ka=0;ka<Ta;ka++){var uc=Oa[ka].items;ha=fc[ka].precision-8;Wa=(128<<ha)+.5;pa=127.5*(1<<
ha);vb=-pa;ea=ka;da=0;for(Xa=uc.length;da<Xa;da++)xb=uc[da],ya[ea]=xb<=vb?0:xb>=pa?255:xb+Wa>>ha,ea+=Ta}gc.push($c)}this.tiles=gc;this.width=u.SIZ.Xsiz-u.SIZ.XOsiz;this.height=u.SIZ.Ysiz-u.SIZ.YOsiz;this.componentsCount=u.SIZ.Csiz}};var B=function(){function a(c,e){var d=b(Math.max(c,e))+1;this.levels=[];for(var f=0;f<d;f++)this.levels.push({width:c,height:e,items:[]}),c=Math.ceil(c/2),e=Math.ceil(e/2)}a.prototype={reset:function(a,b){for(var c=0,e=0,d;c<this.levels.length;){d=this.levels[c];var f=
a+b*d.width;if(void 0!==d.items[f]){e=d.items[f];break}d.index=f;a>>=1;b>>=1;c++}c--;d=this.levels[c];d.items[d.index]=e;this.currentLevel=c;delete this.value},incrementValue:function(){var a=this.levels[this.currentLevel];a.items[a.index]++},nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];a--;if(0>a)return this.value=c,!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return a}(),L=function(){function a(c,e,d){var f=b(Math.max(c,e))+1;this.levels=
[];for(var g=0;g<f;g++){for(var h=new Uint8Array(c*e),k=0,l=h.length;k<l;k++)h[k]=d;this.levels.push({width:c,height:e,items:h});c=Math.ceil(c/2);e=Math.ceil(e/2)}}a.prototype={reset:function(a,b,c){for(var e=0;e<this.levels.length;){var d=this.levels[e],f=a+b*d.width;d.index=f;d=d.items[f];if(255===d)break;if(d>c)return this.currentLevel=e,this.propagateValues(),!1;a>>=1;b>>=1;e++}this.currentLevel=e-1;return!0},incrementValue:function(a){var b=this.levels[this.currentLevel];b.items[b.index]=a+1;
this.propagateValues()},propagateValues:function(){for(var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];0<=--a;)b=this.levels[a],b.items[b.index]=c},nextLevel:function(){var a=this.currentLevel,b=this.levels[a],c=b.items[b.index];b.items[b.index]=255;a--;if(0>a)return!1;this.currentLevel=a;b=this.levels[a];b.items[b.index]=c;return!0}};return a}(),D=function(){function a(d,f,g,h,k){this.width=d;this.height=f;this.contextLabelTable="HH"===g?e:"HL"===g?c:b;d*=f;this.neighborsSignificance=
new Uint8Array(d);this.coefficentsSign=new Uint8Array(d);this.coefficentsMagnitude=14<k?new Uint32Array(d):6<k?new Uint16Array(d):new Uint8Array(d);this.processingFlags=new Uint8Array(d);k=new Uint8Array(d);if(0!==h)for(f=0;f<d;f++)k[f]=h;this.bitsDecoded=k;this.reset()}var b=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),c=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,
0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),e=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);a.prototype={setDecoder:function(a){this.decoder=a},reset:function(){this.contexts=new Int8Array(19);this.contexts[0]=8;this.contexts[17]=92;this.contexts[18]=6},setNeighborsSignificance:function(a,b,c){var e=this.neighborsSignificance,
d=this.width,f=this.height,g=0<b;b=b+1<d;var h;0<a&&(h=c-d,g&&(e[h-1]+=16),b&&(e[h+1]+=16),e[h]+=4);a+1<f&&(h=c+d,g&&(e[h-1]+=16),b&&(e[h+1]+=16),e[h]+=4);g&&(e[c-1]+=1);b&&(e[c+1]+=1);e[c]|=128},runSignificancePropogationPass:function(){for(var a=this.decoder,b=this.width,c=this.height,e=this.coefficentsMagnitude,d=this.coefficentsSign,f=this.neighborsSignificance,h=this.processingFlags,g=this.contexts,k=this.contextLabelTable,l=this.bitsDecoded,u=0;u<c;u+=4)for(var t=0;t<b;t++)for(var p=u*b+t,m=
0;4>m;m++,p+=b){var n=u+m;if(n>=c)break;h[p]&=-2;if(!e[p]&&f[p]){if(a.readBit(g,k[f[p]])){var K=this.decodeSignBit(n,t,p);d[p]=K;e[p]=1;this.setNeighborsSignificance(n,t,p);h[p]|=2}l[p]++;h[p]|=1}}},decodeSignBit:function(a,b,c){var e=this.width,d=this.height,f=this.coefficentsMagnitude,h=this.coefficentsSign,g;g=0<b&&0!==f[c-1];b+1<e&&0!==f[c+1]?(b=h[c+1],g?(g=h[c-1],b=1-b-g):b=1-b-b):g?(g=h[c-1],b=1-g-g):b=0;var k=3*b;g=0<a&&0!==f[c-e];a+1<d&&0!==f[c+e]?(b=h[c+e],g?(g=h[c-e],b=1-b-g+k):b=1-b-b+
k):g?(g=h[c-e],b=1-g-g+k):b=k;return a=0<=b?this.decoder.readBit(this.contexts,9+b):this.decoder.readBit(this.contexts,9-b)^1},runMagnitudeRefinementPass:function(){for(var a=this.decoder,b=this.width,c=this.coefficentsMagnitude,e=this.neighborsSignificance,d=this.contexts,f=this.bitsDecoded,h=this.processingFlags,g=b*this.height,k=4*b,l=0,u;l<g;l=u){u=Math.min(g,l+k);for(var t=0;t<b;t++)for(var p=l+t;p<u;p+=b)if(c[p]&&0===(h[p]&1)){var m=16;0!==(h[p]&2)&&(h[p]^=2,m=0===(e[p]&127)?15:14);m=a.readBit(d,
m);c[p]=c[p]<<1|m;f[p]++;h[p]|=1}}},runCleanupPass:function(){for(var a=this.decoder,b=this.width,c=this.height,e=this.neighborsSignificance,d=this.coefficentsMagnitude,f=this.coefficentsSign,h=this.contexts,g=this.contextLabelTable,k=this.bitsDecoded,l=this.processingFlags,u=2*b,p=3*b,t,m=0;m<c;m=t){t=Math.min(m+4,c);for(var n=m*b,K=m+3<c,q=0;q<b;q++){var r=n+q,y=0,B=r,v=m,w;if(K&&0===l[r]&&0===l[r+b]&&0===l[r+u]&&0===l[r+p]&&0===e[r]&&0===e[r+b]&&0===e[r+u]&&0===e[r+p]){if(!a.readBit(h,18)){k[r]++;
k[r+b]++;k[r+u]++;k[r+p]++;continue}y=a.readBit(h,17)<<1|a.readBit(h,17);0!==y&&(v=m+y,B+=y*b);w=this.decodeSignBit(v,q,B);f[B]=w;d[B]=1;this.setNeighborsSignificance(v,q,B);l[B]|=2;B=r;for(r=m;r<=v;r++,B+=b)k[B]++;y++}for(v=m+y;v<t;v++,B+=b)d[B]||0!==(l[B]&1)||(1===a.readBit(h,g[e[B]])&&(w=this.decodeSignBit(v,q,B),f[B]=w,d[B]=1,this.setNeighborsSignificance(v,q,B),l[B]|=2),k[B]++)}}},checkSegmentationSymbol:function(){var a=this.decoder,b=this.contexts;if(10!==(a.readBit(b,17)<<3|a.readBit(b,17)<<
2|a.readBit(b,17)<<1|a.readBit(b,17)))throw Error("JPX Error: Invalid segmentation symbol");}};return a}(),H=function(){function a(){}a.prototype.calculate=function(a,b,c){for(var e=a[0],d=1,f=a.length;d<f;d++)e=this.iterate(e,a[d],b,c);return e};a.prototype.extend=function(a,b,c){var e=b-1,d=b+1,f=b+c-2;b+=c;a[e--]=a[d++];a[b++]=a[f--];a[e--]=a[d++];a[b++]=a[f--];a[e--]=a[d++];a[b++]=a[f--];a[e]=a[d];a[b]=a[f]};a.prototype.iterate=function(a,b,c,e){var d=a.width,f=a.height,h=a.items,g=b.width,k=
b.height;b=b.items;var l,u,p,t;for(l=p=0;l<f;l++)for(t=2*l*g,u=0;u<d;u++,p++,t+=2)b[t]=h[p];a.items=null;a=new Float32Array(g+8);if(1===g){if(0!==(c&1))for(p=t=0;t<k;t++,p+=g)b[p]*=.5}else for(p=t=0;t<k;t++,p+=g)a.set(b.subarray(p,p+g),4),this.extend(a,4,g),this.filter(a,4,g),b.set(a.subarray(4,4+g),p);c=16;d=[];for(l=0;l<c;l++)d.push(new Float32Array(k+8));l=0;a=4+k;if(1===k){if(0!==(e&1))for(e=0;e<g;e++)b[e]*=.5}else for(e=0;e<g;e++){if(0===l){c=Math.min(g-e,c);p=e;for(t=4;t<a;p+=g,t++)for(f=0;f<
c;f++)d[f][t]=b[p+f];l=c}l--;p=d[l];this.extend(p,4,k);this.filter(p,4,k);if(0===l)for(p=e-c+1,t=4;t<a;p+=g,t++)for(f=0;f<c;f++)b[p+f]=d[f][t]}return{width:g,height:k,items:b}};return a}(),P=function(){function a(){H.call(this)}a.prototype=Object.create(H.prototype);a.prototype.filter=function(a,b,c){c>>=1;b|=0;var e,d,f,g;e=b-3;for(d=c+4;d--;e+=2)a[e]*=.8128930661159609;e=b-2;f=.443506852043971*a[e-1];for(d=c+3;d--;e+=2)if(g=.443506852043971*a[e+1],a[e]=1.230174104914001*a[e]-f-g,d--)e+=2,f=.443506852043971*
a[e+1],a[e]=1.230174104914001*a[e]-f-g;else break;e=b-1;f=.882911075530934*a[e-1];for(d=c+2;d--;e+=2)if(g=.882911075530934*a[e+1],a[e]-=f+g,d--)e+=2,f=.882911075530934*a[e+1],a[e]-=f+g;else break;e=b;f=-.052980118572961*a[e-1];for(d=c+1;d--;e+=2)if(g=-.052980118572961*a[e+1],a[e]-=f+g,d--)e+=2,f=-.052980118572961*a[e+1],a[e]-=f+g;else break;if(0!==c)for(e=b+1,f=-1.586134342059924*a[e-1],d=c;d--;e+=2)if(g=-1.586134342059924*a[e+1],a[e]-=f+g,d--)e+=2,f=-1.586134342059924*a[e+1],a[e]-=f+g;else break};
return a}(),O=function(){function a(){H.call(this)}a.prototype=Object.create(H.prototype);a.prototype.filter=function(a,b,c){c>>=1;b|=0;var e,d;e=b;for(d=c+1;d--;e+=2)a[e]-=a[e-1]+a[e+1]+2>>2;e=b+1;for(d=c;d--;e+=2)a[e]+=a[e-1]+a[e+1]>>1};return a}();return a}();"use strict";var p=function(){function a(){}function g(a,b,c){this.data=a;this.start=b;this.end=c}function h(a,b,c){function e(a){for(var b=0,g=0;g<a;g++){var h=c.readBit(d,f);f=256>f?f<<1|h:(f<<1|h)&511|256;b=b<<1|h}return b>>>0}var d=a.getContexts(b),
f=1;a=e(1);b=e(1)?e(1)?e(1)?e(1)?e(1)?e(32)+4436:e(12)+340:e(8)+84:e(6)+20:e(4)+4:e(2);return 0===a?b:0<b?-b:null}function p(a,b,c){a=a.getContexts("IAID");for(var e=1,d=0;d<c;d++)var f=b.readBit(a,e),e=e<<1|f;return 31>c?e&(1<<c)-1:e&2147483647}function m(a,b,c){var e=c.decoder;c=c.contextCache.getContexts("GB");var d,f,g,h,k,l,u,p=[];for(f=0;f<b;f++)for(k=p[f]=new Uint8Array(a),l=1>f?k:p[f-1],u=2>f?k:p[f-2],d=u[0]<<13|u[1]<<12|u[2]<<11|l[0]<<7|l[1]<<6|l[2]<<5|l[3]<<4,g=0;g<a;g++)k[g]=h=e.readBit(c,
d),d=(d&31735)<<1|(g+3<a?u[g+3]<<11:0)|(g+4<a?l[g+4]<<4:0)|h;return p}function r(a,b,c,e,d,f,g,h){a&&C("JBIG2 error: MMR encoding is not supported");if(0===e&&!f&&!d&&4===g.length&&3===g[0].x&&-1===g[0].y&&-3===g[1].x&&-1===g[1].y&&2===g[2].x&&-2===g[2].y&&-2===g[3].x&&-2===g[3].y)return m(b,c,h);a=!!f;var k=B[e].concat(g);k.sort(function(a,b){return a.y-b.y||a.x-b.x});g=k.length;var l=new Int8Array(g),u=new Int8Array(g),p=[],t=0,n=0,q=0,y=0,v,w;for(w=0;w<g;w++)l[w]=k[w].x,u[w]=k[w].y,n=Math.min(n,
k[w].x),q=Math.max(q,k[w].x),y=Math.min(y,k[w].y),w<g-1&&k[w].y===k[w+1].y&&k[w].x===k[w+1].x-1?t|=1<<g-1-w:p.push(w);var z=p.length,E=new Int8Array(z),A=new Int8Array(z),F=new Uint16Array(z);for(v=0;v<z;v++)w=p[v],E[v]=k[w].x,A[v]=k[w].y,F[v]=1<<g-1-w;k=-n;y=-y;q=b-q;e=D[e];p=new Uint8Array(b);n=[];v=h.decoder;h=h.contextCache.getContexts("GB");for(var I=0,G,J,L,H=0,Y,fa=0;fa<c;fa++){if(d&&(w=v.readBit(h,e),I^=w)){n.push(p);continue}p=new Uint8Array(p);n.push(p);for(G=0;G<b;G++)if(a&&f[fa][G])p[G]=
0;else{if(G>=k&&G<q&&fa>=y)for(H=H<<1&t,w=0;w<z;w++){if(J=fa+A[w],L=G+E[w],J=n[J][L])J=F[w],H|=J}else for(H=0,Y=g-1,w=0;w<g;w++,Y--)L=G+l[w],0<=L&&L<b&&(J=fa+u[w],0<=J&&(J=n[J][L])&&(H|=J<<Y));w=v.readBit(h,H);p[G]=w}}return n}function w(a,b,c,e,d,f,g,h,k){var l=L[c].coding;0===c&&(l=l.concat([h[0]]));var u=l.length,p=new Int32Array(u),t=new Int32Array(u),m;for(m=0;m<u;m++)p[m]=l[m].x,t[m]=l[m].y;var n=L[c].reference;0===c&&(n=n.concat([h[1]]));h=n.length;var l=new Int32Array(h),q=new Int32Array(h);
for(m=0;m<h;m++)l[m]=n[m].x,q[m]=n[m].y;var n=e[0].length,r=e.length;c=H[c];var y=[],B=k.decoder;k=k.contextCache.getContexts("GR");for(var v=0,x=0;x<b;x++){g&&(m=B.readBit(k,c),(v^=m)&&C("JBIG2 error: prediction is not supported"));var z=new Uint8Array(a);y.push(z);for(var E=0;E<a;E++){var A,F,I=0;for(m=0;m<u;m++)A=x+t[m],F=E+p[m],I=0>A||0>F||F>=a?I<<1:I<<1|y[A][F];for(m=0;m<h;m++)A=x+q[m]+f,F=E+l[m]+d,I=0>A||A>=r||0>F||F>=n?I<<1:I<<1|e[A][F];m=B.readBit(k,I);z[E]=m}}return y}function A(a,b,c,e,
d,f,g,k,l,u,m,n,q,r,y,B,v){a&&C("JBIG2 error: huffman is not supported");a=[];var x;for(r=0;r<e;r++){x=new Uint8Array(c);if(d)for(var z=0;z<c;z++)x[z]=d;a.push(x)}e=v.decoder;d=v.contextCache;var z=-h(d,"IADT",e),F=0;for(r=0;r<f;){var D=h(d,"IADT",e),z=z+D,D=h(d,"IAFS",e),D=F+=D;do{var G=1===g?0:h(d,"IAIT",e);x=g*z+G;var G=p(d,e,l),J=b&&h(d,"IARI",e),G=k[G],L=G[0].length,H=G.length;if(J)var J=h(d,"IARDW",e),X=h(d,"IARDH",e),U=h(d,"IARDX",e),Y=h(d,"IARDY",e),L=L+J,H=H+X,G=w(L,H,y,G,(J>>1)+U,(X>>1)+
Y,!1,B,v);var J=x-(n&1?0:H),X=D-(n&2?L:0),fa;if(u){for(U=0;U<H;U++)if(x=a[X+U]){fa=G[U];var fb=Math.min(c-J,L);switch(q){case 0:for(Y=0;Y<fb;Y++)x[J+Y]|=fa[Y];break;case 2:for(Y=0;Y<fb;Y++)x[J+Y]^=fa[Y];break;default:C("JBIG2 error: operator "+q+" is not supported")}}D+=H-1}else{for(Y=0;Y<H;Y++)if(x=a[J+Y])switch(fa=G[Y],q){case 0:for(U=0;U<L;U++)x[X+U]|=fa[U];break;case 2:for(U=0;U<L;U++)x[X+U]^=fa[U];break;default:C("JBIG2 error: operator "+q+" is not supported")}D+=L-1}r++;G=h(d,"IADS",e);if(null===
G)break;D+=G+m}while(1)}return a}function J(a,b){return{width:d(a,b),height:d(a,b+4),x:d(a,b+8),y:d(a,b+12),combinationOperator:a[b+16]&7}}function u(){}function v(){}a.prototype={getContexts:function(a){return a in this?this[a]:this[a]=new Int8Array(65536)}};g.prototype={get decoder(){var a=new k(this.data,this.start,this.end);return f(this,"decoder",a)},get contextCache(){var b=new a;return f(this,"contextCache",b)}};var z=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion",
"ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"patternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation",
"EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],B=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},
{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],L=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],D=[39717,1941,229,405],H=[32,8];u.prototype={onPageInformation:function(a){this.currentPageInfo=a;var b=new Uint8Array((a.width+7>>3)*a.height);
if(a.defaultPixelValue){a=0;for(var c=b.length;a<c;a++)b[a]=255}this.buffer=b},drawBitmap:function(a,b){var c=this.currentPageInfo,e=a.width,d=a.height,f=c.width+7>>3,g=c.combinationOperatorOverride?a.combinationOperator:c.combinationOperator,c=this.buffer,h=128>>(a.x&7),k=a.y*f+(a.x>>3),l,u,p;switch(g){case 0:for(g=0;g<d;g++){u=h;p=k;for(l=0;l<e;l++)b[g][l]&&(c[p]|=u),u>>=1,u||(u=128,p++);k+=f}break;case 2:for(g=0;g<d;g++){u=h;p=k;for(l=0;l<e;l++)b[g][l]&&(c[p]^=u),u>>=1,u||(u=128,p++);k+=f}break;
default:C("JBIG2 error: operator "+g+" is not supported")}},onImmediateGenericRegion:function(a,b,c,e){var d=a.info;b=new g(b,c,e);a=r(a.mmr,d.width,d.height,a.template,a.prediction,null,a.at,b);this.drawBitmap(d,a)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(a,c,e,d,f,k){a.huffman&&C("JBIG2 error: huffman is not supported");var l=this.symbols;l||(this.symbols=l={});for(var u=[],m=0,n=e.length;m<n;m++)u=u.concat(l[e[m]]);
k=new g(d,f,k);m=a.huffman;n=a.refinement;e=u;var u=a.numberOfNewSymbols,q=a.template,B=a.at,v=a.refinementTemplate,x=a.refinementAt;m&&C("JBIG2 error: huffman is not supported");a=[];var z=0,D=b(e.length+u);d=k.decoder;for(f=k.contextCache;a.length<u;)for(var J=h(f,"IADH",d),z=z+J,J=0;;){var L=h(f,"IADW",d);if(null===L)break;J+=L;if(n)if(L=h(f,"IAAI",d),1<L)L=A(m,n,J,z,0,L,1,e.concat(a),D,0,0,1,0,void 0,v,x,k);else var L=p(f,d,D),H=h(f,"IARDX",d),ta=h(f,"IARDY",d),L=w(J,z,v,L<e.length?e[L]:a[L-e.length],
H,ta,!1,x,k);else L=r(!1,J,z,q,!1,null,B,k);a.push(L)}k=[];m=[];n=!1;for(q=e.length+u;m.length<q;){for(B=h(f,"IAEX",d);B--;)m.push(n);n=!n}d=0;for(f=e.length;d<f;d++)m[d]&&k.push(e[d]);for(e=0;e<u;d++,e++)m[d]&&k.push(a[e]);l[c]=k},onImmediateTextRegion:function(a,c,e,d,f){for(var h=a.info,k=this.symbols,l=[],u=0,p=c.length;u<p;u++)l=l.concat(k[c[u]]);c=b(l.length);e=new g(e,d,f);a=A(a.huffman,a.refinement,h.width,h.height,a.defaultPixelValue,a.numberOfSymbolInstances,a.stripSize,l,c,a.transposed,
a.dsOffset,a.referenceCorner,a.combinationOperator,void 0,a.refinementTemplate,a.refinementAt,e);this.drawBitmap(h,a)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)}};v.prototype={parseChunks:function(a){for(var b=new u,f=0,g=a.length;f<g;f++){for(var h=a[f],k={},l=h.data,p=h.end,m=[],t=h.start;t<p;){var h=l,q=t,t={};t.number=d(h,q);var r=h[q+4],B=r&63;z[B]||C("JBIG2 error: invalid segment type: "+B);t.type=B;t.typeName=z[B];t.deferredNonRetain=!!(r&128);
var r=!!(r&64),y=h[q+5],v=y>>5&7,w=[y&31],q=q+6;if(7===y)for(v=d(h,q-1)&536870911,q+=3,y=v+7>>3,w[0]=h[q++];0<--y;)w.push(h[q++]);else 5!==y&&6!==y||C("JBIG2 error: invalid referred-to flags");t.retainBits=w;for(var x=256>=t.number?1:65536>=t.number?2:4,E=[],y=w=void 0,w=0;w<v;w++)y=1===x?h[q]:2===x?c(h,q):d(h,q),E.push(y),q+=x;t.referredTo=E;r?(t.pageAssociation=d(h,q),q+=4):t.pageAssociation=h[q++];t.length=d(h,q);q+=4;if(4294967295===t.length)if(38===B){r=J(h,q);v=!!(h[q+17]&1);B=new Uint8Array(6);
v||(B[0]=255,B[1]=172);B[2]=r.height>>>24&255;B[3]=r.height>>16&255;B[4]=r.height>>8&255;B[5]=r.height&255;w=q;for(y=h.length;w<y;w++){for(r=0;6>r&&B[r]===h[w+r];)r++;if(6===r){t.length=w+6;break}}4294967295===t.length&&C("JBIG2 error: segment end was not found")}else C("JBIG2 error: invalid unknown segment length");t.headerEnd=q;h=t;t=h.headerEnd;q={header:h,data:l};k.randomAccess||(q.start=t,t+=h.length,q.end=t);m.push(q);if(51===h.type)break}if(k.randomAccess)for(k=0,l=m.length;k<l;k++)m[k].start=
t,t+=m[k].header.length,m[k].end=t;k=b;l=0;for(p=m.length;l<p;l++){r=m[l];h=k;t=r.header;q=r.data;B=r.start;r=r.end;y=w=v=x=void 0;switch(t.type){case 0:x={};v=c(q,B);x.huffman=!!(v&1);x.refinement=!!(v&2);x.huffmanDHSelector=v>>2&3;x.huffmanDWSelector=v>>4&3;x.bitmapSizeSelector=v>>6&1;x.aggregationInstancesSelector=v>>7&1;x.bitmapCodingContextUsed=!!(v&256);x.bitmapCodingContextRetained=!!(v&512);x.template=v>>10&3;x.refinementTemplate=v>>12&1;B+=2;if(!x.huffman){y=0===x.template?4:1;v=[];for(w=
0;w<y;w++)v.push({x:q[B]<<24>>24,y:q[B+1]<<24>>24}),B+=2;x.at=v}if(x.refinement&&!x.refinementTemplate){v=[];for(w=0;2>w;w++)v.push({x:q[B]<<24>>24,y:q[B+1]<<24>>24}),B+=2;x.refinementAt=v}x.numberOfExportedSymbols=d(q,B);B+=4;x.numberOfNewSymbols=d(q,B);B+=4;x=[x,t.number,t.referredTo,q,B,r];break;case 6:case 7:y={};y.info=J(q,B);B+=17;v=c(q,B);B+=2;y.huffman=!!(v&1);y.refinement=!!(v&2);y.stripSize=1<<(v>>2&3);y.referenceCorner=v>>4&3;y.transposed=!!(v&64);y.combinationOperator=v>>7&3;y.defaultPixelValue=
v>>9&1;y.dsOffset=v<<17>>27;y.refinementTemplate=v>>15&1;y.huffman&&(v=c(q,B),B+=2,y.huffmanFS=v&3,y.huffmanDS=v>>2&3,y.huffmanDT=v>>4&3,y.huffmanRefinementDW=v>>6&3,y.huffmanRefinementDH=v>>8&3,y.huffmanRefinementDX=v>>10&3,y.huffmanRefinementDY=v>>12&3,y.huffmanRefinementSizeSelector=!!(v&14));if(y.refinement&&!y.refinementTemplate){v=[];for(w=0;2>w;w++)v.push({x:q[B]<<24>>24,y:q[B+1]<<24>>24}),B+=2;y.refinementAt=v}y.numberOfSymbolInstances=d(q,B);B+=4;y.huffman&&C("JBIG2 error: huffman is not supported");
x=[y,t.referredTo,q,B,r];break;case 38:case 39:x={};x.info=J(q,B);B+=17;v=q[B++];x.mmr=!!(v&1);x.template=v>>1&3;x.prediction=!!(v&8);if(!x.mmr){y=0===x.template?4:1;v=[];for(w=0;w<y;w++)v.push({x:q[B]<<24>>24,y:q[B+1]<<24>>24}),B+=2;x.at=v}x=[x,q,B,r];break;case 48:r={width:d(q,B),height:d(q,B+4),resolutionX:d(q,B+8),resolutionY:d(q,B+12)};4294967295===r.height&&delete r.height;v=q[B+16];c(q,B+17);r.lossless=!!(v&1);r.refinement=!!(v&2);r.defaultPixelValue=v>>2&1;r.combinationOperator=v>>3&3;r.requiresBuffer=
!!(v&32);r.combinationOperatorOverride=!!(v&64);x=[r];break;case 49:break;case 50:break;case 51:break;case 62:break;default:C("JBIG2 error: segment type "+t.typeName+"("+t.type+") is not implemented")}t="on"+t.typeName;t in h&&h[t].apply(h,x)}}return b}};return v}(),C=function(){console.error.apply(console,arguments);throw Error("PDFJS error: "+arguments[0]);},r=function(){console.warn.apply(console,arguments)},A=function(){console.info.apply(console,arguments)};p.prototype.parse=function(a){var b=
0,c=a.length;151===a[b]&&74===a[b+1]&&66===a[b+2]&&50===a[b+3]&&13===a[b+4]&&10===a[b+5]&&26===a[b+6]&&10===a[b+7]||C("JBIG2 error: invalid header");b+=8;a[b++]&2||(d(a,b),b+=4);a=this.parseChunks([{data:a,start:b,end:c}]);var b=a.currentPageInfo.width,c=a.currentPageInfo.height,e=a.buffer;a=new Uint8Array(b*c);for(var f=0,h=0,g=0;g<c;g++)for(var k=0,l,u=0;u<b;u++)k||(k=128,l=e[h++]),a[f++]=l&k?0:255,k>>=1;this.width=b;this.height=c;this.data=a};a.JpegImage=g;a.JpxImage=m;a.Jbig2Image=p})(c||(c={}));
k.exports={JpegImage:d,JpegDecoder:c.JpegImage,JpxDecoder:c.JpxImage,Jbig2Decoder:c.Jbig2Image}},function(k,d,g){var m=g(50),c=g(28),a=g(15);d.decodeRawChunk=function(b,e){var d=b.source.spec,f=d.dataType,h=a.prod3(b.chunkDataSize),g=c.DATA_TYPE_BYTES[f],d=h*g*d.numChannels;if(d!==e.byteLength)throw Error("Raw-format chunk is "+e.byteLength+" bytes, but "+h+" * "+g+" = "+d+" bytes are expected.");h=void 0;switch(f){case c.DataType.UINT8:h=new Uint8Array(e);break;case c.DataType.UINT16:h=new Uint16Array(e);
break;case c.DataType.UINT32:case c.DataType.UINT64:h=new Uint32Array(e);break;case c.DataType.FLOAT32:h=new Float32Array(e);break;default:throw Error("Unexpected data type: "+f+".");}m.postProcessRawData(b,h)}},function(k,d,g){d=g(59).assign;var m=g(60),c=g(68);g=g(72);var a={};d(a,m,c,g);k.exports=a},function(k,d){var g="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;d.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=
b.shift();if(c){if("object"!==typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a};d.shrinkBuf=function(a,b){if(a.length===b)return a;if(a.subarray)return a.subarray(0,b);a.length=b;return a};var m={arraySet:function(a,b,c,d,f){if(b.subarray&&a.subarray)a.set(b.subarray(c,c+d),f);else for(var h=0;h<d;h++)a[f+h]=b[c+h]},flattenChunks:function(a){var b,c,d,f,h;b=d=0;for(c=a.length;b<c;b++)d+=a[b].length;h=new Uint8Array(d);b=d=0;for(c=a.length;b<
c;b++)f=a[b],h.set(f,d),d+=f.length;return h}},c={arraySet:function(a,b,c,d,f){for(var h=0;h<d;h++)a[f+h]=b[c+h]},flattenChunks:function(a){return[].concat.apply([],a)}};d.setTyped=function(a){a?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,m)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,c))};d.setTyped(g)},function(k,d,g){function m(c){if(!(this instanceof m))return new m(c);c=this.options=b.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,
to:""},c||{});c.raw&&0<c.windowBits?c.windowBits=-c.windowBits:c.gzip&&0<c.windowBits&&16>c.windowBits&&(c.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new f;this.strm.avail_out=0;var d=a.deflateInit2(this.strm,c.level,c.method,c.windowBits,c.memLevel,c.strategy);if(0!==d)throw Error(n[d]);c.header&&a.deflateSetHeader(this.strm,c.header);if(c.dictionary){c="string"===typeof c.dictionary?e.string2buf(c.dictionary):"[object ArrayBuffer]"===h.call(c.dictionary)?new Uint8Array(c.dictionary):
c.dictionary;d=a.deflateSetDictionary(this.strm,c);if(0!==d)throw Error(n[d]);this._dict_set=!0}}function c(a,b){var c=new m(b);c.push(a,!0);if(c.err)throw c.msg;return c.result}var a=g(61),b=g(59),e=g(66),n=g(65),f=g(67),h=Object.prototype.toString;m.prototype.push=function(c,d){var f=this.strm,g=this.options.chunkSize,k,m;if(this.ended)return!1;m=d===~~d?d:!0===d?4:0;"string"===typeof c?f.input=e.string2buf(c):"[object ArrayBuffer]"===h.call(c)?f.input=new Uint8Array(c):f.input=c;f.next_in=0;f.avail_in=
f.input.length;do{0===f.avail_out&&(f.output=new b.Buf8(g),f.next_out=0,f.avail_out=g);k=a.deflate(f,m);if(1!==k&&0!==k)return this.onEnd(k),this.ended=!0,!1;if(0===f.avail_out||0===f.avail_in&&(4===m||2===m))if("string"===this.options.to)this.onData(e.buf2binstring(b.shrinkBuf(f.output,f.next_out)));else this.onData(b.shrinkBuf(f.output,f.next_out))}while((0<f.avail_in||0===f.avail_out)&&1!==k);if(4===m)return k=a.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,0===k;2===m&&(this.onEnd(0),f.avail_out=
0);return!0};m.prototype.onData=function(a){this.chunks.push(a)};m.prototype.onEnd=function(a){0===a&&(this.result="string"===this.options.to?this.chunks.join(""):b.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};d.Deflate=m;d.deflate=c;d.deflateRaw=function(a,b){b=b||{};b.raw=!0;return c(a,b)};d.gzip=function(a,b){b=b||{};b.gzip=!0;return c(a,b)}},function(k,d,g){function m(a,b){a.msg=G[b];return b}function c(a){for(var b=a.length;0<=--b;)a[b]=0}function a(a){var b=
a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out);0!==c&&(t.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))}function b(b,c){x._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,c);b.block_start=b.strstart;a(b.strm)}function e(a,b){a.pending_buf[a.pending++]=b}function n(a,b){a.pending_buf[a.pending++]=b>>>8&255;a.pending_buf[a.pending++]=b&255}function f(a,
b){var c=a.max_chain_length,e=a.strstart,d,f=a.prev_length,g=a.nice_match,h=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,k=a.window,l=a.w_mask,t=a.prev,m=a.strstart+258,p=k[e+f-1],n=k[e+f];a.prev_length>=a.good_match&&(c>>=2);g>a.lookahead&&(g=a.lookahead);do if(d=b,k[d+f]===n&&k[d+f-1]===p&&k[d]===k[e]&&k[++d]===k[e+1]){e+=2;for(d++;k[++e]===k[++d]&&k[++e]===k[++d]&&k[++e]===k[++d]&&k[++e]===k[++d]&&k[++e]===k[++d]&&k[++e]===k[++d]&&k[++e]===k[++d]&&k[++e]===k[++d]&&e<m;);d=258-(m-e);e=m-
258;if(d>f){a.match_start=b;f=d;if(d>=g)break;p=k[e+f-1];n=k[e+f]}}while((b=t[b&l])>h&&0!==--c);return f<=a.lookahead?f:a.lookahead}function h(a){var b=a.w_size,c,e,d,f;do{f=a.window_size-a.lookahead-a.strstart;if(a.strstart>=b+(b-262)){t.arraySet(a.window,a.window,b,b,0);a.match_start-=b;a.strstart-=b;a.block_start-=b;c=e=a.hash_size;do d=a.head[--c],a.head[c]=d>=b?d-b:0;while(--e);c=e=b;do d=a.prev[--c],a.prev[c]=d>=b?d-b:0;while(--e);f+=b}if(0===a.strm.avail_in)break;c=a.strm;e=a.window;d=a.strstart+
a.lookahead;var g=c.avail_in;g>f&&(g=f);0===g?e=0:(c.avail_in-=g,t.arraySet(e,c.input,c.next_in,g,d),1===c.state.wrap?c.adler=F(c.adler,e,g,d):2===c.state.wrap&&(c.adler=I(c.adler,e,g,d)),c.next_in+=g,c.total_in+=g,e=g);a.lookahead+=e;if(3<=a.lookahead+a.insert)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&!(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+3-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,
3>a.lookahead+a.insert););}while(262>a.lookahead&&0!==a.strm.avail_in)}function l(a,c){for(var e;;){if(262>a.lookahead){h(a);if(262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}e=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);0!==e&&a.strstart-e<=a.w_size-262&&(a.match_length=f(a,e));if(3<=a.match_length)if(e=x._tr_tally(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=
a.match_length,a.match_length<=a.max_lazy_match&&3<=a.lookahead){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else e=x._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(e&&
(b(a,!1),0===a.strm.avail_out))return 1}a.insert=2>a.strstart?a.strstart:2;return 4===c?(b(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?1:2}function w(a,c){for(var e,d;;){if(262>a.lookahead){h(a);if(262>a.lookahead&&0===c)return 1;if(0===a.lookahead)break}e=0;3<=a.lookahead&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,e=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);a.prev_length=a.match_length;a.prev_match=a.match_start;
a.match_length=2;0!==e&&a.prev_length<a.max_lazy_match&&a.strstart-e<=a.w_size-262&&(a.match_length=f(a,e),5>=a.match_length&&(1===a.strategy||3===a.match_length&&4096<a.strstart-a.match_start)&&(a.match_length=2));if(3<=a.prev_length&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-3;e=x._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-3);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+3-1])&a.hash_mask,a.prev[a.strstart&
a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);a.match_available=0;a.match_length=2;a.strstart++;if(e&&(b(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((e=x._tr_tally(a,0,a.window[a.strstart-1]))&&b(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}a.match_available&&(x._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0);a.insert=2>a.strstart?a.strstart:2;return 4===c?(b(a,
!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?1:2}function p(a,c){for(var e,d,f,g=a.window;;){if(258>=a.lookahead){h(a);if(258>=a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.match_length=0;if(3<=a.lookahead&&0<a.strstart&&(d=a.strstart-1,e=g[d],e===g[++d]&&e===g[++d]&&e===g[++d])){for(f=a.strstart+258;e===g[++d]&&e===g[++d]&&e===g[++d]&&e===g[++d]&&e===g[++d]&&e===g[++d]&&e===g[++d]&&e===g[++d]&&d<f;);a.match_length=258-(f-d);a.match_length>a.lookahead&&(a.match_length=
a.lookahead)}3<=a.match_length?(e=x._tr_tally(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(e=x._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++);if(e&&(b(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===c?(b(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?1:2}function C(a,c){for(var e;;){if(0===a.lookahead&&(h(a),0===a.lookahead)){if(0===c)return 1;break}a.match_length=0;e=x._tr_tally(a,0,a.window[a.strstart]);
a.lookahead--;a.strstart++;if(e&&(b(a,!1),0===a.strm.avail_out))return 1}a.insert=0;return 4===c?(b(a,!0),0===a.strm.avail_out?3:4):a.last_lit&&(b(a,!1),0===a.strm.avail_out)?1:2}function r(a,b,c,e,d){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=e;this.func=d}function A(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=8;this.last_flush=-1;this.w_mask=this.w_bits=
this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new t.Buf16(1146);this.dyn_dtree=new t.Buf16(122);this.bl_tree=new t.Buf16(78);c(this.dyn_ltree);c(this.dyn_dtree);
c(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new t.Buf16(16);this.heap=new t.Buf16(573);c(this.heap);this.heap_max=this.heap_len=0;this.depth=new t.Buf16(573);c(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function q(a){var b;if(!a||!a.state)return m(a,-2);a.total_in=a.total_out=0;a.data_type=2;b=a.state;b.pending=0;b.pending_out=0;0>b.wrap&&(b.wrap=-b.wrap);b.status=b.wrap?
42:113;a.adler=2===b.wrap?0:1;b.last_flush=0;x._tr_init(b);return 0}function y(a){var b=q(a);0===b&&(a=a.state,a.window_size=2*a.w_size,c(a.head),a.max_lazy_match=J[a.level].max_lazy,a.good_match=J[a.level].good_length,a.nice_match=J[a.level].nice_length,a.max_chain_length=J[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0);return b}function E(a,b,c,e,d,f){if(!a)return-2;var g=1;-1===b&&(b=6);0>e?(g=0,e=-e):15<e&&
(g=2,e-=16);if(1>d||9<d||8!==c||8>e||15<e||0>b||9<b||0>f||4<f)return m(a,-2);8===e&&(e=9);var h=new A;a.state=h;h.strm=a;h.wrap=g;h.gzhead=null;h.w_bits=e;h.w_size=1<<h.w_bits;h.w_mask=h.w_size-1;h.hash_bits=d+7;h.hash_size=1<<h.hash_bits;h.hash_mask=h.hash_size-1;h.hash_shift=~~((h.hash_bits+3-1)/3);h.window=new t.Buf8(2*h.w_size);h.head=new t.Buf16(h.hash_size);h.prev=new t.Buf16(h.w_size);h.lit_bufsize=1<<d+6;h.pending_buf_size=4*h.lit_bufsize;h.pending_buf=new t.Buf8(h.pending_buf_size);h.d_buf=
h.lit_bufsize>>1;h.l_buf=3*h.lit_bufsize;h.level=b;h.strategy=f;h.method=c;return y(a)}var t=g(59),x=g(62),F=g(63),I=g(64),G=g(65),J;J=[new r(0,0,0,0,function(a,c){var e=65535;for(e>a.pending_buf_size-5&&(e=a.pending_buf_size-5);;){if(1>=a.lookahead){h(a);if(0===a.lookahead&&0===c)return 1;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var d=a.block_start+e;if(0===a.strstart||a.strstart>=d)if(a.lookahead=a.strstart-d,a.strstart=d,b(a,!1),0===a.strm.avail_out)return 1;if(a.strstart-
a.block_start>=a.w_size-262&&(b(a,!1),0===a.strm.avail_out))return 1}a.insert=0;if(4===c)return b(a,!0),0===a.strm.avail_out?3:4;a.strstart>a.block_start&&b(a,!1);return 1}),new r(4,4,8,4,l),new r(4,5,16,8,l),new r(4,6,32,32,l),new r(4,4,16,16,w),new r(8,16,32,32,w),new r(8,16,128,128,w),new r(8,32,128,256,w),new r(32,128,258,1024,w),new r(32,258,258,4096,w)];d.deflateInit=function(a,b){return E(a,b,8,15,8,0)};d.deflateInit2=E;d.deflateReset=y;d.deflateResetKeep=q;d.deflateSetHeader=function(a,b){if(!a||
!a.state||2!==a.state.wrap)return-2;a.state.gzhead=b;return 0};d.deflate=function(b,d){var f,h,g,k;if(!b||!b.state||5<d||0>d)return b?m(b,-2):-2;h=b.state;if(!b.output||!b.input&&0!==b.avail_in||666===h.status&&4!==d)return m(b,0===b.avail_out?-5:-2);h.strm=b;f=h.last_flush;h.last_flush=d;42===h.status&&(2===h.wrap?(b.adler=0,e(h,31),e(h,139),e(h,8),h.gzhead?(e(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),e(h,h.gzhead.time&255),e(h,h.gzhead.time>>
8&255),e(h,h.gzhead.time>>16&255),e(h,h.gzhead.time>>24&255),e(h,9===h.level?2:2<=h.strategy||2>h.level?4:0),e(h,h.gzhead.os&255),h.gzhead.extra&&h.gzhead.extra.length&&(e(h,h.gzhead.extra.length&255),e(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(b.adler=I(b.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=69):(e(h,0),e(h,0),e(h,0),e(h,0),e(h,0),e(h,9===h.level?2:2<=h.strategy||2>h.level?4:0),e(h,3),h.status=113)):(g=8+(h.w_bits-8<<4)<<8,k=-1,k=2<=h.strategy||2>h.level?0:6>h.level?1:6===
h.level?2:3,g|=k<<6,0!==h.strstart&&(g|=32),h.status=113,n(h,g+(31-g%31)),0!==h.strstart&&(n(h,b.adler>>>16),n(h,b.adler&65535)),b.adler=1));if(69===h.status)if(h.gzhead.extra){for(g=h.pending;h.gzindex<(h.gzhead.extra.length&65535)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>g&&(b.adler=I(b.adler,h.pending_buf,h.pending-g,g)),a(b),g=h.pending,h.pending!==h.pending_buf_size));)e(h,h.gzhead.extra[h.gzindex]&255),h.gzindex++;h.gzhead.hcrc&&h.pending>g&&(b.adler=I(b.adler,h.pending_buf,
h.pending-g,g));h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=73)}else h.status=73;if(73===h.status)if(h.gzhead.name){g=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>g&&(b.adler=I(b.adler,h.pending_buf,h.pending-g,g)),a(b),g=h.pending,h.pending===h.pending_buf_size)){k=1;break}k=h.gzindex<h.gzhead.name.length?h.gzhead.name.charCodeAt(h.gzindex++)&255:0;e(h,k)}while(0!==k);h.gzhead.hcrc&&h.pending>g&&(b.adler=I(b.adler,h.pending_buf,h.pending-g,g));0===k&&(h.gzindex=
0,h.status=91)}else h.status=91;if(91===h.status)if(h.gzhead.comment){g=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>g&&(b.adler=I(b.adler,h.pending_buf,h.pending-g,g)),a(b),g=h.pending,h.pending===h.pending_buf_size)){k=1;break}k=h.gzindex<h.gzhead.comment.length?h.gzhead.comment.charCodeAt(h.gzindex++)&255:0;e(h,k)}while(0!==k);h.gzhead.hcrc&&h.pending>g&&(b.adler=I(b.adler,h.pending_buf,h.pending-g,g));0===k&&(h.status=103)}else h.status=103;103===h.status&&(h.gzhead.hcrc?
(h.pending+2>h.pending_buf_size&&a(b),h.pending+2<=h.pending_buf_size&&(e(h,b.adler&255),e(h,b.adler>>8&255),b.adler=0,h.status=113)):h.status=113);if(0!==h.pending){if(a(b),0===b.avail_out)return h.last_flush=-1,0}else if(0===b.avail_in&&(d<<1)-(4<d?9:0)<=(f<<1)-(4<f?9:0)&&4!==d)return m(b,-5);if(666===h.status&&0!==b.avail_in)return m(b,-5);if(0!==b.avail_in||0!==h.lookahead||0!==d&&666!==h.status){f=2===h.strategy?C(h,d):3===h.strategy?p(h,d):J[h.level].func(h,d);if(3===f||4===f)h.status=666;if(1===
f||3===f)return 0===b.avail_out&&(h.last_flush=-1),0;if(2===f&&(1===d?x._tr_align(h):5!==d&&(x._tr_stored_block(h,0,0,!1),3===d&&(c(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),a(b),0===b.avail_out))return h.last_flush=-1,0}if(4!==d)return 0;if(0>=h.wrap)return 1;2===h.wrap?(e(h,b.adler&255),e(h,b.adler>>8&255),e(h,b.adler>>16&255),e(h,b.adler>>24&255),e(h,b.total_in&255),e(h,b.total_in>>8&255),e(h,b.total_in>>16&255),e(h,b.total_in>>24&255)):(n(h,b.adler>>>16),n(h,b.adler&
65535));a(b);0<h.wrap&&(h.wrap=-h.wrap);return 0!==h.pending?0:1};d.deflateEnd=function(a){var b;if(!a||!a.state)return-2;b=a.state.status;if(42!==b&&69!==b&&73!==b&&91!==b&&103!==b&&113!==b&&666!==b)return m(a,-2);a.state=null;return 113===b?m(a,-3):0};d.deflateSetDictionary=function(a,b){var e=b.length,d,f,g,k,l,m;if(!a||!a.state)return-2;d=a.state;g=d.wrap;if(2===g||1===g&&42!==d.status||d.lookahead)return-2;1===g&&(a.adler=F(a.adler,b,e,0));d.wrap=0;e>=d.w_size&&(0===g&&(c(d.head),d.strstart=
0,d.block_start=0,d.insert=0),k=new t.Buf8(d.w_size),t.arraySet(k,b,e-d.w_size,d.w_size,0),b=k,e=d.w_size);k=a.avail_in;l=a.next_in;m=a.input;a.avail_in=e;a.next_in=0;a.input=b;for(h(d);3<=d.lookahead;){e=d.strstart;f=d.lookahead-2;do d.ins_h=(d.ins_h<<d.hash_shift^d.window[e+3-1])&d.hash_mask,d.prev[e&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=e,e++;while(--f);d.strstart=e;d.lookahead=2;h(d)}d.strstart+=d.lookahead;d.block_start=d.strstart;d.insert=d.lookahead;d.lookahead=0;d.match_length=d.prev_length=
2;d.match_available=0;a.next_in=l;a.input=m;a.avail_in=k;d.wrap=g;return 0};d.deflateInfo="pako deflate (from Nodeca project)"},function(k,d,g){function m(a){for(var b=a.length;0<=--b;)a[b]=0}function c(a,b,c,e,d){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=e;this.max_length=d;this.has_stree=a&&a.length}function a(a,b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b}function b(a,b){a.pending_buf[a.pending++]=b&255;a.pending_buf[a.pending++]=b>>>8&255}function e(a,c,e){a.bi_valid>
16-e?(a.bi_buf|=c<<a.bi_valid&65535,b(a,a.bi_buf),a.bi_buf=c>>16-a.bi_valid,a.bi_valid+=e-16):(a.bi_buf|=c<<a.bi_valid&65535,a.bi_valid+=e)}function n(a,b,c){e(a,c[2*b],c[2*b+1])}function f(a,b){var c=0;do c|=a&1,a>>>=1,c<<=1;while(0<--b);return c>>>1}function h(a,b,c){var e=Array(16),d=0,h;for(h=1;15>=h;h++)e[h]=d=d+c[h-1]<<1;for(c=0;c<=b;c++)d=a[2*c+1],0!==d&&(a[2*c]=f(e[d]++,d))}function l(a){var b;for(b=0;286>b;b++)a.dyn_ltree[2*b]=0;for(b=0;30>b;b++)a.dyn_dtree[2*b]=0;for(b=0;19>b;b++)a.bl_tree[2*
b]=0;a.dyn_ltree[512]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function w(a){8<a.bi_valid?b(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function p(a,b,c,e){var d=2*b,h=2*c;return a[d]<a[h]||a[d]===a[h]&&e[b]<=e[c]}function C(a,b,c){for(var e=a.heap[c],d=c<<1;d<=a.heap_len;){d<a.heap_len&&p(b,a.heap[d+1],a.heap[d],a.depth)&&d++;if(p(b,e,a.heap[d],a.depth))break;a.heap[c]=a.heap[d];c=d;d<<=1}a.heap[c]=e}function r(a,b,c){var d,h,f=0,g,k;if(0!==a.last_lit){do d=
a.pending_buf[a.d_buf+2*f]<<8|a.pending_buf[a.d_buf+2*f+1],h=a.pending_buf[a.l_buf+f],f++,0===d?n(a,h,b):(g=B[h],n(a,g+256+1,b),k=F[g],0!==k&&(h-=L[g],e(a,h,k)),d--,g=256>d?z[d]:z[256+(d>>>7)],n(a,g,c),k=I[g],0!==k&&(d-=D[g],e(a,d,k)));while(f<a.last_lit)}n(a,256,b)}function A(a,b){var c=b.dyn_tree,e=b.stat_desc.static_tree,d=b.stat_desc.has_stree,f=b.stat_desc.elems,g,k=-1,l;a.heap_len=0;a.heap_max=573;for(g=0;g<f;g++)0!==c[2*g]?(a.heap[++a.heap_len]=k=g,a.depth[g]=0):c[2*g+1]=0;for(;2>a.heap_len;)l=
a.heap[++a.heap_len]=2>k?++k:0,c[2*l]=1,a.depth[l]=0,a.opt_len--,d&&(a.static_len-=e[2*l+1]);b.max_code=k;for(g=a.heap_len>>1;1<=g;g--)C(a,c,g);l=f;do g=a.heap[1],a.heap[1]=a.heap[a.heap_len--],C(a,c,1),e=a.heap[1],a.heap[--a.heap_max]=g,a.heap[--a.heap_max]=e,c[2*l]=c[2*g]+c[2*e],a.depth[l]=(a.depth[g]>=a.depth[e]?a.depth[g]:a.depth[e])+1,c[2*g+1]=c[2*e+1]=l,a.heap[1]=l++,C(a,c,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];g=b.dyn_tree;l=b.max_code;for(var t=b.stat_desc.static_tree,m=b.stat_desc.has_stree,
p=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,q=b.stat_desc.max_length,r,y,x=0,f=0;15>=f;f++)a.bl_count[f]=0;g[2*a.heap[a.heap_max]+1]=0;for(e=a.heap_max+1;573>e;e++)d=a.heap[e],f=g[2*g[2*d+1]+1]+1,f>q&&(f=q,x++),g[2*d+1]=f,d>l||(a.bl_count[f]++,r=0,d>=n&&(r=p[d-n]),y=g[2*d],a.opt_len+=y*(f+r),m&&(a.static_len+=y*(t[2*d+1]+r)));if(0!==x){do{for(f=q-1;0===a.bl_count[f];)f--;a.bl_count[f]--;a.bl_count[f+1]+=2;a.bl_count[q]--;x-=2}while(0<x);for(f=q;0!==f;f--)for(d=a.bl_count[f];0!==d;)t=a.heap[--e],
t>l||(g[2*t+1]!==f&&(a.opt_len+=(f-g[2*t+1])*g[2*t],g[2*t+1]=f),d--)}h(c,k,a.bl_count)}function q(a,b,c){var e,d=-1,h,f=b[1],g=0,k=7,l=4;0===f&&(k=138,l=3);b[2*(c+1)+1]=65535;for(e=0;e<=c;e++)h=f,f=b[2*(e+1)+1],++g<k&&h===f||(g<l?a.bl_tree[2*h]+=g:0!==h?(h!==d&&a.bl_tree[2*h]++,a.bl_tree[32]++):10>=g?a.bl_tree[34]++:a.bl_tree[36]++,g=0,d=h,0===f?(k=138,l=3):h===f?(k=6,l=3):(k=7,l=4))}function y(a,b,c){var d,h=-1,f,g=b[1],k=0,l=7,t=4;0===g&&(l=138,t=3);for(d=0;d<=c;d++)if(f=g,g=b[2*(d+1)+1],!(++k<
l&&f===g)){if(k<t){do n(a,f,a.bl_tree);while(0!==--k)}else 0!==f?(f!==h&&(n(a,f,a.bl_tree),k--),n(a,16,a.bl_tree),e(a,k-3,2)):10>=k?(n(a,17,a.bl_tree),e(a,k-3,3)):(n(a,18,a.bl_tree),e(a,k-11,7));k=0;h=f;0===g?(l=138,t=3):f===g?(l=6,t=3):(l=7,t=4)}}function E(a){var b=4093624447,c;for(c=0;31>=c;c++,b>>>=1)if(b&1&&0!==a.dyn_ltree[2*c])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(c=32;256>c;c++)if(0!==a.dyn_ltree[2*c])return 1;return 0}function t(a,c,d,h){e(a,
0+(h?1:0),3);w(a);b(a,d);b(a,~d);x.arraySet(a.pending_buf,a.window,c,d,a.pending);a.pending+=d}var x=g(59),F=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],u=Array(576);m(u);var v=Array(60);m(v);var z=Array(512);m(z);var B=Array(256);m(B);var L=Array(29);m(L);var D=Array(30);m(D);var H,P,O,T=!1;d._tr_init=function(b){if(!T){var e,
d,g,k=Array(16);for(g=d=0;28>g;g++)for(L[g]=d,e=0;e<1<<F[g];e++)B[d++]=g;B[d-1]=g;for(g=d=0;16>g;g++)for(D[g]=d,e=0;e<1<<I[g];e++)z[d++]=g;for(d>>=7;30>g;g++)for(D[g]=d<<7,e=0;e<1<<I[g]-7;e++)z[256+d++]=g;for(e=0;15>=e;e++)k[e]=0;for(e=0;143>=e;)u[2*e+1]=8,e++,k[8]++;for(;255>=e;)u[2*e+1]=9,e++,k[9]++;for(;279>=e;)u[2*e+1]=7,e++,k[7]++;for(;287>=e;)u[2*e+1]=8,e++,k[8]++;h(u,287,k);for(e=0;30>e;e++)v[2*e+1]=5,v[2*e]=f(e,5);H=new c(u,F,257,286,15);P=new c(v,I,0,30,15);O=new c([],G,0,19,7);T=!0}b.l_desc=
new a(b.dyn_ltree,H);b.d_desc=new a(b.dyn_dtree,P);b.bl_desc=new a(b.bl_tree,O);b.bi_buf=0;b.bi_valid=0;l(b)};d._tr_stored_block=t;d._tr_flush_block=function(a,b,c,d){var h,f,g=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=E(a));A(a,a.l_desc);A(a,a.d_desc);q(a,a.dyn_ltree,a.l_desc.max_code);q(a,a.dyn_dtree,a.d_desc.max_code);A(a,a.bl_desc);for(g=18;3<=g&&0===a.bl_tree[2*J[g]+1];g--);a.opt_len+=3*(g+1)+14;h=a.opt_len+3+7>>>3;f=a.static_len+3+7>>>3;f<=h&&(h=f)}else h=f=c+5;if(c+4<=h&&-1!==
b)t(a,b,c,d);else if(4===a.strategy||f===h)e(a,2+(d?1:0),3),r(a,u,v);else{e(a,4+(d?1:0),3);b=a.l_desc.max_code+1;c=a.d_desc.max_code+1;g+=1;e(a,b-257,5);e(a,c-1,5);e(a,g-4,4);for(h=0;h<g;h++)e(a,a.bl_tree[2*J[h]+1],3);y(a,a.dyn_ltree,b-1);y(a,a.dyn_dtree,c-1);r(a,a.dyn_ltree,a.dyn_dtree)}l(a);d&&w(a)};d._tr_tally=function(a,b,c){a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255;a.pending_buf[a.d_buf+2*a.last_lit+1]=b&255;a.pending_buf[a.l_buf+a.last_lit]=c&255;a.last_lit++;0===b?a.dyn_ltree[2*c]++:(a.matches++,
b--,a.dyn_ltree[2*(B[c]+256+1)]++,a.dyn_dtree[2*(256>b?z[b]:z[256+(b>>>7)])]++);return a.last_lit===a.lit_bufsize-1};d._tr_align=function(a){e(a,2,3);n(a,256,u);16===a.bi_valid?(b(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)}},function(k,d){k.exports=function(d,k,c,a){var b=d&65535|0;d=d>>>16&65535|0;for(var e=0;0!==c;){e=2E3<c?2E3:c;c-=e;do b=b+k[a++]|0,d=d+b|0;while(--e);b%=65521;d%=65521}return b|d<<16|0}},function(k,d){var g=
function(){for(var d,c=[],a=0;256>a;a++){d=a;for(var b=0;8>b;b++)d=d&1?3988292384^d>>>1:d>>>1;c[a]=d}return c}();k.exports=function(d,c,a,b){a=b+a;for(d^=-1;b<a;b++)d=d>>>8^g[(d^c[b])&255];return d^-1}},function(k,d){k.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(k,d,g){function m(e,d){if(65537>d&&(e.subarray&&b||!e.subarray&&a))return String.fromCharCode.apply(null,
c.shrinkBuf(e,d));for(var h="",g=0;g<d;g++)h+=String.fromCharCode(e[g]);return h}var c=g(59),a=!0,b=!0;try{String.fromCharCode.apply(null,[0])}catch(n){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(n){b=!1}var e=new c.Buf8(256);for(k=0;256>k;k++)e[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;e[254]=e[254]=1;d.string2buf=function(a){var b,e,d,g,k,m=a.length,r=0;for(g=0;g<m;g++)e=a.charCodeAt(g),55296===(e&64512)&&g+1<m&&(d=a.charCodeAt(g+1),56320===(d&64512)&&(e=65536+(e-55296<<
10)+(d-56320),g++)),r+=128>e?1:2048>e?2:65536>e?3:4;b=new c.Buf8(r);for(g=k=0;k<r;g++)e=a.charCodeAt(g),55296===(e&64512)&&g+1<m&&(d=a.charCodeAt(g+1),56320===(d&64512)&&(e=65536+(e-55296<<10)+(d-56320),g++)),128>e?b[k++]=e:(2048>e?b[k++]=192|e>>>6:(65536>e?b[k++]=224|e>>>12:(b[k++]=240|e>>>18,b[k++]=128|e>>>12&63),b[k++]=128|e>>>6&63),b[k++]=128|e&63);return b};d.buf2binstring=function(a){return m(a,a.length)};d.binstring2buf=function(a){for(var b=new c.Buf8(a.length),e=0,d=b.length;e<d;e++)b[e]=
a.charCodeAt(e);return b};d.buf2string=function(a,b){var c,d,g,k,C=b||a.length,r=Array(2*C);for(c=d=0;c<C;)if(g=a[c++],128>g)r[d++]=g;else if(k=e[g],4<k)r[d++]=65533,c+=k-1;else{for(g&=2===k?31:3===k?15:7;1<k&&c<C;)g=g<<6|a[c++]&63,k--;1<k?r[d++]=65533:65536>g?r[d++]=g:(g-=65536,r[d++]=55296|g>>10&1023,r[d++]=56320|g&1023)}return m(r,d)};d.utf8border=function(a,b){var c;b=b||a.length;b>a.length&&(b=a.length);for(c=b-1;0<=c&&128===(a[c]&192);)c--;return 0>c||0===c?b:c+e[a[c]]>b?c:b}},function(k,d){k.exports=
function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},function(k,d,g){function m(c){if(!(this instanceof m))return new m(c);var e=this.options=b.assign({chunkSize:16384,windowBits:0,to:""},c||{});e.raw&&0<=e.windowBits&&16>e.windowBits&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15));!(0<=e.windowBits&&16>e.windowBits)||c&&c.windowBits||(e.windowBits+=
32);15<e.windowBits&&48>e.windowBits&&0===(e.windowBits&15)&&(e.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new h;this.strm.avail_out=0;c=a.inflateInit2(this.strm,e.windowBits);if(c!==n.Z_OK)throw Error(f[c]);this.header=new l;a.inflateGetHeader(this.strm,this.header)}function c(a,b){var c=new m(b);c.push(a,!0);if(c.err)throw c.msg;return c.result}var a=g(69),b=g(59),e=g(66),n=g(72),f=g(65),h=g(67),l=g(73),w=Object.prototype.toString;m.prototype.push=function(c,d){var f=
this.strm,h=this.options.chunkSize,g=this.options.dictionary,k,l,t,m,F,I=!1;if(this.ended)return!1;l=d===~~d?d:!0===d?n.Z_FINISH:n.Z_NO_FLUSH;"string"===typeof c?f.input=e.binstring2buf(c):"[object ArrayBuffer]"===w.call(c)?f.input=new Uint8Array(c):f.input=c;f.next_in=0;f.avail_in=f.input.length;do{0===f.avail_out&&(f.output=new b.Buf8(h),f.next_out=0,f.avail_out=h);k=a.inflate(f,n.Z_NO_FLUSH);k===n.Z_NEED_DICT&&g&&(k="string"===typeof g?e.string2buf(g):"[object ArrayBuffer]"===w.call(g)?new Uint8Array(g):
g,k=a.inflateSetDictionary(this.strm,k));k===n.Z_BUF_ERROR&&!0===I&&(k=n.Z_OK,I=!1);if(k!==n.Z_STREAM_END&&k!==n.Z_OK)return this.onEnd(k),this.ended=!0,!1;if(f.next_out&&(0===f.avail_out||k===n.Z_STREAM_END||0===f.avail_in&&(l===n.Z_FINISH||l===n.Z_SYNC_FLUSH)))if("string"===this.options.to)t=e.utf8border(f.output,f.next_out),m=f.next_out-t,F=e.buf2string(f.output,t),f.next_out=m,f.avail_out=h-m,m&&b.arraySet(f.output,f.output,t,m,0),this.onData(F);else this.onData(b.shrinkBuf(f.output,f.next_out));
0===f.avail_in&&0===f.avail_out&&(I=!0)}while((0<f.avail_in||0===f.avail_out)&&k!==n.Z_STREAM_END);k===n.Z_STREAM_END&&(l=n.Z_FINISH);if(l===n.Z_FINISH)return k=a.inflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===n.Z_OK;l===n.Z_SYNC_FLUSH&&(this.onEnd(n.Z_OK),f.avail_out=0);return!0};m.prototype.onData=function(a){this.chunks.push(a)};m.prototype.onEnd=function(a){a===n.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):b.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=
this.strm.msg};d.Inflate=m;d.inflate=c;d.inflateRaw=function(a,b){b=b||{};b.raw=!0;return c(a,b)};d.ungzip=c},function(k,d,g){function m(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function c(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=
this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new h.Buf16(320);this.work=new h.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function a(a){var b;if(!a||!a.state)return-2;b=a.state;a.total_in=a.total_out=b.total=0;a.msg="";b.wrap&&(a.adler=b.wrap&1);b.mode=1;b.last=0;b.havedict=0;b.dmax=32768;b.head=null;b.hold=0;b.bits=0;b.lencode=b.lendyn=new h.Buf32(852);b.distcode=b.distdyn=new h.Buf32(592);b.sane=1;b.back=-1;return 0}function b(b){var c;if(!b||
!b.state)return-2;c=b.state;c.wsize=0;c.whave=0;c.wnext=0;return a(b)}function e(a,c){var e,d;if(!a||!a.state)return-2;d=a.state;0>c?(e=0,c=-c):(e=(c>>4)+1,48>c&&(c&=15));if(c&&(8>c||15<c))return-2;null!==d.window&&d.wbits!==c&&(d.window=null);d.wrap=e;d.wbits=c;return b(a)}function n(a,b){var d;if(!a)return-2;d=new c;a.state=d;d.window=null;d=e(a,b);0!==d&&(a.state=null);return d}function f(a,b,c,e){var d=a.state;null===d.window&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new h.Buf8(d.wsize));
e>=d.wsize?(h.arraySet(d.window,b,c-d.wsize,d.wsize,0),d.wnext=0,d.whave=d.wsize):(a=d.wsize-d.wnext,a>e&&(a=e),h.arraySet(d.window,b,c-e,a,d.wnext),(e-=a)?(h.arraySet(d.window,b,c-e,e,0),d.wnext=e,d.whave=d.wsize):(d.wnext+=a,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=a)));return 0}var h=g(59),l=g(63),w=g(64),p=g(70),C=g(71),r=!0,A,q;d.inflateReset=b;d.inflateReset2=e;d.inflateResetKeep=a;d.inflateInit=function(a){return n(a,15)};d.inflateInit2=n;d.inflate=function(a,b){var c,d,e,
g,k,n,u,v,z,B,L,D,H,P,O=0,T,K,R,S=new h.Buf8(4),N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return-2;c=a.state;12===c.mode&&(c.mode=13);k=a.next_out;e=a.output;u=a.avail_out;g=a.next_in;d=a.input;n=a.avail_in;v=c.hold;z=c.bits;B=n;L=u;R=0;a:for(;;)switch(c.mode){case 1:if(0===c.wrap){c.mode=13;break}for(;16>z;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}if(c.wrap&2&&35615===v){c.check=0;S[0]=v&255;S[1]=v>>>8&255;c.check=w(c.check,S,2,0);z=v=
0;c.mode=2;break}c.flags=0;c.head&&(c.head.done=!1);if(!(c.wrap&1)||(((v&255)<<8)+(v>>8))%31){a.msg="incorrect header check";c.mode=30;break}if(8!==(v&15)){a.msg="unknown compression method";c.mode=30;break}v>>>=4;z-=4;H=(v&15)+8;if(0===c.wbits)c.wbits=H;else if(H>c.wbits){a.msg="invalid window size";c.mode=30;break}c.dmax=1<<H;a.adler=c.check=1;c.mode=v&512?10:12;z=v=0;break;case 2:for(;16>z;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}c.flags=v;if(8!==(c.flags&255)){a.msg="unknown compression method";
c.mode=30;break}if(c.flags&57344){a.msg="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=v>>8&1);c.flags&512&&(S[0]=v&255,S[1]=v>>>8&255,c.check=w(c.check,S,2,0));z=v=0;c.mode=3;case 3:for(;32>z;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}c.head&&(c.head.time=v);c.flags&512&&(S[0]=v&255,S[1]=v>>>8&255,S[2]=v>>>16&255,S[3]=v>>>24&255,c.check=w(c.check,S,4,0));z=v=0;c.mode=4;case 4:for(;16>z;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}c.head&&(c.head.xflags=v&255,c.head.os=v>>8);c.flags&512&&
(S[0]=v&255,S[1]=v>>>8&255,c.check=w(c.check,S,2,0));z=v=0;c.mode=5;case 5:if(c.flags&1024){for(;16>z;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}c.length=v;c.head&&(c.head.extra_len=v);c.flags&512&&(S[0]=v&255,S[1]=v>>>8&255,c.check=w(c.check,S,2,0));z=v=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(c.flags&1024&&(D=c.length,D>n&&(D=n),D&&(c.head&&(H=c.head.extra_len-c.length,c.head.extra||(c.head.extra=Array(c.head.extra_len)),h.arraySet(c.head.extra,d,g,D,H)),c.flags&512&&(c.check=w(c.check,
d,D,g)),n-=D,g+=D,c.length-=D),c.length))break a;c.length=0;c.mode=7;case 7:if(c.flags&2048){if(0===n)break a;D=0;do H=d[g+D++],c.head&&H&&65536>c.length&&(c.head.name+=String.fromCharCode(H));while(H&&D<n);c.flags&512&&(c.check=w(c.check,d,D,g));n-=D;g+=D;if(H)break a}else c.head&&(c.head.name=null);c.length=0;c.mode=8;case 8:if(c.flags&4096){if(0===n)break a;D=0;do H=d[g+D++],c.head&&H&&65536>c.length&&(c.head.comment+=String.fromCharCode(H));while(H&&D<n);c.flags&512&&(c.check=w(c.check,d,D,g));
n-=D;g+=D;if(H)break a}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(c.flags&512){for(;16>z;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}if(v!==(c.check&65535)){a.msg="header crc mismatch";c.mode=30;break}z=v=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0);a.adler=c.check=0;c.mode=12;break;case 10:for(;32>z;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}a.adler=c.check=m(v);z=v=0;c.mode=11;case 11:if(0===c.havedict)return a.next_out=k,a.avail_out=u,a.next_in=g,a.avail_in=n,c.hold=v,c.bits=z,2;a.adler=
c.check=1;c.mode=12;case 12:if(5===b||6===b)break a;case 13:if(c.last){v>>>=z&7;z-=z&7;c.mode=27;break}for(;3>z;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}c.last=v&1;v>>>=1;--z;switch(v&3){case 0:c.mode=14;break;case 1:D=c;if(r){H=void 0;A=new h.Buf32(512);q=new h.Buf32(32);for(H=0;144>H;)D.lens[H++]=8;for(;256>H;)D.lens[H++]=9;for(;280>H;)D.lens[H++]=7;for(;288>H;)D.lens[H++]=8;C(1,D.lens,0,288,A,0,D.work,{bits:9});for(H=0;32>H;)D.lens[H++]=5;C(2,D.lens,0,32,q,0,D.work,{bits:5});r=!1}D.lencode=A;D.lenbits=
9;D.distcode=q;D.distbits=5;c.mode=20;if(6===b){v>>>=2;z-=2;break a}break;case 2:c.mode=17;break;case 3:a.msg="invalid block type",c.mode=30}v>>>=2;z-=2;break;case 14:v>>>=z&7;for(z-=z&7;32>z;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}if((v&65535)!==(v>>>16^65535)){a.msg="invalid stored block lengths";c.mode=30;break}c.length=v&65535;z=v=0;c.mode=15;if(6===b)break a;case 15:c.mode=16;case 16:if(D=c.length){D>n&&(D=n);D>u&&(D=u);if(0===D)break a;h.arraySet(e,d,g,D,k);n-=D;g+=D;u-=D;k+=D;c.length-=D;
break}c.mode=12;break;case 17:for(;14>z;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}c.nlen=(v&31)+257;v>>>=5;z-=5;c.ndist=(v&31)+1;v>>>=5;z-=5;c.ncode=(v&15)+4;v>>>=4;z-=4;if(286<c.nlen||30<c.ndist){a.msg="too many length or distance symbols";c.mode=30;break}c.have=0;c.mode=18;case 18:for(;c.have<c.ncode;){for(;3>z;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}c.lens[N[c.have++]]=v&7;v>>>=3;z-=3}for(;19>c.have;)c.lens[N[c.have++]]=0;c.lencode=c.lendyn;c.lenbits=7;D={bits:c.lenbits};R=C(0,c.lens,0,19,c.lencode,
0,c.work,D);c.lenbits=D.bits;if(R){a.msg="invalid code lengths set";c.mode=30;break}c.have=0;c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;;){O=c.lencode[v&(1<<c.lenbits)-1];D=O>>>24;O&=65535;if(D<=z)break;if(0===n)break a;n--;v+=d[g++]<<z;z+=8}if(16>O)v>>>=D,z-=D,c.lens[c.have++]=O;else{if(16===O){for(H=D+2;z<H;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}v>>>=D;z-=D;if(0===c.have){a.msg="invalid bit length repeat";c.mode=30;break}H=c.lens[c.have-1];D=3+(v&3);v>>>=2;z-=2}else if(17===O){for(H=
D+3;z<H;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}v>>>=D;z-=D;H=0;D=3+(v&7);v>>>=3;z-=3}else{for(H=D+7;z<H;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}v>>>=D;z-=D;H=0;D=11+(v&127);v>>>=7;z-=7}if(c.have+D>c.nlen+c.ndist){a.msg="invalid bit length repeat";c.mode=30;break}for(;D--;)c.lens[c.have++]=H}}if(30===c.mode)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block";c.mode=30;break}c.lenbits=9;D={bits:c.lenbits};R=C(1,c.lens,0,c.nlen,c.lencode,0,c.work,D);c.lenbits=D.bits;if(R){a.msg=
"invalid literal/lengths set";c.mode=30;break}c.distbits=6;c.distcode=c.distdyn;D={bits:c.distbits};R=C(2,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,D);c.distbits=D.bits;if(R){a.msg="invalid distances set";c.mode=30;break}c.mode=20;if(6===b)break a;case 20:c.mode=21;case 21:if(6<=n&&258<=u){a.next_out=k;a.avail_out=u;a.next_in=g;a.avail_in=n;c.hold=v;c.bits=z;p(a,L);k=a.next_out;e=a.output;u=a.avail_out;g=a.next_in;d=a.input;n=a.avail_in;v=c.hold;z=c.bits;12===c.mode&&(c.back=-1);break}for(c.back=
0;;){O=c.lencode[v&(1<<c.lenbits)-1];D=O>>>24;H=O>>>16&255;O&=65535;if(D<=z)break;if(0===n)break a;n--;v+=d[g++]<<z;z+=8}if(H&&0===(H&240)){P=D;T=H;for(K=O;;){O=c.lencode[K+((v&(1<<P+T)-1)>>P)];D=O>>>24;H=O>>>16&255;O&=65535;if(P+D<=z)break;if(0===n)break a;n--;v+=d[g++]<<z;z+=8}v>>>=P;z-=P;c.back+=P}v>>>=D;z-=D;c.back+=D;c.length=O;if(0===H){c.mode=26;break}if(H&32){c.back=-1;c.mode=12;break}if(H&64){a.msg="invalid literal/length code";c.mode=30;break}c.extra=H&15;c.mode=22;case 22:if(c.extra){for(H=
c.extra;z<H;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}c.length+=v&(1<<c.extra)-1;v>>>=c.extra;z-=c.extra;c.back+=c.extra}c.was=c.length;c.mode=23;case 23:for(;;){O=c.distcode[v&(1<<c.distbits)-1];D=O>>>24;H=O>>>16&255;O&=65535;if(D<=z)break;if(0===n)break a;n--;v+=d[g++]<<z;z+=8}if(0===(H&240)){P=D;T=H;for(K=O;;){O=c.distcode[K+((v&(1<<P+T)-1)>>P)];D=O>>>24;H=O>>>16&255;O&=65535;if(P+D<=z)break;if(0===n)break a;n--;v+=d[g++]<<z;z+=8}v>>>=P;z-=P;c.back+=P}v>>>=D;z-=D;c.back+=D;if(H&64){a.msg="invalid distance code";
c.mode=30;break}c.offset=O;c.extra=H&15;c.mode=24;case 24:if(c.extra){for(H=c.extra;z<H;){if(0===n)break a;n--;v+=d[g++]<<z;z+=8}c.offset+=v&(1<<c.extra)-1;v>>>=c.extra;z-=c.extra;c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back";c.mode=30;break}c.mode=25;case 25:if(0===u)break a;D=L-u;if(c.offset>D){D=c.offset-D;if(D>c.whave&&c.sane){a.msg="invalid distance too far back";c.mode=30;break}D>c.wnext?(D-=c.wnext,H=c.wsize-D):H=c.wnext-D;D>c.length&&(D=c.length);P=c.window}else P=
e,H=k-c.offset,D=c.length;D>u&&(D=u);u-=D;c.length-=D;do e[k++]=P[H++];while(--D);0===c.length&&(c.mode=21);break;case 26:if(0===u)break a;e[k++]=c.length;u--;c.mode=21;break;case 27:if(c.wrap){for(;32>z;){if(0===n)break a;n--;v|=d[g++]<<z;z+=8}L-=u;a.total_out+=L;c.total+=L;L&&(a.adler=c.check=c.flags?w(c.check,e,L,k-L):l(c.check,e,L,k-L));L=u;if((c.flags?v:m(v))!==c.check){a.msg="incorrect data check";c.mode=30;break}z=v=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;32>z;){if(0===n)break a;n--;v+=
d[g++]<<z;z+=8}if(v!==(c.total&4294967295)){a.msg="incorrect length check";c.mode=30;break}z=v=0}c.mode=29;case 29:R=1;break a;case 30:R=-3;break a;case 31:return-4;default:return-2}a.next_out=k;a.avail_out=u;a.next_in=g;a.avail_in=n;c.hold=v;c.bits=z;if((c.wsize||L!==a.avail_out&&30>c.mode&&(27>c.mode||4!==b))&&f(a,a.output,a.next_out,L-a.avail_out))return c.mode=31,-4;B-=a.avail_in;L-=a.avail_out;a.total_in+=B;a.total_out+=L;c.total+=L;c.wrap&&L&&(a.adler=c.check=c.flags?w(c.check,e,L,a.next_out-
L):l(c.check,e,L,a.next_out-L));a.data_type=c.bits+(c.last?64:0)+(12===c.mode?128:0)+(20===c.mode||15===c.mode?256:0);(0===B&&0===L||4===b)&&0===R&&(R=-5);return R};d.inflateEnd=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};d.inflateGetHeader=function(a,b){var c;if(!a||!a.state)return-2;c=a.state;if(0===(c.wrap&2))return-2;c.head=b;b.done=!1;return 0};d.inflateSetDictionary=function(a,b){var c=b.length,d,e;if(!a||!a.state)return-2;d=a.state;if(0!==
d.wrap&&11!==d.mode)return-2;if(11===d.mode&&(e=l(1,b,c,0),e!==d.check))return-3;if(f(a,b,c,c))return d.mode=31,-4;d.havedict=1;return 0};d.inflateInfo="pako inflate (from Nodeca project)"},function(k,d){k.exports=function(d,k){var c,a,b,e,n,f,h,l,w,p,C,r,A,q,y,E,t,x,F,I,G,J,u,v;c=d.state;a=d.next_in;u=d.input;b=a+(d.avail_in-5);e=d.next_out;v=d.output;n=e-(k-d.avail_out);f=e+(d.avail_out-257);h=c.dmax;l=c.wsize;w=c.whave;p=c.wnext;C=c.window;r=c.hold;A=c.bits;q=c.lencode;y=c.distcode;E=(1<<c.lenbits)-
1;t=(1<<c.distbits)-1;a:do b:for(15>A&&(r+=u[a++]<<A,A+=8,r+=u[a++]<<A,A+=8),x=q[r&E];;){F=x>>>24;r>>>=F;A-=F;F=x>>>16&255;if(0===F)v[e++]=x&65535;else if(F&16){I=x&65535;if(F&=15)A<F&&(r+=u[a++]<<A,A+=8),I+=r&(1<<F)-1,r>>>=F,A-=F;15>A&&(r+=u[a++]<<A,A+=8,r+=u[a++]<<A,A+=8);x=y[r&t];c:for(;;){F=x>>>24;r>>>=F;A-=F;F=x>>>16&255;if(F&16){x&=65535;F&=15;A<F&&(r+=u[a++]<<A,A+=8,A<F&&(r+=u[a++]<<A,A+=8));x+=r&(1<<F)-1;if(x>h){d.msg="invalid distance too far back";c.mode=30;break a}r>>>=F;A-=F;F=e-n;if(x>
F){F=x-F;if(F>w&&c.sane){d.msg="invalid distance too far back";c.mode=30;break a}G=0;J=C;if(0===p){if(G+=l-F,F<I){I-=F;do v[e++]=C[G++];while(--F);G=e-x;J=v}}else if(p<F){if(G+=l+p-F,F-=p,F<I){I-=F;do v[e++]=C[G++];while(--F);G=0;if(p<I){F=p;I-=F;do v[e++]=C[G++];while(--F);G=e-x;J=v}}}else if(G+=p-F,F<I){I-=F;do v[e++]=C[G++];while(--F);G=e-x;J=v}for(;2<I;)v[e++]=J[G++],v[e++]=J[G++],v[e++]=J[G++],I-=3;I&&(v[e++]=J[G++],1<I&&(v[e++]=J[G++]))}else{G=e-x;do v[e++]=v[G++],v[e++]=v[G++],v[e++]=v[G++],
I-=3;while(2<I);I&&(v[e++]=v[G++],1<I&&(v[e++]=v[G++]))}}else if(0===(F&64)){x=y[(x&65535)+(r&(1<<F)-1)];continue c}else{d.msg="invalid distance code";c.mode=30;break a}break}}else if(0===(F&64)){x=q[(x&65535)+(r&(1<<F)-1)];continue b}else{F&32?c.mode=12:(d.msg="invalid literal/length code",c.mode=30);break a}break}while(a<b&&e<f);I=A>>3;a-=I;A-=I<<3;d.next_in=a;d.next_out=e;d.avail_in=a<b?5+(b-a):5-(a-b);d.avail_out=e<f?257+(f-e):257-(e-f);c.hold=r&(1<<A)-1;c.bits=A}},function(k,d,g){var m=g(59),
c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],b=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],e=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];k.exports=function(d,f,h,g,k,p,C,r){for(var A=r.bits,q=0,y=0,E=0,t=0,x=0,F=0,I=0,G=0,J=0,u=
0,v,z,B=null,L=0,D,H=new m.Buf16(16),F=new m.Buf16(16),P=null,O=0,T,K,R,q=0;15>=q;q++)H[q]=0;for(y=0;y<g;y++)H[f[h+y]]++;x=A;for(t=15;1<=t&&0===H[t];t--);x>t&&(x=t);if(0===t)return k[p++]=20971520,k[p++]=20971520,r.bits=1,0;for(E=1;E<t&&0===H[E];E++);x<E&&(x=E);for(q=G=1;15>=q;q++)if(G<<=1,G-=H[q],0>G)return-1;if(0<G&&(0===d||1!==t))return-1;F[1]=0;for(q=1;15>q;q++)F[q+1]=F[q]+H[q];for(y=0;y<g;y++)0!==f[h+y]&&(C[F[f[h+y]]++]=y);0===d?(B=P=C,D=19):1===d?(B=c,L-=257,P=a,O-=257,D=256):(B=b,P=e,D=-1);
y=u=0;q=E;A=p;F=x;I=0;z=-1;J=1<<x;g=J-1;if(1===d&&852<J||2===d&&592<J)return 1;for(var S=0;;){S++;T=q-I;C[y]<D?(K=0,R=C[y]):C[y]>D?(K=P[O+C[y]],R=B[L+C[y]]):(K=96,R=0);G=1<<q-I;E=v=1<<F;do v-=G,k[A+(u>>I)+v]=T<<24|K<<16|R|0;while(0!==v);for(G=1<<q-1;u&G;)G>>=1;0!==G?(u&=G-1,u+=G):u=0;y++;if(0===--H[q]){if(q===t)break;q=f[h+C[y]]}if(q>x&&(u&g)!==z){0===I&&(I=x);A+=E;F=q-I;for(G=1<<F;F+I<t;){G-=H[F+I];if(0>=G)break;F++;G<<=1}J+=1<<F;if(1===d&&852<J||2===d&&592<J)return 1;z=u&g;k[z]=x<<24|F<<16|A-p|
0}}0!==u&&(k[A+u]=q-I<<24|4194304);r.bits=x;return 0}},function(k,d){k.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(k,d){k.exports=function(){this.os=
this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},function(k,d,g){function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var c=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=
c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();k=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var g=a.length-1;0<=g;g--)if(h=a[g])f=(3>e?h(f):3<e?h(b,c,f):h(b,c))||f;return 3<e&&f&&Object.defineProperty(b,
c,f),f};var a=g(4);d=g(75);var b=g(12),e=g(49),n=g(76),f=g(57),h=g(33),l=new Map;l.set("npz",n.decodeNdstoreNpzChunk);l.set("jpeg",e.decodeJpegChunk);l.set("raw",f.decodeRawChunk);g=function(b){function d(){if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var e,a=(e=Object.getPrototypeOf(d)).call.apply(e,[].concat([this],$jscomp.arrayFromIterable(b)));if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
e=!a||"object"!==typeof a&&"function"!==typeof a?this:a;e.chunkDecoder=l.get(e.parameters.encoding);return e}m(d,b);c(d,[{key:"download",value:function(b){for(var c=this.parameters,d="/ocp/ca/"+c.key+"/"+c.channel+"/"+c.encoding+"/"+c.resolution,e=this.computeChunkBounds(b),f=b.chunkDataSize,g=0;3>g;++g)d+="/"+e[g]+","+(e[g]+f[g]);a.handleChunkDownloadPromise(b,h.sendHttpRequest(h.openShardedHttpRequest(c.baseUrls,d+"/neariso/"),"arraybuffer"),this.chunkDecoder)}}]);return d}(b.ParameterizedVolumeChunkSource);
g=k([a.registerChunkSource(d.VolumeChunkSourceParameters)],g)},function(k,d){var g=function(){function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,b,d){b&&c(a.prototype,b);d&&c(a,d);return a}}(),m=function(){function c(){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");}g(c,null,[{key:"stringify",value:function(a){return"ndstore:volume:"+
a.baseUrls[0]+"/"+a.key+"/"+a.channel+"/"+a.resolution+"/"+a.encoding}}]);return c}();m.RPC_ID="ndstore/VolumeChunkSource";d.VolumeChunkSourceParameters=m},function(k,d,g){var m=g(50),c=g(13),a=g(15),b=g(77),e=g(58);d.decodeNdstoreNpzChunk=function(d,f){var h=b.parseNpy(e.inflate(new Uint8Array(f))),g=d.chunkDataSize,k=d.source,p=k.spec.numChannels,C=h.shape;if(4!==C.length||C[0]!==p||C[1]!==g[2]||C[2]!==g[1]||C[3]!==g[0])throw Error("Shape "+JSON.stringify(C)+" does not match chunkDataSize "+a.vec3Key(g));
g=h.dataType.dataType;k=k.spec;if(g!==k.dataType)throw Error("Data type "+c.DataType[g]+" does not match expected data type "+c.DataType[k.dataType]);m.postProcessRawData(d,h.data)}},function(k,d,g){var m=function(){return function(a,b){if(Array.isArray(a))return a;$jscomp.initSymbol();$jscomp.initSymbolIterator();if(Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done)&&(c.push(h.value),
!b||c.length!==b);d=!0);}catch(k){e=!0,f=k}finally{try{if(!d&&g["return"])g["return"]()}finally{if(e)throw f;}}return c}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),c=g(28),a=g(47),b=g(42),e=new Map;e.set("|u1",{arrayConstructor:Uint8Array,fixEndianness:function(a){},javascriptElementsPerArrayElement:1,elementBytes:1,dataType:c.DataType.UINT8});k=function(b){f=m(b,2);b=f[0];var d=f[1];e.set(b+"u2",{arrayConstructor:Uint16Array,elementBytes:2,fixEndianness:function(b){a.convertEndian16(b,
d)},javascriptElementsPerArrayElement:1,dataType:c.DataType.UINT16});e.set(b+"u4",{arrayConstructor:Uint32Array,elementBytes:4,fixEndianness:function(b){a.convertEndian32(b,d)},javascriptElementsPerArrayElement:1,dataType:c.DataType.UINT32});e.set(b+"u8",{arrayConstructor:Uint32Array,elementBytes:8,fixEndianness:function(b){a.convertEndian32(b,d)},javascriptElementsPerArrayElement:2,dataType:c.DataType.UINT64});e.set(b+"f4",{arrayConstructor:Float32Array,elementBytes:4,fixEndianness:function(b){a.convertEndian32(b,
d)},javascriptElementsPerArrayElement:1,dataType:c.DataType.FLOAT32})};g=$jscomp.makeIterator([["<",a.Endianness.LITTLE],[">",a.Endianness.BIG]]);for(var n=g.next();!n.done;n=g.next()){var f;k(n.value)}var h=function w(a,b,c,d){if(!(this instanceof w))throw new TypeError("Cannot call a class as a function");this.data=a;this.shape=b;this.dataType=c;this.fortranOrder=d};d.NumpyArray=h;d.parseNpy=function(a){if(147!==a[0]||78!==a[1]||85!==a[2]||77!==a[3]||80!==a[4]||89!==a[5])throw Error("Data does not match npy format.");
var c=a[6],d=a[7];if(1!==c||0!==d)throw Error("Unsupported npy version "+c+"."+d);var d=(new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint16(8,!0),f=(new TextDecoder("utf-8")).decode(a.subarray(10,d+10)),c=void 0,d=d+10;try{c=b.pythonLiteralParse(f)}catch(g){throw Error("Failed to parse npy header: "+g);}var k=c.descr,f=c.shape,m=1;if(!Array.isArray(f))throw Error("Invalid shape ${JSON.stringify(shape)}");for(var n=$jscomp.makeIterator(f),E=n.next();!E.done;E=n.next()){E=E.value;if("number"!==
typeof E)throw Error("Invalid shape ${JSON.stringify(shape)}");m*=E}n=e.get(k);if(void 0===n)throw Error("Unsupported numpy data type "+JSON.stringify(k));k=n.arrayConstructor;m*=n.javascriptElementsPerArrayElement;if(k.BYTES_PER_ELEMENT*m+d!==a.byteLength)throw Error("Expected length does not match length of data");a=new k(a.buffer,a.byteOffset+d,m);n.fixEndianness(a);return new h(a,f,n,!0===c.fortran_order)}},function(k,d,g){function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var b=function(){function a(b,
c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();k=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?
g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var e=g(4);d=g(79);var n=g(12),f=g(49),h=g(57),l=g(33),w=new Map([[d.TileEncoding.JPEG,f.decodeJpegChunk]]);g=function(d){function f(){m(this,f);return c(this,Object.getPrototypeOf(f).apply(this,arguments))}a(f,d);b(f,[{key:"download",value:function(a){var b=this.parameters,c=void 0,c=this.computeChunkBounds(a),d=a.chunkDataSize,c="/api/node/"+b.nodeKey+"/"+b.dataInstanceKey+"/raw/0_1_2/"+d[0]+"_"+d[1]+"_"+d[2]+"/"+c[0]+"_"+c[1]+"_"+
c[2]+"/nd";e.handleChunkDownloadPromise(a,l.sendHttpRequest(l.openShardedHttpRequest(b.baseUrls,c),"arraybuffer"),h.decodeRawChunk)}}]);return f}(n.ParameterizedVolumeChunkSource);g=k([e.registerChunkSource(d.VolumeChunkSourceParameters)],g);g=function(d){function f(){m(this,f);for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];var e,a=c(this,(e=Object.getPrototypeOf(f)).call.apply(e,[].concat([this],$jscomp.arrayFromIterable(b))));a.chunkDecoder=w.get(a.parameters.encoding);return a}
a(f,d);b(f,[{key:"download",value:function(a){var b=this.parameters,c=a.chunkGridPosition;a.chunkDataSize=this.spec.chunkDataSize;e.handleChunkDownloadPromise(a,l.sendHttpRequest(l.openShardedHttpRequest(b.baseUrls,"/api/node/"+b.nodeKey+"/"+b.dataInstanceKey+"/tile/"+b.dims+"/"+b.level+"/"+c[0]+"_"+c[1]+"_"+c[2]),"arraybuffer"),this.chunkDecoder)}}]);return f}(n.ParameterizedVolumeChunkSource);g=k([e.registerChunkSource(d.TileChunkSourceParameters)],g)},function(k,d){function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function m(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}var a=function(){function a(b,c){for(var d=
0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}(),b=function h(){c(this,h)};d.DVIDSourceParameters=b;var e=function(b){function d(){c(this,d);return g(this,Object.getPrototypeOf(d).apply(this,arguments))}m(d,b);a(d,null,[{key:"stringify",value:function(a){return"dvid:volume:"+a.baseUrls[0]+"/"+a.nodeKey+"/"+a.dataInstanceKey}}]);return d}(b);e.RPC_ID=
"dvid/VolumeChunkSource";d.VolumeChunkSourceParameters=e;(function(a){a[a.JPEG=0]="JPEG"})(d.TileEncoding||(d.TileEncoding={}));var n=d.TileEncoding,b=function(b){function d(){c(this,d);return g(this,Object.getPrototypeOf(d).apply(this,arguments))}m(d,b);a(d,null,[{key:"stringify",value:function(a){return"dvid:volume:"+a.baseUrls[0]+"/"+a.nodeKey+"/"+a.dataInstanceKey+"/"+a.dims+"/"+a.level+"/"+n[a.encoding]}}]);return d}(b);b.RPC_ID="dvid/TileChunkSource";d.TileChunkSourceParameters=b},function(k,
d,g){g(74)},function(k,d,g){function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function b(a,b){return l.decodeJsonManifestChunk(a,b,"fragments")}function e(a,b){var c=(new DataView(b)).getUint32(0,!0);l.decodeVertexPositionsAndIndices(a,b,A.Endianness.LITTLE,4,c)}var n=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,
c);d&&a(b,d);return b}}();k=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var f=g(4),h=g(82),l=g(36),w=g(12),p=g(48),C=g(49),r=g(57),A=g(47),q=g(33),y=new Map;y.set(h.VolumeChunkEncoding.RAW,r.decodeRawChunk);
y.set(h.VolumeChunkEncoding.JPEG,C.decodeJpegChunk);y.set(h.VolumeChunkEncoding.COMPRESSED_SEGMENTATION,p.decodeCompressedSegmentationChunk);g=function(b){function d(){m(this,d);for(var a=arguments.length,b=Array(a),e=0;e<a;e++)b[e]=arguments[e];var f,a=c(this,(f=Object.getPrototypeOf(d)).call.apply(f,[].concat([this],$jscomp.arrayFromIterable(b))));a.chunkDecoder=y.get(a.parameters.encoding);return a}a(d,b);n(d,[{key:"download",value:function(a){var b=this.parameters,c=void 0,c=this.computeChunkBounds(a),
d=a.chunkDataSize,c=b.path+"/"+c[0]+"-"+(c[0]+d[0])+"_"+c[1]+"-"+(c[1]+d[1])+"_"+c[2]+"-"+(c[2]+d[2]);f.handleChunkDownloadPromise(a,q.sendHttpRequest(q.openShardedHttpRequest(b.baseUrls,c),"arraybuffer"),this.chunkDecoder)}}]);return d}(w.ParameterizedVolumeChunkSource);g=k([f.registerChunkSource(h.VolumeChunkSourceParameters)],g);d.decodeManifestChunk=b;d.decodeFragmentChunk=e;d=function(d){function g(){m(this,g);return c(this,Object.getPrototypeOf(g).apply(this,arguments))}a(g,d);n(g,[{key:"download",
value:function(a){var c=this.parameters;f.handleChunkDownloadPromise(a,q.sendHttpRequest(q.openShardedHttpRequest(c.baseUrls,c.path+"/"+a.objectId+":"+c.lod),"json"),b)}},{key:"downloadFragment",value:function(a){var b=this.parameters;f.handleChunkDownloadPromise(a,q.sendHttpRequest(q.openShardedHttpRequest(b.baseUrls,b.path+"/"+a.fragmentId),"arraybuffer"),e)}}]);return g}(l.ParameterizedMeshSource);d=k([f.registerChunkSource(h.MeshSourceParameters)],d)},function(k,d){function g(a,b){if(!(a instanceof
b))throw new TypeError("Cannot call a class as a function");}var m=function(){function a(a,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1;f.configurable=!0;"value"in f&&(f.writable=!0);Object.defineProperty(a,f.key,f)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();(function(a){a[a.RAW=0]="RAW";a[a.JPEG=1]="JPEG";a[a.COMPRESSED_SEGMENTATION=2]="COMPRESSED_SEGMENTATION"})(d.VolumeChunkEncoding||(d.VolumeChunkEncoding={}));var c=function(){function a(){g(this,
a)}m(a,null,[{key:"stringify",value:function(a){return"precomputed:volume:"+a.baseUrls[0]+"/"+a.path}}]);return a}();c.RPC_ID="precomputed/VolumeChunkSource";d.VolumeChunkSourceParameters=c;c=function(){function a(){g(this,a)}m(a,null,[{key:"stringify",value:function(a){return"precomputed:mesh:"+a.baseUrls[0]+"/"+a.path+"/"+a.lod}}]);return a}();c.RPC_ID="precomputed/MeshSource";d.MeshSourceParameters=c},function(k,d,g){function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");
}function c(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function a(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function b(a,b){var c=
(new DataView(b)).getUint32(0,!0);l.decodeVertexPositionsAndIndices(a,b,A.Endianness.LITTLE,4,c)}function e(a,b){a.fragmentIds=[""]}var n=function(){function a(b,c){for(var d=0;d<c.length;d++){var e=c[d];e.enumerable=e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(b,e.key,e)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();k=this&&this.__decorate||function(a,b,c,d){var e=arguments.length,f=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):
d,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;0<=h;h--)if(g=a[h])f=(3>e?g(f):3<e?g(b,c,f):g(b,c))||f;return 3<e&&f&&Object.defineProperty(b,c,f),f};var f=g(4),h=g(84),l=g(36),w=g(12),p=g(49),C=g(76),r=g(57),A=g(47),q=g(33),y=new Map;y.set(h.VolumeChunkEncoding.NPZ,C.decodeNdstoreNpzChunk);y.set(h.VolumeChunkEncoding.JPEG,p.decodeJpegChunk);y.set(h.VolumeChunkEncoding.RAW,r.decodeRawChunk);g=function(b){function d(){m(this,
d);for(var a=arguments.length,b=Array(a),e=0;e<a;e++)b[e]=arguments[e];var f,a=c(this,(f=Object.getPrototypeOf(d)).call.apply(f,[].concat([this],$jscomp.arrayFromIterable(b))));a.chunkDecoder=y.get(a.parameters.encoding);a.encoding=h.VolumeChunkEncoding[a.parameters.encoding].toLowerCase();return a}a(d,b);n(d,[{key:"download",value:function(a){for(var b=this.parameters,c="/neuroglancer/"+this.encoding+"/"+b.key,d=this.computeChunkBounds(a),e=a.chunkDataSize,g=0;3>g;++g)c+="/"+d[g]+","+(d[g]+e[g]);
f.handleChunkDownloadPromise(a,q.sendHttpRequest(q.openShardedHttpRequest(b.baseUrls,c),"arraybuffer"),this.chunkDecoder)}}]);return d}(w.ParameterizedVolumeChunkSource);g=k([f.registerChunkSource(h.VolumeChunkSourceParameters)],g);d.decodeFragmentChunk=b;g=function(d){function g(){m(this,g);return c(this,Object.getPrototypeOf(g).apply(this,arguments))}a(g,d);n(g,[{key:"download",value:function(a){f.handleChunkDownloadPromise(a,Promise.resolve(void 0),e)}},{key:"downloadFragment",value:function(a){var c=
this.parameters;f.handleChunkDownloadPromise(a,q.sendHttpRequest(q.openShardedHttpRequest(c.baseUrls,"/neuroglancer/mesh/"+c.key+"/"+a.manifestChunk.objectId),"arraybuffer"),b)}}]);return g}(l.ParameterizedMeshSource);g=k([f.registerChunkSource(h.MeshSourceParameters)],g);d.MeshSource=g},function(k,d){function g(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");}var m=function(){function a(b,c){for(var d=0;d<c.length;d++){var g=c[d];g.enumerable=g.enumerable||!1;g.configurable=
!0;"value"in g&&(g.writable=!0);Object.defineProperty(b,g.key,g)}}return function(c,d,f){d&&a(c.prototype,d);f&&a(c,f);return c}}();(function(a){a[a.JPEG=0]="JPEG";a[a.NPZ=1]="NPZ";a[a.RAW=2]="RAW"})(d.VolumeChunkEncoding||(d.VolumeChunkEncoding={}));var c=d.VolumeChunkEncoding,a=function(){function a(){g(this,a)}m(a,null,[{key:"stringify",value:function(a){return"python:volume:"+a.baseUrls[0]+"/"+a.key+"/"+c[a.encoding]}}]);return a}();a.RPC_ID="python/VolumeChunkSource";d.VolumeChunkSourceParameters=
a;a=function(){function a(){g(this,a)}m(a,null,[{key:"stringify",value:function(a){return"python:mesh:"+a.baseUrls[0]+"/"+a.key}}]);return a}();a.RPC_ID="python/MeshSource";d.MeshSourceParameters=a}]);
